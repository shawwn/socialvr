!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=232)}([function(t,e,n){t.exports=n(218)()},function(t,e,n){"use strict";t.exports=n(231)},function(t,e,n){"use strict";t.exports=function(){}},function(t,e,n){t.exports=r;var i=n(10);function r(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}r.ZERO=new r(0,0,0),r.UNIT_X=new r(1,0,0),r.UNIT_Y=new r(0,1,0),r.UNIT_Z=new r(0,0,1),r.prototype.cross=function(t,e){var n=t.x,i=t.y,o=t.z,a=this.x,s=this.y,c=this.z;return(e=e||new r).x=s*o-c*i,e.y=c*n-a*o,e.z=a*i-s*n,e},r.prototype.set=function(t,e,n){return this.x=t,this.y=e,this.z=n,this},r.prototype.setZero=function(){this.x=this.y=this.z=0},r.prototype.vadd=function(t,e){if(!e)return new r(this.x+t.x,this.y+t.y,this.z+t.z);e.x=t.x+this.x,e.y=t.y+this.y,e.z=t.z+this.z},r.prototype.vsub=function(t,e){if(!e)return new r(this.x-t.x,this.y-t.y,this.z-t.z);e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z},r.prototype.crossmat=function(){return new i([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])},r.prototype.normalize=function(){var t=this.x,e=this.y,n=this.z,i=Math.sqrt(t*t+e*e+n*n);if(i>0){var r=1/i;this.x*=r,this.y*=r,this.z*=r}else this.x=0,this.y=0,this.z=0;return i},r.prototype.unit=function(t){t=t||new r;var e=this.x,n=this.y,i=this.z,o=Math.sqrt(e*e+n*n+i*i);return o>0?(o=1/o,t.x=e*o,t.y=n*o,t.z=i*o):(t.x=1,t.y=0,t.z=0),t},r.prototype.norm=function(){var t=this.x,e=this.y,n=this.z;return Math.sqrt(t*t+e*e+n*n)},r.prototype.length=r.prototype.norm,r.prototype.norm2=function(){return this.dot(this)},r.prototype.lengthSquared=r.prototype.norm2,r.prototype.distanceTo=function(t){var e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,a=t.z;return Math.sqrt((r-e)*(r-e)+(o-n)*(o-n)+(a-i)*(a-i))},r.prototype.distanceSquared=function(t){var e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,a=t.z;return(r-e)*(r-e)+(o-n)*(o-n)+(a-i)*(a-i)},r.prototype.mult=function(t,e){e=e||new r;var n=this.x,i=this.y,o=this.z;return e.x=t*n,e.y=t*i,e.z=t*o,e},r.prototype.vmul=function(t,e){return(e=e||new r).x=t.x*this.x,e.y=t.y*this.y,e.z=t.z*this.z,e},r.prototype.scale=r.prototype.mult,r.prototype.addScaledVector=function(t,e,n){return(n=n||new r).x=this.x+t*e.x,n.y=this.y+t*e.y,n.z=this.z+t*e.z,n},r.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},r.prototype.isZero=function(){return 0===this.x&&0===this.y&&0===this.z},r.prototype.negate=function(t){return(t=t||new r).x=-this.x,t.y=-this.y,t.z=-this.z,t};var o=new r,a=new r;r.prototype.tangents=function(t,e){var n=this.norm();if(n>0){var i=o,r=1/n;i.set(this.x*r,this.y*r,this.z*r);var s=a;Math.abs(i.x)<.9?(s.set(1,0,0),i.cross(s,t)):(s.set(0,1,0),i.cross(s,t)),i.cross(t,e)}else t.set(1,0,0),e.set(0,1,0)},r.prototype.toString=function(){return this.x+","+this.y+","+this.z},r.prototype.toArray=function(){return[this.x,this.y,this.z]},r.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},r.prototype.lerp=function(t,e,n){var i=this.x,r=this.y,o=this.z;n.x=i+(t.x-i)*e,n.y=r+(t.y-r)*e,n.z=o+(t.z-o)*e},r.prototype.almostEquals=function(t,e){return void 0===e&&(e=1e-6),!(Math.abs(this.x-t.x)>e||Math.abs(this.y-t.y)>e||Math.abs(this.z-t.z)>e)},r.prototype.almostZero=function(t){return void 0===t&&(t=1e-6),!(Math.abs(this.x)>t||Math.abs(this.y)>t||Math.abs(this.z)>t)};var s=new r;r.prototype.isAntiparallelTo=function(t,e){return this.negate(s),s.almostEquals(t,e)},r.prototype.clone=function(){return new r(this.x,this.y,this.z)}},function(t,e,n){"use strict";t.exports=function(t,e,n,i,r,o,a,s){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,r,o,a,s],u=0;(c=new Error(e.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(t,e,n){t.exports=i;var i=n(5);function i(){this.id=i.idCounter++,this.type=0,this.boundingSphereRadius=0,this.collisionResponse=!0,this.material=null,this.body=null}n(3),n(6),n(33),i.prototype.constructor=i,i.prototype.updateBoundingSphereRadius=function(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type},i.prototype.volume=function(){throw"volume() not implemented for shape type "+this.type},i.prototype.calculateLocalInertia=function(t,e){throw"calculateLocalInertia() not implemented for shape type "+this.type},i.idCounter=0,i.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256}},function(t,e,n){t.exports=r;var i=n(3);function r(t,e,n,i){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0,this.z=void 0!==n?n:0,this.w=void 0!==i?i:1}r.prototype.set=function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},r.prototype.toString=function(){return this.x+","+this.y+","+this.z+","+this.w},r.prototype.toArray=function(){return[this.x,this.y,this.z,this.w]},r.prototype.setFromAxisAngle=function(t,e){var n=Math.sin(.5*e);return this.x=t.x*n,this.y=t.y*n,this.z=t.z*n,this.w=Math.cos(.5*e),this},r.prototype.toAxisAngle=function(t){t=t||new i,this.normalize();var e=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(t.x=this.x,t.y=this.y,t.z=this.z):(t.x=this.x/n,t.y=this.y/n,t.z=this.z/n),[t,e]};var o=new i,a=new i;r.prototype.setFromVectors=function(t,e){if(t.isAntiparallelTo(e)){var n=o,i=a;t.tangents(n,i),this.setFromAxisAngle(n,Math.PI)}else{var r=t.cross(e);this.x=r.x,this.y=r.y,this.z=r.z,this.w=Math.sqrt(Math.pow(t.norm(),2)*Math.pow(e.norm(),2))+t.dot(e),this.normalize()}return this},new i,new i,new i,r.prototype.mult=function(t,e){e=e||new r;var n=this.x,i=this.y,o=this.z,a=this.w,s=t.x,c=t.y,l=t.z,u=t.w;return e.x=n*u+a*s+i*l-o*c,e.y=i*u+a*c+o*s-n*l,e.z=o*u+a*l+n*c-i*s,e.w=a*u-n*s-i*c-o*l,e},r.prototype.inverse=function(t){var e=this.x,n=this.y,i=this.z,o=this.w;t=t||new r,this.conjugate(t);var a=1/(e*e+n*n+i*i+o*o);return t.x*=a,t.y*=a,t.z*=a,t.w*=a,t},r.prototype.conjugate=function(t){return(t=t||new r).x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t},r.prototype.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this},r.prototype.normalizeFast=function(){var t=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===t?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=t,this.y*=t,this.z*=t,this.w*=t),this},r.prototype.vmult=function(t,e){e=e||new i;var n=t.x,r=t.y,o=t.z,a=this.x,s=this.y,c=this.z,l=this.w,u=l*n+s*o-c*r,h=l*r+c*n-a*o,d=l*o+a*r-s*n,p=-a*n-s*r-c*o;return e.x=u*l+p*-a+h*-c-d*-s,e.y=h*l+p*-s+d*-a-u*-c,e.z=d*l+p*-c+u*-s-h*-a,e},r.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},r.prototype.toEuler=function(t,e){var n,i,r;e=e||"YZX";var o=this.x,a=this.y,s=this.z,c=this.w;switch(e){case"YZX":var l=o*a+s*c;if(l>.499&&(n=2*Math.atan2(o,c),i=Math.PI/2,r=0),l<-.499&&(n=-2*Math.atan2(o,c),i=-Math.PI/2,r=0),isNaN(n)){var u=o*o,h=a*a,d=s*s;n=Math.atan2(2*a*c-2*o*s,1-2*h-2*d),i=Math.asin(2*l),r=Math.atan2(2*o*c-2*a*s,1-2*u-2*d)}break;default:throw new Error("Euler order "+e+" not supported yet.")}t.y=n,t.z=i,t.x=r},r.prototype.setFromEuler=function(t,e,n,i){i=i||"XYZ";var r=Math.cos(t/2),o=Math.cos(e/2),a=Math.cos(n/2),s=Math.sin(t/2),c=Math.sin(e/2),l=Math.sin(n/2);return"XYZ"===i?(this.x=s*o*a+r*c*l,this.y=r*c*a-s*o*l,this.z=r*o*l+s*c*a,this.w=r*o*a-s*c*l):"YXZ"===i?(this.x=s*o*a+r*c*l,this.y=r*c*a-s*o*l,this.z=r*o*l-s*c*a,this.w=r*o*a+s*c*l):"ZXY"===i?(this.x=s*o*a-r*c*l,this.y=r*c*a+s*o*l,this.z=r*o*l+s*c*a,this.w=r*o*a-s*c*l):"ZYX"===i?(this.x=s*o*a-r*c*l,this.y=r*c*a+s*o*l,this.z=r*o*l-s*c*a,this.w=r*o*a+s*c*l):"YZX"===i?(this.x=s*o*a+r*c*l,this.y=r*c*a+s*o*l,this.z=r*o*l-s*c*a,this.w=r*o*a-s*c*l):"XZY"===i&&(this.x=s*o*a-r*c*l,this.y=r*c*a-s*o*l,this.z=r*o*l+s*c*a,this.w=r*o*a+s*c*l),this},r.prototype.clone=function(){return new r(this.x,this.y,this.z,this.w)},r.prototype.slerp=function(t,e,n){n=n||new r;var i,o,a,s,c,l=this.x,u=this.y,h=this.z,d=this.w,p=t.x,f=t.y,m=t.z,g=t.w;return(o=l*p+u*f+h*m+d*g)<0&&(o=-o,p=-p,f=-f,m=-m,g=-g),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-e)*i)/a,c=Math.sin(e*i)/a):(s=1-e,c=e),n.x=s*l+c*p,n.y=s*u+c*f,n.z=s*h+c*m,n.w=s*d+c*g,n},r.prototype.integrate=function(t,e,n,i){i=i||new r;var o=t.x*n.x,a=t.y*n.y,s=t.z*n.z,c=this.x,l=this.y,u=this.z,h=this.w,d=.5*e;return i.x+=d*(o*h+a*u-s*l),i.y+=d*(a*h+s*c-o*u),i.z+=d*(s*h+o*l-a*c),i.w+=d*(-o*c-a*l-s*u),i}},function(t,e,n){"use strict";e.__esModule=!0,e.addLeadingSlash=function(t){return"/"===t.charAt(0)?t:"/"+t},e.stripLeadingSlash=function(t){return"/"===t.charAt(0)?t.substr(1):t};var i=e.hasBasename=function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)};e.stripBasename=function(t,e){return i(t,e)?t.substr(e.length):t},e.stripTrailingSlash=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},e.parsePath=function(t){var e=t||"/",n="",i="",r=e.indexOf("#");-1!==r&&(i=e.substr(r),e=e.substr(0,r));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===i?"":i}},e.createPath=function(t){var e=t.pathname,n=t.search,i=t.hash,r=e||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(r+="#"===i.charAt(0)?i:"#"+i),r}},function(t,e,n){t.exports=o;var i=n(19),r=n(3);function o(t,e,n){n=void 0!==n?n:1e6,i.call(this,t,e,0,n),this.restitution=0,this.ri=new r,this.rj=new r,this.ni=new r}n(10),o.prototype=new i,o.prototype.constructor=o;var a=new r,s=new r,c=new r;o.prototype.computeB=function(t){var e=this.a,n=this.b,i=this.bi,r=this.bj,o=this.ri,l=this.rj,u=a,h=s,d=i.velocity,p=i.angularVelocity,f=(i.force,i.torque,r.velocity),m=r.angularVelocity,g=(r.force,r.torque,c),v=this.jacobianElementA,y=this.jacobianElementB,A=this.ni;o.cross(A,u),l.cross(A,h),A.negate(v.spatial),u.negate(v.rotational),y.spatial.copy(A),y.rotational.copy(h),g.copy(r.position),g.vadd(l,g),g.vsub(i.position,g),g.vsub(o,g);var w=A.dot(g),b=this.restitution+1;return-w*e-(b*f.dot(A)-b*d.dot(A)+m.dot(h)-p.dot(u))*n-t*this.computeGiMf()};var l=new r,u=new r,h=new r,d=new r,p=new r;o.prototype.getImpactVelocityAlongNormal=function(){var t=l,e=u,n=h,i=d,r=p;return this.bi.position.vadd(this.ri,n),this.bj.position.vadd(this.rj,i),this.bi.getVelocityAtWorldPoint(n,t),this.bj.getVelocityAtWorldPoint(i,e),t.vsub(e,r),this.ni.dot(r)}},function(t,e,n){t.exports=l;var i=n(49),r=(n(5),n(3)),o=n(10),a=n(6),s=(n(33),n(11)),c=n(43);function l(t){t=t||{},i.apply(this),this.id=l.idCounter++,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new r,this.collisionFilterGroup="number"==typeof t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof t.collisionFilterMask?t.collisionFilterMask:1,this.collisionResponse=!0,this.position=new r,this.previousPosition=new r,this.interpolatedPosition=new r,this.initPosition=new r,t.position&&(this.position.copy(t.position),this.previousPosition.copy(t.position),this.interpolatedPosition.copy(t.position),this.initPosition.copy(t.position)),this.velocity=new r,t.velocity&&this.velocity.copy(t.velocity),this.initVelocity=new r,this.force=new r;var e="number"==typeof t.mass?t.mass:0;this.mass=e,this.invMass=e>0?1/e:0,this.material=t.material||null,this.linearDamping="number"==typeof t.linearDamping?t.linearDamping:.01,this.type=e<=0?l.STATIC:l.DYNAMIC,typeof t.type==typeof l.STATIC&&(this.type=t.type),this.allowSleep=void 0===t.allowSleep||t.allowSleep,this.sleepState=0,this.sleepSpeedLimit=void 0!==t.sleepSpeedLimit?t.sleepSpeedLimit:.1,this.sleepTimeLimit=void 0!==t.sleepTimeLimit?t.sleepTimeLimit:1,this.timeLastSleepy=0,this._wakeUpAfterNarrowphase=!1,this.torque=new r,this.quaternion=new a,this.initQuaternion=new a,this.previousQuaternion=new a,this.interpolatedQuaternion=new a,t.quaternion&&(this.quaternion.copy(t.quaternion),this.initQuaternion.copy(t.quaternion),this.previousQuaternion.copy(t.quaternion),this.interpolatedQuaternion.copy(t.quaternion)),this.angularVelocity=new r,t.angularVelocity&&this.angularVelocity.copy(t.angularVelocity),this.initAngularVelocity=new r,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new r,this.invInertia=new r,this.invInertiaWorld=new o,this.invMassSolve=0,this.invInertiaSolve=new r,this.invInertiaWorldSolve=new o,this.fixedRotation=void 0!==t.fixedRotation&&t.fixedRotation,this.angularDamping=void 0!==t.angularDamping?t.angularDamping:.01,this.linearFactor=new r(1,1,1),t.linearFactor&&this.linearFactor.copy(t.linearFactor),this.angularFactor=new r(1,1,1),t.angularFactor&&this.angularFactor.copy(t.angularFactor),this.aabb=new s,this.aabbNeedsUpdate=!0,this.wlambda=new r,t.shape&&this.addShape(t.shape),this.updateMassProperties()}l.prototype=new i,l.prototype.constructor=l,l.COLLIDE_EVENT_NAME="collide",l.DYNAMIC=1,l.STATIC=2,l.KINEMATIC=4,l.AWAKE=0,l.SLEEPY=1,l.SLEEPING=2,l.idCounter=0,l.wakeupEvent={type:"wakeup"},l.prototype.wakeUp=function(){var t=this.sleepState;this.sleepState=0,this._wakeUpAfterNarrowphase=!1,t===l.SLEEPING&&this.dispatchEvent(l.wakeupEvent)},l.prototype.sleep=function(){this.sleepState=l.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this._wakeUpAfterNarrowphase=!1},l.sleepyEvent={type:"sleepy"},l.sleepEvent={type:"sleep"},l.prototype.sleepTick=function(t){if(this.allowSleep){var e=this.sleepState,n=this.velocity.norm2()+this.angularVelocity.norm2(),i=Math.pow(this.sleepSpeedLimit,2);e===l.AWAKE&&n<i?(this.sleepState=l.SLEEPY,this.timeLastSleepy=t,this.dispatchEvent(l.sleepyEvent)):e===l.SLEEPY&&n>i?this.wakeUp():e===l.SLEEPY&&t-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(l.sleepEvent))}},l.prototype.updateSolveMassProperties=function(){this.sleepState===l.SLEEPING||this.type===l.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))},l.prototype.pointToLocalFrame=function(t,e){return e=e||new r,t.vsub(this.position,e),this.quaternion.conjugate().vmult(e,e),e},l.prototype.vectorToLocalFrame=function(t,e){return e=e||new r,this.quaternion.conjugate().vmult(t,e),e},l.prototype.pointToWorldFrame=function(t,e){return e=e||new r,this.quaternion.vmult(t,e),e.vadd(this.position,e),e},l.prototype.vectorToWorldFrame=function(t,e){return e=e||new r,this.quaternion.vmult(t,e),e};var u=new r,h=new a;l.prototype.addShape=function(t,e,n){var i=new r,o=new a;return e&&i.copy(e),n&&o.copy(n),this.shapes.push(t),this.shapeOffsets.push(i),this.shapeOrientations.push(o),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,t.body=this,this},l.prototype.updateBoundingRadius=function(){for(var t=this.shapes,e=this.shapeOffsets,n=t.length,i=0,r=0;r!==n;r++){var o=t[r];o.updateBoundingSphereRadius();var a=e[r].norm(),s=o.boundingSphereRadius;a+s>i&&(i=a+s)}this.boundingRadius=i};var d=new s;l.prototype.computeAABB=function(){for(var t=this.shapes,e=this.shapeOffsets,n=this.shapeOrientations,i=t.length,r=u,o=h,a=this.quaternion,s=this.aabb,c=d,l=0;l!==i;l++){var p=t[l];a.vmult(e[l],r),r.vadd(this.position,r),n[l].mult(a,o),p.calculateWorldAABB(r,o,c.lowerBound,c.upperBound),0===l?s.copy(c):s.extend(c)}this.aabbNeedsUpdate=!1};var p=new o,f=new o;new o,l.prototype.updateInertiaWorld=function(t){var e=this.invInertia;if(e.x!==e.y||e.y!==e.z||t){var n=p,i=f;n.setRotationFromQuaternion(this.quaternion),n.transpose(i),n.scale(e,n),n.mmult(i,this.invInertiaWorld)}},new r;var m=new r;l.prototype.applyForce=function(t,e){if(this.type===l.DYNAMIC){var n=m;e.cross(t,n),this.force.vadd(t,this.force),this.torque.vadd(n,this.torque)}};var g=new r,v=new r;l.prototype.applyLocalForce=function(t,e){if(this.type===l.DYNAMIC){var n=g,i=v;this.vectorToWorldFrame(t,n),this.vectorToWorldFrame(e,i),this.applyForce(n,i)}},new r;var y=new r,A=new r;l.prototype.applyImpulse=function(t,e){if(this.type===l.DYNAMIC){var n=e,i=y;i.copy(t),i.mult(this.invMass,i),this.velocity.vadd(i,this.velocity);var r=A;n.cross(t,r),this.invInertiaWorld.vmult(r,r),this.angularVelocity.vadd(r,this.angularVelocity)}};var w=new r,b=new r;l.prototype.applyLocalImpulse=function(t,e){if(this.type===l.DYNAMIC){var n=w,i=b;this.vectorToWorldFrame(t,n),this.vectorToWorldFrame(e,i),this.applyImpulse(n,i)}};var M=new r;l.prototype.updateMassProperties=function(){var t=M;this.invMass=this.mass>0?1/this.mass:0;var e=this.inertia,n=this.fixedRotation;this.computeAABB(),t.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),c.calculateInertia(t,this.mass,e),this.invInertia.set(e.x>0&&!n?1/e.x:0,e.y>0&&!n?1/e.y:0,e.z>0&&!n?1/e.z:0),this.updateInertiaWorld(!0)},l.prototype.getVelocityAtWorldPoint=function(t,e){var n=new r;return t.vsub(this.position,n),this.angularVelocity.cross(n,e),this.velocity.vadd(e,e),e},new r,new r,new a,new a,l.prototype.integrate=function(t,e,n){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),(this.type===l.DYNAMIC||this.type===l.KINEMATIC)&&this.sleepState!==l.SLEEPING){var i=this.velocity,r=this.angularVelocity,o=this.position,a=this.force,s=this.torque,c=this.quaternion,u=this.invMass,h=this.invInertiaWorld,d=this.linearFactor,p=u*t;i.x+=a.x*p*d.x,i.y+=a.y*p*d.y,i.z+=a.z*p*d.z;var f=h.elements,m=this.angularFactor,g=s.x*m.x,v=s.y*m.y,y=s.z*m.z;r.x+=t*(f[0]*g+f[1]*v+f[2]*y),r.y+=t*(f[3]*g+f[4]*v+f[5]*y),r.z+=t*(f[6]*g+f[7]*v+f[8]*y),o.x+=i.x*t,o.y+=i.y*t,o.z+=i.z*t,c.integrate(this.angularVelocity,t,this.angularFactor,c),e&&(n?c.normalizeFast():c.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}},function(t,e,n){t.exports=r;var i=n(3);function r(t){this.elements=t||[0,0,0,0,0,0,0,0,0]}r.prototype.identity=function(){var t=this.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1},r.prototype.setZero=function(){var t=this.elements;t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0},r.prototype.setTrace=function(t){var e=this.elements;e[0]=t.x,e[4]=t.y,e[8]=t.z},r.prototype.getTrace=function(t){t=t||new i;var e=this.elements;t.x=e[0],t.y=e[4],t.z=e[8]},r.prototype.vmult=function(t,e){e=e||new i;var n=this.elements,r=t.x,o=t.y,a=t.z;return e.x=n[0]*r+n[1]*o+n[2]*a,e.y=n[3]*r+n[4]*o+n[5]*a,e.z=n[6]*r+n[7]*o+n[8]*a,e},r.prototype.smult=function(t){for(var e=0;e<this.elements.length;e++)this.elements[e]*=t},r.prototype.mmult=function(t,e){for(var n=e||new r,i=0;i<3;i++)for(var o=0;o<3;o++){for(var a=0,s=0;s<3;s++)a+=t.elements[i+3*s]*this.elements[s+3*o];n.elements[i+3*o]=a}return n},r.prototype.scale=function(t,e){e=e||new r;for(var n=this.elements,i=e.elements,o=0;3!==o;o++)i[3*o+0]=t.x*n[3*o+0],i[3*o+1]=t.y*n[3*o+1],i[3*o+2]=t.z*n[3*o+2];return e},r.prototype.solve=function(t,e){e=e||new i;for(var n,r=[],o=0;o<12;o++)r.push(0);for(o=0;o<3;o++)for(n=0;n<3;n++)r[o+4*n]=this.elements[o+3*n];r[3]=t.x,r[7]=t.y,r[11]=t.z;var a,s,c=3,l=c;do{if(0===r[(o=l-c)+4*o])for(n=o+1;n<l;n++)if(0!==r[o+4*n]){a=4;do{r[(s=4-a)+4*o]+=r[s+4*n]}while(--a);break}if(0!==r[o+4*o])for(n=o+1;n<l;n++){var u=r[o+4*n]/r[o+4*o];a=4;do{r[(s=4-a)+4*n]=s<=o?0:r[s+4*n]-r[s+4*o]*u}while(--a)}}while(--c);if(e.z=r[11]/r[10],e.y=(r[7]-r[6]*e.z)/r[5],e.x=(r[3]-r[2]*e.z-r[1]*e.y)/r[0],isNaN(e.x)||isNaN(e.y)||isNaN(e.z)||e.x===1/0||e.y===1/0||e.z===1/0)throw"Could not solve equation! Got x=["+e.toString()+"], b=["+t.toString()+"], A=["+this.toString()+"]";return e},r.prototype.e=function(t,e,n){if(void 0===n)return this.elements[e+3*t];this.elements[e+3*t]=n},r.prototype.copy=function(t){for(var e=0;e<t.elements.length;e++)this.elements[e]=t.elements[e];return this},r.prototype.toString=function(){for(var t="",e=0;e<9;e++)t+=this.elements[e]+",";return t},r.prototype.reverse=function(t){t=t||new r;for(var e,n=[],i=0;i<18;i++)n.push(0);for(i=0;i<3;i++)for(e=0;e<3;e++)n[i+6*e]=this.elements[i+3*e];n[3]=1,n[9]=0,n[15]=0,n[4]=0,n[10]=1,n[16]=0,n[5]=0,n[11]=0,n[17]=1;var o,a,s=3,c=s;do{if(0===n[(i=c-s)+6*i])for(e=i+1;e<c;e++)if(0!==n[i+6*e]){o=6;do{n[(a=6-o)+6*i]+=n[a+6*e]}while(--o);break}if(0!==n[i+6*i])for(e=i+1;e<c;e++){var l=n[i+6*e]/n[i+6*i];o=6;do{n[(a=6-o)+6*e]=a<=i?0:n[a+6*e]-n[a+6*i]*l}while(--o)}}while(--s);i=2;do{e=i-1;do{l=n[i+6*e]/n[i+6*i],o=6;do{n[(a=6-o)+6*e]=n[a+6*e]-n[a+6*i]*l}while(--o)}while(e--)}while(--i);i=2;do{l=1/n[i+6*i],o=6;do{n[(a=6-o)+6*i]=n[a+6*i]*l}while(--o)}while(i--);i=2;do{e=2;do{if(a=n[3+e+6*i],isNaN(a)||a===1/0)throw"Could not reverse! A=["+this.toString()+"]";t.e(i,e,a)}while(e--)}while(i--);return t},r.prototype.setRotationFromQuaternion=function(t){var e=t.x,n=t.y,i=t.z,r=t.w,o=e+e,a=n+n,s=i+i,c=e*o,l=e*a,u=e*s,h=n*a,d=n*s,p=i*s,f=r*o,m=r*a,g=r*s,v=this.elements;return v[0]=1-(h+p),v[1]=l-g,v[2]=u+m,v[3]=l+g,v[4]=1-(c+p),v[5]=d-f,v[6]=u-m,v[7]=d+f,v[8]=1-(c+h),this},r.prototype.transpose=function(t){for(var e=(t=t||new r).elements,n=this.elements,i=0;3!==i;i++)for(var o=0;3!==o;o++)e[3*i+o]=n[3*o+i];return t}},function(t,e,n){var i=n(3);function r(t){t=t||{},this.lowerBound=new i,t.lowerBound&&this.lowerBound.copy(t.lowerBound),this.upperBound=new i,t.upperBound&&this.upperBound.copy(t.upperBound)}n(34),t.exports=r;var o=new i;r.prototype.setFromPoints=function(t,e,n,i){var r=this.lowerBound,a=this.upperBound,s=n;r.copy(t[0]),s&&s.vmult(r,r),a.copy(r);for(var c=1;c<t.length;c++){var l=t[c];s&&(s.vmult(l,o),l=o),l.x>a.x&&(a.x=l.x),l.x<r.x&&(r.x=l.x),l.y>a.y&&(a.y=l.y),l.y<r.y&&(r.y=l.y),l.z>a.z&&(a.z=l.z),l.z<r.z&&(r.z=l.z)}return e&&(e.vadd(r,r),e.vadd(a,a)),i&&(r.x-=i,r.y-=i,r.z-=i,a.x+=i,a.y+=i,a.z+=i),this},r.prototype.copy=function(t){return this.lowerBound.copy(t.lowerBound),this.upperBound.copy(t.upperBound),this},r.prototype.clone=function(){return(new r).copy(this)},r.prototype.extend=function(t){this.lowerBound.x=Math.min(this.lowerBound.x,t.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,t.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,t.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,t.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,t.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,t.upperBound.z)},r.prototype.overlaps=function(t){var e=this.lowerBound,n=this.upperBound,i=t.lowerBound,r=t.upperBound,o=i.x<=n.x&&n.x<=r.x||e.x<=r.x&&r.x<=n.x,a=i.y<=n.y&&n.y<=r.y||e.y<=r.y&&r.y<=n.y,s=i.z<=n.z&&n.z<=r.z||e.z<=r.z&&r.z<=n.z;return o&&a&&s},r.prototype.volume=function(){var t=this.lowerBound,e=this.upperBound;return(e.x-t.x)*(e.y-t.y)*(e.z-t.z)},r.prototype.contains=function(t){var e=this.lowerBound,n=this.upperBound,i=t.lowerBound,r=t.upperBound;return e.x<=i.x&&n.x>=r.x&&e.y<=i.y&&n.y>=r.y&&e.z<=i.z&&n.z>=r.z},r.prototype.getCorners=function(t,e,n,i,r,o,a,s){var c=this.lowerBound,l=this.upperBound;t.copy(c),e.set(l.x,c.y,c.z),n.set(l.x,l.y,c.z),i.set(c.x,l.y,l.z),r.set(l.x,c.y,c.z),o.set(c.x,l.y,c.z),a.set(c.x,c.y,l.z),s.copy(l)};var a=[new i,new i,new i,new i,new i,new i,new i,new i];r.prototype.toLocalFrame=function(t,e){var n=a,i=n[0],r=n[1],o=n[2],s=n[3],c=n[4],l=n[5],u=n[6],h=n[7];this.getCorners(i,r,o,s,c,l,u,h);for(var d=0;8!==d;d++){var p=n[d];t.pointToLocal(p,p)}return e.setFromPoints(n)},r.prototype.toWorldFrame=function(t,e){var n=a,i=n[0],r=n[1],o=n[2],s=n[3],c=n[4],l=n[5],u=n[6],h=n[7];this.getCorners(i,r,o,s,c,l,u,h);for(var d=0;8!==d;d++){var p=n[d];t.pointToWorld(p,p)}return e.setFromPoints(n)},r.prototype.overlapsRay=function(t){var e=1/t._direction.x,n=1/t._direction.y,i=1/t._direction.z,r=(this.lowerBound.x-t.from.x)*e,o=(this.upperBound.x-t.from.x)*e,a=(this.lowerBound.y-t.from.y)*n,s=(this.upperBound.y-t.from.y)*n,c=(this.lowerBound.z-t.from.z)*i,l=(this.upperBound.z-t.from.z)*i,u=Math.max(Math.max(Math.min(r,o),Math.min(a,s)),Math.min(c,l)),h=Math.min(Math.min(Math.max(r,o),Math.max(a,s)),Math.max(c,l));return!(h<0||u>h)}},function(t,e,n){t.exports={version:n(191).version,AABB:n(11),ArrayCollisionMatrix:n(74),Body:n(9),Box:n(43),Broadphase:n(42),Constraint:n(20),ContactEquation:n(8),Narrowphase:n(72),ConeTwistConstraint:n(189),ContactMaterial:n(69),ConvexPolyhedron:n(22),Cylinder:n(187),DistanceConstraint:n(186),Equation:n(19),EventTarget:n(49),FrictionEquation:n(48),GSSolver:n(68),GridBroadphase:n(185),Heightfield:n(184),HingeConstraint:n(67),LockConstraint:n(183),Mat3:n(10),Material:n(33),NaiveBroadphase:n(66),ObjectCollisionMatrix:n(182),Pool:n(70),Particle:n(65),Plane:n(73),PointToPointConstraint:n(39),Quaternion:n(6),Ray:n(41),RaycastVehicle:n(181),RaycastResult:n(32),RigidVehicle:n(179),RotationalEquation:n(38),RotationalMotorEquation:n(47),SAPBroadphase:n(178),SPHSystem:n(177),Shape:n(5),Solver:n(40),Sphere:n(64),SplitSolver:n(176),Spring:n(175),Transform:n(21),Trimesh:n(174),Vec3:n(3),Vec3Pool:n(71),World:n(172)}},function(t,e,n){"use strict";var i=!0;function r(t,e,n){var i=t.match(e);return i&&i.length>=n&&parseInt(i[n],10)}t.exports={extractVersion:r,wrapPeerConnectionEvent:function(t,e,n){if(t.RTCPeerConnection){var i=t.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(t,i){if(t!==e)return r.apply(this,arguments);var o=function(t){i(n(t))};return this._eventMap=this._eventMap||{},this._eventMap[i]=o,r.apply(this,[t,o])};var o=i.removeEventListener;i.removeEventListener=function(t,n){if(t!==e||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);var i=this._eventMap[n];return delete this._eventMap[n],o.apply(this,[t,i])},Object.defineProperty(i,"on"+e,{get:function(){return this["_on"+e]},set:function(t){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),t&&this.addEventListener(e,this["_on"+e]=t)}})}},disableLog:function(t){return"boolean"!=typeof t?new Error("Argument type: "+typeof t+". Please use a boolean."):(i=t,t?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(t){return"boolean"!=typeof t?new Error("Argument type: "+typeof t+". Please use a boolean."):(!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))},log:function(){if("object"==typeof window){if(i)return;"undefined"!=typeof console&&console.log}},deprecated:function(t,e){},detectBrowser:function(t){var e=t&&t.navigator,n={browser:null,version:null};if(void 0===t||!t.navigator)return n.browser="Not a browser.",n;if(e.mozGetUserMedia)n.browser="firefox",n.version=r(e.userAgent,/Firefox\/(\d+)\./,1);else if(e.webkitGetUserMedia)n.browser="chrome",n.version=r(e.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.mediaDevices&&e.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=r(e.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!t.RTCPeerConnection||!e.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=r(e.userAgent,/AppleWebKit\/(\d+)\./,1)}return n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(1),s=(i=a)&&i.__esModule?i:{default:i},c=n(75);n(210),n(197),n(196),n(192),n(153),n(145),n(144),n(141),n(140),n(136);var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return AFRAME.registerInputActions(c.inGameActions,"default"),AFRAME.registerInputMappings(c.config),n.onconnected=n.onConnect.bind(n),n.onconnect=n.onConnect.bind(n),n.onConnect=n.onConnect.bind(n),n.onSceneLoad=n.onSceneLoad.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Component),o(e,[{key:"onConnect",value:function(){}},{key:"onSceneLoad",value:function(){var t=this.props;document.getElementById("loader").style.display="none",t["networked-scene"]&&t["networked-audio"]&&navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(t){NAF.connection.adapter.setLocalMediaStream(t)}).catch(function(t){});var e=document.querySelector("a-scene");t.inspector||e.components.inspector.remove(),e.setAttribute("keyboard-shortcuts",{enterVR:!1})}},{key:"componentDidMount",value:function(){document.querySelector("a-scene").addEventListener("loaded",this.onSceneLoad),NAF.schemas.add({template:"#bot-template",components:["position","rotation","scale",{selector:".nametag",component:"text",property:"value"},{selector:".actiontag",component:"text",property:"value"},{selector:"#player",component:"position"},{selector:"#player",component:"rotation"}]}),NAF.schemas.add({template:"#bullet-template",components:["position","rotation","scale"]}),NAF.options.useLerp=!0,NAF.options.collisionOwnership=!1,NAF.options.debug=!0,NAF.options.compressSyncPackets=!0}},{key:"render",value:function(){var t=this.props,e={};Object.keys(t).forEach(function(n){-1===["className","id","mixin"].indexOf(n)&&0!==n.indexOf("data-")||(e[n]=t[n])});var n=t.roomid;return e.cursor="rayOrigin: mouse",t.debug&&(e.physics="debug:true",e.stats="enable:  true"),e.light="defaultLightsEnabled: false",e.shadow="type: pcfsoft",t["vr-mode-ui"]?e["vr-mode-ui"]="enabled: true":e["vr-mode-ui"]="enabled: false",t["networked-scene"]&&(e["networked-scene"]="app: 12121111; room: "+n+"; adapter: janus; audio:true; debug: true; serverURL:  wss://wss.vreen.live:8989;  onConnect: this.onConnect; connectOnLoad: true;",e["mute-state-indicator"]=!0,e["mute-mic"]="eventSrc: a-scene; toggleEvents: action_mute",e.menue=!0),t.stats&&(e.stats="enable:  true"),e.fog="type: linear; color: 0xabaf99",e.renderer="antialias: true;gammaOutput: true;sortObjects: true;physicallyCorrectLights: true;",s.default.createElement("a-scene",r({ref:this.initEntity},e),t.children)}}]),e}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(1),a=(i=o)&&i.__esModule?i:{default:i},s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Component),r(e,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return a.default.createElement("a-assets",null,a.default.createElement("a-asset-item",{id:"woman",src:"/characters/bot/xbottest.glb"}),a.default.createElement("a-asset-item",{id:"bullet",src:"/others/heart/heart_big.glb"}))}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(1),s=(i=a)&&i.__esModule?i:{default:i};n(133),n(132),n(131),n(59),n(127),n(126),n(125),n(124);var c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={gun:!1},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Component),o(e,[{key:"componentDidMount",value:function(){document.body.addEventListener("connected",function(t){document.querySelector("a-scene").querySelector(".nametag").setAttribute("text","value",Math.random().toString(36).substr(2,6))})}},{key:"render",value:function(){var t=void 0;return this.props.gun&&(t={gun:"bulletTemplate:#bullet-template"}),s.default.createElement("a-entity",{id:"player-rig",networked:"template:#bot-template;attachTemplateToLocal: false;"},s.default.createElement("a-entity",{id:"bot","body-controller-player":!0,shadow:"cast: true; receive:false;"},s.default.createElement("a-gltf-entity",{class:"man",src:"#woman",position:"0 0 0",rotation:"0 0 0",scale:"1 1 1","animation-mixer":"clip: 00_idle;crossFadeDuration:0.2",shadow:"cast: true; receive:false;",inflate:"enable: true;"}," ")),s.default.createElement("a-entity",r({id:"player","spawn-in-circle":"radius:3;",position:"0 1.6 0","wasd-controls":!0,"kinematic-body":!0,"look-controls":"pointerLockEnabled: false;"},t),s.default.createElement("a-entity",{id:"head",class:"camera-player",camera:"active: true;spectator:false",position:"0 0 -0.5"},s.default.createElement("a-text",{class:"nametag",value:"",side:"double",position:"0.1 0.5 0.4",rotation:"0 -180 0"}),s.default.createElement("a-entity",{id:"nametaground",rounded:"width: 0.8; height: 0.3; radius: 0.1; topRightRadius: 0.1; bottomLeftRadius: 0.1;  color: #fff000; opacity: 0.4;",rotation:"0 -180 0",position:"0.1 0.3 0.4"}),s.default.createElement("a-entity",{class:"actiontag",text:"value: Dog;side: double",position:"0 0 0",rotation:"0 0 0",scale:"1 1 1",visible:"false"}))))}}]),e}();e.default=c},function(t,e,n){"use strict";var i,r=(i=n(77))&&i.__esModule?i:{default:i};r.default.registerComponent("entity-generator-gltf-model",{schema:{mixin:{default:""},num:{default:10},src:{type:"model"}},init:function(){this.model=null,this.loader=new THREE.GLTFLoader},update:function(){for(var t=this,e=this.el,n=this.data,i=this.data.src,o=0;o<n.num;o++){var a=document.createElement("a-entity");a.setAttribute("mixin",n.mixin),e.appendChild(a)}i&&(this.remove(),this.loader.load(i,function(n){t.model=n.scene||n.scenes[0],t.model.animations=n.animations,t.model.traverse(function(t){t.isMesh&&r.default.scenes[0].renderer.setTexture2D(t.material.map,0)});var i=!0,o=!1,a=void 0;try{for(var s,c=e.childNodes[Symbol.iterator]();!(i=(s=c.next()).done);i=!0)s.value.setObject3D("mesh",t.model.clone())}catch(t){o=!0,a=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}e.emit("model-loaded",{format:"gltf",model:t.model})},void 0,function(t){t&&t.message&&t.message;e.emit("model-error",{format:"gltf",src:i})}))},remove:function(){if(this.model){var t=!0,e=!1,n=void 0;try{for(var i,r=this.el.childNodes[Symbol.iterator]();!(t=(i=r.next()).done);t=!0)i.value.removeObject3D("mesh")}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}}}})},function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("mirror",{schema:{resolution:{type:"number",default:128},refraction:{type:"number",default:.95},color:{type:"color",default:16777215},distance:{type:"number",default:3e3},interval:{type:"number",default:1e3},repeat:{type:"boolean",default:!1}},multiple:!1,init:function(){this.counter=this.data.interval,this.cam=new THREE.CubeCamera(.5,this.data.distance,this.data.resolution),this.el.object3D.add(this.cam),this.mirrorMaterial=new THREE.MeshBasicMaterial({color:this.data.color,refractionRatio:this.data.refraction,envMap:this.cam.renderTarget.texture}),this.done=!1;var t=this.mirrorMaterial;this.mesh=this.el.getObject3D("mesh"),this.mesh&&this.mesh.traverse(function(e){e instanceof THREE.Mesh&&(e.material=t)})},tick:function(t,e){if(!this.done)if(this.counter>0)this.counter-=e;else if(this.mesh=this.el.getObject3D("mesh"),this.mesh){this.mesh.visible=!1,AFRAME.scenes[0].renderer.autoClear=!0,this.cam.position.copy(this.el.object3D.worldToLocal(this.el.object3D.getWorldPosition())),this.cam.updateCubeMap(AFRAME.scenes[0].renderer,this.el.sceneEl.object3D);var n=this.mirrorMaterial;this.mesh.traverse(function(t){t instanceof THREE.Mesh&&(t.material=n)}),this.mesh.visible=!0,this.data.repeat||(this.done=!0,this.counter=this.data.interval)}},update:function(t){},remove:function(){},pause:function(){},play:function(){}})},function(t,e,n){t.exports=o;var i=n(190),r=n(3);function o(t,e,n,r){this.id=o.id++,this.minForce=void 0===n?-1e6:n,this.maxForce=void 0===r?1e6:r,this.bi=t,this.bj=e,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new i,this.jacobianElementB=new i,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}o.prototype.constructor=o,o.id=0,o.prototype.setSpookParams=function(t,e,n){var i=e,r=t,o=n;this.a=4/(o*(1+4*i)),this.b=4*i/(1+4*i),this.eps=4/(o*o*r*(1+4*i))},o.prototype.computeB=function(t,e,n){var i=this.computeGW();return-this.computeGq()*t-i*e-this.computeGiMf()*n},o.prototype.computeGq=function(){var t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,i=this.bj,r=n.position,o=i.position;return t.spatial.dot(r)+e.spatial.dot(o)},new r,o.prototype.computeGW=function(){var t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,i=this.bj,r=n.velocity,o=i.velocity,a=n.angularVelocity,s=i.angularVelocity;return t.multiplyVectors(r,a)+e.multiplyVectors(o,s)},o.prototype.computeGWlambda=function(){var t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,i=this.bj,r=n.vlambda,o=i.vlambda,a=n.wlambda,s=i.wlambda;return t.multiplyVectors(r,a)+e.multiplyVectors(o,s)};var a=new r,s=new r,c=new r,l=new r;o.prototype.computeGiMf=function(){var t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,i=this.bj,r=n.force,o=n.torque,u=i.force,h=i.torque,d=n.invMassSolve,p=i.invMassSolve;return r.scale(d,a),u.scale(p,s),n.invInertiaWorldSolve.vmult(o,c),i.invInertiaWorldSolve.vmult(h,l),t.multiplyVectors(a,c)+e.multiplyVectors(s,l)};var u=new r;o.prototype.computeGiMGt=function(){var t=this.jacobianElementA,e=this.jacobianElementB,n=this.bi,i=this.bj,r=n.invMassSolve,o=i.invMassSolve,a=n.invInertiaWorldSolve,s=i.invInertiaWorldSolve,c=r+o;return a.vmult(t.rotational,u),c+=u.dot(t.rotational),s.vmult(e.rotational,u),c+u.dot(e.rotational)};var h=new r;new r,new r,new r,new r,new r,o.prototype.addToWlambda=function(t){var e=this.jacobianElementA,n=this.jacobianElementB,i=this.bi,r=this.bj,o=h;i.vlambda.addScaledVector(i.invMassSolve*t,e.spatial,i.vlambda),r.vlambda.addScaledVector(r.invMassSolve*t,n.spatial,r.vlambda),i.invInertiaWorldSolve.vmult(e.rotational,o),i.wlambda.addScaledVector(t,o,i.wlambda),r.invInertiaWorldSolve.vmult(n.rotational,o),r.wlambda.addScaledVector(t,o,r.wlambda)},o.prototype.computeC=function(){return this.computeGiMGt()+this.eps}},function(t,e,n){t.exports=r;var i=n(34);function r(t,e,n){n=i.defaults(n,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.id=r.idCounter++,this.collideConnected=n.collideConnected,n.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}r.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},r.prototype.enable=function(){for(var t=this.equations,e=0;e<t.length;e++)t[e].enabled=!0},r.prototype.disable=function(){for(var t=this.equations,e=0;e<t.length;e++)t[e].enabled=!1},r.idCounter=0},function(t,e,n){var i=n(3),r=n(6);function o(t){t=t||{},this.position=new i,t.position&&this.position.copy(t.position),this.quaternion=new r,t.quaternion&&this.quaternion.copy(t.quaternion)}t.exports=o;var a=new r;o.pointToLocalFrame=function(t,e,n,r){return r=r||new i,n.vsub(t,r),e.conjugate(a),a.vmult(r,r),r},o.prototype.pointToLocal=function(t,e){return o.pointToLocalFrame(this.position,this.quaternion,t,e)},o.pointToWorldFrame=function(t,e,n,r){return r=r||new i,e.vmult(n,r),r.vadd(t,r),r},o.prototype.pointToWorld=function(t,e){return o.pointToWorldFrame(this.position,this.quaternion,t,e)},o.prototype.vectorToWorldFrame=function(t,e){return e=e||new i,this.quaternion.vmult(t,e),e},o.vectorToWorldFrame=function(t,e,n){return t.vmult(e,n),n},o.vectorToLocalFrame=function(t,e,n,r){return r=r||new i,e.w*=-1,e.vmult(n,r),e.w*=-1,r}},function(t,e,n){t.exports=a;var i=n(5),r=n(3),o=(n(6),n(21));function a(t,e,n){i.call(this),this.type=i.types.CONVEXPOLYHEDRON,this.vertices=t||[],this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.faces=e||[],this.faceNormals=[],this.computeNormals(),this.worldFaceNormalsNeedsUpdate=!0,this.worldFaceNormals=[],this.uniqueEdges=[],this.uniqueAxes=n?n.slice():null,this.computeEdges(),this.updateBoundingSphereRadius()}a.prototype=new i,a.prototype.constructor=a;var s=new r;a.prototype.computeEdges=function(){var t=this.faces,e=this.vertices,n=(e.length,this.uniqueEdges);n.length=0;for(var i=s,r=0;r!==t.length;r++)for(var o=t[r],a=o.length,c=0;c!==a;c++){var l=(c+1)%a;e[o[c]].vsub(e[o[l]],i),i.normalize();for(var u=!1,h=0;h!==n.length;h++)if(n[h].almostEquals(i)||n[h].almostEquals(i)){u=!0;break}u||n.push(i.clone())}},a.prototype.computeNormals=function(){this.faceNormals.length=this.faces.length;for(var t=0;t<this.faces.length;t++){for(var e=0;e<this.faces[t].length;e++)if(!this.vertices[this.faces[t][e]])throw new Error("Vertex "+this.faces[t][e]+" not found!");var n=this.faceNormals[t]||new r;this.getFaceNormal(t,n),n.negate(n),this.faceNormals[t]=n;var i=this.vertices[this.faces[t][0]];if(n.dot(i)<0)for(e=0;e<this.faces[t].length;e++);}};var c=new r,l=new r;a.computeNormal=function(t,e,n,i){e.vsub(t,l),n.vsub(e,c),c.cross(l,i),i.isZero()||i.normalize()},a.prototype.getFaceNormal=function(t,e){var n=this.faces[t],i=this.vertices[n[0]],r=this.vertices[n[1]],o=this.vertices[n[2]];return a.computeNormal(i,r,o,e)};var u=new r;a.prototype.clipAgainstHull=function(t,e,n,i,o,a,s,c,l){for(var h=u,d=-1,p=-Number.MAX_VALUE,f=0;f<n.faces.length;f++){h.copy(n.faceNormals[f]),o.vmult(h,h);var m=h.dot(a);m>p&&(p=m,d=f)}for(var g=[],v=n.faces[d],y=v.length,A=0;A<y;A++){var w=n.vertices[v[A]],b=new r;b.copy(w),o.vmult(b,b),i.vadd(b,b),g.push(b)}d>=0&&this.clipFaceAgainstHull(a,t,e,g,s,c,l)};var h=new r,d=new r,p=new r,f=new r,m=new r,g=new r;a.prototype.findSeparatingAxis=function(t,e,n,i,r,o,a,s){var c=h,l=d,u=p,v=f,y=m,A=g,w=Number.MAX_VALUE;if(this.uniqueAxes)for(M=0;M!==this.uniqueAxes.length;M++){if(n.vmult(this.uniqueAxes[M],c),!1===(T=this.testSepAxis(c,t,e,n,i,r)))return!1;T<w&&(w=T,o.copy(c))}else for(var b=a?a.length:this.faces.length,M=0;M<b;M++){var E=a?a[M]:M;if(c.copy(this.faceNormals[E]),n.vmult(c,c),!1===(T=this.testSepAxis(c,t,e,n,i,r)))return!1;T<w&&(w=T,o.copy(c))}if(t.uniqueAxes)for(M=0;M!==t.uniqueAxes.length;M++){if(r.vmult(t.uniqueAxes[M],l),!1===(T=this.testSepAxis(l,t,e,n,i,r)))return!1;T<w&&(w=T,o.copy(l))}else{var x=s?s.length:t.faces.length;for(M=0;M<x;M++){var T;if(E=s?s[M]:M,l.copy(t.faceNormals[E]),r.vmult(l,l),!1===(T=this.testSepAxis(l,t,e,n,i,r)))return!1;T<w&&(w=T,o.copy(l))}}for(var C=0;C!==this.uniqueEdges.length;C++){n.vmult(this.uniqueEdges[C],v);for(var S=0;S!==t.uniqueEdges.length;S++)if(r.vmult(t.uniqueEdges[S],y),v.cross(y,A),!A.almostZero()){A.normalize();var D=this.testSepAxis(A,t,e,n,i,r);if(!1===D)return!1;D<w&&(w=D,o.copy(A))}}return i.vsub(e,u),u.dot(o)>0&&o.negate(o),!0};var v=[],y=[];a.prototype.testSepAxis=function(t,e,n,i,r,o){a.project(this,t,n,i,v),a.project(e,t,r,o,y);var s=v[0],c=v[1],l=y[0],u=y[1];if(s<u||l<c)return!1;var h=s-u,d=l-c;return h<d?h:d};var A=new r,w=new r;a.prototype.calculateLocalInertia=function(t,e){this.computeLocalAABB(A,w);var n=w.x-A.x,i=w.y-A.y,r=w.z-A.z;e.x=1/12*t*(2*i*2*i+2*r*2*r),e.y=1/12*t*(2*n*2*n+2*r*2*r),e.z=1/12*t*(2*i*2*i+2*n*2*n)},a.prototype.getPlaneConstantOfFace=function(t){var e=this.faces[t],n=this.faceNormals[t],i=this.vertices[e[0]];return-n.dot(i)};var b=new r,M=new r,E=new r,x=new r,T=new r,C=new r,S=new r,D=new r;a.prototype.clipFaceAgainstHull=function(t,e,n,i,r,o,a){for(var s=b,c=M,l=E,u=x,h=T,d=C,p=S,f=D,m=i,g=[],v=-1,y=Number.MAX_VALUE,A=0;A<this.faces.length;A++){s.copy(this.faceNormals[A]),n.vmult(s,s);var w=s.dot(t);w<y&&(y=w,v=A)}if(!(v<0)){var _=this.faces[v];_.connectedFaces=[];for(var L=0;L<this.faces.length;L++)for(var N=0;N<this.faces[L].length;N++)-1!==_.indexOf(this.faces[L][N])&&L!==v&&-1===_.connectedFaces.indexOf(L)&&_.connectedFaces.push(L);m.length;for(var I=_.length,O=0;O<I;O++){var j=this.vertices[_[O]],P=this.vertices[_[(O+1)%I]];j.vsub(P,c),l.copy(c),n.vmult(l,l),e.vadd(l,l),u.copy(this.faceNormals[v]),n.vmult(u,u),e.vadd(u,u),l.cross(u,h),h.negate(h),d.copy(j),n.vmult(d,d),e.vadd(d,d),d.dot(h);var R=_.connectedFaces[O];p.copy(this.faceNormals[R]);var k=this.getPlaneConstantOfFace(R);f.copy(p),n.vmult(f,f);var z=k-f.dot(e);for(this.clipFaceAgainstPlane(m,g,f,z);m.length;)m.shift();for(;g.length;)m.push(g.shift())}for(p.copy(this.faceNormals[v]),k=this.getPlaneConstantOfFace(v),f.copy(p),n.vmult(f,f),z=k-f.dot(e),L=0;L<m.length;L++){var B=f.dot(m[L])+z;if(B<=r&&(B=r),B<=o){var F=m[L];if(B<=0){var U={point:F,normal:f,depth:B};a.push(U)}}}}},a.prototype.clipFaceAgainstPlane=function(t,e,n,i){var o,a,s=t.length;if(s<2)return e;var c=t[t.length-1],l=t[0];o=n.dot(c)+i;for(var u=0;u<s;u++){if(l=t[u],a=n.dot(l)+i,o<0)if(a<0)(h=new r).copy(l),e.push(h);else{var h=new r;c.lerp(l,o/(o-a),h),e.push(h)}else a<0&&(h=new r,c.lerp(l,o/(o-a),h),e.push(h),e.push(l));c=l,o=a}return e},a.prototype.computeWorldVertices=function(t,e){for(var n=this.vertices.length;this.worldVertices.length<n;)this.worldVertices.push(new r);for(var i=this.vertices,o=this.worldVertices,a=0;a!==n;a++)e.vmult(i[a],o[a]),t.vadd(o[a],o[a]);this.worldVerticesNeedsUpdate=!1},new r,a.prototype.computeLocalAABB=function(t,e){var n=this.vertices.length,i=this.vertices;t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),e.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var r=0;r<n;r++){var o=i[r];o.x<t.x?t.x=o.x:o.x>e.x&&(e.x=o.x),o.y<t.y?t.y=o.y:o.y>e.y&&(e.y=o.y),o.z<t.z?t.z=o.z:o.z>e.z&&(e.z=o.z)}},a.prototype.computeWorldFaceNormals=function(t){for(var e=this.faceNormals.length;this.worldFaceNormals.length<e;)this.worldFaceNormals.push(new r);for(var n=this.faceNormals,i=this.worldFaceNormals,o=0;o!==e;o++)t.vmult(n[o],i[o]);this.worldFaceNormalsNeedsUpdate=!1},a.prototype.updateBoundingSphereRadius=function(){for(var t=0,e=this.vertices,n=0,i=e.length;n!==i;n++){var r=e[n].norm2();r>t&&(t=r)}this.boundingSphereRadius=Math.sqrt(t)};var _=new r;a.prototype.calculateWorldAABB=function(t,e,n,i){for(var r,o,a,s,c,l,u=this.vertices.length,h=this.vertices,d=0;d<u;d++){_.copy(h[d]),e.vmult(_,_),t.vadd(_,_);var p=_;p.x<r||void 0===r?r=p.x:(p.x>s||void 0===s)&&(s=p.x),p.y<o||void 0===o?o=p.y:(p.y>c||void 0===c)&&(c=p.y),p.z<a||void 0===a?a=p.z:(p.z>l||void 0===l)&&(l=p.z)}n.set(r,o,a),i.set(s,c,l)},a.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3},a.prototype.getAveragePointLocal=function(t){t=t||new r;for(var e=this.vertices.length,n=this.vertices,i=0;i<e;i++)t.vadd(n[i],t);return t.mult(1/e,t),t},a.prototype.transformAllPoints=function(t,e){var n=this.vertices.length,i=this.vertices;if(e){for(var r=0;r<n;r++){var o=i[r];e.vmult(o,o)}for(r=0;r<this.faceNormals.length;r++)o=this.faceNormals[r],e.vmult(o,o)}if(t)for(r=0;r<n;r++)(o=i[r]).vadd(t,o)};var L=new r,N=new r,I=new r;a.prototype.pointIsInside=function(t){var e=this.vertices.length,n=this.vertices,i=this.faces,r=this.faceNormals,o=this.faces.length,a=L;this.getAveragePointLocal(a);for(var s=0;s<o;s++){this.faces[s].length,e=r[s];var c=n[i[s][0]],l=N;t.vsub(c,l);var u=e.dot(l),h=I;a.vsub(c,h);var d=e.dot(h);if(u<0&&d>0||u>0&&d<0)return!1}return-1},new r;var O=new r,j=new r;a.project=function(t,e,n,i,r){var a=t.vertices.length,s=O,c=0,l=0,u=j,h=t.vertices;u.setZero(),o.vectorToLocalFrame(n,i,e,s),o.pointToLocalFrame(n,i,u,u);var d=u.dot(s);l=c=h[0].dot(s);for(var p=1;p<a;p++){var f=h[p].dot(s);f>c&&(c=f),f<l&&(l=f)}if((l-=d)>(c-=d)){var m=l;l=c,c=m}r[0]=c,r[1]=l}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var i=o(n(117)),r=o(n(116));function o(t){return t&&t.__esModule?t:{default:t}}AFRAME.registerComponent("material-cloud",{init:function(){this.data;var t=(new THREE.TextureLoader).load("/assets/images/clouds/cloud10.png"),e=new THREE.Fog(4555956,-100,3e3);this.uniformsCloud={map:{type:"t",value:t},fogColor:{type:"c",value:e.color},fogNear:{type:"f",value:e.near},fogFar:{type:"f",value:e.far}};for(var n=new THREE.ShaderMaterial({uniforms:this.uniformsCloud,vertexShader:r.default,fragmentShader:i.default,side:THREE.DoubleSide,depthWrite:!1,transparent:!0}),o=new THREE.Geometry,a=new THREE.Mesh(new THREE.PlaneGeometry(64,64)),s=0;s<300;s++){var c=800*Math.random()-400,l=800*Math.random()-400;a.position.x=c,a.position.y=l,a.position.z=20+Math.random()*s,a.rotation.z=Math.random()*Math.PI,a.scale.x=a.scale.y=Math.random()*Math.random()*1.5+.5,THREE.GeometryUtils.merge(o,a)}var u=new THREE.Mesh(o,n);this.el.setObject3D("mesh",u),(u=new THREE.Mesh(o,n)).position.z=-8e3},remove:function(){this.el.removeObject3D("mesh")},tick:function(t){}})},function(t,e,n){"use strict";AFRAME.registerComponent("material-butterfly",{init:function(){this.data;var t=[],e=[],n=this.el;(new THREE.JSONLoader).load("/assets/models/json/butterflyA_flyA_001.obj",function(i){for(var r=0;r<20;r++){var o=new THREE.Mesh(i,new THREE.MeshLambertMaterial({vertexColors:THREE.FaceColors,morphTargets:!0,morphNormals:!0,side:THREE.DoubleSide,color:16250464}));o.duration=800,o.time=Math.random()*o.duration;var a=200*Math.random()-100,s=200*Math.random()-100;o.position.set(a,1.25*r,s);var c=.05+.15*Math.random();o.scale.set(c,c,c),n.sceneEl.object3D.add(o);var l=new THREE.AnimationMixer(o),u=THREE.AnimationClip.CreateFromMorphTargetSequence("gallop",i.morphTargets,30);l.clipAction(u).setDuration(1).play();var h=new THREE.Vector3(300*Math.random()-150,250+100*Math.random(),-200*Math.random()-200),d=new THREE.Vector3,p=o.position.distanceTo(h);e.push({mixer:l}),t.push({mesh:o,target:h,time:0,distance:p,speed:1e-77,look:d})}}),this.butterflys=t,this.mixers=e},remove:function(){this.el.removeObject3D("mesh")},tick:function(t,e){var n=e/1e3,i=.03*n;if(this.mixers)for(var r=0;r<this.mixers.length;r++)this.mixers[r].mixer.update(n);if(this.butterflys)for(r=0;r<this.butterflys.length;r++){var o=this.butterflys[r];o.time=n*o.speed,o.look.copy(o.mesh.position),o.mesh.position.lerp(o.target,o.time),o.mesh.position.x+=.35*Math.sin(t/5e3+r),o.mesh.position.z-=.25*Math.cos(t/1500+r)-i,o.mesh.lookAt(o.look)}}})},function(t,e,n){"use strict";AFRAME.registerComponent("material-rock",{init:function(){this.data;var t=new THREE.TextureLoader,e=t.load("/assets/images/ground/RustMixedOnPaint012/1K/RustMixedOnPaint012_COL_VAR2_1K.jpg");e.wrapS=THREE.RepeatWrapping,e.wrapT=THREE.RepeatWrapping,e.repeat.x=2,e.repeat.y=2,new THREE.TextureLoader;var n=t.load("/assets/images/ground/RustMixedOnPaint012/1K/RustMixedOnPaint012_NRM_1K.jpg");n.wrapS=THREE.RepeatWrapping,n.wrapT=THREE.RepeatWrapping,e.repeat.x=2,e.repeat.y=2;for(var i=new THREE.MeshPhongMaterial({map:e,normalMap:n,shininess:20,metalness:0,roughness:.45}),r=new THREE.IcosahedronGeometry(1,2),o=0;o<r.vertices.length;o++)r.vertices[o].multiplyScalar(1+.15*Math.random());for(r.computeVertexNormals(),r.computeFaceNormals(),o=0;o<20;o++){this.rock=null,this.rock=document.createElement("a-entity"),this.el.appendChild(this.rock);var a=new THREE.Mesh(r,i),s=.5+3*Math.random();a.scale.set(s,s,s+1);var c=200*Math.random()-100,l=200*Math.random()-100;a.position.set(c,1,l),a.rotation.y=Math.random()*(2*Math.PI),a.rotation.x=Math.random()*(2*Math.PI),a.rotation.z=Math.random()*(2*Math.PI),this.rock.setObject3D("mesh",a),this.rock.setAttribute("static-body","shape: box;"),this.rock.setAttribute("shadow",{cast:!0,receive:!0})}},remove:function(){this.el.removeObject3D("mesh")},tick:function(t){}})},function(t,e,n){"use strict";var i=o(n(119)),r=o(n(118));function o(t){return t&&t.__esModule?t:{default:t}}AFRAME.registerComponent("material-grass",{init:function(){this.data;var t=new THREE.TextureLoader,e=t.load("/assets/images/ground/bush.pn");e.wrapS=THREE.RepeatWrapping,e.shadowSide=THREE.DoubleSide,e.side=THREE.DoubleSide;var n=t.load("/assets/images/9128-ambientocclusion.jpg");n.wrapS=n.wrapT=THREE.RepeatWrapping,n.shadowSide=THREE.DoubleSide,n.side=THREE.DoubleSide;this.uniforms={color:{type:"c",value:new THREE.Color(11581307)},sunColor:{type:"c",value:new THREE.Color(14870404)},texture:{type:"t",value:e},shadow:{type:"t",value:n},globalTime:{type:"f",value:1},fogColor:{type:"c",value:new THREE.Color(16777215)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},size:{type:"v2",value:new THREE.Vector2(1200,2400)}},this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:r.default,fragmentShader:i.default,transparent:!1,side:THREE.DoubleSide});var o=new THREE.PlaneGeometry(20,20,1,1);o.applyMatrix((new THREE.Matrix4).setPosition(new THREE.Vector3(0,0,0)));for(var a=new THREE.Geometry,s=0;s<500;s++)(l=new THREE.Mesh(o)).rotation.y=Math.random()-.5,l.position.set(100*Math.random(),1,100*Math.random()),l.scale.y=1+1.75*Math.random(),THREE.GeometryUtils.merge(a,l);var c=new THREE.PlaneGeometry(5,5,1,1);for(c.applyMatrix((new THREE.Matrix4).setPosition(new THREE.Vector3(0,0,0))),s=0;s<200;s++){var l;(l=new THREE.Mesh(c)).rotation.y=Math.random()-.5,l.position.set(-10*Math.random(),1,10*Math.random()),l.scale.y=1+.5*Math.random(),THREE.GeometryUtils.merge(a,l)}for(var u=a.vertices,h=[],d=[],p=[],f=500*o.vertices.length,m=0;m<f;m+=o.vertices.length)for(var g=Math.random(),v=m;v<m+o.vertices.length;v++)h[v]=g,d[v]=new THREE.Vector2(56,1),p[v]=new THREE.Color(16777215),p[v].setHSL(.25,.25-.25*Math.random(),.7);var y=200*c.vertices.length;for(m=f;m<f+y;m+=c.vertices.length)for(g=Math.random(),v=m;v<m+c.vertices.length;v++)h[v]=g,d[v]=new THREE.Vector2(1.5,1),p[v]=new THREE.Color(5154376),p[v].setHSL(.25,.5+.25*Math.random(),.5);this.bufferLineGeo=new THREE.BufferGeometry,this.bufferLineGeo.addAttribute("uvScale",new THREE.Float32BufferAttribute(d,2)),this.bufferLineGeo.addAttribute("time",new THREE.Float32BufferAttribute(h,1)),this.bufferLineGeo.addAttribute("customColor",new THREE.Float32BufferAttribute(p,3));var A=new Float32Array(3*a.length);this.bufferLineGeo.addAttribute("position",new THREE.BufferAttribute(A,3).copyVector3sArray(u));var w=new THREE.Mesh(this.bufferLineGeo,this.material);this.el.setObject3D("mesh",w)},remove:function(){this.el.removeObject3D("mesh")},tick:function(t){}})},function(t,e,n){"use strict";var i=o(n(121)),r=o(n(120));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}AFRAME.registerComponent("material-flower",{init:function(){this.data;var t=new THREE.PlaneGeometry(5,5,1,1);t.applyMatrix((new THREE.Matrix4).setPosition(new THREE.Vector3(0,1,0)));var e=(new THREE.TextureLoader).load("/assets/images/ground/bush.png");this.uniformsFlower={color:{type:"c",value:new THREE.Color(11581307)},texture:{type:"t",value:e},globalTime:{type:"f",value:0},darken:{type:"f",value:.85},fogColor:{type:"c",value:new THREE.Color(16777215)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}},this.shaderMaterial=new THREE.ShaderMaterial({uniforms:this.uniformsFlower,vertexShader:r,fragmentShader:i,transparent:!1,side:THREE.DoubleSide}),this.geometry=new THREE.Geometry;for(var n=0;n<50;n++){var o=new THREE.Mesh(t);o.rotation.y=1*Math.random()-.25,o.rotation.z=1*Math.random()-.25,o.position.set(100*Math.random(),1.3,100*Math.random()),o.updateMatrix(),this.geometry.merge(o.geometry,o.matrix)}for(var a=this.geometry.vertices,s=[],c=0;c<a.length;c+=t.vertices.length)for(var l=Math.random(),u=c;u<c+t.vertices.length;u++)s[u]=l;this.bufferLineGeo=new THREE.BufferGeometry,this.bufferLineGeo.addAttribute("time",new THREE.Float32BufferAttribute(s,1));var h=new Float32Array(3*a.length);this.bufferLineGeo.addAttribute("position",new THREE.BufferAttribute(h,3).copyVector3sArray(a)),this.particles=new THREE.Mesh(this.geometry,this.shaderMaterial),this.el.setObject3D("mesh",this.particles)},remove:function(){this.el.removeObject3D("mesh")},tick:function(t){}})},function(t,e,n){"use strict";if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("point",{schema:{color:{type:"color",default:"#888"},size:{type:"number",default:1},perspective:{type:"boolean",default:!1}},multiple:!1,init:function(){this.geometry=new THREE.Geometry,this.geometry.vertices.push(new THREE.Vector3(0,0,0)),this.material=new THREE.PointsMaterial({color:this.data.color,size:this.data.size,sizeAttenuation:this.data.perspective}),this.points=new THREE.Points(this.geometry,this.material),this.el.setObject3D("mesh",this.points)},setPoints:function(t){this.geometry=new THREE.Geometry;var e=this.geometry.vertices;t.forEach(function(t){e.push(new THREE.Vector3(t[0],t[1],t[2]))}),this.points=new THREE.Points(this.geometry,this.material),this.el.setObject3D("mesh",this.points)},remove:function(){this.el.removeObject3D("mesh")}}),AFRAME.registerPrimitive("a-point",{defaultComponents:{point:{}},mappings:{color:"point.color",size:"point.size",perspective:"point.perspective"}})},function(t,e,n){"use strict";var i=o(n(123)),r=o(n(122));function o(t){return t&&t.__esModule?t:{default:t}}AFRAME.registerComponent("material-par",{init:function(){this.data;var t=void 0,e=(new THREE.TextureLoader).load("/assets/images/smokeparticle_16.png");for(this.uniformsParticles={color:{type:"c",value:new THREE.Color(16180656)},texture:{type:"t",value:e},globalTime:{type:"f",value:0},bass:{type:"f",value:1},scale:{type:"f",value:.5*window.innerHeight}},this.shaderMaterial=new THREE.ShaderMaterial({uniforms:this.uniformsParticles,vertexShader:r.default,fragmentShader:i.default,blending:THREE.AdditiveBlending,transparent:!0,side:THREE.DoubleSide}),this.geometry=new THREE.Geometry,t=0;t<800;t++){var n=new THREE.Vector3(800*Math.random()-400,100*Math.random(),-1400);this.geometry.vertices.push(n)}for(var o=this.geometry.vertices,a=[],s=[],c=0;c<o.length;c++)s[c]=Math.random(),a[c]=.5+0*Math.random();this.bufferLineGeo=new THREE.BufferGeometry,this.bufferLineGeo.addAttribute("size",new THREE.Float32BufferAttribute(a,1)),this.bufferLineGeo.addAttribute("time",new THREE.Float32BufferAttribute(s,1));var l=new Float32Array(3*o.length);this.bufferLineGeo.addAttribute("position",new THREE.BufferAttribute(l,3).copyVector3sArray(o)),this.particles=new THREE.Points(this.bufferLineGeo,this.shaderMaterial),this.el.setObject3D("mesh",this.particles)},remove:function(){this.el.removeObject3D("mesh")},tick:function(t){this.shaderMaterial.uniforms.globalTime.value=t/1e3}})},function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("random-color",{schema:{min:{default:{x:0,y:0,z:0},type:"vec3"},max:{default:{x:1,y:1,z:1},type:"vec3"}},update:function(){var t=this.data,e=t.max,n=t.min;this.el.setAttribute("material","color","#"+new THREE.Color(Math.random()*e.x+n.x,Math.random()*e.y+n.y,Math.random()*e.z+n.z).getHexString())}}),AFRAME.registerComponent("random-position",{schema:{min:{default:{x:-10,y:-10,z:-10},type:"vec3"},max:{default:{x:10,y:10,z:10},type:"vec3"}},update:function(){var t=this.data,e=t.max,n=t.min;this.el.setAttribute("position",{x:Math.random()*(e.x-n.x)+n.x,y:Math.random()*(e.y-n.y)+n.y,z:Math.random()*(e.z-n.z)+n.z})}}),AFRAME.registerComponent("random-spherical-position",{schema:{radius:{default:10},startX:{default:0},lengthX:{default:360},startY:{default:0},lengthY:{default:360}},update:function(){var t=this.data,e=THREE.Math.degToRad(Math.random()*t.lengthX+t.startX),n=THREE.Math.degToRad(Math.random()*t.lengthY+t.startY);this.el.setAttribute("position",{x:t.radius*Math.cos(e)*Math.sin(n),y:t.radius*Math.sin(e)*Math.sin(n),z:t.radius*Math.cos(n)})}}),AFRAME.registerComponent("random-rotation",{schema:{min:{default:{x:0,y:0,z:0},type:"vec3"},max:{default:{x:360,y:360,z:360},type:"vec3"}},update:function(){var t=this.data,e=t.max,n=t.min;this.el.setAttribute("rotation",{x:Math.random()*e.x+n.x,y:Math.random()*e.y+n.y,z:Math.random()*e.z+n.z})}}),AFRAME.registerComponent("random-scale",{schema:{min:{default:{x:0,y:0,z:0},type:"vec3"},max:{default:{x:2,y:2,z:2},type:"vec3"}},update:function(){var t=this.data,e=t.max,n=t.min;this.el.setAttribute("scale",{x:Math.random()*e.x+n.x,y:Math.random()*e.y+n.y,z:Math.random()*e.z+n.z})}})},function(t,e,n){var i=n(3);function r(){this.rayFromWorld=new i,this.rayToWorld=new i,this.hitNormalWorld=new i,this.hitPointWorld=new i,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1}t.exports=r,r.prototype.reset=function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1},r.prototype.abort=function(){this._shouldStop=!0},r.prototype.set=function(t,e,n,i,r,o,a){this.rayFromWorld.copy(t),this.rayToWorld.copy(e),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(i),this.shape=r,this.body=o,this.distance=a}},function(t,e){function n(t){var e="";"string"==typeof(t=t||{})?(e=t,t={}):"object"==typeof t&&(e=""),this.name=e,this.id=n.idCounter++,this.friction=void 0!==t.friction?t.friction:-1,this.restitution=void 0!==t.restitution?t.restitution:-1}t.exports=n,n.idCounter=0},function(t,e){function n(){}t.exports=n,n.defaults=function(t,e){for(var n in t=t||{},e)n in t||(t[n]=e[n]);return t}},function(t,e,n){var i,r,o={},a=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),s=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),c=null,l=0,u=[],h=n(220);function d(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=o[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(y(i.parts[a],e))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(y(i.parts[a],e));o[i.id]={id:i.id,refs:1,parts:s}}}}function p(t,e){for(var n=[],i={},r=0;r<t.length;r++){var o=t[r],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function f(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=u[u.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=s(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,r)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function g(t){var e=document.createElement("style");return t.attrs.type="text/css",v(e,t.attrs),f(t,e),e}function v(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function y(t,e){var n,i,r,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var a=l++;n=c||(c=g(e)),i=b.bind(null,n,a,!1),r=b.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",v(e,t.attrs),f(t,e),e}(e),i=function(t,e,n){var i=n.css,r=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||o)&&(i=h(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),r=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(e),i=function(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){m(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=p(t,e);return d(n,e),function(t){for(var i=[],r=0;r<n.length;r++){var a=n[r];(s=o[a.id]).refs--,i.push(s)}for(t&&d(p(t,e),e),r=0;r<i.length;r++){var s;if(0===(s=i[r]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete o[s.id]}}}};var A,w=(A=[],function(t,e){return A[t]=e,A.filter(Boolean).join("\n")});function b(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=w(e,r);else{var o=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n,i=t[1]||"",r=t[3];if(!r)return i;if(e&&"function"==typeof btoa){var o=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[i].concat(a).concat([o]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e){function n(){}function i(){throw new Error("Method not implemented.")}t.exports=n,n.prototype.init=i,n.prototype.step=i,n.prototype.destroy=i,n.prototype.addBody=i,n.prototype.removeBody=i,n.prototype.applyBodyMethod=i,n.prototype.updateBodyProperties=i,n.prototype.addMaterial=i,n.prototype.addContactMaterial=i,n.prototype.addConstraint=i,n.prototype.removeConstraint=i,n.prototype.getContacts=i},function(t,e,n){t.exports=o;var i=n(3),r=(n(10),n(19));function o(t,e,n){var o=void 0!==(n=n||{}).maxForce?n.maxForce:1e6;r.call(this,t,e,-o,o),this.axisA=n.axisA?n.axisA.clone():new i(1,0,0),this.axisB=n.axisB?n.axisB.clone():new i(0,1,0),this.maxAngle=Math.PI/2}o.prototype=new r,o.prototype.constructor=o;var a=new i,s=new i;o.prototype.computeB=function(t){var e=this.a,n=this.b,i=this.axisA,r=this.axisB,o=a,c=s,l=this.jacobianElementA,u=this.jacobianElementB;return i.cross(r,o),r.cross(i,c),l.rotational.copy(c),u.rotational.copy(o),-(Math.cos(this.maxAngle)-i.dot(r))*e-this.computeGW()*n-t*this.computeGiMf()}},function(t,e,n){t.exports=a;var i=n(20),r=n(8),o=n(3);function a(t,e,n,a,s){i.call(this,t,n),s=void 0!==s?s:1e6,this.pivotA=e?e.clone():new o,this.pivotB=a?a.clone():new o;var c=this.equationX=new r(t,n),l=this.equationY=new r(t,n),u=this.equationZ=new r(t,n);this.equations.push(c,l,u),c.minForce=l.minForce=u.minForce=-s,c.maxForce=l.maxForce=u.maxForce=s,c.ni.set(1,0,0),l.ni.set(0,1,0),u.ni.set(0,0,1)}a.prototype=new i,a.prototype.update=function(){var t=this.bodyA,e=this.bodyB,n=this.equationX,i=this.equationY,r=this.equationZ;t.quaternion.vmult(this.pivotA,n.ri),e.quaternion.vmult(this.pivotB,n.rj),i.ri.copy(n.ri),i.rj.copy(n.rj),r.ri.copy(n.ri),r.rj.copy(n.rj)}},function(t,e){function n(){this.equations=[]}t.exports=n,n.prototype.solve=function(t,e){return 0},n.prototype.addEquation=function(t){t.enabled&&this.equations.push(t)},n.prototype.removeEquation=function(t){var e=this.equations,n=e.indexOf(t);-1!==n&&e.splice(n,1)},n.prototype.removeAllEquations=function(){this.equations.length=0}},function(t,e,n){t.exports=l;var i=n(3),r=n(6),o=n(21),a=(n(22),n(43),n(32)),s=n(5),c=n(11);function l(t,e){this.from=t?t.clone():new i,this.to=e?e.clone():new i,this._direction=new i,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=l.ANY,this.result=new a,this.hasHit=!1,this.callback=function(t){}}l.prototype.constructor=l,l.CLOSEST=1,l.ANY=2,l.ALL=4;var u=new c,h=[];l.prototype.intersectWorld=function(t,e){return this.mode=e.mode||l.ANY,this.result=e.result||new a,this.skipBackfaces=!!e.skipBackfaces,this.collisionFilterMask=void 0!==e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionFilterGroup=void 0!==e.collisionFilterGroup?e.collisionFilterGroup:-1,e.from&&this.from.copy(e.from),e.to&&this.to.copy(e.to),this.callback=e.callback||function(){},this.hasHit=!1,this.result.reset(),this._updateDirection(),this.getAABB(u),h.length=0,t.broadphase.aabbQuery(t,u,h),this.intersectBodies(h),this.hasHit};var d=new i,p=new i;function f(t,e,n,i){i.vsub(e,k),n.vsub(e,d),t.vsub(e,p);var r,o,a=k.dot(k),s=k.dot(d),c=k.dot(p),l=d.dot(d),u=d.dot(p);return(r=l*c-s*u)>=0&&(o=a*u-s*c)>=0&&r+o<a*l-s*s}l.pointInTriangle=f;var m=new i,g=new r;l.prototype.intersectBody=function(t,e){e&&(this.result=e,this._updateDirection());var n=this.checkCollisionResponse;if((!n||t.collisionResponse)&&0!=(this.collisionFilterGroup&t.collisionFilterMask)&&0!=(t.collisionFilterGroup&this.collisionFilterMask))for(var i=m,r=g,o=0,a=t.shapes.length;o<a;o++){var s=t.shapes[o];if((!n||s.collisionResponse)&&(t.quaternion.mult(t.shapeOrientations[o],r),t.quaternion.vmult(t.shapeOffsets[o],i),i.vadd(t.position,i),this.intersectShape(s,r,i,t),this.result._shouldStop))break}},l.prototype.intersectBodies=function(t,e){e&&(this.result=e,this._updateDirection());for(var n=0,i=t.length;!this.result._shouldStop&&n<i;n++)this.intersectBody(t[n])},l.prototype._updateDirection=function(){this.to.vsub(this.from,this._direction),this._direction.normalize()},l.prototype.intersectShape=function(t,e,n,i){if(!(function(t,e,n){n.vsub(t,k);var i=k.dot(e);return e.mult(i,z),z.vadd(t,z),n.distanceTo(z)}(this.from,this._direction,n)>t.boundingSphereRadius)){var r=this[t.type];r&&r.call(this,t,e,n,i,t)}},new i,new i;var v=new i,y=new i,A=new i,w=new i;new i,new a,l.prototype.intersectBox=function(t,e,n,i,r){return this.intersectConvex(t.convexPolyhedronRepresentation,e,n,i,r)},l.prototype[s.types.BOX]=l.prototype.intersectBox,l.prototype.intersectPlane=function(t,e,n,r,o){var a=this.from,s=this.to,c=this._direction,l=new i(0,0,1);e.vmult(l,l);var u=new i;a.vsub(n,u);var h=u.dot(l);if(s.vsub(n,u),!(h*u.dot(l)>0||a.distanceTo(s)<h)){var d=l.dot(c);if(!(Math.abs(d)<this.precision)){var p=new i,f=new i,m=new i;a.vsub(n,p);var g=-l.dot(p)/d;c.scale(g,f),a.vadd(f,m),this.reportIntersection(l,m,o,r,-1)}}},l.prototype[s.types.PLANE]=l.prototype.intersectPlane,l.prototype.getAABB=function(t){var e=this.to,n=this.from;t.lowerBound.x=Math.min(e.x,n.x),t.lowerBound.y=Math.min(e.y,n.y),t.lowerBound.z=Math.min(e.z,n.z),t.upperBound.x=Math.max(e.x,n.x),t.upperBound.y=Math.max(e.y,n.y),t.upperBound.z=Math.max(e.z,n.z)};var b={faceList:[0]},M=new i,E=new l,x=[];l.prototype.intersectHeightfield=function(t,e,n,i,r){t.data,t.elementSize;var a=E;a.from.copy(this.from),a.to.copy(this.to),o.pointToLocalFrame(n,e,a.from,a.from),o.pointToLocalFrame(n,e,a.to,a.to),a._updateDirection();var s,l,u,h,d=x;s=l=0,u=h=t.data.length-1;var p=new c;a.getAABB(p),t.getIndexOfPosition(p.lowerBound.x,p.lowerBound.y,d,!0),s=Math.max(s,d[0]),l=Math.max(l,d[1]),t.getIndexOfPosition(p.upperBound.x,p.upperBound.y,d,!0),u=Math.min(u,d[0]+1),h=Math.min(h,d[1]+1);for(var f=s;f<u;f++)for(var m=l;m<h;m++){if(this.result._shouldStop)return;if(t.getAabbAtIndex(f,m,p),p.overlapsRay(a)){if(t.getConvexTrianglePillar(f,m,!1),o.pointToWorldFrame(n,e,t.pillarOffset,M),this.intersectConvex(t.pillarConvex,e,M,i,r,b),this.result._shouldStop)return;t.getConvexTrianglePillar(f,m,!0),o.pointToWorldFrame(n,e,t.pillarOffset,M),this.intersectConvex(t.pillarConvex,e,M,i,r,b)}}},l.prototype[s.types.HEIGHTFIELD]=l.prototype.intersectHeightfield;var T=new i,C=new i;l.prototype.intersectSphere=function(t,e,n,i,r){var o=this.from,a=this.to,s=t.radius,c=Math.pow(a.x-o.x,2)+Math.pow(a.y-o.y,2)+Math.pow(a.z-o.z,2),l=2*((a.x-o.x)*(o.x-n.x)+(a.y-o.y)*(o.y-n.y)+(a.z-o.z)*(o.z-n.z)),u=Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2)+Math.pow(o.z-n.z,2)-Math.pow(s,2),h=Math.pow(l,2)-4*c*u,d=T,p=C;if(!(h<0))if(0===h)o.lerp(a,h,d),d.vsub(n,p),p.normalize(),this.reportIntersection(p,d,r,i,-1);else{var f=(-l-Math.sqrt(h))/(2*c),m=(-l+Math.sqrt(h))/(2*c);if(f>=0&&f<=1&&(o.lerp(a,f,d),d.vsub(n,p),p.normalize(),this.reportIntersection(p,d,r,i,-1)),this.result._shouldStop)return;m>=0&&m<=1&&(o.lerp(a,m,d),d.vsub(n,p),p.normalize(),this.reportIntersection(p,d,r,i,-1))}},l.prototype[s.types.SPHERE]=l.prototype.intersectSphere;var S=new i,D=(new i,new i,new i);l.prototype.intersectConvex=function(t,e,n,i,r,o){for(var a=S,s=D,c=o&&o.faceList||null,l=t.faces,u=t.vertices,h=t.faceNormals,d=this._direction,p=this.from,m=this.to,g=p.distanceTo(m),b=c?c.length:l.length,M=this.result,E=0;!M._shouldStop&&E<b;E++){var x=c?c[E]:E,T=l[x],C=h[x],_=e,L=n;s.copy(u[T[0]]),_.vmult(s,s),s.vadd(L,s),s.vsub(p,s),_.vmult(C,a);var N=d.dot(a);if(!(Math.abs(N)<this.precision)){var I=a.dot(s)/N;if(!(I<0)){d.mult(I,v),v.vadd(p,v),y.copy(u[T[0]]),_.vmult(y,y),L.vadd(y,y);for(var O=1;!M._shouldStop&&O<T.length-1;O++){A.copy(u[T[O]]),w.copy(u[T[O+1]]),_.vmult(A,A),_.vmult(w,w),L.vadd(A,A),L.vadd(w,w);var j=v.distanceTo(p);!f(v,y,A,w)&&!f(v,A,y,w)||j>g||this.reportIntersection(a,v,r,i,x)}}}}},l.prototype[s.types.CONVEXPOLYHEDRON]=l.prototype.intersectConvex;var _=new i,L=new i,N=new i,I=new i,O=new i,j=new i,P=(new c,[]),R=new o;l.prototype.intersectTrimesh=function(t,e,n,i,r,a){var s=_,c=P,l=R,u=D,h=L,d=N,p=I,m=j,g=O,b=(a&&a.faceList,t.indices),M=(t.vertices,t.faceNormals,this.from),E=this.to,x=this._direction;l.position.copy(n),l.quaternion.copy(e),o.vectorToLocalFrame(n,e,x,h),o.pointToLocalFrame(n,e,M,d),o.pointToLocalFrame(n,e,E,p),p.x*=t.scale.x,p.y*=t.scale.y,p.z*=t.scale.z,d.x*=t.scale.x,d.y*=t.scale.y,d.z*=t.scale.z,p.vsub(d,h),h.normalize();var T=d.distanceSquared(p);t.tree.rayQuery(this,l,c);for(var C=0,S=c.length;!this.result._shouldStop&&C!==S;C++){var k=c[C];t.getNormal(k,s),t.getVertex(b[3*k],y),y.vsub(d,u);var z=h.dot(s),B=s.dot(u)/z;if(!(B<0)){h.scale(B,v),v.vadd(d,v),t.getVertex(b[3*k+1],A),t.getVertex(b[3*k+2],w);var F=v.distanceSquared(d);!f(v,A,y,w)&&!f(v,y,A,w)||F>T||(o.vectorToWorldFrame(e,s,g),o.pointToWorldFrame(n,e,v,m),this.reportIntersection(g,m,r,i,k))}}c.length=0},l.prototype[s.types.TRIMESH]=l.prototype.intersectTrimesh,l.prototype.reportIntersection=function(t,e,n,i,r){var o=this.from,a=this.to,s=o.distanceTo(e),c=this.result;if(!(this.skipBackfaces&&t.dot(this._direction)>0))switch(c.hitFaceIndex=void 0!==r?r:-1,this.mode){case l.ALL:this.hasHit=!0,c.set(o,a,t,e,n,i,s),c.hasHit=!0,this.callback(c);break;case l.CLOSEST:(s<c.distance||!c.hasHit)&&(this.hasHit=!0,c.hasHit=!0,c.set(o,a,t,e,n,i,s));break;case l.ANY:this.hasHit=!0,c.hasHit=!0,c.set(o,a,t,e,n,i,s),c._shouldStop=!0}};var k=new i,z=new i},function(t,e,n){var i=n(9),r=n(3),o=n(6);function a(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}n(5),n(73),t.exports=a,a.prototype.collisionPairs=function(t,e,n){throw new Error("collisionPairs not implemented for this BroadPhase class!")},a.prototype.needBroadphaseCollision=function(t,e){return 0!=(t.collisionFilterGroup&e.collisionFilterMask)&&0!=(e.collisionFilterGroup&t.collisionFilterMask)&&(0==(t.type&i.STATIC)&&t.sleepState!==i.SLEEPING||0==(e.type&i.STATIC)&&e.sleepState!==i.SLEEPING)},a.prototype.intersectionTest=function(t,e,n,i){this.useBoundingBoxes?this.doBoundingBoxBroadphase(t,e,n,i):this.doBoundingSphereBroadphase(t,e,n,i)};var s=new r;new r,new o,new r,a.prototype.doBoundingSphereBroadphase=function(t,e,n,i){var r=s;e.position.vsub(t.position,r);var o=Math.pow(t.boundingRadius+e.boundingRadius,2);r.norm2()<o&&(n.push(t),i.push(e))},a.prototype.doBoundingBoxBroadphase=function(t,e,n,i){t.aabbNeedsUpdate&&t.computeAABB(),e.aabbNeedsUpdate&&e.computeAABB(),t.aabb.overlaps(e.aabb)&&(n.push(t),i.push(e))};var c={keys:[]},l=[],u=[];a.prototype.makePairsUnique=function(t,e){for(var n=c,i=l,r=u,o=t.length,a=0;a!==o;a++)i[a]=t[a],r[a]=e[a];for(t.length=0,e.length=0,a=0;a!==o;a++){var s=i[a].id,h=r[a].id;n[d=s<h?s+","+h:h+","+s]=a,n.keys.push(d)}for(a=0;a!==n.keys.length;a++){var d,p=n[d=n.keys.pop()];t.push(i[p]),e.push(r[p]),delete n[d]}},a.prototype.setWorld=function(t){};var h=new r;a.boundingSphereCheck=function(t,e){var n=h;return t.position.vsub(e.position,n),Math.pow(t.shape.boundingSphereRadius+e.shape.boundingSphereRadius,2)>n.norm2()},a.prototype.aabbQuery=function(t,e,n){return[]}},function(t,e,n){t.exports=a;var i=n(5),r=n(3),o=n(22);function a(t){i.call(this),this.type=i.types.BOX,this.halfExtents=t,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}a.prototype=new i,a.prototype.constructor=a,a.prototype.updateConvexPolyhedronRepresentation=function(){var t=this.halfExtents.x,e=this.halfExtents.y,n=this.halfExtents.z,i=r,a=[new i(-t,-e,-n),new i(t,-e,-n),new i(t,e,-n),new i(-t,e,-n),new i(-t,-e,n),new i(t,-e,n),new i(t,e,n),new i(-t,e,n)],s=(new i(0,0,1),new i(0,1,0),new i(1,0,0),new o(a,[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]]));this.convexPolyhedronRepresentation=s,s.material=this.material},a.prototype.calculateLocalInertia=function(t,e){return e=e||new r,a.calculateInertia(this.halfExtents,t,e),e},a.calculateInertia=function(t,e,n){var i=t;n.x=1/12*e*(2*i.y*2*i.y+2*i.z*2*i.z),n.y=1/12*e*(2*i.x*2*i.x+2*i.z*2*i.z),n.z=1/12*e*(2*i.y*2*i.y+2*i.x*2*i.x)},a.prototype.getSideNormals=function(t,e){var n=t,i=this.halfExtents;if(n[0].set(i.x,0,0),n[1].set(0,i.y,0),n[2].set(0,0,i.z),n[3].set(-i.x,0,0),n[4].set(0,-i.y,0),n[5].set(0,0,-i.z),void 0!==e)for(var r=0;r!==n.length;r++)e.vmult(n[r],n[r]);return n},a.prototype.volume=function(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z},a.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.halfExtents.norm()};var s=new r;new r,a.prototype.forEachWorldCorner=function(t,e,n){for(var i=this.halfExtents,r=[[i.x,i.y,i.z],[-i.x,i.y,i.z],[-i.x,-i.y,i.z],[-i.x,-i.y,-i.z],[i.x,-i.y,-i.z],[i.x,i.y,-i.z],[-i.x,i.y,-i.z],[i.x,-i.y,i.z]],o=0;o<r.length;o++)s.set(r[o][0],r[o][1],r[o][2]),e.vmult(s,s),t.vadd(s,s),n(s.x,s.y,s.z)};var c=[new r,new r,new r,new r,new r,new r,new r,new r];a.prototype.calculateWorldAABB=function(t,e,n,i){var r=this.halfExtents;c[0].set(r.x,r.y,r.z),c[1].set(-r.x,r.y,r.z),c[2].set(-r.x,-r.y,r.z),c[3].set(-r.x,-r.y,-r.z),c[4].set(r.x,-r.y,-r.z),c[5].set(r.x,r.y,-r.z),c[6].set(-r.x,r.y,-r.z),c[7].set(r.x,-r.y,r.z);var o=c[0];e.vmult(o,o),t.vadd(o,o),i.copy(o),n.copy(o);for(var a=1;a<8;a++){o=c[a],e.vmult(o,o),t.vadd(o,o);var s=o.x,l=o.y,u=o.z;s>i.x&&(i.x=s),l>i.y&&(i.y=l),u>i.z&&(i.z=u),s<n.x&&(n.x=s),l<n.y&&(n.y=l),u<n.z&&(n.z=u)}}},function(t,e,n){"use strict";n.r(e);var i=n(57),r=n(56),o={INIT:"@@redux/INIT"};function a(t,e,n){var s;if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(a)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var c=t,l=e,u=[],h=u,d=!1;function p(){h===u&&(h=u.slice())}function f(){return l}function m(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var e=!0;return p(),h.push(t),function(){if(e){e=!1,p();var n=h.indexOf(t);h.splice(n,1)}}}function g(t){if(!Object(i.a)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,l=c(l,t)}finally{d=!1}for(var e=u=h,n=0;n<e.length;n++)(0,e[n])();return t}return g({type:o.INIT}),(s={dispatch:g,subscribe:m,getState:f,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");c=t,g({type:o.INIT})}})[r.a]=function(){var t,e=m;return(t={subscribe:function(t){if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");function n(){t.next&&t.next(f())}return n(),{unsubscribe:e(n)}}})[r.a]=function(){return this},t},s}function s(t,e){var n=e&&e.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function c(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++){var r=e[i];"function"==typeof t[r]&&(n[r]=t[r])}var a=Object.keys(n),c=void 0;try{!function(t){Object.keys(t).forEach(function(e){var n=t[e];if(void 0===n(void 0,{type:o.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(t){c=t}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(c)throw c;for(var i=!1,r={},o=0;o<a.length;o++){var l=a[o],u=n[l],h=t[l],d=u(h,e);if(void 0===d){var p=s(l,e);throw new Error(p)}r[l]=d,i=i||d!==h}return i?r:t}}function l(t,e){return function(){return e(t.apply(void 0,arguments))}}function u(t,e){if("function"==typeof t)return l(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),i={},r=0;r<n.length;r++){var o=n[r],a=t[o];"function"==typeof a&&(i[o]=l(a,e))}return i}function h(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}var d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function p(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(n,i,r){var o,a=t(n,i,r),s=a.dispatch,c={getState:a.getState,dispatch:function(t){return s(t)}};return o=e.map(function(t){return t(c)}),s=h.apply(void 0,o)(a.dispatch),d({},a,{dispatch:s})}}}n.d(e,"createStore",function(){return a}),n.d(e,"combineReducers",function(){return c}),n.d(e,"bindActionCreators",function(){return u}),n.d(e,"applyMiddleware",function(){return p}),n.d(e,"compose",function(){return h})},function(t,e,n){t.exports=function(){"use strict";var t={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n=Object.defineProperty,i=Object.getOwnPropertyNames,r=Object.getOwnPropertySymbols,o=Object.getOwnPropertyDescriptor,a=Object.getPrototypeOf,s=a&&a(Object);return function c(l,u,h){if("string"!=typeof u){if(s){var d=a(u);d&&d!==s&&c(l,d,h)}var p=i(u);r&&(p=p.concat(r(u)));for(var f=0;f<p.length;++f){var m=p[f];if(!(t[m]||e[m]||h&&h[m])){var g=o(u,m);try{n(l,m,g)}catch(t){}}}return l}return l}}()},function(t,e,n){var i=n(12),r=n(167);n(165);var o,a,s={dependencies:["velocity"],schema:{mass:{default:5,if:{type:"dynamic"}},linearDamping:{default:.01,if:{type:"dynamic"}},angularDamping:{default:.01,if:{type:"dynamic"}},shape:{default:"auto",oneOf:["auto","box","cylinder","sphere","hull","mesh","none"]},cylinderAxis:{default:"y",oneOf:["x","y","z"]},sphereRadius:{default:NaN},type:{default:"dynamic",oneOf:["static","dynamic"]}},init:function(){this.system=this.el.sceneEl.systems.physics,this.el.sceneEl.hasLoaded?this.initBody():this.el.sceneEl.addEventListener("loaded",this.initBody.bind(this))},initBody:function(){var t,e=this.el,n=this.data,o=this.el.object3D,a=o.position,s=o.quaternion;if(this.body=new i.Body({mass:"static"===n.type?0:n.mass||0,material:this.system.getMaterial("defaultMaterial"),position:new i.Vec3(a.x,a.y,a.z),quaternion:new i.Quaternion(s.x,s.y,s.z,s.w),linearDamping:n.linearDamping,angularDamping:n.angularDamping,type:"dynamic"===n.type?i.Body.DYNAMIC:i.Body.STATIC}),this.el.object3D.updateMatrixWorld(!0),"none"!==n.shape){var c="auto"===n.shape?void 0:AFRAME.utils.extend({},this.data,{type:r.Type[n.shape.toUpperCase()]});if(!(t=r(this.el.object3D,c)))return void e.addEventListener("object3dset",this.initBody.bind(this));this.body.addShape(t,t.offset,t.orientation),this.system.debug&&this.createWireframe(this.body,t)}this.el.body=this.body,this.body.el=e,this.isLoaded=!0,this.isPlaying&&this._play(),this.el.emit("body-loaded",{body:this.el.body})},play:function(){this.isLoaded&&this._play()},_play:function(){this.syncToPhysics(),this.system.addComponent(this),this.system.addBody(this.body),this.wireframe&&this.el.sceneEl.object3D.add(this.wireframe)},pause:function(){this.isLoaded&&this._pause()},_pause:function(){this.system.removeComponent(this),this.body&&this.system.removeBody(this.body),this.wireframe&&this.el.sceneEl.object3D.remove(this.wireframe)},update:function(t){if(this.body){var e=this.data;void 0!=t.type&&(e.type,t.type),this.body.mass=e.mass||0,"dynamic"===e.type&&(this.body.linearDamping=e.linearDamping,this.body.angularDamping=e.angularDamping),e.mass!==t.mass&&this.body.updateMassProperties(),this.body.updateProperties&&this.body.updateProperties()}},remove:function(){delete this.body.el,delete this.body,delete this.el.body,delete this.wireframe},beforeStep:function(){0===this.body.mass&&this.syncToPhysics()},step:function(){0!==this.body.mass&&this.syncFromPhysics()},createWireframe:function(t,e){var n=e.offset,r=e.orientation,o=i.shape2mesh(t).children[0];this.wireframe=new THREE.LineSegments(new THREE.EdgesGeometry(o.geometry),new THREE.LineBasicMaterial({color:16711680})),n&&(this.wireframe.offset=n.clone()),r&&(r.inverse(r),this.wireframe.orientation=new THREE.Quaternion(r.x,r.y,r.z,r.w)),this.syncWireframe()},syncWireframe:function(){var t,e=this.wireframe;this.wireframe&&(e.quaternion.copy(this.body.quaternion),e.orientation&&e.quaternion.multiply(e.orientation),e.position.copy(this.body.position),e.offset&&(t=e.offset.clone().applyQuaternion(e.quaternion),e.position.add(t)),e.updateMatrix())},syncToPhysics:(o=new THREE.Quaternion,a=new THREE.Vector3,function(){var t=this.el,e=t.parentEl,n=this.body;n&&(t.components.velocity&&n.velocity.copy(t.getAttribute("velocity")),e.isScene?(n.quaternion.copy(t.object3D.quaternion),n.position.copy(t.object3D.position)):(t.object3D.getWorldQuaternion(o),n.quaternion.copy(o),t.object3D.getWorldPosition(a),n.position.copy(a)),this.body.updateProperties&&this.body.updateProperties(),this.wireframe&&this.syncWireframe())}),syncFromPhysics:function(){var t=new THREE.Vector3,e=new THREE.Quaternion,n=new THREE.Quaternion;return function(){var i=this.el,r=i.parentEl,o=this.body;o&&(r.isScene?(i.object3D.quaternion.copy(o.quaternion),i.object3D.position.copy(o.position)):(e.copy(o.quaternion),r.object3D.getWorldQuaternion(n),e.multiply(n.inverse()),i.object3D.quaternion.copy(e),t.copy(o.position),r.object3D.worldToLocal(t),i.object3D.position.copy(t)),this.wireframe&&this.syncWireframe())}}()};t.exports.definition=s,t.exports.Component=AFRAME.registerComponent("body",s)},function(t,e,n){t.exports=o;var i=n(3),r=(n(10),n(19));function o(t,e,n){n=void 0!==n?n:1e6,r.call(this,t,e,-n,n),this.axisA=new i,this.axisB=new i,this.targetVelocity=0}o.prototype=new r,o.prototype.constructor=o,o.prototype.computeB=function(t){this.a;var e=this.b,n=(this.bi,this.bj,this.axisA),i=this.axisB,r=this.jacobianElementA,o=this.jacobianElementB;return r.rotational.copy(n),i.negate(o.rotational),-(this.computeGW()-this.targetVelocity)*e-t*this.computeGiMf()}},function(t,e,n){t.exports=o;var i=n(19),r=n(3);function o(t,e,n){i.call(this,t,e,-n,n),this.ri=new r,this.rj=new r,this.t=new r}n(10),o.prototype=new i,o.prototype.constructor=o;var a=new r,s=new r;o.prototype.computeB=function(t){this.a;var e=this.b,n=(this.bi,this.bj,this.ri),i=this.rj,r=a,o=s,c=this.t;n.cross(c,r),i.cross(c,o);var l=this.jacobianElementA,u=this.jacobianElementB;return c.negate(l.spatial),r.negate(l.rotational),u.spatial.copy(c),u.rotational.copy(o),-this.computeGW()*e-t*this.computeGiMf()}},function(t,e){var n=function(){};t.exports=n,n.prototype={constructor:n,addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e),this},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},hasAnyEventListener:function(t){return void 0!==this._listeners&&void 0!==this._listeners[t]},removeEventListener:function(t,e){if(void 0===this._listeners)return this;var n=this._listeners;if(void 0===n[t])return this;var i=n[t].indexOf(e);return-1!==i&&n[t].splice(i,1),this},dispatchEvent:function(t){if(void 0===this._listeners)return this;var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=0,i=e.length;n<i;n++)e[n].call(this,t)}return this}}},function(t,e,n){(function(i){function r(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==i&&"env"in i&&(t=i.env.DEBUG),t}(e=t.exports=n(194)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++r)}),t.splice(o,0,i)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=r,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(r())}).call(this,n(76))},function(t,e,n){"use strict";e.__esModule=!0;var i,r=(i=n(2))&&i.__esModule?i:{default:i};e.default=function(){var t=null,e=[];return{setPrompt:function(e){return(0,r.default)(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,i,o){if(null!=t){var a="function"==typeof t?t(e,n):t;"string"==typeof a?"function"==typeof i?i(a,o):((0,r.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==a)}else o(!0)},appendListener:function(t){var n=!0,i=function(){n&&t.apply(void 0,arguments)};return e.push(i),function(){n=!1,e=e.filter(function(t){return t!==i})}},notifyListeners:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];e.forEach(function(t){return t.apply(void 0,n)})}}}},function(t,e,n){"use strict";e.__esModule=!0,e.locationsAreEqual=e.createLocation=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=s(n(55)),o=s(n(54)),a=n(7);function s(t){return t&&t.__esModule?t:{default:t}}e.createLocation=function(t,e,n,o){var s=void 0;"string"==typeof t?(s=(0,a.parsePath)(t)).state=e:(void 0===(s=i({},t)).pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==e&&void 0===s.state&&(s.state=e));try{s.pathname=decodeURI(s.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(s.key=n),o?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=(0,r.default)(s.pathname,o.pathname)):s.pathname=o.pathname:s.pathname||(s.pathname="/"),s},e.locationsAreEqual=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&(0,o.default)(t.state,e.state)}},function(t,e,n){"use strict";function i(t){return function(){return t}}var r=function(){};r.thatReturns=i,r.thatReturnsFalse=i(!1),r.thatReturnsTrue=i(!0),r.thatReturnsNull=i(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(t){return t},t.exports=r},function(t,e,n){"use strict";n.r(e);var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(Array.isArray(e))return Array.isArray(n)&&e.length===n.length&&e.every(function(e,i){return t(e,n[i])});var r=void 0===e?"undefined":i(e);if(r!==(void 0===n?"undefined":i(n)))return!1;if("object"===r){var o=e.valueOf(),a=n.valueOf();if(o!==e||a!==n)return t(o,a);var s=Object.keys(e),c=Object.keys(n);return s.length===c.length&&s.every(function(i){return t(e[i],n[i])})}return!1}},function(t,e,n){"use strict";function i(t){return"/"===t.charAt(0)}function r(t,e){for(var n=e,i=n+1,r=t.length;i<r;n+=1,i+=1)t[n]=t[i];t.pop()}n.r(e),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t&&t.split("/")||[],o=e&&e.split("/")||[],a=t&&i(t),s=e&&i(e),c=a||s;if(t&&i(t)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";var l=void 0;if(o.length){var u=o[o.length-1];l="."===u||".."===u||""===u}else l=!1;for(var h=0,d=o.length;d>=0;d--){var p=o[d];"."===p?r(o,d):".."===p?(r(o,d),h++):h&&(r(o,d),h--)}if(!c)for(;h--;h)o.unshift("..");!c||""===o[0]||o[0]&&i(o[0])||o.unshift("");var f=o.join("/");return l&&"/"!==f.substr(-1)&&(f+="/"),f}},function(t,e,n){"use strict";(function(t,i){var r,o=n(85);r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:i;var a=Object(o.a)(r);e.a=a}).call(this,n(23),n(215)(t))},function(t,e,n){"use strict";var i=n(233),r="object"==typeof self&&self&&self.Object===Object&&self,o=(i.a||r||Function("return this")()).Symbol,a=Object.prototype,s=a.hasOwnProperty,c=a.toString,l=o?o.toStringTag:void 0,u=Object.prototype.toString,h=o?o.toStringTag:void 0,d=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":h&&h in Object(t)?function(t){var e=s.call(t,l),n=t[l];try{t[l]=void 0;var i=!0}catch(t){}var r=c.call(t);return i&&(e?t[l]=n:delete t[l]),r}(t):function(t){return u.call(t)}(t)},p=function(t,e){return function(n){return t(e(n))}}(Object.getPrototypeOf,Object),f=Function.prototype,m=Object.prototype,g=f.toString,v=m.hasOwnProperty,y=g.call(Object);e.a=function(t){if(!function(t){return null!=t&&"object"==typeof t}(t)||"[object Object]"!=d(t))return!1;var e=p(t);if(null===e)return!0;var n=v.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&g.call(n)==y}},function(t,e,n){var i;i=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){"use strict";function i(){}i.DEFAULT_SOURCE_GAIN=1,i.LISTENER_MAX_OUTSIDE_ROOM_DISTANCE=1,i.SOURCE_MAX_OUTSIDE_ROOM_DISTANCE=1,i.DEFAULT_SOURCE_DISTANCE=1,i.DEFAULT_POSITION=[0,0,0],i.DEFAULT_FORWARD=[0,0,-1],i.DEFAULT_UP=[0,1,0],i.DEFAULT_RIGHT=[1,0,0],i.DEFAULT_SPEED_OF_SOUND=343,i.ATTENUATION_ROLLOFFS=["logarithmic","linear","none"],i.DEFAULT_ATTENUATION_ROLLOFF="logarithmic",i.DEFAULT_MIN_DISTANCE=1,i.DEFAULT_MAX_DISTANCE=1e3,i.DEFAULT_DIRECTIVITY_ALPHA=0,i.DEFAULT_DIRECTIVITY_SHARPNESS=1,i.DEFAULT_AZIMUTH=0,i.DEFAULT_ELEVATION=0,i.DEFAULT_AMBISONIC_ORDER=1,i.DEFAULT_SOURCE_WIDTH=0,i.DEFAULT_REFLECTION_MAX_DURATION=.5,i.DEFAULT_REFLECTION_CUTOFF_FREQUENCY=6400,i.DEFAULT_REFLECTION_COEFFICIENTS={left:0,right:0,front:0,back:0,down:0,up:0},i.DEFAULT_REFLECTION_MIN_DISTANCE=1,i.DEFAULT_ROOM_DIMENSIONS={width:0,height:0,depth:0},i.DEFAULT_REFLECTION_MULTIPLIER=1,i.DEFAULT_REVERB_BANDWIDTH=1,i.DEFAULT_REVERB_DURATION_MULTIPLIER=1,i.DEFAULT_REVERB_PREDELAY=1.5,i.DEFAULT_REVERB_TAIL_ONSET=3.8,i.DEFAULT_REVERB_GAIN=.01,i.DEFAULT_REVERB_MAX_DURATION=3,i.DEFAULT_REVERB_FREQUENCY_BANDS=[31.25,62.5,125,250,500,1e3,2e3,4e3,8e3],i.NUMBER_REVERB_FREQUENCY_BANDS=i.DEFAULT_REVERB_FREQUENCY_BANDS.length,i.DEFAULT_REVERB_DURATIONS=new Float32Array(i.NUMBER_REVERB_FREQUENCY_BANDS),i.ROOM_MATERIAL_COEFFICIENTS={transparent:[1,1,1,1,1,1,1,1,1],"acoustic-ceiling-tiles":[.672,.675,.7,.66,.72,.92,.88,.75,1],"brick-bare":[.03,.03,.03,.03,.03,.04,.05,.07,.14],"brick-painted":[.006,.007,.01,.01,.02,.02,.02,.03,.06],"concrete-block-coarse":[.36,.36,.36,.44,.31,.29,.39,.25,.5],"concrete-block-painted":[.092,.09,.1,.05,.06,.07,.09,.08,.16],"curtain-heavy":[.073,.106,.14,.35,.55,.72,.7,.65,1],"fiber-glass-insulation":[.193,.22,.22,.82,.99,.99,.99,.99,1],"glass-thin":[.18,.169,.18,.06,.04,.03,.02,.02,.04],"glass-thick":[.35,.35,.35,.25,.18,.12,.07,.04,.08],grass:[.05,.05,.15,.25,.4,.55,.6,.6,.6],"linoleum-on-concrete":[.02,.02,.02,.03,.03,.03,.03,.02,.04],marble:[.01,.01,.01,.01,.01,.01,.02,.02,.04],metal:[.03,.035,.04,.04,.05,.05,.05,.07,.09],"parquet-on-concrete":[.028,.03,.04,.04,.07,.06,.06,.07,.14],"plaster-rough":[.017,.018,.02,.03,.04,.05,.04,.03,.06],"plaster-smooth":[.011,.012,.013,.015,.02,.03,.04,.05,.1],"plywood-panel":[.4,.34,.28,.22,.17,.09,.1,.11,.22],"polished-concrete-or-tile":[.008,.008,.01,.01,.015,.02,.02,.02,.04],"sheet-rock":[.29,.279,.29,.1,.05,.04,.07,.09,.18],"water-or-ice-surface":[.006,.006,.008,.008,.013,.015,.02,.025,.05],"wood-ceiling":[.15,.147,.15,.11,.1,.07,.06,.07,.14],"wood-panel":[.28,.28,.28,.22,.17,.09,.1,.11,.22],uniform:[.5,.5,.5,.5,.5,.5,.5,.5,.5]},i.DEFAULT_ROOM_MATERIALS={left:"transparent",right:"transparent",front:"transparent",back:"transparent",down:"transparent",up:"transparent"},i.NUMBER_REFLECTION_AVERAGING_BANDS=3,i.ROOM_STARTING_AVERAGING_BAND=4,i.ROOM_MIN_VOLUME=1e-4,i.ROOM_AIR_ABSORPTION_COEFFICIENTS=[6e-4,6e-4,7e-4,8e-4,.001,.0015,.0026,.006,.0207],i.ROOM_EYRING_CORRECTION_COEFFICIENT=1.38,i.TWO_PI=6.28318530717959,i.TWENTY_FOUR_LOG10=55.2620422318571,i.LOG1000=6.90775527898214,i.LOG2_DIV2=.346573590279973,i.DEGREES_TO_RADIANS=.017453292519943,i.RADIANS_TO_DEGREES=57.29577951308232,i.EPSILON_FLOAT=1e-8,i.log=function(){window.console.log.apply(window.console,["%c[ResonanceAudio]%c "+Array.prototype.slice.call(arguments).join(" ")+" %c(@"+performance.now().toFixed(2)+"ms)","background: #BBDEFB; color: #FF5722; font-weight: 700","font-weight: 400","color: #AAA"])},i.normalizeVector=function(t){let n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return n>e.EPSILON_FLOAT&&(n=1/n,t[0]*=n,t[1]*=n,t[2]*=n),t},i.crossProduct=function(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]},t.exports=i},function(t,e,n){"use strict";const i=n(3),r=n(0);function o(t,e){void 0==e&&(e={}),void 0==e.ambisonicOrder&&(e.ambisonicOrder=r.DEFAULT_AMBISONIC_ORDER),void 0==e.azimuth&&(e.azimuth=r.DEFAULT_AZIMUTH),void 0==e.elevation&&(e.elevation=r.DEFAULT_ELEVATION),void 0==e.sourceWidth&&(e.sourceWidth=r.DEFAULT_SOURCE_WIDTH),this._context=t,this.input=t.createGain(),this._channelGain=[],this._merger=void 0,this.output=t.createGain(),this.setAmbisonicOrder(e.ambisonicOrder),this._azimuth=e.azimuth,this._elevation=e.elevation,this.setSourceWidth(e.sourceWidth)}o.prototype.setAmbisonicOrder=function(t){this._ambisonicOrder=o.validateAmbisonicOrder(t),this.input.disconnect();for(let t=0;t<this._channelGain.length;t++)this._channelGain[t].disconnect();void 0!=this._merger&&this._merger.disconnect(),delete this._channelGain,delete this._merger;let e=(this._ambisonicOrder+1)*(this._ambisonicOrder+1);this._merger=this._context.createChannelMerger(e),this._channelGain=new Array(e);for(let t=0;t<e;t++)this._channelGain[t]=this._context.createGain(),this.input.connect(this._channelGain[t]),this._channelGain[t].connect(this._merger,0,t);this._merger.connect(this.output)},o.prototype.setDirection=function(t,e){(void 0==t||isNaN(t))&&(t=r.DEFAULT_AZIMUTH),(void 0==e||isNaN(e))&&(e=r.DEFAULT_ELEVATION),this._azimuth=t,this._elevation=e,(t=Math.round(t%360))<0&&(t+=360),e=Math.round(Math.min(90,Math.max(-90,e)))+90,this._channelGain[0].gain.value=i.MAX_RE_WEIGHTS[this._spreadIndex][0];for(let n=1;n<=this._ambisonicOrder;n++){let r=i.MAX_RE_WEIGHTS[this._spreadIndex][n];for(let o=-n;o<=n;o++){let a=n*n+n+o,s=n*(n+1)/2+Math.abs(o)-1,c=i.SPHERICAL_HARMONICS[1][e][s];if(0!=o){let e=i.SPHERICAL_HARMONICS_MAX_ORDER+o-1;o<0&&(e=i.SPHERICAL_HARMONICS_MAX_ORDER+o),c*=i.SPHERICAL_HARMONICS[0][t][e]}this._channelGain[a].gain.value=c*r}}},o.prototype.setSourceWidth=function(t){this._spreadIndex=Math.min(359,Math.max(0,Math.round(t))),this.setDirection(this._azimuth,this._elevation)},o.validateAmbisonicOrder=function(t){return isNaN(t)||void 0==t?(r.log("Error: Invalid ambisonic order",options.ambisonicOrder,"\nUsing ambisonicOrder=1 instead."),t=1):t<1?(r.log("Error: Unable to render ambisonic order",options.ambisonicOrder,"(Min order is 1)","\nUsing min order instead."),t=1):t>i.SPHERICAL_HARMONICS_MAX_ORDER&&(r.log("Error: Unable to render ambisonic order",options.ambisonicOrder,"(Max order is",i.SPHERICAL_HARMONICS_MAX_ORDER,")\nUsing max order instead."),options.ambisonicOrder=i.SPHERICAL_HARMONICS_MAX_ORDER),t},t.exports=o},function(t,e,n){"use strict";const i=n(12),r=n(1),o=n(0);function a(t,e){void 0==e&&(e={}),void 0==e.ambisonicOrder&&(e.ambisonicOrder=o.DEFAULT_AMBISONIC_ORDER),void 0==e.position&&(e.position=o.DEFAULT_POSITION.slice()),void 0==e.forward&&(e.forward=o.DEFAULT_FORWARD.slice()),void 0==e.up&&(e.up=o.DEFAULT_UP.slice()),this.position=new Float32Array(3),this._tempMatrix3=new Float32Array(9),this._ambisonicOrder=r.validateAmbisonicOrder(e.ambisonicOrder),this._context=t,1==this._ambisonicOrder?this._renderer=i.Omnitone.createFOARenderer(t,{}):this._ambisonicOrder>1&&(this._renderer=i.Omnitone.createHOARenderer(t,{ambisonicOrder:this._ambisonicOrder})),this.input=t.createGain(),this.output=t.createGain(),this.ambisonicOutput=t.createGain();let n=this;this._renderer.initialize().then(function(){n.input.connect(n._renderer.input),n._ambisonicOrder>1?n._renderer._hoaRotator.output.connect(n.ambisonicOutput):n._renderer._foaRotator.output.connect(n.ambisonicOutput),n._renderer.output.connect(n.output)}),this.setOrientation(e.forward[0],e.forward[1],e.forward[2],e.up[0],e.up[1],e.up[2])}a.prototype.setOrientation=function(t,e,n,i,r,a){let s=o.crossProduct([t,e,n],[i,r,a]);this._tempMatrix3[0]=s[0],this._tempMatrix3[1]=s[1],this._tempMatrix3[2]=s[2],this._tempMatrix3[3]=i,this._tempMatrix3[4]=r,this._tempMatrix3[5]=a,this._tempMatrix3[6]=t,this._tempMatrix3[7]=e,this._tempMatrix3[8]=n,this._renderer.setRotationMatrix3(this._tempMatrix3)},a.prototype.setFromMatrix=function(t){this._renderer.setRotationMatrix4(t.elements),this.position[0]=t.elements[12],this.position[1]=t.elements[13],this.position[2]=t.elements[14]},t.exports=a},function(t,e,n){"use strict";e.SPHERICAL_HARMONICS=[[[0,0,0,1,1,1],[.052336,.034899,.017452,.999848,.999391,.99863],[.104528,.069756,.034899,.999391,.997564,.994522],[.156434,.104528,.052336,.99863,.994522,.987688],[.207912,.139173,.069756,.997564,.990268,.978148],[.258819,.173648,.087156,.996195,.984808,.965926],[.309017,.207912,.104528,.994522,.978148,.951057],[.358368,.241922,.121869,.992546,.970296,.93358],[.406737,.275637,.139173,.990268,.961262,.913545],[.45399,.309017,.156434,.987688,.951057,.891007],[.5,.34202,.173648,.984808,.939693,.866025],[.544639,.374607,.190809,.981627,.927184,.838671],[.587785,.406737,.207912,.978148,.913545,.809017],[.62932,.438371,.224951,.97437,.898794,.777146],[.669131,.469472,.241922,.970296,.882948,.743145],[.707107,.5,.258819,.965926,.866025,.707107],[.743145,.529919,.275637,.961262,.848048,.669131],[.777146,.559193,.292372,.956305,.829038,.62932],[.809017,.587785,.309017,.951057,.809017,.587785],[.838671,.615661,.325568,.945519,.788011,.544639],[.866025,.642788,.34202,.939693,.766044,.5],[.891007,.669131,.358368,.93358,.743145,.45399],[.913545,.694658,.374607,.927184,.71934,.406737],[.93358,.71934,.390731,.920505,.694658,.358368],[.951057,.743145,.406737,.913545,.669131,.309017],[.965926,.766044,.422618,.906308,.642788,.258819],[.978148,.788011,.438371,.898794,.615661,.207912],[.987688,.809017,.45399,.891007,.587785,.156434],[.994522,.829038,.469472,.882948,.559193,.104528],[.99863,.848048,.48481,.87462,.529919,.052336],[1,.866025,.5,.866025,.5,0],[.99863,.882948,.515038,.857167,.469472,-.052336],[.994522,.898794,.529919,.848048,.438371,-.104528],[.987688,.913545,.544639,.838671,.406737,-.156434],[.978148,.927184,.559193,.829038,.374607,-.207912],[.965926,.939693,.573576,.819152,.34202,-.258819],[.951057,.951057,.587785,.809017,.309017,-.309017],[.93358,.961262,.601815,.798636,.275637,-.358368],[.913545,.970296,.615661,.788011,.241922,-.406737],[.891007,.978148,.62932,.777146,.207912,-.45399],[.866025,.984808,.642788,.766044,.173648,-.5],[.838671,.990268,.656059,.75471,.139173,-.544639],[.809017,.994522,.669131,.743145,.104528,-.587785],[.777146,.997564,.681998,.731354,.069756,-.62932],[.743145,.999391,.694658,.71934,.034899,-.669131],[.707107,1,.707107,.707107,0,-.707107],[.669131,.999391,.71934,.694658,-.034899,-.743145],[.62932,.997564,.731354,.681998,-.069756,-.777146],[.587785,.994522,.743145,.669131,-.104528,-.809017],[.544639,.990268,.75471,.656059,-.139173,-.838671],[.5,.984808,.766044,.642788,-.173648,-.866025],[.45399,.978148,.777146,.62932,-.207912,-.891007],[.406737,.970296,.788011,.615661,-.241922,-.913545],[.358368,.961262,.798636,.601815,-.275637,-.93358],[.309017,.951057,.809017,.587785,-.309017,-.951057],[.258819,.939693,.819152,.573576,-.34202,-.965926],[.207912,.927184,.829038,.559193,-.374607,-.978148],[.156434,.913545,.838671,.544639,-.406737,-.987688],[.104528,.898794,.848048,.529919,-.438371,-.994522],[.052336,.882948,.857167,.515038,-.469472,-.99863],[0,.866025,.866025,.5,-.5,-1],[-.052336,.848048,.87462,.48481,-.529919,-.99863],[-.104528,.829038,.882948,.469472,-.559193,-.994522],[-.156434,.809017,.891007,.45399,-.587785,-.987688],[-.207912,.788011,.898794,.438371,-.615661,-.978148],[-.258819,.766044,.906308,.422618,-.642788,-.965926],[-.309017,.743145,.913545,.406737,-.669131,-.951057],[-.358368,.71934,.920505,.390731,-.694658,-.93358],[-.406737,.694658,.927184,.374607,-.71934,-.913545],[-.45399,.669131,.93358,.358368,-.743145,-.891007],[-.5,.642788,.939693,.34202,-.766044,-.866025],[-.544639,.615661,.945519,.325568,-.788011,-.838671],[-.587785,.587785,.951057,.309017,-.809017,-.809017],[-.62932,.559193,.956305,.292372,-.829038,-.777146],[-.669131,.529919,.961262,.275637,-.848048,-.743145],[-.707107,.5,.965926,.258819,-.866025,-.707107],[-.743145,.469472,.970296,.241922,-.882948,-.669131],[-.777146,.438371,.97437,.224951,-.898794,-.62932],[-.809017,.406737,.978148,.207912,-.913545,-.587785],[-.838671,.374607,.981627,.190809,-.927184,-.544639],[-.866025,.34202,.984808,.173648,-.939693,-.5],[-.891007,.309017,.987688,.156434,-.951057,-.45399],[-.913545,.275637,.990268,.139173,-.961262,-.406737],[-.93358,.241922,.992546,.121869,-.970296,-.358368],[-.951057,.207912,.994522,.104528,-.978148,-.309017],[-.965926,.173648,.996195,.087156,-.984808,-.258819],[-.978148,.139173,.997564,.069756,-.990268,-.207912],[-.987688,.104528,.99863,.052336,-.994522,-.156434],[-.994522,.069756,.999391,.034899,-.997564,-.104528],[-.99863,.034899,.999848,.017452,-.999391,-.052336],[-1,0,1,0,-1,-0],[-.99863,-.034899,.999848,-.017452,-.999391,.052336],[-.994522,-.069756,.999391,-.034899,-.997564,.104528],[-.987688,-.104528,.99863,-.052336,-.994522,.156434],[-.978148,-.139173,.997564,-.069756,-.990268,.207912],[-.965926,-.173648,.996195,-.087156,-.984808,.258819],[-.951057,-.207912,.994522,-.104528,-.978148,.309017],[-.93358,-.241922,.992546,-.121869,-.970296,.358368],[-.913545,-.275637,.990268,-.139173,-.961262,.406737],[-.891007,-.309017,.987688,-.156434,-.951057,.45399],[-.866025,-.34202,.984808,-.173648,-.939693,.5],[-.838671,-.374607,.981627,-.190809,-.927184,.544639],[-.809017,-.406737,.978148,-.207912,-.913545,.587785],[-.777146,-.438371,.97437,-.224951,-.898794,.62932],[-.743145,-.469472,.970296,-.241922,-.882948,.669131],[-.707107,-.5,.965926,-.258819,-.866025,.707107],[-.669131,-.529919,.961262,-.275637,-.848048,.743145],[-.62932,-.559193,.956305,-.292372,-.829038,.777146],[-.587785,-.587785,.951057,-.309017,-.809017,.809017],[-.544639,-.615661,.945519,-.325568,-.788011,.838671],[-.5,-.642788,.939693,-.34202,-.766044,.866025],[-.45399,-.669131,.93358,-.358368,-.743145,.891007],[-.406737,-.694658,.927184,-.374607,-.71934,.913545],[-.358368,-.71934,.920505,-.390731,-.694658,.93358],[-.309017,-.743145,.913545,-.406737,-.669131,.951057],[-.258819,-.766044,.906308,-.422618,-.642788,.965926],[-.207912,-.788011,.898794,-.438371,-.615661,.978148],[-.156434,-.809017,.891007,-.45399,-.587785,.987688],[-.104528,-.829038,.882948,-.469472,-.559193,.994522],[-.052336,-.848048,.87462,-.48481,-.529919,.99863],[-0,-.866025,.866025,-.5,-.5,1],[.052336,-.882948,.857167,-.515038,-.469472,.99863],[.104528,-.898794,.848048,-.529919,-.438371,.994522],[.156434,-.913545,.838671,-.544639,-.406737,.987688],[.207912,-.927184,.829038,-.559193,-.374607,.978148],[.258819,-.939693,.819152,-.573576,-.34202,.965926],[.309017,-.951057,.809017,-.587785,-.309017,.951057],[.358368,-.961262,.798636,-.601815,-.275637,.93358],[.406737,-.970296,.788011,-.615661,-.241922,.913545],[.45399,-.978148,.777146,-.62932,-.207912,.891007],[.5,-.984808,.766044,-.642788,-.173648,.866025],[.544639,-.990268,.75471,-.656059,-.139173,.838671],[.587785,-.994522,.743145,-.669131,-.104528,.809017],[.62932,-.997564,.731354,-.681998,-.069756,.777146],[.669131,-.999391,.71934,-.694658,-.034899,.743145],[.707107,-1,.707107,-.707107,-0,.707107],[.743145,-.999391,.694658,-.71934,.034899,.669131],[.777146,-.997564,.681998,-.731354,.069756,.62932],[.809017,-.994522,.669131,-.743145,.104528,.587785],[.838671,-.990268,.656059,-.75471,.139173,.544639],[.866025,-.984808,.642788,-.766044,.173648,.5],[.891007,-.978148,.62932,-.777146,.207912,.45399],[.913545,-.970296,.615661,-.788011,.241922,.406737],[.93358,-.961262,.601815,-.798636,.275637,.358368],[.951057,-.951057,.587785,-.809017,.309017,.309017],[.965926,-.939693,.573576,-.819152,.34202,.258819],[.978148,-.927184,.559193,-.829038,.374607,.207912],[.987688,-.913545,.544639,-.838671,.406737,.156434],[.994522,-.898794,.529919,-.848048,.438371,.104528],[.99863,-.882948,.515038,-.857167,.469472,.052336],[1,-.866025,.5,-.866025,.5,0],[.99863,-.848048,.48481,-.87462,.529919,-.052336],[.994522,-.829038,.469472,-.882948,.559193,-.104528],[.987688,-.809017,.45399,-.891007,.587785,-.156434],[.978148,-.788011,.438371,-.898794,.615661,-.207912],[.965926,-.766044,.422618,-.906308,.642788,-.258819],[.951057,-.743145,.406737,-.913545,.669131,-.309017],[.93358,-.71934,.390731,-.920505,.694658,-.358368],[.913545,-.694658,.374607,-.927184,.71934,-.406737],[.891007,-.669131,.358368,-.93358,.743145,-.45399],[.866025,-.642788,.34202,-.939693,.766044,-.5],[.838671,-.615661,.325568,-.945519,.788011,-.544639],[.809017,-.587785,.309017,-.951057,.809017,-.587785],[.777146,-.559193,.292372,-.956305,.829038,-.62932],[.743145,-.529919,.275637,-.961262,.848048,-.669131],[.707107,-.5,.258819,-.965926,.866025,-.707107],[.669131,-.469472,.241922,-.970296,.882948,-.743145],[.62932,-.438371,.224951,-.97437,.898794,-.777146],[.587785,-.406737,.207912,-.978148,.913545,-.809017],[.544639,-.374607,.190809,-.981627,.927184,-.838671],[.5,-.34202,.173648,-.984808,.939693,-.866025],[.45399,-.309017,.156434,-.987688,.951057,-.891007],[.406737,-.275637,.139173,-.990268,.961262,-.913545],[.358368,-.241922,.121869,-.992546,.970296,-.93358],[.309017,-.207912,.104528,-.994522,.978148,-.951057],[.258819,-.173648,.087156,-.996195,.984808,-.965926],[.207912,-.139173,.069756,-.997564,.990268,-.978148],[.156434,-.104528,.052336,-.99863,.994522,-.987688],[.104528,-.069756,.034899,-.999391,.997564,-.994522],[.052336,-.034899,.017452,-.999848,.999391,-.99863],[0,-0,0,-1,1,-1],[-.052336,.034899,-.017452,-.999848,.999391,-.99863],[-.104528,.069756,-.034899,-.999391,.997564,-.994522],[-.156434,.104528,-.052336,-.99863,.994522,-.987688],[-.207912,.139173,-.069756,-.997564,.990268,-.978148],[-.258819,.173648,-.087156,-.996195,.984808,-.965926],[-.309017,.207912,-.104528,-.994522,.978148,-.951057],[-.358368,.241922,-.121869,-.992546,.970296,-.93358],[-.406737,.275637,-.139173,-.990268,.961262,-.913545],[-.45399,.309017,-.156434,-.987688,.951057,-.891007],[-.5,.34202,-.173648,-.984808,.939693,-.866025],[-.544639,.374607,-.190809,-.981627,.927184,-.838671],[-.587785,.406737,-.207912,-.978148,.913545,-.809017],[-.62932,.438371,-.224951,-.97437,.898794,-.777146],[-.669131,.469472,-.241922,-.970296,.882948,-.743145],[-.707107,.5,-.258819,-.965926,.866025,-.707107],[-.743145,.529919,-.275637,-.961262,.848048,-.669131],[-.777146,.559193,-.292372,-.956305,.829038,-.62932],[-.809017,.587785,-.309017,-.951057,.809017,-.587785],[-.838671,.615661,-.325568,-.945519,.788011,-.544639],[-.866025,.642788,-.34202,-.939693,.766044,-.5],[-.891007,.669131,-.358368,-.93358,.743145,-.45399],[-.913545,.694658,-.374607,-.927184,.71934,-.406737],[-.93358,.71934,-.390731,-.920505,.694658,-.358368],[-.951057,.743145,-.406737,-.913545,.669131,-.309017],[-.965926,.766044,-.422618,-.906308,.642788,-.258819],[-.978148,.788011,-.438371,-.898794,.615661,-.207912],[-.987688,.809017,-.45399,-.891007,.587785,-.156434],[-.994522,.829038,-.469472,-.882948,.559193,-.104528],[-.99863,.848048,-.48481,-.87462,.529919,-.052336],[-1,.866025,-.5,-.866025,.5,0],[-.99863,.882948,-.515038,-.857167,.469472,.052336],[-.994522,.898794,-.529919,-.848048,.438371,.104528],[-.987688,.913545,-.544639,-.838671,.406737,.156434],[-.978148,.927184,-.559193,-.829038,.374607,.207912],[-.965926,.939693,-.573576,-.819152,.34202,.258819],[-.951057,.951057,-.587785,-.809017,.309017,.309017],[-.93358,.961262,-.601815,-.798636,.275637,.358368],[-.913545,.970296,-.615661,-.788011,.241922,.406737],[-.891007,.978148,-.62932,-.777146,.207912,.45399],[-.866025,.984808,-.642788,-.766044,.173648,.5],[-.838671,.990268,-.656059,-.75471,.139173,.544639],[-.809017,.994522,-.669131,-.743145,.104528,.587785],[-.777146,.997564,-.681998,-.731354,.069756,.62932],[-.743145,.999391,-.694658,-.71934,.034899,.669131],[-.707107,1,-.707107,-.707107,0,.707107],[-.669131,.999391,-.71934,-.694658,-.034899,.743145],[-.62932,.997564,-.731354,-.681998,-.069756,.777146],[-.587785,.994522,-.743145,-.669131,-.104528,.809017],[-.544639,.990268,-.75471,-.656059,-.139173,.838671],[-.5,.984808,-.766044,-.642788,-.173648,.866025],[-.45399,.978148,-.777146,-.62932,-.207912,.891007],[-.406737,.970296,-.788011,-.615661,-.241922,.913545],[-.358368,.961262,-.798636,-.601815,-.275637,.93358],[-.309017,.951057,-.809017,-.587785,-.309017,.951057],[-.258819,.939693,-.819152,-.573576,-.34202,.965926],[-.207912,.927184,-.829038,-.559193,-.374607,.978148],[-.156434,.913545,-.838671,-.544639,-.406737,.987688],[-.104528,.898794,-.848048,-.529919,-.438371,.994522],[-.052336,.882948,-.857167,-.515038,-.469472,.99863],[-0,.866025,-.866025,-.5,-.5,1],[.052336,.848048,-.87462,-.48481,-.529919,.99863],[.104528,.829038,-.882948,-.469472,-.559193,.994522],[.156434,.809017,-.891007,-.45399,-.587785,.987688],[.207912,.788011,-.898794,-.438371,-.615661,.978148],[.258819,.766044,-.906308,-.422618,-.642788,.965926],[.309017,.743145,-.913545,-.406737,-.669131,.951057],[.358368,.71934,-.920505,-.390731,-.694658,.93358],[.406737,.694658,-.927184,-.374607,-.71934,.913545],[.45399,.669131,-.93358,-.358368,-.743145,.891007],[.5,.642788,-.939693,-.34202,-.766044,.866025],[.544639,.615661,-.945519,-.325568,-.788011,.838671],[.587785,.587785,-.951057,-.309017,-.809017,.809017],[.62932,.559193,-.956305,-.292372,-.829038,.777146],[.669131,.529919,-.961262,-.275637,-.848048,.743145],[.707107,.5,-.965926,-.258819,-.866025,.707107],[.743145,.469472,-.970296,-.241922,-.882948,.669131],[.777146,.438371,-.97437,-.224951,-.898794,.62932],[.809017,.406737,-.978148,-.207912,-.913545,.587785],[.838671,.374607,-.981627,-.190809,-.927184,.544639],[.866025,.34202,-.984808,-.173648,-.939693,.5],[.891007,.309017,-.987688,-.156434,-.951057,.45399],[.913545,.275637,-.990268,-.139173,-.961262,.406737],[.93358,.241922,-.992546,-.121869,-.970296,.358368],[.951057,.207912,-.994522,-.104528,-.978148,.309017],[.965926,.173648,-.996195,-.087156,-.984808,.258819],[.978148,.139173,-.997564,-.069756,-.990268,.207912],[.987688,.104528,-.99863,-.052336,-.994522,.156434],[.994522,.069756,-.999391,-.034899,-.997564,.104528],[.99863,.034899,-.999848,-.017452,-.999391,.052336],[1,0,-1,-0,-1,0],[.99863,-.034899,-.999848,.017452,-.999391,-.052336],[.994522,-.069756,-.999391,.034899,-.997564,-.104528],[.987688,-.104528,-.99863,.052336,-.994522,-.156434],[.978148,-.139173,-.997564,.069756,-.990268,-.207912],[.965926,-.173648,-.996195,.087156,-.984808,-.258819],[.951057,-.207912,-.994522,.104528,-.978148,-.309017],[.93358,-.241922,-.992546,.121869,-.970296,-.358368],[.913545,-.275637,-.990268,.139173,-.961262,-.406737],[.891007,-.309017,-.987688,.156434,-.951057,-.45399],[.866025,-.34202,-.984808,.173648,-.939693,-.5],[.838671,-.374607,-.981627,.190809,-.927184,-.544639],[.809017,-.406737,-.978148,.207912,-.913545,-.587785],[.777146,-.438371,-.97437,.224951,-.898794,-.62932],[.743145,-.469472,-.970296,.241922,-.882948,-.669131],[.707107,-.5,-.965926,.258819,-.866025,-.707107],[.669131,-.529919,-.961262,.275637,-.848048,-.743145],[.62932,-.559193,-.956305,.292372,-.829038,-.777146],[.587785,-.587785,-.951057,.309017,-.809017,-.809017],[.544639,-.615661,-.945519,.325568,-.788011,-.838671],[.5,-.642788,-.939693,.34202,-.766044,-.866025],[.45399,-.669131,-.93358,.358368,-.743145,-.891007],[.406737,-.694658,-.927184,.374607,-.71934,-.913545],[.358368,-.71934,-.920505,.390731,-.694658,-.93358],[.309017,-.743145,-.913545,.406737,-.669131,-.951057],[.258819,-.766044,-.906308,.422618,-.642788,-.965926],[.207912,-.788011,-.898794,.438371,-.615661,-.978148],[.156434,-.809017,-.891007,.45399,-.587785,-.987688],[.104528,-.829038,-.882948,.469472,-.559193,-.994522],[.052336,-.848048,-.87462,.48481,-.529919,-.99863],[0,-.866025,-.866025,.5,-.5,-1],[-.052336,-.882948,-.857167,.515038,-.469472,-.99863],[-.104528,-.898794,-.848048,.529919,-.438371,-.994522],[-.156434,-.913545,-.838671,.544639,-.406737,-.987688],[-.207912,-.927184,-.829038,.559193,-.374607,-.978148],[-.258819,-.939693,-.819152,.573576,-.34202,-.965926],[-.309017,-.951057,-.809017,.587785,-.309017,-.951057],[-.358368,-.961262,-.798636,.601815,-.275637,-.93358],[-.406737,-.970296,-.788011,.615661,-.241922,-.913545],[-.45399,-.978148,-.777146,.62932,-.207912,-.891007],[-.5,-.984808,-.766044,.642788,-.173648,-.866025],[-.544639,-.990268,-.75471,.656059,-.139173,-.838671],[-.587785,-.994522,-.743145,.669131,-.104528,-.809017],[-.62932,-.997564,-.731354,.681998,-.069756,-.777146],[-.669131,-.999391,-.71934,.694658,-.034899,-.743145],[-.707107,-1,-.707107,.707107,-0,-.707107],[-.743145,-.999391,-.694658,.71934,.034899,-.669131],[-.777146,-.997564,-.681998,.731354,.069756,-.62932],[-.809017,-.994522,-.669131,.743145,.104528,-.587785],[-.838671,-.990268,-.656059,.75471,.139173,-.544639],[-.866025,-.984808,-.642788,.766044,.173648,-.5],[-.891007,-.978148,-.62932,.777146,.207912,-.45399],[-.913545,-.970296,-.615661,.788011,.241922,-.406737],[-.93358,-.961262,-.601815,.798636,.275637,-.358368],[-.951057,-.951057,-.587785,.809017,.309017,-.309017],[-.965926,-.939693,-.573576,.819152,.34202,-.258819],[-.978148,-.927184,-.559193,.829038,.374607,-.207912],[-.987688,-.913545,-.544639,.838671,.406737,-.156434],[-.994522,-.898794,-.529919,.848048,.438371,-.104528],[-.99863,-.882948,-.515038,.857167,.469472,-.052336],[-1,-.866025,-.5,.866025,.5,-0],[-.99863,-.848048,-.48481,.87462,.529919,.052336],[-.994522,-.829038,-.469472,.882948,.559193,.104528],[-.987688,-.809017,-.45399,.891007,.587785,.156434],[-.978148,-.788011,-.438371,.898794,.615661,.207912],[-.965926,-.766044,-.422618,.906308,.642788,.258819],[-.951057,-.743145,-.406737,.913545,.669131,.309017],[-.93358,-.71934,-.390731,.920505,.694658,.358368],[-.913545,-.694658,-.374607,.927184,.71934,.406737],[-.891007,-.669131,-.358368,.93358,.743145,.45399],[-.866025,-.642788,-.34202,.939693,.766044,.5],[-.838671,-.615661,-.325568,.945519,.788011,.544639],[-.809017,-.587785,-.309017,.951057,.809017,.587785],[-.777146,-.559193,-.292372,.956305,.829038,.62932],[-.743145,-.529919,-.275637,.961262,.848048,.669131],[-.707107,-.5,-.258819,.965926,.866025,.707107],[-.669131,-.469472,-.241922,.970296,.882948,.743145],[-.62932,-.438371,-.224951,.97437,.898794,.777146],[-.587785,-.406737,-.207912,.978148,.913545,.809017],[-.544639,-.374607,-.190809,.981627,.927184,.838671],[-.5,-.34202,-.173648,.984808,.939693,.866025],[-.45399,-.309017,-.156434,.987688,.951057,.891007],[-.406737,-.275637,-.139173,.990268,.961262,.913545],[-.358368,-.241922,-.121869,.992546,.970296,.93358],[-.309017,-.207912,-.104528,.994522,.978148,.951057],[-.258819,-.173648,-.087156,.996195,.984808,.965926],[-.207912,-.139173,-.069756,.997564,.990268,.978148],[-.156434,-.104528,-.052336,.99863,.994522,.987688],[-.104528,-.069756,-.034899,.999391,.997564,.994522],[-.052336,-.034899,-.017452,.999848,.999391,.99863]],[[-1,-0,1,-0,0,-1,-0,0,-0],[-.999848,.017452,.999543,-.030224,264e-6,-.999086,.042733,-59e-5,4e-6],[-.999391,.034899,.998173,-.060411,.001055,-.996348,.085356,-.002357,34e-6],[-.99863,.052336,.995891,-.090524,.002372,-.991791,.127757,-.005297,113e-6],[-.997564,.069756,.992701,-.120527,.004214,-.985429,.169828,-.0094,268e-6],[-.996195,.087156,.988606,-.150384,.006578,-.977277,.21146,-.014654,523e-6],[-.994522,.104528,.983611,-.180057,.009462,-.967356,.252544,-.021043,903e-6],[-.992546,.121869,.977722,-.209511,.012862,-.955693,.292976,-.028547,.001431],[-.990268,.139173,.970946,-.238709,.016774,-.942316,.332649,-.037143,.002131],[-.987688,.156434,.963292,-.267617,.021193,-.927262,.371463,-.046806,.003026],[-.984808,.173648,.954769,-.296198,.026114,-.910569,.409317,-.057505,.00414],[-.981627,.190809,.945388,-.324419,.03153,-.892279,.446114,-.069209,.005492],[-.978148,.207912,.935159,-.352244,.037436,-.872441,.481759,-.08188,.007105],[-.97437,.224951,.924096,-.379641,.043823,-.851105,.516162,-.095481,.008999],[-.970296,.241922,.912211,-.406574,.050685,-.828326,.549233,-.109969,.011193],[-.965926,.258819,.899519,-.433013,.058013,-.804164,.580889,-.1253,.013707],[-.961262,.275637,.886036,-.458924,.065797,-.77868,.61105,-.141427,.016556],[-.956305,.292372,.871778,-.484275,.074029,-.75194,.639639,-.158301,.019758],[-.951057,.309017,.856763,-.509037,.082698,-.724012,.666583,-.175868,.023329],[-.945519,.325568,.841008,-.533178,.091794,-.694969,.691816,-.194075,.027281],[-.939693,.34202,.824533,-.55667,.101306,-.664885,.715274,-.212865,.03163],[-.93358,.358368,.807359,-.579484,.111222,-.633837,.736898,-.23218,.036385],[-.927184,.374607,.789505,-.601592,.121529,-.601904,.756637,-.25196,.041559],[-.920505,.390731,.770994,-.622967,.132217,-.569169,.774442,-.272143,.04716],[-.913545,.406737,.751848,-.643582,.143271,-.535715,.79027,-.292666,.053196],[-.906308,.422618,.732091,-.663414,.154678,-.501627,.804083,-.313464,.059674],[-.898794,.438371,.711746,-.682437,.166423,-.466993,.81585,-.334472,.066599],[-.891007,.45399,.690839,-.700629,.178494,-.431899,.825544,-.355623,.073974],[-.882948,.469472,.669395,-.717968,.190875,-.396436,.833145,-.376851,.081803],[-.87462,.48481,.647439,-.734431,.203551,-.360692,.838638,-.398086,.090085],[-.866025,.5,.625,-.75,.216506,-.32476,.842012,-.419263,.098821],[-.857167,.515038,.602104,-.764655,.229726,-.288728,.843265,-.440311,.108009],[-.848048,.529919,.578778,-.778378,.243192,-.252688,.842399,-.461164,.117644],[-.838671,.544639,.555052,-.791154,.256891,-.21673,.839422,-.481753,.127722],[-.829038,.559193,.530955,-.802965,.270803,-.180944,.834347,-.502011,.138237],[-.819152,.573576,.506515,-.813798,.284914,-.14542,.827194,-.521871,.149181],[-.809017,.587785,.481763,-.823639,.299204,-.110246,.817987,-.541266,.160545],[-.798636,.601815,.456728,-.832477,.313658,-.075508,.806757,-.560132,.172317],[-.788011,.615661,.431441,-.840301,.328257,-.041294,.793541,-.578405,.184487],[-.777146,.62932,.405934,-.847101,.342984,-.007686,.778379,-.596021,.19704],[-.766044,.642788,.380236,-.852869,.357821,.025233,.761319,-.612921,.209963],[-.75471,.656059,.35438,-.857597,.372749,.057383,.742412,-.629044,.223238],[-.743145,.669131,.328396,-.861281,.387751,.088686,.721714,-.644334,.23685],[-.731354,.681998,.302317,-.863916,.402807,.119068,.699288,-.658734,.250778],[-.71934,.694658,.276175,-.865498,.417901,.148454,.675199,-.67219,.265005],[-.707107,.707107,.25,-.866025,.433013,.176777,.649519,-.684653,.279508],[-.694658,.71934,.223825,-.865498,.448125,.203969,.622322,-.696073,.294267],[-.681998,.731354,.197683,-.863916,.463218,.229967,.593688,-.706405,.309259],[-.669131,.743145,.171604,-.861281,.478275,.254712,.5637,-.715605,.324459],[-.656059,.75471,.14562,-.857597,.493276,.278147,.532443,-.723633,.339844],[-.642788,.766044,.119764,-.852869,.508205,.300221,.500009,-.730451,.355387],[-.62932,.777146,.094066,-.847101,.523041,.320884,.46649,-.736025,.371063],[-.615661,.788011,.068559,-.840301,.537768,.340093,.431982,-.740324,.386845],[-.601815,.798636,.043272,-.832477,.552367,.357807,.396584,-.74332,.402704],[-.587785,.809017,.018237,-.823639,.566821,.373991,.360397,-.744989,.418613],[-.573576,.819152,-.006515,-.813798,.581112,.388612,.323524,-.745308,.434544],[-.559193,.829038,-.030955,-.802965,.595222,.401645,.286069,-.744262,.450467],[-.544639,.838671,-.055052,-.791154,.609135,.413066,.24814,-.741835,.466352],[-.529919,.848048,-.078778,-.778378,.622833,.422856,.209843,-.738017,.482171],[-.515038,.857167,-.102104,-.764655,.6363,.431004,.171288,-.732801,.497894],[-.5,.866025,-.125,-.75,.649519,.4375,.132583,-.726184,.51349],[-.48481,.87462,-.147439,-.734431,.662474,.44234,.093837,-.718167,.528929],[-.469472,.882948,-.169395,-.717968,.67515,.445524,.05516,-.708753,.544183],[-.45399,.891007,-.190839,-.700629,.687531,.447059,.016662,-.69795,.55922],[-.438371,.898794,-.211746,-.682437,.699602,.446953,-.02155,-.685769,.574011],[-.422618,.906308,-.232091,-.663414,.711348,.445222,-.059368,-.672226,.588528],[-.406737,.913545,-.251848,-.643582,.722755,.441884,-.096684,-.657339,.602741],[-.390731,.920505,-.270994,-.622967,.733809,.436964,-.133395,-.64113,.616621],[-.374607,.927184,-.289505,-.601592,.744496,.430488,-.169397,-.623624,.630141],[-.358368,.93358,-.307359,-.579484,.754804,.422491,-.204589,-.604851,.643273],[-.34202,.939693,-.324533,-.55667,.76472,.413008,-.238872,-.584843,.65599],[-.325568,.945519,-.341008,-.533178,.774231,.402081,-.27215,-.563635,.668267],[-.309017,.951057,-.356763,-.509037,.783327,.389754,-.304329,-.541266,.680078],[-.292372,.956305,-.371778,-.484275,.791997,.376077,-.335319,-.517778,.691399],[-.275637,.961262,-.386036,-.458924,.800228,.361102,-.365034,-.493216,.702207],[-.258819,.965926,-.399519,-.433013,.808013,.344885,-.393389,-.467627,.712478],[-.241922,.970296,-.412211,-.406574,.81534,.327486,-.420306,-.441061,.722191],[-.224951,.97437,-.424096,-.379641,.822202,.308969,-.445709,-.413572,.731327],[-.207912,.978148,-.435159,-.352244,.828589,.289399,-.469527,-.385215,.739866],[-.190809,.981627,-.445388,-.324419,.834495,.268846,-.491693,-.356047,.74779],[-.173648,.984808,-.454769,-.296198,.839912,.247382,-.512145,-.326129,.755082],[-.156434,.987688,-.463292,-.267617,.844832,.225081,-.530827,-.295521,.761728],[-.139173,.990268,-.470946,-.238709,.849251,.20202,-.547684,-.264287,.767712],[-.121869,.992546,-.477722,-.209511,.853163,.178279,-.562672,-.232494,.773023],[-.104528,.994522,-.483611,-.180057,.856563,.153937,-.575747,-.200207,.777648],[-.087156,.996195,-.488606,-.150384,.859447,.129078,-.586872,-.167494,.781579],[-.069756,.997564,-.492701,-.120527,.861811,.103786,-.596018,-.134426,.784806],[-.052336,.99863,-.495891,-.090524,.863653,.078146,-.603158,-.101071,.787324],[-.034899,.999391,-.498173,-.060411,.864971,.052243,-.608272,-.0675,.789126],[-.017452,.999848,-.499543,-.030224,.865762,.026165,-.611347,-.033786,.790208],[0,1,-.5,0,.866025,-0,-.612372,0,.790569],[.017452,.999848,-.499543,.030224,.865762,-.026165,-.611347,.033786,.790208],[.034899,.999391,-.498173,.060411,.864971,-.052243,-.608272,.0675,.789126],[.052336,.99863,-.495891,.090524,.863653,-.078146,-.603158,.101071,.787324],[.069756,.997564,-.492701,.120527,.861811,-.103786,-.596018,.134426,.784806],[.087156,.996195,-.488606,.150384,.859447,-.129078,-.586872,.167494,.781579],[.104528,.994522,-.483611,.180057,.856563,-.153937,-.575747,.200207,.777648],[.121869,.992546,-.477722,.209511,.853163,-.178279,-.562672,.232494,.773023],[.139173,.990268,-.470946,.238709,.849251,-.20202,-.547684,.264287,.767712],[.156434,.987688,-.463292,.267617,.844832,-.225081,-.530827,.295521,.761728],[.173648,.984808,-.454769,.296198,.839912,-.247382,-.512145,.326129,.755082],[.190809,.981627,-.445388,.324419,.834495,-.268846,-.491693,.356047,.74779],[.207912,.978148,-.435159,.352244,.828589,-.289399,-.469527,.385215,.739866],[.224951,.97437,-.424096,.379641,.822202,-.308969,-.445709,.413572,.731327],[.241922,.970296,-.412211,.406574,.81534,-.327486,-.420306,.441061,.722191],[.258819,.965926,-.399519,.433013,.808013,-.344885,-.393389,.467627,.712478],[.275637,.961262,-.386036,.458924,.800228,-.361102,-.365034,.493216,.702207],[.292372,.956305,-.371778,.484275,.791997,-.376077,-.335319,.517778,.691399],[.309017,.951057,-.356763,.509037,.783327,-.389754,-.304329,.541266,.680078],[.325568,.945519,-.341008,.533178,.774231,-.402081,-.27215,.563635,.668267],[.34202,.939693,-.324533,.55667,.76472,-.413008,-.238872,.584843,.65599],[.358368,.93358,-.307359,.579484,.754804,-.422491,-.204589,.604851,.643273],[.374607,.927184,-.289505,.601592,.744496,-.430488,-.169397,.623624,.630141],[.390731,.920505,-.270994,.622967,.733809,-.436964,-.133395,.64113,.616621],[.406737,.913545,-.251848,.643582,.722755,-.441884,-.096684,.657339,.602741],[.422618,.906308,-.232091,.663414,.711348,-.445222,-.059368,.672226,.588528],[.438371,.898794,-.211746,.682437,.699602,-.446953,-.02155,.685769,.574011],[.45399,.891007,-.190839,.700629,.687531,-.447059,.016662,.69795,.55922],[.469472,.882948,-.169395,.717968,.67515,-.445524,.05516,.708753,.544183],[.48481,.87462,-.147439,.734431,.662474,-.44234,.093837,.718167,.528929],[.5,.866025,-.125,.75,.649519,-.4375,.132583,.726184,.51349],[.515038,.857167,-.102104,.764655,.6363,-.431004,.171288,.732801,.497894],[.529919,.848048,-.078778,.778378,.622833,-.422856,.209843,.738017,.482171],[.544639,.838671,-.055052,.791154,.609135,-.413066,.24814,.741835,.466352],[.559193,.829038,-.030955,.802965,.595222,-.401645,.286069,.744262,.450467],[.573576,.819152,-.006515,.813798,.581112,-.388612,.323524,.745308,.434544],[.587785,.809017,.018237,.823639,.566821,-.373991,.360397,.744989,.418613],[.601815,.798636,.043272,.832477,.552367,-.357807,.396584,.74332,.402704],[.615661,.788011,.068559,.840301,.537768,-.340093,.431982,.740324,.386845],[.62932,.777146,.094066,.847101,.523041,-.320884,.46649,.736025,.371063],[.642788,.766044,.119764,.852869,.508205,-.300221,.500009,.730451,.355387],[.656059,.75471,.14562,.857597,.493276,-.278147,.532443,.723633,.339844],[.669131,.743145,.171604,.861281,.478275,-.254712,.5637,.715605,.324459],[.681998,.731354,.197683,.863916,.463218,-.229967,.593688,.706405,.309259],[.694658,.71934,.223825,.865498,.448125,-.203969,.622322,.696073,.294267],[.707107,.707107,.25,.866025,.433013,-.176777,.649519,.684653,.279508],[.71934,.694658,.276175,.865498,.417901,-.148454,.675199,.67219,.265005],[.731354,.681998,.302317,.863916,.402807,-.119068,.699288,.658734,.250778],[.743145,.669131,.328396,.861281,.387751,-.088686,.721714,.644334,.23685],[.75471,.656059,.35438,.857597,.372749,-.057383,.742412,.629044,.223238],[.766044,.642788,.380236,.852869,.357821,-.025233,.761319,.612921,.209963],[.777146,.62932,.405934,.847101,.342984,.007686,.778379,.596021,.19704],[.788011,.615661,.431441,.840301,.328257,.041294,.793541,.578405,.184487],[.798636,.601815,.456728,.832477,.313658,.075508,.806757,.560132,.172317],[.809017,.587785,.481763,.823639,.299204,.110246,.817987,.541266,.160545],[.819152,.573576,.506515,.813798,.284914,.14542,.827194,.521871,.149181],[.829038,.559193,.530955,.802965,.270803,.180944,.834347,.502011,.138237],[.838671,.544639,.555052,.791154,.256891,.21673,.839422,.481753,.127722],[.848048,.529919,.578778,.778378,.243192,.252688,.842399,.461164,.117644],[.857167,.515038,.602104,.764655,.229726,.288728,.843265,.440311,.108009],[.866025,.5,.625,.75,.216506,.32476,.842012,.419263,.098821],[.87462,.48481,.647439,.734431,.203551,.360692,.838638,.398086,.090085],[.882948,.469472,.669395,.717968,.190875,.396436,.833145,.376851,.081803],[.891007,.45399,.690839,.700629,.178494,.431899,.825544,.355623,.073974],[.898794,.438371,.711746,.682437,.166423,.466993,.81585,.334472,.066599],[.906308,.422618,.732091,.663414,.154678,.501627,.804083,.313464,.059674],[.913545,.406737,.751848,.643582,.143271,.535715,.79027,.292666,.053196],[.920505,.390731,.770994,.622967,.132217,.569169,.774442,.272143,.04716],[.927184,.374607,.789505,.601592,.121529,.601904,.756637,.25196,.041559],[.93358,.358368,.807359,.579484,.111222,.633837,.736898,.23218,.036385],[.939693,.34202,.824533,.55667,.101306,.664885,.715274,.212865,.03163],[.945519,.325568,.841008,.533178,.091794,.694969,.691816,.194075,.027281],[.951057,.309017,.856763,.509037,.082698,.724012,.666583,.175868,.023329],[.956305,.292372,.871778,.484275,.074029,.75194,.639639,.158301,.019758],[.961262,.275637,.886036,.458924,.065797,.77868,.61105,.141427,.016556],[.965926,.258819,.899519,.433013,.058013,.804164,.580889,.1253,.013707],[.970296,.241922,.912211,.406574,.050685,.828326,.549233,.109969,.011193],[.97437,.224951,.924096,.379641,.043823,.851105,.516162,.095481,.008999],[.978148,.207912,.935159,.352244,.037436,.872441,.481759,.08188,.007105],[.981627,.190809,.945388,.324419,.03153,.892279,.446114,.069209,.005492],[.984808,.173648,.954769,.296198,.026114,.910569,.409317,.057505,.00414],[.987688,.156434,.963292,.267617,.021193,.927262,.371463,.046806,.003026],[.990268,.139173,.970946,.238709,.016774,.942316,.332649,.037143,.002131],[.992546,.121869,.977722,.209511,.012862,.955693,.292976,.028547,.001431],[.994522,.104528,.983611,.180057,.009462,.967356,.252544,.021043,903e-6],[.996195,.087156,.988606,.150384,.006578,.977277,.21146,.014654,523e-6],[.997564,.069756,.992701,.120527,.004214,.985429,.169828,.0094,268e-6],[.99863,.052336,.995891,.090524,.002372,.991791,.127757,.005297,113e-6],[.999391,.034899,.998173,.060411,.001055,.996348,.085356,.002357,34e-6],[.999848,.017452,.999543,.030224,264e-6,.999086,.042733,59e-5,4e-6],[1,-0,1,-0,0,1,-0,0,-0]]],e.SPHERICAL_HARMONICS_AZIMUTH_RESOLUTION=e.SPHERICAL_HARMONICS[0].length,e.SPHERICAL_HARMONICS_ELEVATION_RESOLUTION=e.SPHERICAL_HARMONICS[1].length,e.SPHERICAL_HARMONICS_MAX_ORDER=e.SPHERICAL_HARMONICS[0][0].length/2,e.MAX_RE_WEIGHTS=[[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1.003236,1.002156,.999152,.990038],[1.03237,1.021194,.990433,.898572],[1.062694,1.040231,.979161,.799806],[1.093999,1.058954,.964976,.693603],[1.126003,1.077006,.947526,.57989],[1.158345,1.093982,.926474,.45869],[1.19059,1.109437,.901512,.330158],[1.222228,1.12289,.87237,.194621],[1.252684,1.133837,.838839,.052614],[1.281987,1.142358,.801199,0],[1.312073,1.150207,.760839,0],[1.343011,1.157424,.717799,0],[1.374649,1.163859,.671999,0],[1.406809,1.169354,.623371,0],[1.439286,1.173739,.571868,0],[1.471846,1.176837,.517465,0],[1.504226,1.178465,.460174,0],[1.536133,1.178438,.400043,0],[1.567253,1.176573,.337165,0],[1.597247,1.172695,.271688,0],[1.625766,1.166645,.203815,0],[1.652455,1.158285,.133806,0],[1.676966,1.147506,.061983,0],[1.699006,1.134261,0,0],[1.720224,1.119789,0,0],[1.741631,1.10481,0,0],[1.763183,1.08933,0,0],[1.784837,1.073356,0,0],[1.806548,1.056898,0,0],[1.828269,1.039968,0,0],[1.849952,1.02258,0,0],[1.871552,1.004752,0,0],[1.893018,.986504,0,0],[1.914305,.967857,0,0],[1.935366,.948837,0,0],[1.956154,.929471,0,0],[1.976625,.90979,0,0],[1.996736,.889823,0,0],[2.016448,.869607,0,0],[2.035721,.849175,0,0],[2.054522,.828565,0,0],[2.072818,.807816,0,0],[2.090581,.786964,0,0],[2.107785,.766051,0,0],[2.124411,.745115,0,0],[2.140439,.724196,0,0],[2.155856,.703332,0,0],[2.170653,.682561,0,0],[2.184823,.661921,0,0],[2.198364,.641445,0,0],[2.211275,.621169,0,0],[2.223562,.601125,0,0],[2.23523,.581341,0,0],[2.246289,.561847,0,0],[2.256751,.542667,0,0],[2.266631,.523826,0,0],[2.275943,.505344,0,0],[2.284707,.487239,0,0],[2.292939,.469528,0,0],[2.300661,.452225,0,0],[2.307892,.435342,0,0],[2.314654,.418888,0,0],[2.320969,.40287,0,0],[2.326858,.387294,0,0],[2.332343,.372164,0,0],[2.337445,.357481,0,0],[2.342186,.343246,0,0],[2.346585,.329458,0,0],[2.350664,.316113,0,0],[2.354442,.303208,0,0],[2.357937,.290738,0,0],[2.361168,.278698,0,0],[2.364152,.26708,0,0],[2.366906,.255878,0,0],[2.369446,.245082,0,0],[2.371786,.234685,0,0],[2.37394,.224677,0,0],[2.375923,.215048,0,0],[2.377745,.20579,0,0],[2.379421,.196891,0,0],[2.380959,.188342,0,0],[2.382372,.180132,0,0],[2.383667,.172251,0,0],[2.384856,.164689,0,0],[2.385945,.157435,0,0],[2.386943,.150479,0,0],[2.387857,.143811,0,0],[2.388694,.137421,0,0],[2.38946,.131299,0,0],[2.39016,.125435,0,0],[2.390801,.11982,0,0],[2.391386,.114445,0,0],[2.391921,.1093,0,0],[2.39241,.104376,0,0],[2.392857,.099666,0,0],[2.393265,.09516,0,0],[2.393637,.090851,0,0],[2.393977,.086731,0,0],[2.394288,.082791,0,0],[2.394571,.079025,0,0],[2.394829,.075426,0,0],[2.395064,.071986,0,0],[2.395279,.068699,0,0],[2.395475,.065558,0,0],[2.395653,.062558,0,0],[2.395816,.059693,0,0],[2.395964,.056955,0,0],[2.396099,.054341,0,0],[2.396222,.051845,0,0],[2.396334,.049462,0,0],[2.396436,.047186,0,0],[2.396529,.045013,0,0],[2.396613,.042939,0,0],[2.396691,.040959,0,0],[2.396761,.039069,0,0],[2.396825,.037266,0,0],[2.396883,.035544,0,0],[2.396936,.033901,0,0],[2.396984,.032334,0,0],[2.397028,.030838,0,0],[2.397068,.02941,0,0],[2.397104,.028048,0,0],[2.397137,.026749,0,0],[2.397167,.025509,0,0],[2.397194,.024326,0,0],[2.397219,.023198,0,0],[2.397242,.022122,0,0],[2.397262,.021095,0,0],[2.397281,.020116,0,0],[2.397298,.019181,0,0],[2.397314,.01829,0,0],[2.397328,.017441,0,0],[2.397341,.01663,0,0],[2.397352,.015857,0,0],[2.397363,.015119,0,0],[2.397372,.014416,0,0],[2.397381,.013745,0,0],[2.397389,.013106,0,0],[2.397396,.012496,0,0],[2.397403,.011914,0,0],[2.397409,.01136,0,0],[2.397414,.010831,0,0],[2.397419,.010326,0,0],[2.397424,.009845,0,0],[2.397428,.009387,0,0],[2.397432,.008949,0,0],[2.397435,.008532,0,0],[2.397438,.008135,0,0],[2.397441,.007755,0,0],[2.397443,.007394,0,0],[2.397446,.007049,0,0],[2.397448,.006721,0,0],[2.39745,.006407,0,0],[2.397451,.006108,0,0],[2.397453,.005824,0,0],[2.397454,.005552,0,0],[2.397456,.005293,0,0],[2.397457,.005046,0,0],[2.397458,.004811,0,0],[2.397459,.004586,0,0],[2.39746,.004372,0,0],[2.397461,.004168,0,0],[2.397461,.003974,0,0],[2.397462,.003788,0,0],[2.397463,.003611,0,0],[2.397463,.003443,0,0],[2.397464,.003282,0,0],[2.397464,.003129,0,0],[2.397465,.002983,0,0],[2.397465,.002844,0,0],[2.397465,.002711,0,0],[2.397466,.002584,0,0],[2.397466,.002464,0,0],[2.397466,.002349,0,0],[2.397466,.002239,0,0],[2.397467,.002135,0,0],[2.397467,.002035,0,0],[2.397467,.00194,0,0],[2.397467,.001849,0,0],[2.397467,.001763,0,0],[2.397467,.001681,0,0],[2.397468,.001602,0,0],[2.397468,.001527,0,0],[2.397468,.001456,0,0],[2.397468,.001388,0,0],[2.397468,.001323,0,0],[2.397468,.001261,0,0],[2.397468,.001202,0,0],[2.397468,.001146,0,0],[2.397468,.001093,0,0],[2.397468,.001042,0,0],[2.397468,993e-6,0,0],[2.397468,947e-6,0,0],[2.397468,902e-6,0,0],[2.397468,86e-5,0,0],[2.397468,82e-5,0,0],[2.397469,782e-6,0,0],[2.397469,745e-6,0,0],[2.397469,71e-5,0,0],[2.397469,677e-6,0,0],[2.397469,646e-6,0,0],[2.397469,616e-6,0,0],[2.397469,587e-6,0,0],[2.397469,559e-6,0,0],[2.397469,533e-6,0,0],[2.397469,508e-6,0,0],[2.397469,485e-6,0,0],[2.397469,462e-6,0,0],[2.397469,44e-5,0,0],[2.397469,42e-5,0,0],[2.397469,4e-4,0,0],[2.397469,381e-6,0,0],[2.397469,364e-6,0,0],[2.397469,347e-6,0,0],[2.397469,33e-5,0,0],[2.397469,315e-6,0,0],[2.397469,3e-4,0,0],[2.397469,286e-6,0,0],[2.397469,273e-6,0,0],[2.397469,26e-5,0,0],[2.397469,248e-6,0,0],[2.397469,236e-6,0,0],[2.397469,225e-6,0,0],[2.397469,215e-6,0,0],[2.397469,205e-6,0,0],[2.397469,195e-6,0,0],[2.397469,186e-6,0,0],[2.397469,177e-6,0,0],[2.397469,169e-6,0,0],[2.397469,161e-6,0,0],[2.397469,154e-6,0,0],[2.397469,147e-6,0,0],[2.397469,14e-5,0,0],[2.397469,133e-6,0,0],[2.397469,127e-6,0,0],[2.397469,121e-6,0,0],[2.397469,115e-6,0,0],[2.397469,11e-5,0,0],[2.397469,105e-6,0,0],[2.397469,1e-4,0,0],[2.397469,95e-6,0,0],[2.397469,91e-6,0,0],[2.397469,87e-6,0,0],[2.397469,83e-6,0,0],[2.397469,79e-6,0,0],[2.397469,75e-6,0,0],[2.397469,71e-6,0,0],[2.397469,68e-6,0,0],[2.397469,65e-6,0,0],[2.397469,62e-6,0,0],[2.397469,59e-6,0,0],[2.397469,56e-6,0,0],[2.397469,54e-6,0,0],[2.397469,51e-6,0,0],[2.397469,49e-6,0,0],[2.397469,46e-6,0,0],[2.397469,44e-6,0,0],[2.397469,42e-6,0,0],[2.397469,4e-5,0,0],[2.397469,38e-6,0,0],[2.397469,37e-6,0,0],[2.397469,35e-6,0,0],[2.397469,33e-6,0,0],[2.397469,32e-6,0,0],[2.397469,3e-5,0,0],[2.397469,29e-6,0,0],[2.397469,27e-6,0,0],[2.397469,26e-6,0,0],[2.397469,25e-6,0,0],[2.397469,24e-6,0,0],[2.397469,23e-6,0,0],[2.397469,22e-6,0,0],[2.397469,21e-6,0,0],[2.397469,2e-5,0,0],[2.397469,19e-6,0,0],[2.397469,18e-6,0,0],[2.397469,17e-6,0,0],[2.397469,16e-6,0,0],[2.397469,15e-6,0,0],[2.397469,15e-6,0,0],[2.397469,14e-6,0,0],[2.397469,13e-6,0,0],[2.397469,13e-6,0,0],[2.397469,12e-6,0,0],[2.397469,12e-6,0,0],[2.397469,11e-6,0,0],[2.397469,11e-6,0,0],[2.397469,1e-5,0,0],[2.397469,1e-5,0,0],[2.397469,9e-6,0,0],[2.397469,9e-6,0,0],[2.397469,8e-6,0,0],[2.397469,8e-6,0,0],[2.397469,8e-6,0,0],[2.397469,7e-6,0,0],[2.397469,7e-6,0,0],[2.397469,7e-6,0,0],[2.397469,6e-6,0,0],[2.397469,6e-6,0,0],[2.397469,6e-6,0,0],[2.397469,5e-6,0,0],[2.397469,5e-6,0,0],[2.397469,5e-6,0,0],[2.397469,5e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,4e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,3e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,2e-6,0,0],[2.397469,1e-6,0,0],[2.397469,1e-6,0,0],[2.397469,1e-6,0,0]],e.MAX_RE_WEIGHTS_RESOLUTION=e.MAX_RE_WEIGHTS.length},function(t,e,n){"use strict";const i=n(5),r=n(6),o=n(1),a=n(0);function s(t,e){void 0==e&&(e={}),void 0==e.position&&(e.position=a.DEFAULT_POSITION.slice()),void 0==e.forward&&(e.forward=a.DEFAULT_FORWARD.slice()),void 0==e.up&&(e.up=a.DEFAULT_UP.slice()),void 0==e.minDistance&&(e.minDistance=a.DEFAULT_MIN_DISTANCE),void 0==e.maxDistance&&(e.maxDistance=a.DEFAULT_MAX_DISTANCE),void 0==e.rolloff&&(e.rolloff=a.DEFAULT_ROLLOFF),void 0==e.gain&&(e.gain=a.DEFAULT_SOURCE_GAIN),void 0==e.alpha&&(e.alpha=a.DEFAULT_DIRECTIVITY_ALPHA),void 0==e.sharpness&&(e.sharpness=a.DEFAULT_DIRECTIVITY_SHARPNESS),void 0==e.sourceWidth&&(e.sourceWidth=a.DEFAULT_SOURCE_WIDTH),this._scene=t,this._position=e.position,this._forward=e.forward,this._up=e.up,this._dx=new Float32Array(3),this._right=a.crossProduct(this._forward,this._up);let n=t._context;this.input=n.createGain(),this._directivity=new i(n,{alpha:e.alpha,sharpness:e.sharpness}),this._toEarly=n.createGain(),this._toLate=n.createGain(),this._attenuation=new r(n,{minDistance:e.minDistance,maxDistance:e.maxDistance,rolloff:e.rolloff}),this._encoder=new o(n,{ambisonicOrder:t._ambisonicOrder,sourceWidth:e.sourceWidth}),this.input.connect(this._toLate),this._toLate.connect(t._room.late.input),this.input.connect(this._attenuation.input),this._attenuation.output.connect(this._toEarly),this._toEarly.connect(t._room.early.input),this._attenuation.output.connect(this._directivity.input),this._directivity.output.connect(this._encoder.input),this._encoder.output.connect(t._listener.input),this.setPosition(e.position[0],e.position[1],e.position[2]),this.input.gain.value=e.gain}s.prototype.setPosition=function(t,e,n){this._position[0]=t,this._position[1]=e,this._position[2]=n;let i=function(t){let e=1;return t>a.EPSILON_FLOAT&&(e=1-t/a.SOURCE_MAX_OUTSIDE_ROOM_DISTANCE,e=Math.max(0,Math.min(1,e))),e}(this._scene._room.getDistanceOutsideRoom(this._position[0],this._position[1],this._position[2]));this._toLate.gain.value=i,this._toEarly.gain.value=i,this._update()},s.prototype._update=function(){for(let t=0;t<3;t++)this._dx[t]=this._position[t]-this._scene._listener.position[t];let t=Math.sqrt(this._dx[0]*this._dx[0]+this._dx[1]*this._dx[1]+this._dx[2]*this._dx[2]);t>0&&(this._dx[0]/=t,this._dx[1]/=t,this._dx[2]/=t);let e=Math.atan2(-this._dx[0],this._dx[2])*a.RADIANS_TO_DEGREES,n=Math.atan2(this._dx[1],Math.sqrt(this._dx[0]*this._dx[0]+this._dx[2]*this._dx[2]))*a.RADIANS_TO_DEGREES;this._attenuation.setDistance(t),this._directivity.computeAngle(this._forward,this._dx),this._encoder.setDirection(e,n)},s.prototype.setRolloff=function(t){this._attenuation.setRolloff(t)},s.prototype.setMinDistance=function(t){this._attenuation.minDistance=t},s.prototype.setMaxDistance=function(t){this._attenuation.maxDistance=t},s.prototype.setGain=function(t){this.input.gain.value=t},s.prototype.setOrientation=function(t,e,n,i,r,o){this._forward[0]=t,this._forward[1]=e,this._forward[2]=n,this._up[0]=i,this._up[1]=r,this._up[2]=o,this._right=a.crossProduct(this._forward,this._up)},s.prototype.setFromMatrix=function(t){this._right[0]=t.elements[0],this._right[1]=t.elements[1],this._right[2]=t.elements[2],this._up[0]=t.elements[4],this._up[1]=t.elements[5],this._up[2]=t.elements[6],this._forward[0]=t.elements[8],this._forward[1]=t.elements[9],this._forward[2]=t.elements[10],this._right=a.normalizeVector(this._right),this._up=a.normalizeVector(this._up),this._forward=a.normalizeVector(this._forward),this.setPosition(t.elements[12],t.elements[13],t.elements[14])},s.prototype.setSourceWidth=function(t){this._encoder.setSourceWidth(t),this.setPosition(this._position[0],this._position[1],this._position[2])},s.prototype.setDirectivityPattern=function(t,e){this._directivity.setPattern(t,e),this.setPosition(this._position[0],this._position[1],this._position[2])},t.exports=s},function(t,e,n){"use strict";const i=n(0);function r(t,e){void 0==e&&(e={}),void 0==e.alpha&&(e.alpha=i.DEFAULT_DIRECTIVITY_ALPHA),void 0==e.sharpness&&(e.sharpness=i.DEFAULT_DIRECTIVITY_SHARPNESS),this._context=t,this._lowpass=t.createBiquadFilter(),this._lowpass.type="lowpass",this._lowpass.Q.value=0,this._lowpass.frequency.value=.5*t.sampleRate,this._cosTheta=0,this.setPattern(e.alpha,e.sharpness),this.input=this._lowpass,this.output=this._lowpass}r.prototype.computeAngle=function(t,e){let n=i.normalizeVector(t),r=i.normalizeVector(e),o=1;if(this._alpha>i.EPSILON_FLOAT){let t=n[0]*r[0]+n[1]*r[1]+n[2]*r[2];o=1-this._alpha+this._alpha*t,o=Math.pow(Math.abs(o),this._sharpness)}this._lowpass.frequency.value=.5*this._context.sampleRate*o},r.prototype.setPattern=function(t,e){this._alpha=Math.min(1,Math.max(0,t)),this._sharpness=Math.max(1,e),this.computeAngle([this._cosTheta*this._cosTheta,0,0],[1,0,0])},t.exports=r},function(t,e,n){"use strict";const i=n(0);function r(t,e){void 0==e&&(e={}),void 0==e.minDistance&&(e.minDistance=i.DEFAULT_MIN_DISTANCE),void 0==e.maxDistance&&(e.maxDistance=i.DEFAULT_MAX_DISTANCE),void 0==e.rolloff&&(e.rolloff=i.DEFAULT_ATTENUATION_ROLLOFF),this.minDistance=e.minDistance,this.maxDistance=e.maxDistance,this.setRolloff(e.rolloff),this._gainNode=t.createGain(),this.setDistance(e.maxDistance),this.input=this._gainNode,this.output=this._gainNode}r.prototype.setDistance=function(t){let e=1;if("logarithmic"==this._rolloff){if(t>this.maxDistance)e=0;else if(t>this.minDistance){let n=this.maxDistance-this.minDistance;if(n>i.EPSILON_FLOAT){let i=1/(n+1);e=(1/(t-this.minDistance+1)-i)/(1-i)}}}else if("linear"==this._rolloff)if(t>this.maxDistance)e=0;else if(t>this.minDistance){let n=this.maxDistance-this.minDistance;n>i.EPSILON_FLOAT&&(e=(this.maxDistance-t)/n)}this._gainNode.gain.value=e},r.prototype.setRolloff=function(t){let e=~i.ATTENUATION_ROLLOFFS.indexOf(t);void 0!=t&&e?t=t.toString().toLowerCase():(e||i.log('Invalid rolloff model ("'+t+'"). Using default: "'+i.DEFAULT_ATTENUATION_ROLLOFF+'".'),t=i.DEFAULT_ATTENUATION_ROLLOFF),this._rolloff=t},t.exports=r},function(t,e,n){"use strict";const i=n(8),r=n(9),o=n(0);function a(t){let e={};for(let t in o.DEFAULT_ROOM_MATERIALS)o.DEFAULT_ROOM_MATERIALS.hasOwnProperty(t)&&(e[t]=o.ROOM_MATERIAL_COEFFICIENTS[o.DEFAULT_ROOM_MATERIALS[t]]);void 0==t&&(t={},Object.assign(t,o.DEFAULT_ROOM_MATERIALS));for(let n in o.DEFAULT_ROOM_MATERIALS)o.DEFAULT_ROOM_MATERIALS.hasOwnProperty(n)&&t.hasOwnProperty(n)?t[n]in o.ROOM_MATERIAL_COEFFICIENTS?e[n]=o.ROOM_MATERIAL_COEFFICIENTS[t[n]]:o.log('Material "'+t[n]+'" on wall "'+n+'" not found. Using "'+o.DEFAULT_ROOM_MATERIALS[n]+'".'):o.log('Wall "'+n+'" is not defined. Default used.');return e}function s(t){void 0==t&&(t={});for(let e in o.DEFAULT_ROOM_DIMENSIONS)t.hasOwnProperty(e)||(t[e]=o.DEFAULT_ROOM_DIMENSIONS[e]);return t}function c(t,e,n){let i=new Float32Array(o.NUMBER_REVERB_FREQUENCY_BANDS);t=s(t),e=function(t){void 0==t&&(t={});for(let e in o.DEFAULT_ROOM_MATERIALS)t.hasOwnProperty(e)||(t[e]=o.ROOM_MATERIAL_COEFFICIENTS[o.DEFAULT_ROOM_MATERIALS[e]]);return t}(e),void 0==n&&(n=o.DEFAULT_SPEED_OF_SOUND);let r=o.TWENTY_FOUR_LOG10/n,a=t.width*t.height*t.depth;if(a<o.ROOM_MIN_VOLUME)return i;let c=t.width*t.height,l=t.width*t.depth,u=t.depth*t.height,h=2*(c+l+u);for(let t=0;t<o.NUMBER_REVERB_FREQUENCY_BANDS;t++){let n=((e.left[t]+e.right[t])*c+(e.down[t]+e.up[t])*l+(e.front[t]+e.back[t])*u)/h;i[t]=o.ROOM_EYRING_CORRECTION_COEFFICIENT*r*a/(-h*Math.log(1-n)+4*o.ROOM_AIR_ABSORPTION_COEFFICIENTS[t]*a)}return i}function l(t){let e=[];for(let n in o.DEFAULT_REFLECTION_COEFFICIENTS)if(o.DEFAULT_REFLECTION_COEFFICIENTS.hasOwnProperty(n)){e[n]=0;for(let i=0;i<o.NUMBER_REFLECTION_AVERAGING_BANDS;i++){let r=i+o.ROOM_STARTING_AVERAGING_BAND;e[n]+=t[n][r]}e[n]/=o.NUMBER_REFLECTION_AVERAGING_BANDS,e[n]=Math.sqrt(1-e[n])}return e}function u(t,e){void 0==e&&(e={}),void 0==e.listenerPosition&&(e.listenerPosition=o.DEFAULT_POSITION.slice()),void 0==e.dimensions&&(e.dimensions={},Object.assign(e.dimensions,o.DEFAULT_ROOM_DIMENSIONS)),void 0==e.materials&&(e.materials={},Object.assign(e.materials,o.DEFAULT_ROOM_MATERIALS)),void 0==e.speedOfSound&&(e.speedOfSound=o.DEFAULT_SPEED_OF_SOUND),e.dimensions=s(e.dimensions);let n=a(e.materials),u=l(n),h=c(e.dimensions,n,e.speedOfSound);this.early=new r(t,{dimensions:e.dimensions,coefficients:u,speedOfSound:e.speedOfSound,listenerPosition:e.listenerPosition}),this.late=new i(t,{durations:h}),this.speedOfSound=e.speedOfSound,this.output=t.createGain(),this.early.output.connect(this.output),this._merger=t.createChannelMerger(4),this.late.output.connect(this._merger,0,0),this._merger.connect(this.output)}u.prototype.setProperties=function(t,e){let n=a(e),i=c(t,n,this.speedOfSound);this.late.setDurations(i),this.early.speedOfSound=this.speedOfSound;let r=l(n);this.early.setRoomProperties(t,r)},u.prototype.setListenerPosition=function(t,e,n){this.early.speedOfSound=this.speedOfSound,this.early.setListenerPosition(t,e,n);let i=this.getDistanceOutsideRoom(t,e,n),r=1;i>o.EPSILON_FLOAT&&(r=1-i/o.LISTENER_MAX_OUTSIDE_ROOM_DISTANCE,r=Math.max(0,Math.min(1,r))),this.output.gain.value=r},u.prototype.getDistanceOutsideRoom=function(t,e,n){let i=Math.max(0,-this.early._halfDimensions.width-t,t-this.early._halfDimensions.width),r=Math.max(0,-this.early._halfDimensions.height-e,e-this.early._halfDimensions.height),o=Math.max(0,-this.early._halfDimensions.depth-n,n-this.early._halfDimensions.depth);return Math.sqrt(i*i+r*r+o*o)},t.exports=u},function(t,e,n){"use strict";const i=n(0);function r(t,e){void 0==e&&(e={}),void 0==e.durations&&(e.durations=i.DEFAULT_REVERB_DURATIONS.slice()),void 0==e.predelay&&(e.predelay=i.DEFAULT_REVERB_PREDELAY),void 0==e.gain&&(e.gain=i.DEFAULT_REVERB_GAIN),void 0==e.bandwidth&&(e.bandwidth=i.DEFAULT_REVERB_BANDWIDTH),void 0==e.tailonset&&(e.tailonset=i.DEFAULT_REVERB_TAIL_ONSET);let n=e.predelay/1e3;this._bandwidthCoeff=e.bandwidth*i.LOG2_DIV2,this._tailonsetSamples=e.tailonset/1e3,this._context=t,this.input=t.createGain(),this._predelay=t.createDelay(n),this._convolver=t.createConvolver(),this.output=t.createGain(),this.output.gain.value=e.gain,this._convolver.normalize=!1,this.input.connect(this._predelay),this._predelay.connect(this._convolver),this._convolver.connect(this.output),this.setDurations(e.durations)}r.prototype.setDurations=function(t){if(t.length!==i.NUMBER_REVERB_FREQUENCY_BANDS)return void i.log("Warning: invalid number of RT60 values provided to reverb.");let e=new Float32Array(i.NUMBER_REVERB_FREQUENCY_BANDS),n=this._context.sampleRate;for(let r=0;r<t.length;r++)t[r]=Math.max(0,Math.min(i.DEFAULT_REVERB_MAX_DURATION,t[r])),e[r]=Math.round(t[r]*n*i.DEFAULT_REVERB_DURATION_MULTIPLIER);let r=0;for(let t=0;t<e.length;t++)e[t]>r&&(r=e[t]);r<1&&(r=1);let o=this._context.createBuffer(1,r,n),a=o.getChannelData(0),s=new Float32Array(r);for(let t=0;t<r;t++)s[t]=2*Math.random()-1;for(let t=0;t<i.NUMBER_REVERB_FREQUENCY_BANDS;t++){let r=-i.LOG1000/e[t],o=i.TWO_PI*i.DEFAULT_REVERB_FREQUENCY_BANDS[t]/n,c=Math.sin(o),l=c*Math.sinh(this._bandwidthCoeff*o/c),u=1/(1+l),h=l*u,d=-2*Math.cos(o)*u,p=(1-l)*u,f=0,m=0;for(let n=0;n<e[t];n++){let t=s[n]*Math.exp(r*n)-d*f-p*m;a[n]+=h*(t-m),m=f,f=t}}let c=Math.round(this._tailonsetSamples);for(let t=0;t<Math.min(a.length,c);t++){let e=.5*(1-Math.cos(i.TWO_PI*t/(2*c-1)));a[t]*=e}this._convolver.buffer=o},t.exports=r},function(t,e,n){"use strict";const i=n(0);function r(t,e){void 0==e&&(e={}),void 0==e.speedOfSound&&(e.speedOfSound=i.DEFAULT_SPEED_OF_SOUND),void 0==e.listenerPosition&&(e.listenerPosition=i.DEFAULT_POSITION.slice()),void 0==e.coefficients&&(e.coefficients={},Object.assign(e.coefficients,i.DEFAULT_REFLECTION_COEFFICIENTS)),this.speedOfSound=e.speedOfSound,this.input=t.createGain(),this.output=t.createGain(),this._lowpass=t.createBiquadFilter(),this._delays={},this._gains={},this._inverters={},this._merger=t.createChannelMerger(4);for(let e in i.DEFAULT_REFLECTION_COEFFICIENTS)i.DEFAULT_REFLECTION_COEFFICIENTS.hasOwnProperty(e)&&(this._delays[e]=t.createDelay(i.MAX_DURATION),this._gains[e]=t.createGain());this._inverters.right=t.createGain(),this._inverters.down=t.createGain(),this._inverters.back=t.createGain(),this._lowpass.type="lowpass",this._lowpass.frequency.value=i.DEFAULT_REFLECTION_CUTOFF_FREQUENCY,this._lowpass.Q.value=0;for(let t in i.DEFAULT_REFLECTION_COEFFICIENTS)i.DEFAULT_REFLECTION_COEFFICIENTS.hasOwnProperty(t)&&(this._delays[t].delayTime.value=0,this._gains[t].gain.value=0);this._inverters.right.gain.value=-1,this._inverters.down.gain.value=-1,this._inverters.back.gain.value=-1,this.input.connect(this._lowpass);for(let t in i.DEFAULT_REFLECTION_COEFFICIENTS)i.DEFAULT_REFLECTION_COEFFICIENTS.hasOwnProperty(t)&&(this._lowpass.connect(this._delays[t]),this._delays[t].connect(this._gains[t]),this._gains[t].connect(this._merger,0,0));this._gains.left.connect(this._merger,0,1),this._gains.right.connect(this._inverters.right),this._inverters.right.connect(this._merger,0,1),this._gains.up.connect(this._merger,0,2),this._gains.down.connect(this._inverters.down),this._inverters.down.connect(this._merger,0,2),this._gains.front.connect(this._merger,0,3),this._gains.back.connect(this._inverters.back),this._inverters.back.connect(this._merger,0,3),this._merger.connect(this.output),this._listenerPosition=e.listenerPosition,this.setRoomProperties(e.dimensions,e.coefficients)}r.prototype.setListenerPosition=function(t,e,n){this._listenerPosition=[t,e,n];let r={left:i.DEFAULT_REFLECTION_MULTIPLIER*Math.max(0,this._halfDimensions.width+t)+i.DEFAULT_REFLECTION_MIN_DISTANCE,right:i.DEFAULT_REFLECTION_MULTIPLIER*Math.max(0,this._halfDimensions.width-t)+i.DEFAULT_REFLECTION_MIN_DISTANCE,front:i.DEFAULT_REFLECTION_MULTIPLIER*Math.max(0,this._halfDimensions.depth+n)+i.DEFAULT_REFLECTION_MIN_DISTANCE,back:i.DEFAULT_REFLECTION_MULTIPLIER*Math.max(0,this._halfDimensions.depth-n)+i.DEFAULT_REFLECTION_MIN_DISTANCE,down:i.DEFAULT_REFLECTION_MULTIPLIER*Math.max(0,this._halfDimensions.height+e)+i.DEFAULT_REFLECTION_MIN_DISTANCE,up:i.DEFAULT_REFLECTION_MULTIPLIER*Math.max(0,this._halfDimensions.height-e)+i.DEFAULT_REFLECTION_MIN_DISTANCE};for(let t in i.DEFAULT_REFLECTION_COEFFICIENTS)if(i.DEFAULT_REFLECTION_COEFFICIENTS.hasOwnProperty(t)){let e=r[t]/this.speedOfSound;this._delays[t].delayTime.value=e;let n=this._coefficients[t]/r[t];this._gains[t].gain.value=n}},r.prototype.setRoomProperties=function(t,e){void 0==t&&(t={},Object.assign(t,i.DEFAULT_ROOM_DIMENSIONS)),void 0==e&&(e={},Object.assign(e,i.DEFAULT_REFLECTION_COEFFICIENTS)),this._coefficients=e,this._halfDimensions={},this._halfDimensions.width=.5*t.width,this._halfDimensions.height=.5*t.height,this._halfDimensions.depth=.5*t.depth,this.setListenerPosition(this._listenerPosition[0],this._listenerPosition[1],this._listenerPosition[2])},t.exports=r},function(t,e,n){"use strict";e.ResonanceAudio=n(11),e.ResonanceAudio.Attenuation=n(6),e.ResonanceAudio.Directivity=n(5),e.ResonanceAudio.EarlyReflections=n(9),e.ResonanceAudio.Encoder=n(1),e.ResonanceAudio.LateReflections=n(8),e.ResonanceAudio.Listener=n(2),e.ResonanceAudio.Room=n(7),e.ResonanceAudio.Source=n(4),e.ResonanceAudio.Tables=n(3),e.ResonanceAudio.Utils=n(0),e.ResonanceAudio.Version=n(13)},function(t,e,n){"use strict";const i=n(2),r=n(4),o=n(7),a=n(1),s=n(0);function c(t,e){void 0==e&&(e={}),void 0==e.ambisonicOrder&&(e.ambisonicOrder=s.DEFAULT_AMBISONIC_ORDER),void 0==e.listenerPosition&&(e.listenerPosition=s.DEFAULT_POSITION.slice()),void 0==e.listenerForward&&(e.listenerForward=s.DEFAULT_FORWARD.slice()),void 0==e.listenerUp&&(e.listenerUp=s.DEFAULT_UP.slice()),void 0==e.dimensions&&(e.dimensions={},Object.assign(e.dimensions,s.DEFAULT_ROOM_DIMENSIONS)),void 0==e.materials&&(e.materials={},Object.assign(e.materials,s.DEFAULT_ROOM_MATERIALS)),void 0==e.speedOfSound&&(e.speedOfSound=s.DEFAULT_SPEED_OF_SOUND),this._ambisonicOrder=a.validateAmbisonicOrder(e.ambisonicOrder),this._sources=[],this._room=new o(t,{listenerPosition:e.listenerPosition,dimensions:e.dimensions,materials:e.materials,speedOfSound:e.speedOfSound}),this._listener=new i(t,{ambisonicOrder:e.ambisonicOrder,position:e.listenerPosition,forward:e.listenerForward,up:e.listenerUp}),this._context=t,this.output=t.createGain(),this.ambisonicOutput=t.createGain(),this.ambisonicInput=this._listener.input,this._room.output.connect(this._listener.input),this._listener.output.connect(this.output),this._listener.ambisonicOutput.connect(this.ambisonicOutput)}c.prototype.createSource=function(t){let e=new r(this,t);return this._sources[this._sources.length]=e,e},c.prototype.setAmbisonicOrder=function(t){this._ambisonicOrder=a.validateAmbisonicOrder(t)},c.prototype.setRoomProperties=function(t,e){this._room.setProperties(t,e)},c.prototype.setListenerPosition=function(t,e,n){this._listener.position[0]=t,this._listener.position[1]=e,this._listener.position[2]=n,this._room.setListenerPosition(t,e,n),this._sources.forEach(function(t){t._update()})},c.prototype.setListenerOrientation=function(t,e,n,i,r,o){this._listener.setOrientation(t,e,n,i,r,o)},c.prototype.setListenerFromMatrix=function(t){this._listener.setFromMatrix(t),this.setListenerPosition(this._listener.position[0],this._listener.position[1],this._listener.position[2])},c.prototype.setSpeedOfSound=function(t){this._room.speedOfSound=t},t.exports=c},function(t,e,n){var i;i=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e){let n,i,r,o,a,s,c,l,u,h,d,p,f,m,g,v,y,A,w,b,M,E,x,T,C,S,D,_,L;e.log=function(){window.console.log.apply(window.console,["%c[Omnitone]%c "+Array.prototype.slice.call(arguments).join(" ")+" %c(@"+performance.now().toFixed(2)+"ms)","background: #BBDEFB; color: #FF5722; font-weight: 500","font-weight: 300","color: #AAA"])},e.throw=function(){throw window.console.error.apply(window.console,["%c[Omnitone]%c "+Array.prototype.slice.call(arguments).join(" ")+" %c(@"+performance.now().toFixed(2)+"ms)","background: #C62828; color: #FFEBEE; font-weight: 800","font-weight: 400","color: #AAA"]),new Error(!1)},e.invertMatrix4=function(t,e){return n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],v=e[15],(L=(y=n*s-i*a)*(_=d*v-p*g)-(A=n*c-r*a)*(D=h*v-p*m)+(w=n*l-o*a)*(S=h*g-d*m)+(b=i*c-r*s)*(C=u*v-p*f)-(M=i*l-o*s)*(T=u*g-d*f)+(E=r*l-o*c)*(x=u*m-h*f))?(L=1/L,t[0]=(s*_-c*D+l*S)*L,t[1]=(r*D-i*_-o*S)*L,t[2]=(m*E-g*M+v*b)*L,t[3]=(d*M-h*E-p*b)*L,t[4]=(c*C-a*_-l*T)*L,t[5]=(n*_-r*C+o*T)*L,t[6]=(g*w-f*E-v*A)*L,t[7]=(u*E-d*w+p*A)*L,t[8]=(a*D-s*C+l*x)*L,t[9]=(i*C-n*D-o*x)*L,t[10]=(f*M-m*w+v*y)*L,t[11]=(h*w-u*M-p*y)*L,t[12]=(s*T-a*S-c*x)*L,t[13]=(n*S-i*T+r*x)*L,t[14]=(m*A-f*b-g*y)*L,t[15]=(u*b-h*A+d*y)*L,t):null},e.isDefinedENUMEntry=function(t,e){for(let n in t)if(e===t[n])return!0;return!1},e.isAudioContext=function(t){return t instanceof AudioContext||t instanceof OfflineAudioContext},e.isAudioBuffer=function(t){return t instanceof AudioBuffer},e.mergeBufferListByChannel=function(t,n){const i=n[0].length,r=n[0].sampleRate;let o=0;for(let t=0;t<n.length;++t)o>32&&e.throw("Utils.mergeBuffer: Number of channels cannot exceed 32.(got "+o+")"),i!==n[t].length&&e.throw("Utils.mergeBuffer: AudioBuffer lengths are inconsistent. (expected "+i+" but got "+n[t].length+")"),r!==n[t].sampleRate&&e.throw("Utils.mergeBuffer: AudioBuffer sample rates are inconsistent. (expected "+r+" but got "+n[t].sampleRate+")"),o+=n[t].numberOfChannels;const a=t.createBuffer(o,i,r);let s=0;for(let t=0;t<n.length;++t)for(let e=0;e<n[t].numberOfChannels;++e)a.getChannelData(s++).set(n[t].getChannelData(e));return a},e.splitBufferbyChannel=function(t,n,i){n.numberOfChannels<=i&&e.throw("Utils.splitBuffer: Insufficient number of channels. ("+n.numberOfChannels+" splitted by "+i+")");let r=[],o=0;const a=Math.ceil(n.numberOfChannels/i);for(let e=0;e<a;++e){let e=t.createBuffer(i,n.length,n.sampleRate);for(let t=0;t<i;++t)o<n.numberOfChannels&&e.getChannelData(t).set(n.getChannelData(o++));r.push(e)}return bufferList},e.getArrayBufferFromBase64String=function(t){let e=window.atob(t),n=new Uint8Array(e.length);return n.forEach((t,i)=>n[i]=e.charCodeAt(i)),n.buffer}},function(t,e,n){"use strict";const i=n(0),r={BASE64:"base64",URL:"url"};function o(t,e,n){this._context=i.isAudioContext(t)?t:i.throw("BufferList: Invalid BaseAudioContext."),this._options={dataType:r.BASE64,verbose:!1},n&&(n.dataType&&i.isDefinedENUMEntry(r,n.dataType)&&(this._options.dataType=n.dataType),n.verbose&&(this._options.verbose=Boolean(n.verbose))),this._bufferList=[],this._bufferData=this._options.dataType===r.BASE64?e:e.slice(0),this._numberOfTasks=this._bufferData.length,this._resolveHandler=null,this._rejectHandler=new Function}o.prototype.load=function(){return new Promise(this._promiseGenerator.bind(this))},o.prototype._promiseGenerator=function(t,e){"function"!=typeof t?i.throw("BufferList: Invalid Promise resolver."):this._resolveHandler=t,"function"==typeof e&&(this._rejectHandler=e);for(let t=0;t<this._bufferData.length;++t)this._options.dataType===r.BASE64?this._launchAsyncLoadTask(t):this._launchAsyncLoadTaskXHR(t)},o.prototype._launchAsyncLoadTask=function(t){const e=this;this._context.decodeAudioData(i.getArrayBufferFromBase64String(this._bufferData[t]),function(n){e._updateProgress(t,n)},function(n){e._updateProgress(t,null);const r='BufferList: decoding ArrayByffer("'+t+'" from Base64-encoded data failed. ('+n+")";i.throw(r),e._rejectHandler(r)})},o.prototype._launchAsyncLoadTaskXHR=function(t){const e=new XMLHttpRequest;e.open("GET",this._bufferData[t]),e.responseType="arraybuffer";const n=this;e.onload=function(){if(200===e.status)n._context.decodeAudioData(e.response,function(e){n._updateProgress(t,e)},function(e){n._updateProgress(t,null);const r='BufferList: decoding "'+n._bufferData[t]+'" failed. ('+e+")";i.throw(r),n._rejectHandler(r)});else{const r='BufferList: XHR error while loading "'+n._bufferData[t]+"("+e.statusText+")";i.throw(r),n._rejectHandler(r)}},e.onerror=function(e){i.throw('BufferList: XHR network failed on loading "'+n._bufferData[t]+'".'),n._updateProgress(t,null),n._rejectHandler()},e.send()},o.prototype._updateProgress=function(t,e){if(this._bufferList[t]=e,this._options.verbose){let e=this._options.dataType===r.BASE64?"ArrayBuffer("+t+") from Base64-encoded HRIR":'"'+this._bufferData[t]+'"';i.log("BufferList: "+e+" successfully loaded.")}if(0==--this._numberOfTasks){let t=this._options.dataType===r.BASE64?this._bufferData.length+" AudioBuffers from Base64-encoded HRIRs":this._bufferData.length+" files via XHR";i.log("BufferList: "+t+" loaded successfully."),this._resolveHandler(this._bufferList)}},t.exports=o},function(t,e,n){"use strict";const i={DEFAULT:[0,1,2,3],SAFARI:[2,0,1,3],FUMA:[0,3,1,2]};function r(t,e){this._context=t,this._splitter=this._context.createChannelSplitter(4),this._merger=this._context.createChannelMerger(4),this.input=this._splitter,this.output=this._merger,this.setChannelMap(e||i.DEFAULT)}r.prototype.setChannelMap=function(t){Array.isArray(t)&&(this._channelMap=t,this._splitter.disconnect(),this._splitter.connect(this._merger,0,this._channelMap[0]),this._splitter.connect(this._merger,1,this._channelMap[1]),this._splitter.connect(this._merger,2,this._channelMap[2]),this._splitter.connect(this._merger,3,this._channelMap[3]))},r.ChannelMap=i,t.exports=r},function(t,e,n){"use strict";function i(t){this._context=t,this._splitter=this._context.createChannelSplitter(4),this._inY=this._context.createGain(),this._inZ=this._context.createGain(),this._inX=this._context.createGain(),this._m0=this._context.createGain(),this._m1=this._context.createGain(),this._m2=this._context.createGain(),this._m3=this._context.createGain(),this._m4=this._context.createGain(),this._m5=this._context.createGain(),this._m6=this._context.createGain(),this._m7=this._context.createGain(),this._m8=this._context.createGain(),this._outY=this._context.createGain(),this._outZ=this._context.createGain(),this._outX=this._context.createGain(),this._merger=this._context.createChannelMerger(4),this._splitter.connect(this._inY,1),this._splitter.connect(this._inZ,2),this._splitter.connect(this._inX,3),this._inY.gain.value=-1,this._inX.gain.value=-1,this._inY.connect(this._m0),this._inY.connect(this._m1),this._inY.connect(this._m2),this._inZ.connect(this._m3),this._inZ.connect(this._m4),this._inZ.connect(this._m5),this._inX.connect(this._m6),this._inX.connect(this._m7),this._inX.connect(this._m8),this._m0.connect(this._outY),this._m1.connect(this._outZ),this._m2.connect(this._outX),this._m3.connect(this._outY),this._m4.connect(this._outZ),this._m5.connect(this._outX),this._m6.connect(this._outY),this._m7.connect(this._outZ),this._m8.connect(this._outX),this._splitter.connect(this._merger,0,0),this._outY.connect(this._merger,0,1),this._outZ.connect(this._merger,0,2),this._outX.connect(this._merger,0,3),this._outY.gain.value=-1,this._outX.gain.value=-1,this.setRotationMatrix3(new Float32Array([1,0,0,0,1,0,0,0,1])),this.input=this._splitter,this.output=this._merger}i.prototype.setRotationMatrix3=function(t){this._m0.gain.value=t[0],this._m1.gain.value=t[1],this._m2.gain.value=t[2],this._m3.gain.value=t[3],this._m4.gain.value=t[4],this._m5.gain.value=t[5],this._m6.gain.value=t[6],this._m7.gain.value=t[7],this._m8.gain.value=t[8]},i.prototype.setRotationMatrix4=function(t){this._m0.gain.value=t[0],this._m1.gain.value=t[1],this._m2.gain.value=t[2],this._m3.gain.value=t[4],this._m4.gain.value=t[5],this._m5.gain.value=t[6],this._m6.gain.value=t[8],this._m7.gain.value=t[9],this._m8.gain.value=t[10]},i.prototype.getRotationMatrix3=function(){return[this._m0.gain.value,this._m1.gain.value,this._m2.gain.value,this._m3.gain.value,this._m4.gain.value,this._m5.gain.value,this._m6.gain.value,this._m7.gain.value,this._m8.gain.value]},i.prototype.getRotationMatrix4=function(){let t=new Float32Array(16);return t[0]=this._m0.gain.value,t[1]=this._m1.gain.value,t[2]=this._m2.gain.value,t[4]=this._m3.gain.value,t[5]=this._m4.gain.value,t[6]=this._m5.gain.value,t[8]=this._m6.gain.value,t[9]=this._m7.gain.value,t[10]=this._m8.gain.value,t},t.exports=i},function(t,e,n){"use strict";function i(t,e){this._context=t,this._active=!1,this._isBufferLoaded=!1,this._buildAudioGraph(),e&&this.setHRIRBufferList(e),this.enable()}i.prototype._buildAudioGraph=function(){this._splitterWYZX=this._context.createChannelSplitter(4),this._mergerWY=this._context.createChannelMerger(2),this._mergerZX=this._context.createChannelMerger(2),this._convolverWY=this._context.createConvolver(),this._convolverZX=this._context.createConvolver(),this._splitterWY=this._context.createChannelSplitter(2),this._splitterZX=this._context.createChannelSplitter(2),this._inverter=this._context.createGain(),this._mergerBinaural=this._context.createChannelMerger(2),this._summingBus=this._context.createGain(),this._splitterWYZX.connect(this._mergerWY,0,0),this._splitterWYZX.connect(this._mergerWY,1,1),this._splitterWYZX.connect(this._mergerZX,2,0),this._splitterWYZX.connect(this._mergerZX,3,1),this._mergerWY.connect(this._convolverWY),this._mergerZX.connect(this._convolverZX),this._convolverWY.connect(this._splitterWY),this._convolverZX.connect(this._splitterZX),this._splitterWY.connect(this._mergerBinaural,0,0),this._splitterWY.connect(this._mergerBinaural,0,1),this._splitterWY.connect(this._mergerBinaural,1,0),this._splitterWY.connect(this._inverter,1,0),this._inverter.connect(this._mergerBinaural,0,1),this._splitterZX.connect(this._mergerBinaural,0,0),this._splitterZX.connect(this._mergerBinaural,0,1),this._splitterZX.connect(this._mergerBinaural,1,0),this._splitterZX.connect(this._mergerBinaural,1,1),this._convolverWY.normalize=!1,this._convolverZX.normalize=!1,this._inverter.gain.value=-1,this.input=this._splitterWYZX,this.output=this._summingBus},i.prototype.setHRIRBufferList=function(t){this._isBufferLoaded||(this._convolverWY.buffer=t[0],this._convolverZX.buffer=t[1],this._isBufferLoaded=!0)},i.prototype.enable=function(){this._mergerBinaural.connect(this._summingBus),this._active=!0},i.prototype.disable=function(){this._mergerBinaural.disconnect(),this._active=!1},t.exports=i},function(t,e,n){"use strict";const i=n(0);function r(t,e,n,r,o){this._context=t,this._buffers=new Map,this._loadingTasks={},this._resolve=n,this._reject=r,this._progress=o;for(let t=0;t<e.length;t++){const n=e[t];if(this._loadingTasks.hasOwnProperty(n.name))return void i.log("Duplicated filename when loading: "+n.name);this._loadingTasks[n.name]=0,this._loadAudioFile(n)}}r.prototype._loadAudioFile=function(t){const e=new XMLHttpRequest;e.open("GET",t.url),e.responseType="arraybuffer";const n=this;e.onload=function(){200===e.status?n._context.decodeAudioData(e.response,function(e){n._done(t.name,e)},function(e){i.log("Decoding failure: "+t.url+" ("+e+")"),n._done(t.name,null)}):(i.log("XHR Error: "+t.url+" ("+e.statusText+")"),n._done(t.name,null))},e.onerror=function(e){i.log("XHR Network failure: "+t.url),n._done(t.name,null)},e.send()},r.prototype._done=function(t,e){this._loadingTasks[t]=null!==e?"loaded":"failed",this._buffers.set(t,e),this._updateProgress(t)},r.prototype._updateProgress=function(t){let e=0,n=0,i=0;for(const t in this._loadingTasks)Object.prototype.hasOwnProperty.call(this._loadingTasks,t)&&(i++,"loaded"===this._loadingTasks[t]?e++:"failed"===this._loadingTasks[t]&&n++);"function"!=typeof this._progress?e!==i?e+n!==i||this._reject(this._buffers):this._resolve(this._buffers):this._progress(t,e,i)},t.exports=r},function(t,e,n){"use strict";const i=n(0),r=[1.4142,.8166,.8166,.8166];t.exports=function(t){if(this._context=t,this._input=this._context.createGain(),this._context.createIIRFilter){const t=function(t,e){const n=Math.tan(690*Math.PI/e),i=n*n,r=i+2*n+1;return{lowpassA:[1,2*(i-1)/r,(i-2*n+1)/r],lowpassB:[i/r,2*i/r,i/r],hipassA:[1,2*(i-1)/r,(i-2*n+1)/r],hipassB:[1/r,-2/r,1/r]}}(0,this._context.sampleRate);this._lpf=this._context.createIIRFilter(t.lowpassB,t.lowpassA),this._hpf=this._context.createIIRFilter(t.hipassB,t.hipassA)}else i.log("IIR filter is missing. Using Biquad filter instead."),this._lpf=this._context.createBiquadFilter(),this._hpf=this._context.createBiquadFilter(),this._lpf.frequency.value=690,this._hpf.frequency.value=690,this._hpf.type="highpass";this._splitterLow=this._context.createChannelSplitter(4),this._splitterHigh=this._context.createChannelSplitter(4),this._gainHighW=this._context.createGain(),this._gainHighY=this._context.createGain(),this._gainHighZ=this._context.createGain(),this._gainHighX=this._context.createGain(),this._merger=this._context.createChannelMerger(4),this._input.connect(this._hpf),this._hpf.connect(this._splitterHigh),this._splitterHigh.connect(this._gainHighW,0),this._splitterHigh.connect(this._gainHighY,1),this._splitterHigh.connect(this._gainHighZ,2),this._splitterHigh.connect(this._gainHighX,3),this._gainHighW.connect(this._merger,0,0),this._gainHighY.connect(this._merger,0,1),this._gainHighZ.connect(this._merger,0,2),this._gainHighX.connect(this._merger,0,3),this._input.connect(this._lpf),this._lpf.connect(this._splitterLow),this._splitterLow.connect(this._merger,0,0),this._splitterLow.connect(this._merger,1,1),this._splitterLow.connect(this._merger,2,2),this._splitterLow.connect(this._merger,3,3);const e=this._context.currentTime;this._gainHighW.gain.setValueAtTime(-1*r[0],e),this._gainHighY.gain.setValueAtTime(-1*r[1],e),this._gainHighZ.gain.setValueAtTime(-1*r[2],e),this._gainHighX.gain.setValueAtTime(-1*r[3],e),this.input=this._input,this.output=this._merger}},function(t,e,n){"use strict";function i(t,e){if(2!==e.IR.numberOfChannels)throw new Error("IR does not have 2 channels. cannot proceed.");this._active=!1,this._context=t,this._input=this._context.createChannelSplitter(4),this._cW=this._context.createGain(),this._cY=this._context.createGain(),this._cZ=this._context.createGain(),this._cX=this._context.createGain(),this._convolver=this._context.createConvolver(),this._gain=this._context.createGain(),this._input.connect(this._cW,0),this._input.connect(this._cY,1),this._input.connect(this._cZ,2),this._input.connect(this._cX,3),this._cW.connect(this._convolver),this._cY.connect(this._convolver),this._cZ.connect(this._convolver),this._cX.connect(this._convolver),this._convolver.connect(this._gain),this._gain.connect(this._context.destination),this.enable(),this._convolver.normalize=!1,this._convolver.buffer=e.IR,this._gain.gain.value=e.gain,this._cW.gain.value=e.coefficients[0],this._cY.gain.value=e.coefficients[1],this._cZ.gain.value=e.coefficients[2],this._cX.gain.value=e.coefficients[3],this.input=this._input}i.prototype.enable=function(){this._gain.connect(this._context.destination),this._active=!0},i.prototype.disable=function(){this._gain.disconnect(),this._active=!1},t.exports=i},function(t,e,n){"use strict";function i(t,e,n){this._context=t,this._active=!1,this._isBufferLoaded=!1,this._ambisonicOrder=e,this._numberOfChannels=(this._ambisonicOrder+1)*(this._ambisonicOrder+1),this._buildAudioGraph(),n&&this.setHRIRBufferList(n),this.enable()}i.prototype._buildAudioGraph=function(){const t=Math.ceil(this._numberOfChannels/2);this._inputSplitter=this._context.createChannelSplitter(this._numberOfChannels),this._stereoMergers=[],this._convolvers=[],this._stereoSplitters=[],this._positiveIndexSphericalHarmonics=this._context.createGain(),this._negativeIndexSphericalHarmonics=this._context.createGain(),this._inverter=this._context.createGain(),this._binauralMerger=this._context.createChannelMerger(2),this._outputGain=this._context.createGain();for(let e=0;e<t;++e)this._stereoMergers[e]=this._context.createChannelMerger(2),this._convolvers[e]=this._context.createConvolver(),this._stereoSplitters[e]=this._context.createChannelSplitter(2),this._convolvers[e].normalize=!1;for(let t=0;t<=this._ambisonicOrder;++t)for(let e=-t;e<=t;e++){const n=t*t+t+e,i=Math.floor(n/2);this._inputSplitter.connect(this._stereoMergers[i],n,n%2),this._stereoMergers[i].connect(this._convolvers[i]),this._convolvers[i].connect(this._stereoSplitters[i]),e>=0?this._stereoSplitters[i].connect(this._positiveIndexSphericalHarmonics,n%2):this._stereoSplitters[i].connect(this._negativeIndexSphericalHarmonics,n%2)}this._positiveIndexSphericalHarmonics.connect(this._binauralMerger,0,0),this._positiveIndexSphericalHarmonics.connect(this._binauralMerger,0,1),this._negativeIndexSphericalHarmonics.connect(this._binauralMerger,0,0),this._negativeIndexSphericalHarmonics.connect(this._inverter),this._inverter.connect(this._binauralMerger,0,1),this._inverter.gain.value=-1,this.input=this._inputSplitter,this.output=this._outputGain},i.prototype.setHRIRBufferList=function(t){if(!this._isBufferLoaded){for(let e=0;e<t.length;++e)this._convolvers[e].buffer=t[e];this._isBufferLoaded=!0}},i.prototype.enable=function(){this._binauralMerger.connect(this._outputGain),this._active=!0},i.prototype.disable=function(){this._binauralMerger.disconnect(),this._active=!1},t.exports=i},function(t,e,n){"use strict";function i(t,e){return t===e?1:0}function r(t,e,n,i,r){const o=(i+e)*(2*e+1)+(n+e);t[e-1][o].gain.value=r}function o(t,e,n,i){const r=(i+e)*(2*e+1)+(n+e);return t[e-1][r].gain.value}function a(t,e,n,i,r){return i===r?o(t,1,e,1)*o(t,r-1,n,r-1)-o(t,1,e,-1)*o(t,r-1,n,1-r):i===-r?o(t,1,e,1)*o(t,r-1,n,1-r)+o(t,1,e,-1)*o(t,r-1,n,r-1):o(t,1,e,0)*o(t,r-1,n,i)}function s(t,e,n,i){return a(t,0,e,n,i)}function c(t,e,n,r){if(0===e)return a(t,1,1,n,r)+a(t,-1,-1,n,r);if(e>0){const o=i(e,1);return a(t,1,e-1,n,r)*Math.sqrt(1+o)-a(t,-1,1-e,n,r)*(1-o)}{const o=i(e,-1);return a(t,1,e+1,n,r)*(1-o)+a(t,-1,-e-1,n,r)*Math.sqrt(1+o)}}function l(t,e,n,i){return 0===e?0:e>0?a(t,1,e+1,n,i)+a(t,-1,-e-1,n,i):a(t,1,e-1,n,i)-a(t,-1,1-e,n,i)}function u(t,e,n){const r=i(t,0),o=Math.abs(e)===n?1/(2*n*(2*n-1)):1/((n+e)*(n-e));return[Math.sqrt((n+t)*(n-t)*o),.5*(1-2*r)*Math.sqrt((1+r)*(n+Math.abs(t)-1)*(n+Math.abs(t))*o),-.5*(1-r)*Math.sqrt((n-Math.abs(t)-1)*(n-Math.abs(t)))*o]}function h(t,e){for(let n=-e;n<=e;n++)for(let i=-e;i<=e;i++){const o=u(n,i,e);Math.abs(o[0])>0&&(o[0]*=s(t,n,i,e)),Math.abs(o[1])>0&&(o[1]*=c(t,n,i,e)),Math.abs(o[2])>0&&(o[2]*=l(t,n,i,e)),r(t,e,n,i,o[0]+o[1]+o[2])}}function d(t){for(let e=2;e<=t.length;e++)h(t,e)}function p(t,e){this._context=t,this._ambisonicOrder=e;const n=(e+1)*(e+1);let i,r,o,a,s;this._splitter=this._context.createChannelSplitter(n),this._merger=this._context.createChannelMerger(n),this._gainNodeMatrix=[];for(let t=1;t<=e;t++){i=t*t,r=2*t+1,this._gainNodeMatrix[t-1]=[];for(let e=0;e<r;e++){o=i+e;for(let n=0;n<r;n++)a=i+n,s=e*r+n,this._gainNodeMatrix[t-1][s]=this._context.createGain(),this._splitter.connect(this._gainNodeMatrix[t-1][s],o),this._gainNodeMatrix[t-1][s].connect(this._merger,0,a)}}this._splitter.connect(this._merger,0,0),this.setRotationMatrix3(new Float32Array([1,0,0,0,1,0,0,0,1])),this.input=this._splitter,this.output=this._merger}p.prototype.setRotationMatrix3=function(t){for(let e=0;e<9;++e)this._gainNodeMatrix[0][e].gain.value=t[e];d(this._gainNodeMatrix)},p.prototype.setRotationMatrix4=function(t){this._gainNodeMatrix[0][0].gain.value=t[0],this._gainNodeMatrix[0][1].gain.value=t[1],this._gainNodeMatrix[0][2].gain.value=t[2],this._gainNodeMatrix[0][3].gain.value=t[4],this._gainNodeMatrix[0][4].gain.value=t[5],this._gainNodeMatrix[0][5].gain.value=t[6],this._gainNodeMatrix[0][6].gain.value=t[8],this._gainNodeMatrix[0][7].gain.value=t[9],this._gainNodeMatrix[0][8].gain.value=t[10],d(this._gainNodeMatrix)},p.prototype.getRotationMatrix3=function(){let t=new Float32Array(9);for(let e=0;e<9;++e)t[e]=this._gainNodeMatrix[0][e].gain.value;return t},p.prototype.getRotationMatrix4=function(){let t=new Float32Array(16);return t[0]=this._gainNodeMatrix[0][0].gain.value,t[1]=this._gainNodeMatrix[0][1].gain.value,t[2]=this._gainNodeMatrix[0][2].gain.value,t[4]=this._gainNodeMatrix[0][3].gain.value,t[5]=this._gainNodeMatrix[0][4].gain.value,t[6]=this._gainNodeMatrix[0][5].gain.value,t[8]=this._gainNodeMatrix[0][6].gain.value,t[9]=this._gainNodeMatrix[0][7].gain.value,t[10]=this._gainNodeMatrix[0][8].gain.value,t},p.prototype.getAmbisonicOrder=function(){return this._ambisonicOrder},t.exports=p},function(t,e,n){"use strict";e.Omnitone=n(11)},function(t,e,n){"use strict";const i=n(1),r=n(4),o=n(12),a=n(6),s=n(14),c=n(3),l=n(2),u=n(7),h=n(8),d=n(16),p=n(9),f=n(19),m=n(0),g=n(20),v=n(5);let y={};y.browserInfo=f.getBrowserInfo(),y.loadAudioBuffers=function(t,e){return new Promise(function(n,i){new v(t,e,function(t){n(t)},i)})},y.createBufferList=function(t,e,n){return new i(t,e,n||{dataType:"url"}).load()},y.mergeBufferListByChannel=m.mergeBufferListByChannel,y.splitBufferbyChannel=m.splitBufferbyChannel,y.createFOAConvolver=function(t,e){return new r(t,e)},y.createFOARouter=function(t,e){return new l(t,e)},y.createFOARotator=function(t){return new c(t)},y.createFOAPhaseMatchedFilter=function(t){return new a(t)},y.createFOAVirtualSpeaker=function(t,e){return new u(t,e)},y.createFOADecoder=function(t,e,n){return m.log("WARNING: FOADecoder is deprecated in favor of FOARenderer."),new o(t,e,n)},y.createFOARenderer=function(t,e){return new s(t,e)},y.createHOARotator=function(t,e){return new p(t,e)},y.createHOAConvolver=function(t,e,n){return new h(t,e,n)},y.createHOARenderer=function(t,e){return new d(t,e)},m.log("Version "+g+" (running "+y.browserInfo.name+" "+y.browserInfo.version+" on "+y.browserInfo.platform+")"),"safari"===y.browserInfo.name.toLowerCase()&&(f.patchSafari(),m.log(y.browserInfo.name+" detected. Appliying polyfill...")),t.exports=y},function(t,e,n){"use strict";const i=n(5),r=n(2),o=n(3),a=n(6),s=n(7),c=n(13),l=n(0),u="https://raw.githubusercontent.com/GoogleChrome/omnitone/master/build/resources/";let h=0;function d(t,e,n){this._isDecoderReady=!1,this._context=t,this._videoElement=e,this._decodingMode="ambisonic",this._postGainDB=h,this._HRTFSetUrl=u,this._channelMap=r.ChannelMap.DEFAULT,n&&(n.postGainDB&&(this._postGainDB=n.postGainDB),n.HRTFSetUrl&&(this._HRTFSetUrl=n.HRTFSetUrl),n.channelMap&&(this._channelMap=n.channelMap)),this._speakerData=[];for(let t=0;t<c.length;++t)this._speakerData.push({name:c[t].name,url:this._HRTFSetUrl+"/"+c[t].url,coef:c[t].coef});this._tempMatrix4=new Float32Array(16)}d.prototype.initialize=function(){l.log("Initializing... (mode: "+this._decodingMode+")");let t=this._channelMap.toString(),e=r.ChannelMap.DEFAULT.toString();t!==e&&l.log("Remapping channels (["+e+"] -> ["+t+"])"),this._audioElementSource=this._context.createMediaElementSource(this._videoElement),this._foaRouter=new r(this._context,this._channelMap),this._foaRotator=new o(this._context),this._foaPhaseMatchedFilter=new a(this._context),this._audioElementSource.connect(this._foaRouter.input),this._foaRouter.output.connect(this._foaRotator.input),this._foaRotator.output.connect(this._foaPhaseMatchedFilter.input),this._foaVirtualSpeakers=[],this._bypass=this._context.createGain(),this._audioElementSource.connect(this._bypass);const n=Math.pow(10,this._postGainDB/20);l.log("Gain compensation: "+n+" ("+this._postGainDB+"dB)");const c=this;return new Promise(function(t,e){new i(c._context,c._speakerData,function(e){for(let t=0;t<c._speakerData.length;++t)c._foaVirtualSpeakers[t]=new s(c._context,{coefficients:c._speakerData[t].coef,IR:e.get(c._speakerData[t].name),gain:n}),c._foaPhaseMatchedFilter.output.connect(c._foaVirtualSpeakers[t].input);c.setMode(c._decodingMode),c._isDecoderReady=!0,l.log("HRTF IRs are loaded successfully. The decoder is ready."),t()},e)})},d.prototype.setRotationMatrix=function(t){this._foaRotator.setRotationMatrix(t)},d.prototype.setRotationMatrixFromCamera=function(t){l.invertMatrix4(this._tempMatrix4,t.elements),this._foaRotator.setRotationMatrix4(this._tempMatrix4)},d.prototype.setMode=function(t){if(t!==this._decodingMode){switch(t){case"bypass":this._decodingMode="bypass";for(let t=0;t<this._foaVirtualSpeakers.length;++t)this._foaVirtualSpeakers[t].disable();this._bypass.connect(this._context.destination);break;case"ambisonic":this._decodingMode="ambisonic";for(let t=0;t<this._foaVirtualSpeakers.length;++t)this._foaVirtualSpeakers[t].enable();this._bypass.disconnect();break;case"off":this._decodingMode="off";for(let t=0;t<this._foaVirtualSpeakers.length;++t)this._foaVirtualSpeakers[t].disable();this._bypass.disconnect()}l.log("Decoding mode changed. ("+t+")")}},t.exports=d},function(t,e){t.exports=[{name:"E35_A135",url:"E35_A135.wav",gainFactor:1,coef:[.125,.216495,.21653,-.216495]},{name:"E35_A-135",url:"E35_A-135.wav",gainFactor:1,coef:[.125,-.216495,.21653,-.216495]},{name:"E-35_A135",url:"E-35_A135.wav",gainFactor:1,coef:[.125,.216495,-.21653,-.216495]},{name:"E-35_A-135",url:"E-35_A-135.wav",gainFactor:1,coef:[.125,-.216495,-.21653,-.216495]},{name:"E35_A45",url:"E35_A45.wav",gainFactor:1,coef:[.125,.216495,.21653,.216495]},{name:"E35_A-45",url:"E35_A-45.wav",gainFactor:1,coef:[.125,-.216495,.21653,.216495]},{name:"E-35_A45",url:"E-35_A45.wav",gainFactor:1,coef:[.125,.216495,-.21653,.216495]},{name:"E-35_A-45",url:"E-35_A-45.wav",gainFactor:1,coef:[.125,-.216495,-.21653,.216495]}]},function(t,e,n){"use strict";const i=n(1),r=n(4),o=n(15),a=n(3),s=n(2),c=n(0),l={AMBISONIC:"ambisonic",BYPASS:"bypass",OFF:"off"};function u(t,e){this._context=c.isAudioContext(t)?t:c.throw("FOARenderer: Invalid BaseAudioContext."),this._config={channelMap:s.ChannelMap.DEFAULT,renderingMode:l.AMBISONIC},e&&(e.channelMap&&(Array.isArray(e.channelMap)&&4===e.channelMap.length?this._config.channelMap=e.channelMap:c.throw("FOARenderer: Invalid channel map. (got "+e.channelMap+")")),e.hrirPathList&&(Array.isArray(e.hrirPathList)&&2===e.hrirPathList.length?this._config.pathList=e.hrirPathList:c.throw("FOARenderer: Invalid HRIR URLs. It must be an array with 2 URLs to HRIR files. (got "+e.hrirPathList+")")),e.renderingMode&&(Object.values(l).includes(e.renderingMode)?this._config.renderingMode=e.renderingMode:c.log("FOARenderer: Invalid rendering mode order. (got"+e.renderingMode+') Fallbacks to the mode "ambisonic".'))),this._buildAudioGraph(),this._tempMatrix4=new Float32Array(16),this._isRendererReady=!1}u.prototype._buildAudioGraph=function(){this.input=this._context.createGain(),this.output=this._context.createGain(),this._bypass=this._context.createGain(),this._foaRouter=new s(this._context,this._config.channelMap),this._foaRotator=new a(this._context),this._foaConvolver=new r(this._context),this.input.connect(this._foaRouter.input),this.input.connect(this._bypass),this._foaRouter.output.connect(this._foaRotator.input),this._foaRotator.output.connect(this._foaConvolver.input),this._foaConvolver.output.connect(this.output),this.input.channelCount=4,this.input.channelCountMode="explicit",this.input.channelInterpretation="discrete"},u.prototype._initializeCallback=function(t,e){(this._config.pathList?new i(this._context,this._config.pathList,{dataType:"url"}):new i(this._context,o)).load().then(function(e){this._foaConvolver.setHRIRBufferList(e),this.setRenderingMode(this._config.renderingMode),this._isRendererReady=!0,c.log("FOARenderer: HRIRs loaded successfully. Ready."),t()}.bind(this),function(){const t="FOARenderer: HRIR loading/decoding failed.";c.throw(t),e(t)})},u.prototype.initialize=function(){return c.log("FOARenderer: Initializing... (mode: "+this._config.renderingMode+")"),new Promise(this._initializeCallback.bind(this),function(t){c.throw("FOARenderer: Initialization failed. ("+t+")")})},u.prototype.setChannelMap=function(t){this._isRendererReady&&t.toString()!==this._config.channelMap.toString()&&(c.log("Remapping channels (["+this._config.channelMap.toString()+"] -> ["+t.toString()+"])."),this._config.channelMap=t.slice(),this._foaRouter.setChannelMap(this._config.channelMap))},u.prototype.setRotationMatrix3=function(t){this._isRendererReady&&this._foaRotator.setRotationMatrix3(t)},u.prototype.setRotationMatrix4=function(t){this._isRendererReady&&this._foaRotator.setRotationMatrix4(t)},u.prototype.setRotationMatrixFromCamera=function(t){this._isRendererReady&&(c.invertMatrix4(this._tempMatrix4,t.elements),this._foaRotator.setRotationMatrix4(this._tempMatrix4))},u.prototype.setRenderingMode=function(t){if(t!==this._config.renderingMode){switch(t){case l.AMBISONIC:this._foaConvolver.enable(),this._bypass.disconnect();break;case l.BYPASS:this._foaConvolver.disable(),this._bypass.connect(this.output);break;case l.OFF:this._foaConvolver.disable(),this._bypass.disconnect();break;default:return void c.log('FOARenderer: Rendering mode "'+t+'" is not supported.')}this._config.renderingMode=t,c.log("FOARenderer: Rendering mode changed. ("+t+")")}},t.exports=u},function(t,e){t.exports=["UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wIA9v8QAPv/CwD+/wcA/v8MAP//AQD7/wEACAAEAPj/+v8YABAA7v/n//v/9P/M/8D//f34/R38EvzxAfEBtA2lDTcBJQFJ9T71FP0D/cD1tfVo/Wv9uPTO9PPmOufc/U/+agL3Aisc/RxuGKEZBv3j/iYMzQ2gAzsEQQUABiQFrASzA5cB2QmyCy0AtgR4AeYGtfgAA2j5OQHP+scArPsMBJgEggIEBtz6+QVq/pj/aPg8BPP3gQEi+jEAof0fA1v9+/7S+8IBjvwd/xD4IADL/Pf9zvs+/l3+wgB7/+L+7fzFADH9kf6A+n3+DP6+/TP9xP68/pn+w/26/i39YgA0/u790Pt9/kD+7v1s/Wb+8f4C/1P+pf/x/cT+6/3p/Xz9ff5F/0f9G/4r/6v/4P5L/sL+ff7c/pj+Ov7X/UT+9P5G/oz+6v6A/2D+9/6P/8r/bP7m/ij+C//e/tj/Gf4e/9v+FwDP/lz/sP7F/2H+rv/G/s7/Hf7y/4P+NAD9/k0AK/6w/zP/hACh/sX/gf44AOP+dgCm/iUAk/5qAOD+PwC+/jEAWP4CAAr/bQBw/vv/zf5iACD/OgCS/uD/Cv9oAAb/CgDK/kwA//5tACH/TgCg/h4AHP9aABP/JADP/hEAYv9gAAj/3f8m/ysAYv8gACX/8/8k/ysAXv8bABH//v8j/ygAa/8qAAD/9f9g/1YAWf8JACH/AgB2/z4AXP/w/z3/FgB2/ykAX//9/z//EwCV/zUAS//n/1T/GACK/x4ATv/0/4P/QQB4//v/WP/2/3X/HAB8//P/V//3/2f/AQBh/9v/Tf/x/5P/IwCI/wMAf/8hAKP/JACZ/xUAiv8nAK//HgCr/yMAm/8uAMz/OACi/yQAqf87AMT/MwCY/yUAtP9FAMH/KgCu/ycAyP85AMv/IwCz/xoA1f8qAMn/FgC8/xQA4/8nAMX/CwDJ/xQA4f8ZAMH/BgDO/xQA4f8WAMP/BwDU/xQA4P8QAMH/AQDb/xQA3P8JAMP/AgDh/xIA2v8EAMj/AgDk/w0A1f/+/8v/AwDm/wwA0v/+/9H/BgDl/wkAzv/8/9T/BwDk/wcAzv/8/9r/CQDi/wQAzf/8/9//CADf////0P/9/+L/BwDd//7/0////+T/BgDb//z/1f8AAOf/BQDZ//v/2v8CAOb/AwDY//v/3v8EAOb/AgDY//3/4f8FAOX/AQDZ//7/5P8GAOP/AADb/wAA5/8GAOH////d/wIA5/8FAOD////f/wMA6P8FAOD////h/wQA6P8EAN7////h/wUA4v8DANv/AQDd/wQA3P8CANn/AgDb/wMA2/8CANv/AgDd/wIA3v8CAOH/AQDj/wEA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAAAA/f8CAP//AQD//wEA//8BAP3/AAACAP7/+f8AAAIA/P8FAAQA8/8AABoA+f/V/wQAHQDO/xoAQQBO/ocA0Px1/ucHW/4UCm8HLO6kAjv8/fCRDdAAYfPiBIgFXveUCM0GBvh6/nz7rf0J/QcQSRVdBgoBSgFR62r9NP8m+LoEAvriBVAAiAPmABEGMf2l+SwBjva6/G4A//8P/CYDMgXm/R0CKAE6/fcBBwAtAND+kQA0A5UDhwFs/8IB8fydAEP/A/8v/e7/mP8j/2YBIwE3Av0AYv+uAOD8lgAg/wwAIf/L/n0Ae//OAJMB3P/XAF//XwCM/08AB/8NAEf/rf4jAT3/lgAJAP4AHgDpAO8AUf9L/07/Qf8KAOD/x/+D/3sATQCDAMoA0f79/+L/EQDt/7EAqv+S/7IAuv/o/wgAc//X//H/SwCm/+3/Yf/B/yoAAADI/7X/AwBg/5EATgCX/xYA/P+q/00AVACY/6v/BADD/zwALQCN/8z/KQDu/ygAEgCZ/6f/VQDC//T/KQCs/7P/UgAfAO7/NgC8/57/awAZAPP/+P/V/8z/bQBBAL//DgD0/+T/TABBAMz/CwAxAPz/SQBqALn/BgALAPz/EAA7AIz/3/8iAAUA//8kALf/y/9VABQA+v81AOj/0P9cAB4A+f8WAOr/vv83ABgAw/8JAOj/4f8nACIAsf/y/w4A3v8gACQAxP/n/ycA7P8WAC0Ayf/U/ycA9v/7/yUA0P/P/zUABADc/xUA5P/J/zcACwDS/xUA9P/m/zAACQDX/+3/9v/2/yQACgDZ/+P/AwAKABYA///b/9j/EQALABkADgD6/+7/GwD4/w4A8P/w//j/EgAEAAUA9f/1/wQAGgD4/wAA5////wAAGQD1////7f8FAAUAFQDv/wAA6v8LAAcAFQDs/wEA9P8SAAYACwDr//7/AQASAAYABQDv/wIAAwAWAAIAAgDv/wAABgATAAEA/f/u/wQABgAQAPr/+P/z/wUACQALAPj/9//4/wgABwAKAPT/+f/5/w4ABwAIAPT/+//9/w4AAwADAPH//f///w8A//8BAPP///8BAA0A/f/+//X/AgACAA0A+//8//b/BAADAAoA+f/7//n/BgADAAcA+P/7//v/BwABAAQA+P/8//3/CQABAAIA9//9////CQD/////+P///wAACAD9//7/+f8AAAAABwD8//3/+v8CAAAABgD7//z//P8EAAAABAD6//3//P8FAP//AgD6//7//v8FAP7/AQD7//////8GAP7/AAD7/wEA//8EAP3/AAD9/wEA/v8DAP3/AAD9/wIA/v8CAP3/AQD9/wIA/v8CAP7/AQD+/wEA"]},function(t,e,n){"use strict";const i=n(1),r=n(8),o=n(9),a=n(17),s=n(18),c=n(0),l={AMBISONIC:"ambisonic",BYPASS:"bypass",OFF:"off"},u=[2,3];function h(t,e){this._context=c.isAudioContext(t)?t:c.throw("HOARenderer: Invalid BaseAudioContext."),this._config={ambisonicOrder:3,renderingMode:l.AMBISONIC},e&&e.ambisonicOrder&&(u.includes(e.ambisonicOrder)?this._config.ambisonicOrder=e.ambisonicOrder:c.log("HOARenderer: Invalid ambisonic order. (got "+e.ambisonicOrder+") Fallbacks to 3rd-order ambisonic.")),this._config.numberOfChannels=(this._config.ambisonicOrder+1)*(this._config.ambisonicOrder+1),this._config.numberOfStereoChannels=Math.ceil(this._config.numberOfChannels/2),e&&e.hrirPathList&&(Array.isArray(e.hrirPathList)&&e.hrirPathList.length===this._config.numberOfStereoChannels?this._config.pathList=e.hrirPathList:c.throw("HOARenderer: Invalid HRIR URLs. It must be an array with "+this._config.numberOfStereoChannels+" URLs to HRIR files. (got "+e.hrirPathList+")")),e&&e.renderingMode&&(Object.values(l).includes(e.renderingMode)?this._config.renderingMode=e.renderingMode:c.log("HOARenderer: Invalid rendering mode. (got "+e.renderingMode+') Fallbacks to "ambisonic".')),this._buildAudioGraph(),this._isRendererReady=!1}h.prototype._buildAudioGraph=function(){this.input=this._context.createGain(),this.output=this._context.createGain(),this._bypass=this._context.createGain(),this._hoaRotator=new o(this._context,this._config.ambisonicOrder),this._hoaConvolver=new r(this._context,this._config.ambisonicOrder),this.input.connect(this._hoaRotator.input),this.input.connect(this._bypass),this._hoaRotator.output.connect(this._hoaConvolver.input),this._hoaConvolver.output.connect(this.output),this.input.channelCount=this._config.numberOfChannels,this.input.channelCountMode="explicit",this.input.channelInterpretation="discrete"},h.prototype._initializeCallback=function(t,e){let n;(n=this._config.pathList?new i(this._context,this._config.pathList,{dataType:"url"}):2===this._config.ambisonicOrder?new i(this._context,s):new i(this._context,a)).load().then(function(e){this._hoaConvolver.setHRIRBufferList(e),this.setRenderingMode(this._config.renderingMode),this._isRendererReady=!0,c.log("HOARenderer: HRIRs loaded successfully. Ready."),t()}.bind(this),function(){const t="HOARenderer: HRIR loading/decoding failed.";c.throw(t),e(t)})},h.prototype.initialize=function(){return c.log("HOARenderer: Initializing... (mode: "+this._config.renderingMode+", ambisonic order: "+this._config.ambisonicOrder+")"),new Promise(this._initializeCallback.bind(this),function(t){c.throw("HOARenderer: Initialization failed. ("+t+")")})},h.prototype.setRotationMatrix3=function(t){this._isRendererReady&&this._hoaRotator.setRotationMatrix3(t)},h.prototype.setRotationMatrix4=function(t){this._isRendererReady&&this._hoaRotator.setRotationMatrix4(t)},h.prototype.setRenderingMode=function(t){if(t!==this._config.renderingMode){switch(t){case l.AMBISONIC:this._hoaConvolver.enable(),this._bypass.disconnect();break;case l.BYPASS:this._hoaConvolver.disable(),this._bypass.connect(this.output);break;case l.OFF:this._hoaConvolver.disable(),this._bypass.disconnect();break;default:return void c.log('HOARenderer: Rendering mode "'+t+'" is not supported.')}this._config.renderingMode=t,c.log("HOARenderer: Rendering mode changed. ("+t+")")}},t.exports=h},function(t,e){t.exports=["UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wQA8/8YAP3/CgACAAAA//8CAAYA8/8AAPH/CgDv/97/e/+y/9P+UQDwAHUBEwV7/pP8P/y09bsDwAfNBGYIFf/Y+736+fP890Hv8AGcC3T/vwYy+S70AAICA3AD4AagBw0R4w3ZEAcN8RVYAV8Q8P2z+kECHwdK/jIG0QNKAYUElf8IClj7BgjX+/f8j/l3/5f/6fkK+xz8FP0v/nj/Mf/n/FcBPfvH/1H3+gBP/Hf8cfiCAR/54QBh+UQAcvkzAWL8TP13+iD/V/73+wv9Kv+Y/hv+xPz7/UL83//a/z/9AP6R/5L+jf26/P3+rP26/tD8nP7B/Pv+WP1V/sP9gv91/3P9xP3J/nv/GP5S/sb+IP8v/9j/dv7U/pr+6v+u/Z3/sv5cAOr9Q/83/+n/zP5x/57+2//k/nwA/v01//L+SACB/sD/Ff81AJT+TgDp/ocAm/5dAFT+MgD+/pMAW/7o/yH/xQDA/kkA9P6LAL3+pAC0/iQAz/5UALD+UwAt/3UAhf4UAA//pwC+/joAz/5aAAv/fwDY/iMAIf+uAPP+ZAAc/0QAy/4xAB7/TgDs/goADP8wAEL/NwDo/ub/Uf9BAC3/+v9F/y4ARP9HAFP/EQA3/xMATP81AG3/HQAu/wgAaP9FACb/9f9B/y0AUP8rAED/CwBV/z4AW/8TAGH/BQBK/xsAfv8eAFn/AgB3/zwAff8RAGj//v+E/yAAb//0/3n/FwBz/xcAiv8PAHn/FQCJ/xgAg//x/3j/EQCa/ycAff/w/47/HwCI//X/iv/7/43/JQCM/+n/kP8AAJb/JACj//7/oP8ZAML/SwCo/w4Atv8tAMb/PACr/xcAwP9HAMP/OADF/y4A0f9IANL/NwC//zEA0f9LAMb/MAC8/y4A3f9GAMH/FQDQ/yYA2/8sAMT/AwDX/xkA3v8SAM3/9v/c/w8A4f8LAMj/8f/h/xQA2P8CAMn/8//j/xQA0v/7/9H//P/i/xEA0v/1/9L//f/j/w0A0f/x/9f//v/k/wgAz//u/9z/AwDg/wMA0P/v/9//BQDf////0v/y/+D/CADc//3/0v/2/+L/CgDa//r/1v/5/+T/CgDY//j/2f/9/+T/CADY//f/3P8AAOT/BwDY//f/4P8EAOP/BADZ//j/4v8GAOL/AwDa//r/5f8IAOH/AQDc//3/5v8JAOD//v/f////5v8IAOD//v/h/wIA5/8HAOD//f/j/wMA5/8GAOD//f/l/wYA5v8EAOD//v/m/wYA5f8CAOL////n/wYA5P8BAOH/AADl/wUA4f///+H/AQDk/wMA4f///+T/AQDm/wEA5////+r/AADt/wAA7/////P/AAD1////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////v///wAAAAAAAAAAAQAAAAAA///9/wAABAD+//n/AgAJAAAA+v/+//f/DAAdAPv/+v+l/8L+jf/4/vgAdwVPAQACLQBo+Qj/Ev7o/N3/VgCbA08Bxf+L+yn9J/2HCU8FmgBvDe30Rv5h/LT09gi5CxkA5gOi8/30kwEM+4YJMf2nBmkJJAQQBLoFtvvv+m4A7PF6/R0Bif3qAuf8WARAAf4GyABG/BIAwvr4Acv8U//c/yIC8AEn/B8Daf2CAgMBAf3MAN38vgLK/UT/QwCyAPYClPyvAW/+pQAoASD+zP+R/IYC1f7C/nEBQP96AZb+1QAIAM//yQE7/tkAZ/7TAXL/w/8+AIsAtwB7/24A4v9a/z4A7v4iADb/dwCj/23/kgBOANUAIv8lAKEAxP9gAK7/BwCP/5kA7/9v/0wAzv9DAGT/3/9vAHv/6P+q/xUA7P8XAO//uv/g/2UAEgCV/wEATADM/+7/+//j/+D/9v/i//j/IgD+/xoAxf/6/z4A5/+8/9D/QwDq/+3/OQDT/zUAIgA/APP/PgAjAPD/BwAGACAADAC3//b/HAA3AN//RgDN/w8AIAACAN//GQBDACEAIwA+ACoAJQAeAPz/KgAYAPr/DgAEABYAIgAcAMT/7f8OAOL/5P/2//L/9P8GAPT/7v/8/+7/6v/t//z/AgAUAOL//P8VAAMA4/8IAPb/+P8MAAoA5v8NAAsA9v///wEAAAD9//n/9/8JAAYA7v/6/wMA+f8GAAEA7f/7/xgACAD4/w8A///3/w0A+f8BAAIA/P/5/xIA///9//r/7v/+/xYACQD///H/CwDz/wEADgAHAPP/FADn/+3/AQD5//f/AgD7/wEABwAMAAEADQD8//n/8f8OAPX/BAD+//X/+v8WAAQA+f8CAAEA7/8QAAEA/P8DAAUA9f8KAAwA9v8DAAUA+f8OAAoA9f/7/w0A+v8EAAgA8P/6/woA+//8/wkA+P/3/woA+//8/wcA9//1/woAAwD5/wcA/P/3/w0AAwD3/wEABAD2/wkABgD3/wEABQD3/wUABQD3//v/BwD3/wMABQD3//r/CQD7////BQD6//n/CQD9//3/BAD9//j/BwAAAPv/AwD///j/BwABAPn/AQABAPn/BQACAPn///8DAPr/AwADAPr//v8EAPv/AQADAPv//P8FAP3///8DAPz/+/8FAP7//f8CAP7/+/8EAP///P8BAP//+/8DAAEA+/8AAAEA+/8CAAIA+////wIA/f8AAAIA/P/+/wIA/f8AAAIA/f/9/wMA/////wEA///+/wIA/////wAAAAD+/wAAAAD/////AAD//wAA//8AAP//AAD//wAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD////////+//////8AAP////8AAP//AAAAAPz//f8IAAMA9////w4AAQD6/wwA8//+/y8Afv/0/2H/UP5gAbH+2QG1B2cAVAIh/l32FPyM/nACPQDV/+UEo/Q6AQwCu/oLD9kF8QJA/Uz+Wf2KCOcC+wUKBsL5aQBQ97rwOPiPAvn5CAl8AHEDkQPcAA8Bn/lIAdz7HQF1+xz9cAM4/94E4gDKAun+cgPYAYr9JgJr/bf+ivxz/MoBgv5UA8EBSgAQAJ7/UgEk/cQB7f63/sD/vf4XAhT/BQFCADYAnQGI/9EBtv3hALD/vP+c/3H/TgIN/1sBpf8yAP3/4f8qABr+1f8OAJ3/dwAGADEBnv9JAPz/IQBwAIH/jgAS/4wAsACTAOn/DQDCALn/ZQCSAAIAAwD1/9//jv9aADQA/v9EAB0AfgA8AAQACgB9APr/IAARAPT/5v9xACAABAAHAGUAt/89AC4ACgAjAMP/+v/9/xYA7f/1/+D/7P87AC0Auv8RAAcA9/8FAC8A2//y/xIAEwAaADQAJADp/zoAAgAfABIA2f/e/zUA+P/6/w4A9//A/zcA4//P//T/5f/R////EwDb/w4A8/8BABkANADh/xEA+f/0/wIAHADc//j/GwD1//f/GADs/+v/EAAAAPz/EgD3/+r/FgAMAAkAGAD9/+z/IQAQAPH/GQD3//z/CgAfAOX/AgD8//H/BAATAOv/+v///wIABAAdAOj/BQAPAAcAAQATAOz/8/8JAAkA6f8VAOv/+f8QABUA/v8OAO3/+P8KABUA9f8FAPv/5/8TAA0A7f8XAAkAAQAJABYA4/8WAAcACgANABEA7v8EAP7/AAD+/wMA9//7/xAAAQD8/wQA+f/7/wMABgDq/wAA+v/3/wYACQD1//3/BAD9/wgADgDw//r/AgD6/wEACADv//j/BQD///X/BwDu//j/AgACAPP/BAD2//n/BAAGAPb/BAD8//3/BQAJAPL/AwD+//3/BAAIAPP//f8DAPz/AAAGAPP/+/8CAP7//f8FAPX/+f8DAAAA/P8EAPf/+v8GAAMA+/8EAPv/+/8GAAQA+v8CAP///P8EAAUA+f8AAP///f8CAAUA+P///wEA/v8BAAUA+f/+/wIAAAD//wUA+v/9/wMAAQD9/wQA+//9/wMAAgD8/wMA/P/9/wMAAwD7/wEA/v/+/wIAAwD6/wEA///+/wAABAD6/wAAAQD//wAAAwD7////AQAAAP//AwD8//7/AgABAP3/AgD9//7/AQABAP3/AQD+//7/AAACAPz/AAD+//////8BAP3/AAD//wAA//8BAP7/AAD//wAA/v8AAP7/AAD//wAA//8AAP//","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////P/9//3//////wAAAAAAAAIAAgACAP//CAAEAEEA//+cAAUAb/8HAAH9+P9eARkAogQUAJn8BwCd/gX/+QQNAKoC9gFdAtb/b/vd/936TP/6AsD/nfqn/un1W/0dA8IEsQLvAJv2bP72+WMAkP8dAcX+nQO2AIr6bP/EABX+NgK/Bdj2IQv2AE4EUAiD/xQAnwIm/B0B/wGNAoH7sQaP/b8CiQakAqD+R/9xA477KQL//6r75v/O/pcCgQCtAiMCBQAkANAARwHf//39hgBl/kUAJgEtAUEATgA/AgoASADK/zUAJv29/vL+l/9c/0cAUwBBAE8A6QE5/87/Wv9NAOf+5v7P/5P/4/9BAKYAQwDD/zYB5v+r/zYATwAp/1v/WQAEAB0AhwA0AA0AIAA3AAEAzv/u/+//5v9m/zwAIADQ/8T/SABiANb/SwAbAFf/MQDX/7L/hP8TAPr/AgAMAAsAHwAZAI3/VgDC/9v/5//x/6P/AwBlAMv/yf82AB4A+P9WAPj/NwDi/1EA0v9JANj/JwAcAAEADABYANj/4f8MAEwAmP82AN//3P8UADYA7//6/wIACADU/ygAyv82AN7/9v/2/ygAxv/9/+3/5//n/zUA6//g/y4ADgD5/wsABwDv/xIADwAGACoAJQD3/zIA+/8FABsAFgDO/zAAHAAIABQALADp/xcACAAAAPH/GADs/wkACQAFAAgAFQDp/wIAHAD1//P/EQDw/+3/GAD9/+f/HAD8//T/DAAQAPH/HwD4//r/DwAPAOj/EQACAOn/DAAXAOX/BAAOANH/9/8MAO//9f8LANT/9f8EAO//6f8NANb/+P8KAOz/5v8MAOD/7f8UAO//7//+//7/9v8YAPj/9f/z/wsA+v8SAPD/+v/x/xYA+f8SAPb/9//3/xEABQACAPn/9//y/xQACQD///b//v/7/xIACQD9//H/AAD7/xEAAgD5//P/AwD9/w8AAgD3//D/BAD//wUA/v/0//D/BgADAAMA/P/2//f/BwAGAP7/+//2//j/CAAFAPv/+f/5//v/BwAHAPn/9//7//7/BQAFAPf/9//+/wEABAACAPf/+P8BAAIAAgAAAPj/9/8CAAMAAAD+//n/+f8EAAQA/v/8//r/+/8EAAMA/P/7//z//P8EAAIA/P/5//7//v8DAAEA+//5//////8CAAAA+//5/wEAAAABAP//+//6/wIAAQD///3//P/7/wMAAQD///3//f/9/wIAAQD9//3//v/9/wMAAQD9//z/AAD//wEAAAD9//z/AAAAAAAA///9//3/AAD//wAA/v////7/AAD//wAA////////AAD//wAA//8AAP//","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+////+f////v//v///wAA/////wUAAQAIAAIABwACAHkATAAOAaMAAf9C/9X6QvwhArAAtghABW37nv/y+0wAWQNcAE8JRwSOC6AEJe8P8S/zrPWaBI/+LQA/+0L+P/4K8AgAb/8uCh78BQtC614GaQWfAin5UfzN8Tf+GQizAZ4MCQMbGJ4BoRS7AvcHyQARA6n9ZwHZ/z4DvwAZAlAB6gbNAS4GFADFATL7E/2K+j37C/xp/SD9Uv0VAOsDs//WAd3+bv7F/f79mP2X/KH+FwC0/1n+VgFcATABHQGaAET+nf8Y/hoAovpqAXj9CQKW/lsCl/4RApj+bAHk/RcAlv4BAG/+DgDi//3/GwAOAEIAq/+y/3z/8v8+/7T/Tv8//27/mgDZ/1sA+P+cAAAA/P/i/yMAi/85AMP/KgDM/9MA9P+QABoA4QAiACwACwBdAP7/TQDb/y0Ayf+SAA0AZwDg/4wA+/8/AAMAgQDp/w0ADAAQAAoANgAgAA4AKABIAB4A4v/3/+f/+v/c/+n/EADn/wgAFAAqAOz/IwDc/9//3f8XAND/2v/a/w0A5v8BANb/9P/m/wAA8P8ZAN3/RwAGAEsABgB/AP7/NAASAEgABAA3AP3/KgD9/1sA8P8lAOr/FgD1/xAA4/8kAOv/AwD4/xEA5f8NAPT/+v/3/x8A7f8PAPj/IwD5/yAA9/8ZAAEAGgD4/xoA9f8HAAMACAD0/xgA+P8AAPr/IQDp/w4A8v8HAPX/IgD1/wYA+P8GAPX/GgD3/woABQASAAcAGQDw/+v/9P8bAP3/HADs/+f/7/8LAPr//v/0//T/AgD2/wsA6P///+P/CADY//7/5v/3/wQA/v8LAPD/GgD1/yMA/P8QAOv/LADw/yQA+P8XAO7/MQD9/yEAAQAcAPD/IgD9/xMA+/8OAO//FQABAAoA+/8PAPP/FQABAAQA9/8PAPX/CAADAAEA+P8NAPv/CAAGAAUA9/8JAP//AAAFAPz/+f8HAAQA/f8FAP3//P8FAAYA+P8DAP7/+/8AAAcA9/8BAP///f///wgA9//+/wAA/v/8/wUA9//8/wIA///7/wUA+v/7/wIAAAD6/wMA/P/6/wEAAQD6/wEA/v/7/wIAAgD6////AAD7/wEAAgD7//7/AQD8/wAAAwD8//3/AwD9/wAAAgD9//z/AwD/////AgD+//z/AwAAAP7/AQD///3/AgABAP3/AAAAAP3/AgACAPz///8BAP3/AQACAP3//v8BAP7/AAABAP3//v8CAP7///8BAP7//f8CAP////8AAAAA/v8CAAAAAAAAAAAA/v8BAAAAAAD//wAA//8AAP//AAD//wAA//8AAP//","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAP//AAD//wAA//8AAAAA/////wAAAQD+////AAAGAP3/OAABAIIAAwBv//f/E/0QAK0ADQCzA/7/8P4u/0cBDQCJA6ABbQDg/w7/z/9o+Vn/SPnL/1//Ef+2+jr9RfZgA5QFZwILDFj+PAb2/nEFKgKk/R0Dlv6b/FUDsP6YAoj9SgAT/iL/tAPwAv8A0P6zAr7/dwAnAf39uP22/skA2v///2YCoP4UAUsAZgF2AJH+4P70/rz9+f+U/Xv/8v7CAcb+TACS/kwAv/+x/tX9oP71/oL/1f8nAEUAZwGtAAgAIgC/AD4BaP8GAGH/dQDF/64Arf8nAakAhAH9/+kAQQD3AFb/q/8p/yIAR/8FAPD/ZAA/AIYA3v8tADQADQBp/3f/CwABAP3/Wf8OANj/WwDH/xoAe/8DAKz/zv96/z8A3f/J/5X/IAD5//j/q//c/+//RADq//D/vv8pADUAFQDI/y8ACAAbANb/OwD3/+3/9f/e/wcAIAAeAMH/8/8xAC0AEADW/+3/HAADAPv/8P8DAOL/OwD3/xcACQAHAM//5f8XAAcAz//T/9D/HgD9////yf/e//v/AgD//9H/6/////H/+/8hAAIA9//7/w0AFgAQAPL/2v/8/xsAGQABANz/9P8YAAQA/v/y/wMA5v8YAAkAAAAAAAMA7/8KABgADwDs//j/BwATABsA8P/1//z/BAAMAAAA9P/s/xAA/v8GAAkA/v/p/wMACwALAP7/9P/p/wcADQAFAPb/7//4/w0ACAD8//b//v/1/wMACwD1//T/8P/8/wAACQDz/+f/5P8GAAkABQD5//D/+v8FAA0AAwD///T/AgACABAA/v8CAPD/+/8FAAoA9f/3//f//v8GAP7/9v/t//z/+f8AAPj/+v/3/wEA+v8HAPr//P/5/wQA//8DAPr/+P/3/wYA///+//X/+//5/wQA/f/7//X/+//4/wMA/f/8//j//v/9/wYA///8//f/AgAAAAUA/f/6//n/AwACAAIA/f/7//z/AwACAAAA/f/6//3/AgADAP7//f/7/wAAAwAFAPz////8/wMAAgAEAPv//v/+/wMAAgADAPv//v///wMAAQABAPv//f8AAAIAAAD///v//f8BAAIA///+//z//v8CAAIA/v/9//3///8CAAEA/v/9//7/AAACAAAA/v/9////AAABAAAA/f/9/wAAAQABAP///f/+/wEAAQAAAP///v/+/wEAAQD///7//v///wEAAQD///7//v///wEAAAD+//7///8AAAAAAAD+//7///8AAAAA///+//7///8AAAAA////////AAAAAP////////////8AAP//////////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAAAAAAABAAAAAAD//////////////v////3/////////+//8////AQD9//z/9f8BAAIA+f8dACgAWQBxAJX/qv+Y/uz9aP9k/7UDUQQBAiQA4Pgi/AkB0gKaBsD/+fxp/vz9CQSp/I/+ywDO+vMD0fzK/PABcgBeBfoBv/+uAuH9Sf5gAy39awMmBWUBuP9fA9/9fgDj/2/+EACaACcCSv9Z/2j/rv7hAA0AWf55/7L84P7E/SIAT/67AMv/tf+FAA7/1v+7/gv/IP+E/sQA+P5aAXz/tP9XAFX/tP8o/4r/j//e/yQAMv9mAJT/rgCr/9X/EwCb//H/9f7F/6D/EAAoAK3//v+e/zsAh/+B/7r/if/C/2r/4P/z/6//HwCy/0IA7/9ZALT/y/80ACgA9v/J/9//DgA5ADUALQARADIACwAfAOf/NgArACMACQBBAEcAGAAjAC4AWQBUAHcAAAAfACEAIAAcAPj/CADk/yQA7v89AEEAFwD5/xYA6f8aAOX/AADF/zQADwAUAOT/BQDr/yUA6P8XAOf/HADR/0AA8P8nAAgACQDt/ycAKAAHAPH/IQDz/xsACADn//n/DgADAA4A8P///8z/GgDN/yMA/f8QANj/MwACAC0ACwAOAO3/JgAZAAUACgAAAA4AIgAaAAkADwACAAAAHQATAAUABQACAAgACwAjAO////8AAA8ABQAPAPL//f8GAAsABgAGAPD/8v8GAPz/CAD6//H/6v8PAAgABgD4//3/9v8aAAgABwD1//7//v8QAAoACAD//wUA9v8QAAoABAAFAAgAAgAJAAoAAwD//w0AAgD//wcA/v8DAAoABQAFABUABAAKAAYABwAHAA8ACgAGAAwADwAMAAkAEAAJAAgADwAMAAgADgAJAAUACQAPAAUACwAHAAEABgAIAAEABAAGAP//AgAJAAAAAgAEAP7///8IAAIA//8GAAEAAQAJAAIA/v8EAAMA//8JAAEA/v8DAAMA/v8HAAMA/f8BAAUA/v8FAAMA/v8BAAcA//8DAAMA/v8BAAYA//8CAAMA/////wcAAAAAAAMAAAD//wYAAQD+/wMAAQD//wUAAQD+/wIAAgD//wQAAgD+/wEAAwD//wMAAwD+/wEAAwD//wIAAwD//wEABAAAAAEABAD//wAABAABAAAAAwAAAAAABAABAP//AwABAAAAAwACAP//AgACAAAAAwACAP//AgACAAAAAgACAAAAAQADAAAAAQACAAAAAQADAAAAAQACAAAAAAACAAEAAAACAAEAAAACAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAABAAEAAAAAAAAAAAAAAAAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAAAAP//AAD//wAA//8AAAAA//8AAP//AAACAAAA+f8BAAYA///4/wIA//8AAA8A/v/V/wEAEwA9AAEBRwA2AF7/kfog/3gBwv99CDYBU/qtAUX/AP7OAfkAX/o9B38FSfwaAuT14/60BAr8CQAI/tfyIQTzAXP+egdUBBwBof7TBMT8bAWi/5EEWwBRAAAKyfxE/8b88vp6ACP+PAF4/qD8MQNM/ygCJ/2XAPD9kP5gAVT/iP9I/lEB4P8qAD0BFAGa/+7/DgB2AOP98gFm/u/+Vv5/AG8ASP9gAM//qv9w//oAcv+2/jIBHgA7/6D/oAAGAKH/lADT/wAAggC8AAYAkP9yAEcAkf8BAOD/RAAr/zUANwDt/xQAJQAkAMT/zwA/AOH/xv9zAGsANQBTAIcALAAvACIATACy/xMADADg/xcAWABvAJL/7f9VAPb/EgDt/wcA4f8kAPP/5P+h/wgACQDy//r/LgAQAMn/8/9CAOX/5v/S/9//3P8pABYAuP/s/w8AFgDt/+3/7v/w/9j/5/8GAOf/2P/2//P//v8kABMAuf/m/xoADADZ/+r/3P8KAAUAKwDe/wsA3P8VAAAADgAfAB0ACAAMAF4AGgAhAPL/MwDz/0kABAAKAPX/LwAbAAkA9v/s/+3/8/8CABAAAADm//n/BQALAAUAAQDj//n/JQAVAPX/9v/+/wIAEQABAPP/8P/1/wAABgD6/+3/7//o//j/DAD8/+b/8P8IAAkABgD4//D/8P8UAAoAAwD4/wAA+f8OAAcAAAAFAPX/9v8TAAkA8v8EAPb/9/8dAA0A7/8CAPn/+f8SAAQA8/8CAOf/+v8DAAgA9P////H//P8IAAUA8//0/wIAAQAGAAgA9//7/wAA+/8EAP//+P/+////AgACAAsA8v/+/wIABQD7/wgA9v/7/wMABAD5/wAA/P/3/wEAAQD7//7//P/1/wQA///3//r////3/wMAAwD1//r/AwD6////AgD4//n/AwD8//7/AgD4//n/AwD+//3/AQD4//n/BQD///n/AAD6//j/BAABAPj/AAD9//v/AwADAPj//v/+//z/AwAEAPj//v8BAP7/AQADAPj//f8CAP////8EAPr//P8DAAAA/v8CAPv//P8DAAEA/f8BAP3//f8DAAIA/P8AAP7//f8DAAIA/P///wAA/f8BAAIA+//+/wEA//8AAAEA+//+/wEA/////wEA/P/+/wEA///+/wAA/f/9/wEAAAD9/wAA/f/+/wEAAQD8/////v/+/wAAAQD8////////////AQD9////AAD/////AAD+////AAAAAP//AAD///////8AAP//AAD//wAA//8AAP//"]},function(t,e){t.exports=["UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wQA8/8ZAPr/DAD+/wMA/v8KAAQA/f8DAAMABADs//z/8v/z/8f/R/90/ob+//zAAWsDAwY3DKn9//tu93DvkwI6An4CuwJ0/BH7VPux92X0Gu7N/EX9mgfqCkkIiRMgBd4NQQGL/c0G/xBxAKELZATUA/sIHRSx+fkCyAUmBNEJIARlAdHz2AjNACcIsAW4AlECsvtJ/P/7K/tf++n8aP4W+g0FXAElAMn8nQHn/sT+Zv7N+9X2xvzM/O3+EvpqBBD7SQLd+vb/sPlw/JD72/3n+Rr+L/wS/vz6UQGg/Nf+Av5L/5X9Gv2//SP+mf3j/lf+v/2B/ZH/5P05/iL9MP9F/uf9UP4v/qv9mv7o/Xn+wP2k/8L+uP5J/tD+Dv/Y/bL+mP72/n3+pP+7/hAA+/5zAGH+Z/+u/g8Azv2y/6L+//9o/iIADP8VACz/CwCN/pb/1v4yAFP+wf+4/jsAcf5VAP3+bADa/nMA6f4sAOT+IQBd/v7/7v6aAIL+QADe/nEA0P4yAKz+CQCo/moAuf5xAN7+mAC8/jcANf9eAPX+IAA1/1kAAP9hAMz+PQD5/m0A2/4gAPr+UQDh/jQAEv9BAPH+FABN/zkASv9DADP/BABe/1IAGf8oAE3/RQAw/zIAQf8mADn/GgBE/xIAR/8hAD7/BABy/zEAKP/0/07/GwBX/z4ARf8mAFr/QQBV/zUAVP8eAFz/JABt/0EAUP8MAHz/KgBr/ycAYv8EAH3/MABl/x8Agv8bAIj/GgBv//z/ff8AAJX/IABu/+T/jv/r/4z/9/9n/77/pP8JAJD/EQCJ//r/q/8WAJ//GQCU/xYAtv8qAKr/PQCW/ysAwf8+ALb/OgC3/ygAz/8uAM7/OgDH/ygAz/8kAMz/OgC//xsA1f8qAMn/LwDN/xcA1f8oAMv/JQDR/xMAzf8bAM//HgDU/wUA2v8ZANL/EwDW/wEA1f8ZAMz/BwDX/wIA0v8SANT/BQDW/wMA0/8PANT/AADY/wIA1f8MANX/+f/a/wUA0v8IANf/+//Y/wUA0/8DANr/+f/Y/wQA1v8BANr/+f/Z/wUA1//8/9z/+v/Y/wYA2f/8/93//v/Y/wUA2v/9/93////Z/wUA3P/8/97/AgDa/wMA3v/8/97/AwDb/wIA3//9/97/BADd/wEA4f///9//BQDf/wAA4v8AAN//BQDf/wAA4/8CAN//BADh/wAA4/8DAOD/BADi////4/8DAOH/AwDk/wAA5P8FAOL/AgDl/wEA5P8FAOL/AQDl/wEA4/8EAOL/AQDj/wIA4P8DAN//AADg/wIA3v8CAOD/AADh/wEA4v8AAOP/AADm/wAA6P8AAOz/AADu/wAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////f/+//7///8AAP////8BAAEA/f8AAAEAAQAFAAUA9//6/x0A2f/9/xMA3P+jAE//of9HAKP//gCj/77/Z/vi/28D9/ywDJAJIvr6AsX0Xec4BhcGzf23DZP7yfZ6C1//nwBDBIHyYgob/Tf3sQ41ANoKRA/A+E7yffAa9gD5EQUBDMwMygiqAHMAqPqhAGUB2/gE+a78H/+4APT6DwIUAA0HNwMhBfL8E/90A5n7dP9cALIC+v5C/q0AOv9kAogBHv01/+3/qAQD/ub8T/4vAOUA5P6KATv+ywEYAeT+KP6i/3gCFP6h/hr/+P83ACL/VADn/8UARQJI/4MAu/8qAlj+wf4iAPb/LgFJ/8QAUABAAI4ABf+k/3X/YgFK/ij/j/9HADoAi/+WAA0BVwC/ACL/LACe//cARv9i/xgAUgA0ACj/FgBgAIj/5P9M/7z/zv8/AKz/gv8sAEQA6/+I/yYAawDL/7T/xf8qAOv/FQCu/5n/EgAyAO3/i/9LAE4A+//R//P/FgDe/8z/u/8DADIALAAZALL/TAA8ABwAo//1/xwA/P/L/z0A6P8jAN7/7v+a/zAAwf/7/3//KQAuACwA9v8RAGYAIwBNADgAKgASAF0ADgANACEAMQDH//H/LQACAB0Ay////x0APAABAAQA2v8iAAcAEgDE/+v/FQD+/+P/DAD1/97/6v/4//X/EwD4/+7/5P8cAA0ACQDH//7/CQAXAAEA/P/5//j/CwAWAAEABQD9//n/AQAWAB0A7v/k/wAACQAmAP//9/8AAPn/8/8aAO//6/8fAOv/5v8hAP//5/8PAOf/AAAGAPn/6v8JAAYABgABAOv/1//1//L/+P8DABcA6f/8/wMACgD7/xAA3v/2//z/DADu//z/5v/5/wEA/P/6//7/7v/x/wQABgD5/wAA8v/w/wkAEQD2//j/+v8EAAcAEAD3//v/+v8CAAAACQD3//v//v/9/wUADAD2//X/AgAHAAAABwD2//T/BgAKAP7/AQD4//r/BAAIAPn/AAD3//f/BQAHAPv//v/7//n/BQAJAPj/+v/9//7/AgAGAPj/+f8BAAEAAgAFAPn/+v8BAAIAAAAEAPn/+f8CAAQA/v8BAPr/+v8CAAQA/P////v//P8CAAQA+//+//3//f8CAAUA+v/9//////8AAAQA+v/8////AAD//wIA+//8/wAAAQD+/wEA+//8/wAAAgD9/////P/9/wEAAgD8//7//f/9/wAAAgD8//3//v/+////AQD8//z/////////AAD8//3///8AAP7/AAD9//7///8AAP7////+//////8AAP7////+////////////////////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD//////v8AAP///////wAAAAAAAP7/AQABAAAABwD///X/BQAjAPL/CQDb/9D/GAAb/7sAYwCW/z0BcP/X/7T/2QDW+wH8yANCCCUJ5QT++UXmhPwhA78FuAxH+p78ifudBlAG9vmu/lAK2fdlB///cfjoCa0E7Akn9Yb/zvba+AkAHPywBGEBFwUNAL8AXAAGA20DFvmR/kz+F/06Ag/+GwHl/5EEKgJd/q0AP/ym/9n6EfxY/2H+/QFtAC4C6QBDAaMCo/20/+3/3f/p/fL9rv9V/6cBhQHuAX4AcwJYAaH/IP/P/gsApP0LAe7/sQBuAI0AAgGDAE4BzACe/5X//v+v/+f+Zf+gAOv/5QBhAOIApAANASYAuP+h/8b/HQBr/9//bACWAGEAFAB5AD0AWQDU/+D/Yf/p//D/s/+R/4QAMQBvABEAkQBfABQAJgDW/wwA8/8XALz/vf8zAFAAKwD1/zEAPwDJ/x0A7/8LAOX/FwDR//H/EQAdAO//6P8QAFEA2f8WABEAMgDy/xIA+f/s/xAALgDv////HQAvAPT/+f8iAAYAEgAFABoAGgD//w0A+f/0/xsAHgDx/9f/GAACAPH/8f8JAPf/GwALABEA7/8cAPT/CgD2//j/BQD8/+3/OgAgAAYA9f8PAN7/DgD9/9r/1//3/+3/9//1//b/8//5//f/AgAJAOf/+v8OAAMACwD9/+7/5f8eAAEA9//q//7/8P8WAP7/+//4/wIA+f8TAAIA9f/5/wcA+P8iAAgA9v/n/xoA//8gAAUABwDj/wAA9v8BAAUAFQDn/wMA7v8QABAAEQDm/wwA8f8aAAAABwDu/wcACgASAAEA7//w//f/BgARAAkA6P/3/wcADgAKAAYA4f/4/wYADgAAAPr/8P/9/xQACgAHAPn/7//9/xEAAgD+//L/8v/8/xUAAwDw//H/9f8CAAsA/v/q//L/+f8FAAYA/P/r//j///8GAAkA+//o//j/AQAIAP//+v/o//v/CAAIAPv/+P/w/wEACQAHAPj/+f/0/wIACwAFAPb/+f/4/wQACwACAPP/+f/+/wYACAD///L/+/8BAAYABQD9//P//P8FAAUAAgD7//T//f8HAAQA///7//f///8IAAMA/P/6//r/AQAIAAEA+v/6//3/AgAHAAAA+f/7/wAAAwAFAP7/+P/8/wIAAgACAP3/+f/9/wMAAwAAAPz/+v/+/wQAAgD+//z/+/8AAAQAAQD8//z//f8BAAQAAAD7//3///8BAAMA///7//3/AAACAAEA/v/7//7/AQABAAAA/v/9////AQAAAP///v/+////AAD/////////////////////////////","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD////////+//////8AAAAA/v/+/wAAAQD8//3/CQAJAP3/+v8PAAcApABlABkBkwCO/i//lfqa/HQAcf/3BdkCzwJcBCMC0wMN/9/9wgI7AaECYfxV/Tf83vhn/xrt8Owx/8n7cgHABYb43QcZDh4WugNrA7P74gHu/9z/zv0t/acCiQHY/iv4qQOl/ysCE/0//XT9Sf4O//j9xfupAn394gHO+rsCXAFIAxQC9wIXBgcD2AQuAnb/9gJh/6wAVfxEAI4Bvf7oAFv/bALsAMQBe/88/joAT/4dAH39/v9LAXn/gwDI//QBdABcAA0A7f4lAMn///+9/tv/iABp/13/pP/dALv/w/8MAHv//f+y/6////7U/5AAZP+Z/8r/nQDR/5r/DwDr/xAA4v+s/3z/+P9uAOv/t/82AGcAHgCb/yQAFQBGAM7/CgD3/xoAegAaAOz/CgBHAA8Adv8/AAAABQC2/xIAAAA7ABQAKgCj/z4AAQAXAJz/JAADAAcA8f/1/2AAAQAlAPD/NgDx/1wA7v/4/wMAZADv//3/HQAkAFoA8P9FAPv/FgBIAPf/WQAHAEUACQD0/xIAQwDu/wMAwP9VALn/XwCw/yEA5f8sAPj/FgDD/1YAyv8rAOX/HQDo//j/IQAQACAAHwD9/yQAHQBAABgABQAiAAUAKAD3/wkACwAKAAMABwAJAPb/+f8GAOr/JQAHABMA6P8TAA4AGgD//woA8/8ZAP//GADu/w0A9v8SAAMABwD4/wQA5P8XAAQACgDq/wUA+/8VAAcACADs/xIAAAATAPH/+v/1//T/7f///+z/+v/y/+//9/8KAAcACgAJAPT/BAAKAAAABgAIAPL/9v8KAAMABAACAPr/9v8OAAIA+P/x//v/+f8MAPb/+P/w/wQA9f8MAPn////7/woA/v8PAAEAAgD1/xAAAQAPAP//AwD//xQABwALAAAABgADABAAAgAHAAAACAABAA8ABQAFAAMABwAEAA4ABwADAAEACQAFAAoAAwD//wAACQADAAUAAQD/////CAABAAMAAAD/////BwACAAEAAAD/////BwACAP7///8BAAAABgABAP7///8CAAAABAAAAP7///8DAAAAAwAAAP3///8DAAAAAQAAAP3//v8EAAAAAAD+//////8EAP/////+/wAA/v8EAP/////+/wEA/v8EAP///v/+/wIA//8DAP///v/+/wIA//8BAP///v/+/wMA//8BAP/////+/wMA//8AAP//AAD+/wQA//8AAP7/AQD//wIA////////AQD//wIA////////AQAAAAEAAAAAAP//AQD//wEAAAAAAP//AQAAAAEAAAAAAAAA","UklGRiQEAABXQVZFZm10IBAAAAABAAIAgLsAAADuAgAEABAAZGF0YQAEAAD+/wAA+v8AAPz/AAD//wAA/f8AAAEAAAD+/wAACQAAAAQAAAAZAAAAtgAAAFsBAABW/gAAH/oAAGcBAABoBwAAlAAAAO3/AAARAQAA+wIAAEoEAACe/gAAiv4AALD0AADJ8wAAkQQAAF34AABi8QAAPQAAAAH2AAD19AAADAMAAJwGAACTEAAA0AwAAJkHAACOBwAAuQEAANcDAAC6AgAAHwUAAHEFAAB0AwAAbgEAADz+AADYAQAAGAAAAJwCAADgAAAA//0AAMn+AAAT/AAAwP8AAOn9AAAJAAAAewEAAOn+AACN/wAAOv0AAO3+AADN/gAAcP8AACj/AACq/gAA+f4AAML9AACa/wAA/f4AAN7/AABo/wAA6/4AAE//AAAC/wAAEQAAAHX/AAB0AAAA5f8AAEwAAAB3AAAA5/8AAMIAAABCAAAAzgAAAE8AAAB3AAAAKAAAADMAAACqAAAALwAAAK4AAAASAAAAVgAAACgAAAAtAAAATAAAAP3/AAA7AAAA2/8AACQAAADw/wAALQAAADEAAAAlAAAAbAAAADMAAABUAAAAEAAAACgAAAD1/wAA9v8AAPr/AADu/wAALgAAABIAAABUAAAARAAAAGUAAABGAAAAOAAAAGAAAAAuAAAARQAAACEAAAAfAAAAAAAAAAkAAAAQAAAAAwAAABIAAADs/wAAEAAAAAYAAAASAAAAIgAAABEAAAADAAAABAAAAA8AAAD4/wAAHQAAAAsAAAAIAAAADgAAAP//AAAcAAAADwAAAAYAAAASAAAAFwAAAAMAAAAYAAAAEgAAAPr/AAAQAAAADQAAAAoAAAD3/wAABgAAAPb/AADf/wAA/v8AAPL/AAD6/wAAFAAAAAQAAAAEAAAAGwAAAAEAAAAMAAAAIAAAAAIAAAAdAAAAGAAAAAIAAAAcAAAAEgAAAAcAAAAeAAAADwAAAAQAAAAeAAAABAAAAAYAAAAZAAAAAQAAAA4AAAATAAAA/v8AAAoAAAAOAAAA+/8AAAsAAAAJAAAA+f8AAAsAAAABAAAA+f8AAAoAAAD9/wAA+v8AAAcAAAD5/wAA+v8AAAUAAAD3/wAA/f8AAAQAAAD2/wAAAAAAAAEAAAD3/wAAAgAAAAAAAAD4/wAAAwAAAP7/AAD6/wAABAAAAP3/AAD8/wAABAAAAPv/AAD+/wAAAwAAAPv/AAD//wAAAQAAAPv/AAAAAAAAAAAAAPv/AAACAAAA//8AAPz/AAACAAAA/v8AAP3/AAACAAAA/f8AAP7/AAABAAAA/f8AAP//AAABAAAA/f8AAAAAAAAAAAAA/v8AAAEAAAAAAAAA//8AAAAAAAAAAAAAAAAAAAAAAAAAAAAA"]},function(t,e,n){"use strict";e.getBrowserInfo=function(){const t=navigator.userAgent;let e,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];if(/trident/i.test(n[1]))return{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""};if("Chrome"===n[1]&&null!=(e=t.match(/\bOPR|Edge\/(\d+)/)))return{name:"Opera",version:e[1]};n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/([\d.]+)/i))&&n.splice(1,1,e[1]);let i=t.match(/android|ipad|iphone/i);return i||(i=t.match(/cros|linux|mac os x|windows/i)),{name:n[0],version:n[1],platform:i?i[0]:"unknown"}},e.patchSafari=function(){window.webkitAudioContext&&window.webkitOfflineAudioContext&&(window.AudioContext=window.webkitAudioContext,window.OfflineAudioContext=window.webkitOfflineAudioContext)}},function(t,e,n){"use strict";t.exports="1.0.6"}])},t.exports=i()},function(t,e,n){"use strict";t.exports="0.0.4"}])},t.exports=i()},function(t,e,n){"use strict";var i=o(n(130)),r=o(n(129));function o(t){return t&&t.__esModule?t:{default:t}}AFRAME.THREE,Math.PI,Math.PI,AFRAME.registerComponent("virtual-gamepad-controls",{schema:{},init:function(){var t=document.createElement("div");t.classList.add(r.default.touchZone,r.default.left),document.body.appendChild(t);var e=document.createElement("div");e.classList.add(r.default.touchZone,r.default.right),document.body.appendChild(e);var n=i.default.create({zone:t,mode:"static",color:"white",position:{right:"50px",bottom:"50px"}});this.onJoystickChanged=this.onJoystickChanged.bind(this),n.on("move end",this.onJoystickChanged),this.leftTouchZone=t,this.leftStick=n,this.yaw=0,this.onEnterVr=this.onEnterVr.bind(this),this.onExitVr=this.onExitVr.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVr),this.el.sceneEl.addEventListener("exit-vr",this.onExitVr)},onJoystickChanged:function(t,e){if(t.target.id===this.leftStick.id)if("move"===t.type){var n=e.angle.radian,i=e.force<1?e.force:1,r=Math.cos(n)*i,o=Math.sin(n)*i;this.el.sceneEl.emit("move",{axis:[r,o]})}else this.el.sceneEl.emit("idle",{axis:[0,0]});else if("move"===t.type){var a=e.angle.radian,s=e.force<1?e.force:1;this.yaw=Math.cos(a)*s,this.el.sceneEl.emit("rotateY",{value:this.yaw})}else this.yaw=0,this.el.sceneEl.emit("rotateY",{value:this.yaw})},onEnterVr:function(){this.leftTouchZone.style.display="none",this.rightTouchZone.style.display="none"},onExitVr:function(){this.leftTouchZone.style.display="block",this.rightTouchZone.style.display="block"},remove:function(){this.el.sceneEl.removeEventListener("entervr",this.onEnterVr),this.el.sceneEl.removeEventListener("exitvr",this.onExitVr),document.body.removeChild(this.leftTouchZone),document.body.removeChild(this.rightTouchZone)}})},function(t,e,n){var i=n(12),r=n(155),o="__id";t.exports.ID=o;var a={};function s(t){var e={type:t.type};if(t.type===i.Shape.types.BOX)e.halfExtents=l(t.halfExtents);else if(t.type===i.Shape.types.SPHERE)e.radius=t.radius;else{if(t._type!==i.Shape.types.CYLINDER)throw new Error("Unimplemented shape type: %s",t.type);e.type=i.Shape.types.CYLINDER,e.radiusTop=t.radiusTop,e.radiusBottom=t.radiusBottom,e.height=t.height,e.numSegments=t.numSegments}return e}function c(t){var e;if(t.type===i.Shape.types.BOX)e=new i.Box(u(t.halfExtents));else if(t.type===i.Shape.types.SPHERE)e=new i.Sphere(t.radius);else{if(t.type!==i.Shape.types.CYLINDER)throw new Error("Unimplemented shape type: %s",t.type);(e=new i.Cylinder(t.radiusTop,t.radiusBottom,t.height,t.numSegments))._type=i.Shape.types.CYLINDER}return e}function l(t){return t.toArray()}function u(t){return new i.Vec3(t[0],t[1],t[2])}function h(t){return t.toArray()}function d(t){return new i.Quaternion(t[0],t[1],t[2],t[3])}t.exports.assignID=function(t,e){e[o]||(a[t]=a[t]||1,e[o]=t+"_"+a[t]++)},t.exports.serializeBody=function(t){return{shapes:t.shapes.map(s),shapeOffsets:t.shapeOffsets.map(l),shapeOrientations:t.shapeOrientations.map(h),position:l(t.position),quaternion:t.quaternion.toArray(),velocity:l(t.velocity),angularVelocity:l(t.angularVelocity),id:t[o],mass:t.mass,linearDamping:t.linearDamping,angularDamping:t.angularDamping,fixedRotation:t.fixedRotation,allowSleep:t.allowSleep,sleepSpeedLimit:t.sleepSpeedLimit,sleepTimeLimit:t.sleepTimeLimit}},t.exports.deserializeBodyUpdate=function(t,e){return e.position.set(t.position[0],t.position[1],t.position[2]),e.quaternion.set(t.quaternion[0],t.quaternion[1],t.quaternion[2],t.quaternion[3]),e.velocity.set(t.velocity[0],t.velocity[1],t.velocity[2]),e.angularVelocity.set(t.angularVelocity[0],t.angularVelocity[1],t.angularVelocity[2]),e.linearDamping=t.linearDamping,e.angularDamping=t.angularDamping,e.fixedRotation=t.fixedRotation,e.allowSleep=t.allowSleep,e.sleepSpeedLimit=t.sleepSpeedLimit,e.sleepTimeLimit=t.sleepTimeLimit,e.mass!==t.mass&&(e.mass=t.mass,e.updateMassProperties()),e},t.exports.deserializeInterpBodyUpdate=function(t,e,n,i){var o=1-i,a=i;n.position.set(t.position[0]*o+e.position[0]*a,t.position[1]*o+e.position[1]*a,t.position[2]*o+e.position[2]*a);var s=r.slerp(t.quaternion,e.quaternion,i);return n.quaternion.set(s[0],s[1],s[2],s[3]),n.velocity.set(t.velocity[0]*o+e.velocity[0]*a,t.velocity[1]*o+e.velocity[1]*a,t.velocity[2]*o+e.velocity[2]*a),n.angularVelocity.set(t.angularVelocity[0]*o+e.angularVelocity[0]*a,t.angularVelocity[1]*o+e.angularVelocity[1]*a,t.angularVelocity[2]*o+e.angularVelocity[2]*a),n.linearDamping=e.linearDamping,n.angularDamping=e.angularDamping,n.fixedRotation=e.fixedRotation,n.allowSleep=e.allowSleep,n.sleepSpeedLimit=e.sleepSpeedLimit,n.sleepTimeLimit=e.sleepTimeLimit,n.mass!==e.mass&&(n.mass=e.mass,n.updateMassProperties()),n},t.exports.deserializeBody=function(t){for(var e,n=new i.Body({mass:t.mass,position:u(t.position),quaternion:d(t.quaternion),velocity:u(t.velocity),angularVelocity:u(t.angularVelocity),linearDamping:t.linearDamping,angularDamping:t.angularDamping,fixedRotation:t.fixedRotation,allowSleep:t.allowSleep,sleepSpeedLimit:t.sleepSpeedLimit,sleepTimeLimit:t.sleepTimeLimit}),r=0;e=t.shapes[r];r++)n.addShape(c(e),u(t.shapeOffsets[r]),d(t.shapeOrientations[r]));return n[o]=t.id,n},t.exports.serializeShape=s,t.exports.deserializeShape=c,t.exports.serializeConstraint=function(t){var e={id:t[o],type:t.type,maxForce:t.maxForce,bodyA:t.bodyA[o],bodyB:t.bodyB[o]};switch(t.type){case"LockConstraint":break;case"DistanceConstraint":e.distance=t.distance;break;case"HingeConstraint":case"ConeTwistConstraint":e.axisA=l(t.axisA),e.axisB=l(t.axisB),e.pivotA=l(t.pivotA),e.pivotB=l(t.pivotB);break;case"PointToPointConstraint":e.pivotA=l(t.pivotA),e.pivotB=l(t.pivotB);break;default:throw new Error("Unexpected constraint type: "+t.type+'. You may need to manually set `constraint.type = "FooConstraint";`.')}return e},t.exports.deserializeConstraint=function(t,e){var n,r=i[t.type],a=e[t.bodyA],s=e[t.bodyB];switch(t.type){case"LockConstraint":n=new i.LockConstraint(a,s,t);break;case"DistanceConstraint":n=new i.DistanceConstraint(a,s,t.distance,t.maxForce);break;case"HingeConstraint":case"ConeTwistConstraint":n=new r(a,s,{pivotA:u(t.pivotA),pivotB:u(t.pivotB),axisA:u(t.axisA),axisB:u(t.axisB),maxForce:t.maxForce});break;case"PointToPointConstraint":n=new i.PointToPointConstraint(a,u(t.pivotA),s,u(t.pivotB),t.maxForce);break;default:throw new Error("Unexpected constraint type: "+t.type)}return n[o]=t.id,n},t.exports.serializeContact=function(t){return{bi:t.bi[o],bj:t.bj[o],ni:l(t.ni),ri:l(t.ri),rj:l(t.rj)}},t.exports.deserializeContact=function(t,e){return{bi:e[t.bi],bj:e[t.bj],ni:u(t.ni),ri:u(t.ri),rj:u(t.rj)}},t.exports.serializeVec3=l,t.exports.deserializeVec3=u,t.exports.serializeQuaternion=h,t.exports.deserializeQuaternion=d},function(t,e,n){var i=n(37);function r(){throw new Error("[AmmoDriver] Driver not implemented.")}r.prototype=new i,r.prototype.constructor=r,t.exports=r},function(t,e){t.exports={INIT:"init",STEP:"step",ADD_BODY:"add-body",REMOVE_BODY:"remove-body",APPLY_BODY_METHOD:"apply-body-method",UPDATE_BODY_PROPERTIES:"update-body-properties",ADD_MATERIAL:"add-material",ADD_CONTACT_MATERIAL:"add-contact-material",ADD_CONSTRAINT:"add-constraint",REMOVE_CONSTRAINT:"remove-constraint"}},function(t,e,n){var i=n(12),r=n(37);function o(){this.world=null,this.materials={},this.contactMaterial=null}o.prototype=new r,o.prototype.constructor=o,t.exports=o,o.prototype.init=function(t){var e=new i.World;e.quatNormalizeSkip=t.quatNormalizeSkip,e.quatNormalizeFast=t.quatNormalizeFast,e.solver.iterations=t.solverIterations,e.gravity.set(0,t.gravity,0),e.broadphase=new i.NaiveBroadphase,this.world=e},o.prototype.step=function(t){this.world.step(t)},o.prototype.destroy=function(){delete this.world,delete this.contactMaterial,this.materials={}},o.prototype.addBody=function(t){this.world.addBody(t)},o.prototype.removeBody=function(t){this.world.removeBody(t)},o.prototype.applyBodyMethod=function(t,e,n){t["__"+e].apply(t,n)},o.prototype.updateBodyProperties=function(){},o.prototype.getMaterial=function(t){return this.materials[t]},o.prototype.addMaterial=function(t){this.materials[t.name]=new i.Material(t)},o.prototype.addContactMaterial=function(t,e,n){var r=this.materials[t],o=this.materials[e];this.contactMaterial=new i.ContactMaterial(r,o,n),this.world.addContactMaterial(this.contactMaterial)},o.prototype.addConstraint=function(t){this.world.addConstraint(t)},o.prototype.removeConstraint=function(t){this.world.removeConstraint(t)},o.prototype.getContacts=function(){return this.world.contacts}},function(t,e,n){t.exports=o;var i=n(5),r=n(3);function o(t){if(i.call(this),this.radius=void 0!==t?Number(t):1,this.type=i.types.SPHERE,this.radius<0)throw new Error("The sphere radius cannot be negative.");this.updateBoundingSphereRadius()}o.prototype=new i,o.prototype.constructor=o,o.prototype.calculateLocalInertia=function(t,e){e=e||new r;var n=2*t*this.radius*this.radius/5;return e.x=n,e.y=n,e.z=n,e},o.prototype.volume=function(){return 4*Math.PI*this.radius/3},o.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.radius},o.prototype.calculateWorldAABB=function(t,e,n,i){for(var r=this.radius,o=["x","y","z"],a=0;a<o.length;a++){var s=o[a];n[s]=t[s]-r,i[s]=t[s]+r}}},function(t,e,n){t.exports=o;var i=n(5),r=n(3);function o(){i.call(this),this.type=i.types.PARTICLE}o.prototype=new i,o.prototype.constructor=o,o.prototype.calculateLocalInertia=function(t,e){return(e=e||new r).set(0,0,0),e},o.prototype.volume=function(){return 0},o.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=0},o.prototype.calculateWorldAABB=function(t,e,n,i){n.copy(t),i.copy(t)}},function(t,e,n){t.exports=o;var i=n(42),r=n(11);function o(){i.apply(this)}o.prototype=new i,o.prototype.constructor=o,o.prototype.collisionPairs=function(t,e,n){var i,r,o,a,s=t.bodies,c=s.length;for(i=0;i!==c;i++)for(r=0;r!==i;r++)o=s[i],a=s[r],this.needBroadphaseCollision(o,a)&&this.intersectionTest(o,a,e,n)},new r,o.prototype.aabbQuery=function(t,e,n){n=n||[];for(var i=0;i<t.bodies.length;i++){var r=t.bodies[i];r.aabbNeedsUpdate&&r.computeAABB(),r.aabb.overlaps(e)&&n.push(r)}return n}},function(t,e,n){t.exports=s,n(20);var i=n(39),r=n(38),o=n(47),a=(n(8),n(3));function s(t,e,n){var s=void 0!==(n=n||{}).maxForce?n.maxForce:1e6,c=n.pivotA?n.pivotA.clone():new a,l=n.pivotB?n.pivotB.clone():new a;i.call(this,t,c,e,l,s),(this.axisA=n.axisA?n.axisA.clone():new a(1,0,0)).normalize(),(this.axisB=n.axisB?n.axisB.clone():new a(1,0,0)).normalize();var u=this.rotationalEquation1=new r(t,e,n),h=this.rotationalEquation2=new r(t,e,n),d=this.motorEquation=new o(t,e,s);d.enabled=!1,this.equations.push(u,h,d)}s.prototype=new i,s.constructor=s,s.prototype.enableMotor=function(){this.motorEquation.enabled=!0},s.prototype.disableMotor=function(){this.motorEquation.enabled=!1},s.prototype.setMotorSpeed=function(t){this.motorEquation.targetVelocity=t},s.prototype.setMotorMaxForce=function(t){this.motorEquation.maxForce=t,this.motorEquation.minForce=-t};var c=new a,l=new a;s.prototype.update=function(){var t=this.bodyA,e=this.bodyB,n=this.motorEquation,r=this.rotationalEquation1,o=this.rotationalEquation2,a=c,s=l,u=this.axisA,h=this.axisB;i.prototype.update.call(this),t.quaternion.vmult(u,a),e.quaternion.vmult(h,s),a.tangents(r.axisA,o.axisA),r.axisB.copy(s),o.axisB.copy(s),this.motorEquation.enabled&&(t.quaternion.vmult(this.axisA,n.axisA),e.quaternion.vmult(this.axisB,n.axisB))}},function(t,e,n){t.exports=r,n(3),n(6);var i=n(40);function r(){i.call(this),this.iterations=10,this.tolerance=1e-7}r.prototype=new i;var o=[],a=[],s=[];r.prototype.solve=function(t,e){var n,i,r,c,l,u=0,h=this.iterations,d=this.tolerance*this.tolerance,p=this.equations,f=p.length,m=e.bodies,g=m.length,v=t;if(0!==f)for(var y=0;y!==g;y++)m[y].updateSolveMassProperties();var A=a,w=s,b=o;for(A.length=f,w.length=f,b.length=f,y=0;y!==f;y++){var M=p[y];b[y]=0,w[y]=M.computeB(v),A[y]=1/M.computeC()}if(0!==f){for(y=0;y!==g;y++){var E=(C=m[y]).vlambda,x=C.wlambda;E.set(0,0,0),x.set(0,0,0)}for(u=0;u!==h;u++){c=0;for(var T=0;T!==f;T++)M=p[T],n=w[T],i=A[T],(l=b[T])+(r=i*(n-M.computeGWlambda()-M.eps*l))<M.minForce?r=M.minForce-l:l+r>M.maxForce&&(r=M.maxForce-l),b[T]+=r,c+=r>0?r:-r,M.addToWlambda(r);if(c*c<d)break}for(y=0;y!==g;y++){var C,S=(C=m[y]).velocity,D=C.angularVelocity;C.vlambda.vmul(C.linearFactor,C.vlambda),S.vadd(C.vlambda,S),C.wlambda.vmul(C.angularFactor,C.wlambda),D.vadd(C.wlambda,D)}for(var _=p.length,L=1/v;_--;)p[_].multiplier=b[_]*L}return u}},function(t,e,n){var i=n(34);function r(t,e,n){n=i.defaults(n,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=r.idCounter++,this.materials=[t,e],this.friction=n.friction,this.restitution=n.restitution,this.contactEquationStiffness=n.contactEquationStiffness,this.contactEquationRelaxation=n.contactEquationRelaxation,this.frictionEquationStiffness=n.frictionEquationStiffness,this.frictionEquationRelaxation=n.frictionEquationRelaxation}t.exports=r,r.idCounter=0},function(t,e){function n(){this.objects=[],this.type=Object}t.exports=n,n.prototype.release=function(){for(var t=arguments.length,e=0;e!==t;e++)this.objects.push(arguments[e]);return this},n.prototype.get=function(){return 0===this.objects.length?this.constructObject():this.objects.pop()},n.prototype.constructObject=function(){throw new Error("constructObject() not implemented in this Pool subclass yet!")},n.prototype.resize=function(t){for(var e=this.objects;e.length>t;)e.pop();for(;e.length<t;)e.push(this.constructObject());return this}},function(t,e,n){t.exports=o;var i=n(3),r=n(70);function o(){r.call(this),this.type=i}o.prototype=new r,o.prototype.constructObject=function(){return new i}},function(t,e,n){t.exports=p;var i=n(11),r=n(9),o=n(5),a=n(41),s=n(3),c=n(21),l=(n(22),n(6)),u=(n(40),n(71)),h=n(8),d=n(48);function p(t){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new u,this.world=t,this.currentContactMaterial=null,this.enableFrictionReduction=!1}p.prototype.createContactEquation=function(t,e,n,i,r,o){var a;this.contactPointPool.length?((a=this.contactPointPool.pop()).bi=t,a.bj=e):a=new h(t,e),a.enabled=t.collisionResponse&&e.collisionResponse&&n.collisionResponse&&i.collisionResponse;var s=this.currentContactMaterial;a.restitution=s.restitution,a.setSpookParams(s.contactEquationStiffness,s.contactEquationRelaxation,this.world.dt);var c=n.material||t.material,l=i.material||e.material;return c&&l&&c.restitution>=0&&l.restitution>=0&&(a.restitution=c.restitution*l.restitution),a.si=r||n,a.sj=o||i,a},p.prototype.createFrictionEquationsFromContact=function(t,e){var n=t.bi,i=t.bj,r=t.si,o=t.sj,a=this.world,s=this.currentContactMaterial,c=s.friction,l=r.material||n.material,u=o.material||i.material;if(l&&u&&l.friction>=0&&u.friction>=0&&(c=l.friction*u.friction),c>0){var h=c*a.gravity.length(),p=n.invMass+i.invMass;p>0&&(p=1/p);var f=this.frictionEquationPool,m=f.length?f.pop():new d(n,i,h*p),g=f.length?f.pop():new d(n,i,h*p);return m.bi=g.bi=n,m.bj=g.bj=i,m.minForce=g.minForce=-h*p,m.maxForce=g.maxForce=h*p,m.ri.copy(t.ri),m.rj.copy(t.rj),g.ri.copy(t.ri),g.rj.copy(t.rj),t.ni.tangents(m.t,g.t),m.setSpookParams(s.frictionEquationStiffness,s.frictionEquationRelaxation,a.dt),g.setSpookParams(s.frictionEquationStiffness,s.frictionEquationRelaxation,a.dt),m.enabled=g.enabled=t.enabled,e.push(m,g),!0}return!1};var f=new s,m=new s,g=new s;p.prototype.createFrictionFromAverage=function(t){var e=this.result[this.result.length-1];if(this.createFrictionEquationsFromContact(e,this.frictionResult)&&1!==t){var n=this.frictionResult[this.frictionResult.length-2],i=this.frictionResult[this.frictionResult.length-1];f.setZero(),m.setZero(),g.setZero();for(var r=e.bi,o=(e.bj,0);o!==t;o++)(e=this.result[this.result.length-1-o]).bodyA!==r?(f.vadd(e.ni,f),m.vadd(e.ri,m),g.vadd(e.rj,g)):(f.vsub(e.ni,f),m.vadd(e.rj,m),g.vadd(e.ri,g));var a=1/t;m.scale(a,n.ri),g.scale(a,n.rj),i.ri.copy(n.ri),i.rj.copy(n.rj),f.normalize(),f.tangents(n.t,i.t)}};var v=new s,y=new s,A=new l,w=new l;p.prototype.getContacts=function(t,e,n,i,o,a,s){this.contactPointPool=o,this.frictionEquationPool=s,this.result=i,this.frictionResult=a;for(var c=A,l=w,u=v,h=y,d=0,p=t.length;d!==p;d++){var f=t[d],m=e[d],g=null;f.material&&m.material&&(g=n.getContactMaterial(f.material,m.material)||null);for(var b=f.type&r.KINEMATIC&&m.type&r.STATIC||f.type&r.STATIC&&m.type&r.KINEMATIC||f.type&r.KINEMATIC&&m.type&r.KINEMATIC,M=0;M<f.shapes.length;M++){f.quaternion.mult(f.shapeOrientations[M],c),f.quaternion.vmult(f.shapeOffsets[M],u),u.vadd(f.position,u);for(var E=f.shapes[M],x=0;x<m.shapes.length;x++){m.quaternion.mult(m.shapeOrientations[x],l),m.quaternion.vmult(m.shapeOffsets[x],h),h.vadd(m.position,h);var T=m.shapes[x];if(!(u.distanceTo(h)>E.boundingSphereRadius+T.boundingSphereRadius)){var C=null;E.material&&T.material&&(C=n.getContactMaterial(E.material,T.material)||null),this.currentContactMaterial=C||g||n.defaultContactMaterial;var S=this[E.type|T.type];S&&(E.type<T.type?S.call(this,E,T,u,h,c,l,f,m,E,T,b):S.call(this,T,E,h,u,l,c,m,f,E,T,b))&&b&&(n.shapeOverlapKeeper.set(E.id,T.id),n.bodyOverlapKeeper.set(f.id,m.id))}}}}},p.prototype[o.types.BOX|o.types.BOX]=p.prototype.boxBox=function(t,e,n,i,r,o,a,s,c,l,u){return t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e.convexPolyhedronRepresentation,n,i,r,o,a,s,t,e,u)},p.prototype[o.types.BOX|o.types.CONVEXPOLYHEDRON]=p.prototype.boxConvex=function(t,e,n,i,r,o,a,s,c,l,u){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e,n,i,r,o,a,s,t,e,u)},p.prototype[o.types.BOX|o.types.PARTICLE]=p.prototype.boxParticle=function(t,e,n,i,r,o,a,s,c,l,u){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexParticle(t.convexPolyhedronRepresentation,e,n,i,r,o,a,s,t,e,u)},p.prototype[o.types.SPHERE]=p.prototype.sphereSphere=function(t,e,n,i,r,o,a,s,c,l,u){if(u)return n.distanceSquared(i)<Math.pow(t.radius+e.radius,2);var h=this.createContactEquation(a,s,t,e,c,l);i.vsub(n,h.ni),h.ni.normalize(),h.ri.copy(h.ni),h.rj.copy(h.ni),h.ri.mult(t.radius,h.ri),h.rj.mult(-e.radius,h.rj),h.ri.vadd(n,h.ri),h.ri.vsub(a.position,h.ri),h.rj.vadd(i,h.rj),h.rj.vsub(s.position,h.rj),this.result.push(h),this.createFrictionEquationsFromContact(h,this.frictionResult)};var b=new s,M=new s,E=new s;p.prototype[o.types.PLANE|o.types.TRIMESH]=p.prototype.planeTrimesh=function(t,e,n,i,r,o,a,l,u,h,d){var p=new s,f=b;f.set(0,0,1),r.vmult(f,f);for(var m=0;m<e.vertices.length/3;m++){e.getVertex(m,p);var g=new s;g.copy(p),c.pointToWorldFrame(i,o,g,p);var v=M;if(p.vsub(n,v),f.dot(v)<=0){if(d)return!0;var y=this.createContactEquation(a,l,t,e,u,h);y.ni.copy(f);var A=E;f.scale(v.dot(f),A),p.vsub(A,A),y.ri.copy(A),y.ri.vsub(a.position,y.ri),y.rj.copy(p),y.rj.vsub(l.position,y.rj),this.result.push(y),this.createFrictionEquationsFromContact(y,this.frictionResult)}}};var x=new s,T=new s,C=(new s,new s),S=new s,D=new s,_=new s,L=new s,N=new s,I=new s,O=new s,j=new s,P=new s,R=new s,k=new i,z=[];p.prototype[o.types.SPHERE|o.types.TRIMESH]=p.prototype.sphereTrimesh=function(t,e,n,i,r,o,s,l,u,h,d){var p=D,f=_,m=L,g=N,v=I,y=O,A=k,w=S,b=T,M=z;c.pointToLocalFrame(i,o,n,v);var E=t.radius;A.lowerBound.set(v.x-E,v.y-E,v.z-E),A.upperBound.set(v.x+E,v.y+E,v.z+E),e.getTrianglesInAABB(A,M);for(var B=C,F=t.radius*t.radius,U=0;U<M.length;U++)for(var H=0;H<3;H++)if(e.getVertex(e.indices[3*M[U]+H],B),B.vsub(v,b),b.norm2()<=F){if(w.copy(B),c.pointToWorldFrame(i,o,w,B),B.vsub(n,b),d)return!0;(V=this.createContactEquation(s,l,t,e,u,h)).ni.copy(b),V.ni.normalize(),V.ri.copy(V.ni),V.ri.scale(t.radius,V.ri),V.ri.vadd(n,V.ri),V.ri.vsub(s.position,V.ri),V.rj.copy(B),V.rj.vsub(l.position,V.rj),this.result.push(V),this.createFrictionEquationsFromContact(V,this.frictionResult)}for(U=0;U<M.length;U++)for(H=0;H<3;H++){e.getVertex(e.indices[3*M[U]+H],p),e.getVertex(e.indices[3*M[U]+(H+1)%3],f),f.vsub(p,m),v.vsub(f,y);var G=y.dot(m);v.vsub(p,y);var Q=y.dot(m);if(Q>0&&G<0&&(v.vsub(p,y),g.copy(m),g.normalize(),Q=y.dot(g),g.scale(Q,y),y.vadd(p,y),(K=y.distanceTo(v))<t.radius)){if(d)return!0;var V=this.createContactEquation(s,l,t,e,u,h);y.vsub(v,V.ni),V.ni.normalize(),V.ni.scale(t.radius,V.ri),c.pointToWorldFrame(i,o,y,y),y.vsub(l.position,V.rj),c.vectorToWorldFrame(o,V.ni,V.ni),c.vectorToWorldFrame(o,V.ri,V.ri),this.result.push(V),this.createFrictionEquationsFromContact(V,this.frictionResult)}}for(var Y=j,W=P,q=R,X=x,Z=(U=0,M.length);U!==Z;U++){e.getTriangleVertices(M[U],Y,W,q),e.getNormal(M[U],X),v.vsub(Y,y);var K=y.dot(X);if(X.scale(K,y),v.vsub(y,y),K=y.distanceTo(v),a.pointInTriangle(y,Y,W,q)&&K<t.radius){if(d)return!0;V=this.createContactEquation(s,l,t,e,u,h),y.vsub(v,V.ni),V.ni.normalize(),V.ni.scale(t.radius,V.ri),c.pointToWorldFrame(i,o,y,y),y.vsub(l.position,V.rj),c.vectorToWorldFrame(o,V.ni,V.ni),c.vectorToWorldFrame(o,V.ri,V.ri),this.result.push(V),this.createFrictionEquationsFromContact(V,this.frictionResult)}}M.length=0};var B=new s,F=new s;p.prototype[o.types.SPHERE|o.types.PLANE]=p.prototype.spherePlane=function(t,e,n,i,r,o,a,s,c,l,u){var h=this.createContactEquation(a,s,t,e,c,l);if(h.ni.set(0,0,1),o.vmult(h.ni,h.ni),h.ni.negate(h.ni),h.ni.normalize(),h.ni.mult(t.radius,h.ri),n.vsub(i,B),h.ni.mult(h.ni.dot(B),F),B.vsub(F,h.rj),-B.dot(h.ni)<=t.radius){if(u)return!0;var d=h.ri,p=h.rj;d.vadd(n,d),d.vsub(a.position,d),p.vadd(i,p),p.vsub(s.position,p),this.result.push(h),this.createFrictionEquationsFromContact(h,this.frictionResult)}};var U=new s,H=new s,G=new s;function Q(t,e,n){for(var i=null,r=t.length,o=0;o!==r;o++){var a=t[o],s=U;t[(o+1)%r].vsub(a,s);var c=H;s.cross(e,c);var l=G;n.vsub(a,l);var u=c.dot(l);if(!(null===i||u>0&&!0===i||u<=0&&!1===i))return!1;null===i&&(i=u>0)}return!0}var V=new s,Y=new s,W=new s,q=new s,X=[new s,new s,new s,new s,new s,new s],Z=new s,K=new s,J=new s,$=new s;p.prototype[o.types.SPHERE|o.types.BOX]=p.prototype.sphereBox=function(t,e,n,i,r,o,a,s,c,l,u){var h=this.v3pool,d=X;n.vsub(i,V),e.getSideNormals(d,o);for(var p=t.radius,f=!1,m=K,g=J,v=$,y=null,A=0,w=0,b=0,M=null,E=0,x=d.length;E!==x&&!1===f;E++){var T=Y;T.copy(d[E]);var C=T.norm();T.normalize();var S=V.dot(T);if(S<C+p&&S>0){var D=W,_=q;D.copy(d[(E+1)%3]),_.copy(d[(E+2)%3]);var L=D.norm(),N=_.norm();D.normalize(),_.normalize();var I=V.dot(D),O=V.dot(_);if(I<L&&I>-L&&O<N&&O>-N){var j=Math.abs(S-C-p);if((null===M||j<M)&&(M=j,w=I,b=O,y=C,m.copy(T),g.copy(D),v.copy(_),A++,u))return!0}}}if(A){f=!0;var P=this.createContactEquation(a,s,t,e,c,l);m.mult(-p,P.ri),P.ni.copy(m),P.ni.negate(P.ni),m.mult(y,m),g.mult(w,g),m.vadd(g,m),v.mult(b,v),m.vadd(v,P.rj),P.ri.vadd(n,P.ri),P.ri.vsub(a.position,P.ri),P.rj.vadd(i,P.rj),P.rj.vsub(s.position,P.rj),this.result.push(P),this.createFrictionEquationsFromContact(P,this.frictionResult)}for(var R=h.get(),k=Z,z=0;2!==z&&!f;z++)for(var B=0;2!==B&&!f;B++)for(var F=0;2!==F&&!f;F++)if(R.set(0,0,0),z?R.vadd(d[0],R):R.vsub(d[0],R),B?R.vadd(d[1],R):R.vsub(d[1],R),F?R.vadd(d[2],R):R.vsub(d[2],R),i.vadd(R,k),k.vsub(n,k),k.norm2()<p*p){if(u)return!0;f=!0,(P=this.createContactEquation(a,s,t,e,c,l)).ri.copy(k),P.ri.normalize(),P.ni.copy(P.ri),P.ri.mult(p,P.ri),P.rj.copy(R),P.ri.vadd(n,P.ri),P.ri.vsub(a.position,P.ri),P.rj.vadd(i,P.rj),P.rj.vsub(s.position,P.rj),this.result.push(P),this.createFrictionEquationsFromContact(P,this.frictionResult)}h.release(R),R=null;var U=h.get(),H=h.get(),G=(P=h.get(),h.get()),Q=(j=h.get(),d.length);for(z=0;z!==Q&&!f;z++)for(B=0;B!==Q&&!f;B++)if(z%3!=B%3){d[B].cross(d[z],U),U.normalize(),d[z].vadd(d[B],H),P.copy(n),P.vsub(H,P),P.vsub(i,P);var tt=P.dot(U);for(U.mult(tt,G),F=0;F===z%3||F===B%3;)F++;j.copy(n),j.vsub(G,j),j.vsub(H,j),j.vsub(i,j);var et=Math.abs(tt),nt=j.norm();if(et<d[F].norm()&&nt<p){if(u)return!0;f=!0;var it=this.createContactEquation(a,s,t,e,c,l);H.vadd(G,it.rj),it.rj.copy(it.rj),j.negate(it.ni),it.ni.normalize(),it.ri.copy(it.rj),it.ri.vadd(i,it.ri),it.ri.vsub(n,it.ri),it.ri.normalize(),it.ri.mult(p,it.ri),it.ri.vadd(n,it.ri),it.ri.vsub(a.position,it.ri),it.rj.vadd(i,it.rj),it.rj.vsub(s.position,it.rj),this.result.push(it),this.createFrictionEquationsFromContact(it,this.frictionResult)}}h.release(U,H,P,G,j)};var tt=new s,et=new s,nt=new s,it=new s,rt=new s,ot=new s,at=new s,st=new s,ct=new s,lt=new s;p.prototype[o.types.SPHERE|o.types.CONVEXPOLYHEDRON]=p.prototype.sphereConvex=function(t,e,n,i,r,o,a,s,c,l,u){var h=this.v3pool;n.vsub(i,tt);for(var d=e.faceNormals,p=e.faces,f=e.vertices,m=t.radius,g=0;g!==f.length;g++){var v=f[g],y=rt;o.vmult(v,y),i.vadd(y,y);var A=it;if(y.vsub(n,A),A.norm2()<m*m)return!!u||(w=!0,(j=this.createContactEquation(a,s,t,e,c,l)).ri.copy(A),j.ri.normalize(),j.ni.copy(j.ri),j.ri.mult(m,j.ri),y.vsub(i,j.rj),j.ri.vadd(n,j.ri),j.ri.vsub(a.position,j.ri),j.rj.vadd(i,j.rj),j.rj.vsub(s.position,j.rj),this.result.push(j),void this.createFrictionEquationsFromContact(j,this.frictionResult))}for(var w=!1,b=(g=0,p.length);g!==b&&!1===w;g++){var M=d[g],E=p[g],x=ot;o.vmult(M,x);var T=at;o.vmult(f[E[0]],T),T.vadd(i,T);var C=st;x.mult(-m,C),n.vadd(C,C);var S=ct;C.vsub(T,S);var D=S.dot(x),_=lt;if(n.vsub(T,_),D<0&&_.dot(x)>0){for(var L=[],N=0,I=E.length;N!==I;N++){var O=h.get();o.vmult(f[E[N]],O),i.vadd(O,O),L.push(O)}if(Q(L,x,n)){if(u)return!0;w=!0;var j=this.createContactEquation(a,s,t,e,c,l);x.mult(-m,j.ri),x.negate(j.ni);var P=h.get();x.mult(-D,P);var R=h.get();x.mult(-m,R),n.vsub(i,j.rj),j.rj.vadd(R,j.rj),j.rj.vadd(P,j.rj),j.rj.vadd(i,j.rj),j.rj.vsub(s.position,j.rj),j.ri.vadd(n,j.ri),j.ri.vsub(a.position,j.ri),h.release(P),h.release(R),this.result.push(j),this.createFrictionEquationsFromContact(j,this.frictionResult),N=0;for(var k=L.length;N!==k;N++)h.release(L[N]);return}for(N=0;N!==E.length;N++){var z=h.get(),B=h.get();o.vmult(f[E[(N+1)%E.length]],z),o.vmult(f[E[(N+2)%E.length]],B),i.vadd(z,z),i.vadd(B,B);var F=et;B.vsub(z,F);var U=nt;F.unit(U);var H=h.get(),G=h.get();n.vsub(z,G);var V=G.dot(U);U.mult(V,H),H.vadd(z,H);var Y=h.get();if(H.vsub(n,Y),V>0&&V*V<F.norm2()&&Y.norm2()<m*m){if(u)return!0;for(j=this.createContactEquation(a,s,t,e,c,l),H.vsub(i,j.rj),H.vsub(n,j.ni),j.ni.normalize(),j.ni.mult(m,j.ri),j.rj.vadd(i,j.rj),j.rj.vsub(s.position,j.rj),j.ri.vadd(n,j.ri),j.ri.vsub(a.position,j.ri),this.result.push(j),this.createFrictionEquationsFromContact(j,this.frictionResult),N=0,k=L.length;N!==k;N++)h.release(L[N]);return h.release(z),h.release(B),h.release(H),h.release(Y),void h.release(G)}h.release(z),h.release(B),h.release(H),h.release(Y),h.release(G)}for(N=0,k=L.length;N!==k;N++)h.release(L[N])}}},new s,new s,p.prototype[o.types.PLANE|o.types.BOX]=p.prototype.planeBox=function(t,e,n,i,r,o,a,s,c,l,u){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,e.convexPolyhedronRepresentation.id=e.id,this.planeConvex(t,e.convexPolyhedronRepresentation,n,i,r,o,a,s,t,e,u)};var ut=new s,ht=new s,dt=new s,pt=new s;p.prototype[o.types.PLANE|o.types.CONVEXPOLYHEDRON]=p.prototype.planeConvex=function(t,e,n,i,r,o,a,s,c,l,u){var h=ut,d=ht;d.set(0,0,1),r.vmult(d,d);for(var p=0,f=dt,m=0;m!==e.vertices.length;m++)if(h.copy(e.vertices[m]),o.vmult(h,h),i.vadd(h,h),h.vsub(n,f),d.dot(f)<=0){if(u)return!0;var g=this.createContactEquation(a,s,t,e,c,l),v=pt;d.mult(d.dot(f),v),h.vsub(v,v),v.vsub(n,g.ri),g.ni.copy(d),h.vsub(i,g.rj),g.ri.vadd(n,g.ri),g.ri.vsub(a.position,g.ri),g.rj.vadd(i,g.rj),g.rj.vsub(s.position,g.rj),this.result.push(g),p++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(g,this.frictionResult)}this.enableFrictionReduction&&p&&this.createFrictionFromAverage(p)};var ft=new s,mt=new s;p.prototype[o.types.CONVEXPOLYHEDRON]=p.prototype.convexConvex=function(t,e,n,i,r,o,a,s,c,l,u,h,d){var p=ft;if(!(n.distanceTo(i)>t.boundingSphereRadius+e.boundingSphereRadius)&&t.findSeparatingAxis(e,n,r,i,o,p,h,d)){var f=[],m=mt;t.clipAgainstHull(n,r,e,i,o,p,-100,100,f);for(var g=0,v=0;v!==f.length;v++){if(u)return!0;var y=this.createContactEquation(a,s,t,e,c,l),A=y.ri,w=y.rj;p.negate(y.ni),f[v].normal.negate(m),m.mult(f[v].depth,m),f[v].point.vadd(m,A),w.copy(f[v].point),A.vsub(n,A),w.vsub(i,w),A.vadd(n,A),A.vsub(a.position,A),w.vadd(i,w),w.vsub(s.position,w),this.result.push(y),g++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(y,this.frictionResult)}this.enableFrictionReduction&&g&&this.createFrictionFromAverage(g)}};var gt=new s,vt=new s,yt=new s;p.prototype[o.types.PLANE|o.types.PARTICLE]=p.prototype.planeParticle=function(t,e,n,i,r,o,a,s,c,l,u){var h=gt;h.set(0,0,1),a.quaternion.vmult(h,h);var d=vt;if(i.vsub(a.position,d),h.dot(d)<=0){if(u)return!0;var p=this.createContactEquation(s,a,e,t,c,l);p.ni.copy(h),p.ni.negate(p.ni),p.ri.set(0,0,0);var f=yt;h.mult(h.dot(i),f),i.vsub(f,f),p.rj.copy(f),this.result.push(p),this.createFrictionEquationsFromContact(p,this.frictionResult)}};var At=new s;p.prototype[o.types.PARTICLE|o.types.SPHERE]=p.prototype.sphereParticle=function(t,e,n,i,r,o,a,s,c,l,u){var h=At;if(h.set(0,0,1),i.vsub(n,h),h.norm2()<=t.radius*t.radius){if(u)return!0;var d=this.createContactEquation(s,a,e,t,c,l);h.normalize(),d.rj.copy(h),d.rj.mult(t.radius,d.rj),d.ni.copy(h),d.ni.negate(d.ni),d.ri.set(0,0,0),this.result.push(d),this.createFrictionEquationsFromContact(d,this.frictionResult)}};var wt=new l,bt=new s,Mt=(new s,new s),Et=new s,xt=new s;p.prototype[o.types.PARTICLE|o.types.CONVEXPOLYHEDRON]=p.prototype.convexParticle=function(t,e,n,i,r,o,a,s,c,l,u){var h=-1,d=Mt,p=xt,f=null,m=bt;if(m.copy(i),m.vsub(n,m),r.conjugate(wt),wt.vmult(m,m),t.pointIsInside(m)){t.worldVerticesNeedsUpdate&&t.computeWorldVertices(n,r),t.worldFaceNormalsNeedsUpdate&&t.computeWorldFaceNormals(r);for(var g=0,v=t.faces.length;g!==v;g++){var y=[t.worldVertices[t.faces[g][0]]],A=t.worldFaceNormals[g];i.vsub(y[0],Et);var w=-A.dot(Et);if(null===f||Math.abs(w)<Math.abs(f)){if(u)return!0;f=w,h=g,d.copy(A)}}if(-1!==h){var b=this.createContactEquation(s,a,e,t,c,l);d.mult(f,p),p.vadd(i,p),p.vsub(n,p),b.rj.copy(p),d.negate(b.ni),b.ri.set(0,0,0);var M=b.ri,E=b.rj;M.vadd(i,M),M.vsub(s.position,M),E.vadd(n,E),E.vsub(a.position,E),this.result.push(b),this.createFrictionEquationsFromContact(b,this.frictionResult)}}},p.prototype[o.types.BOX|o.types.HEIGHTFIELD]=p.prototype.boxHeightfield=function(t,e,n,i,r,o,a,s,c,l,u){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexHeightfield(t.convexPolyhedronRepresentation,e,n,i,r,o,a,s,t,e,u)};var Tt=new s,Ct=new s,St=[0];p.prototype[o.types.CONVEXPOLYHEDRON|o.types.HEIGHTFIELD]=p.prototype.convexHeightfield=function(t,e,n,i,r,o,a,s,l,u,h){var d=e.data,p=e.elementSize,f=t.boundingSphereRadius,m=Ct,g=St,v=Tt;c.pointToLocalFrame(i,o,n,v);var y=Math.floor((v.x-f)/p)-1,A=Math.ceil((v.x+f)/p)+1,w=Math.floor((v.y-f)/p)-1,b=Math.ceil((v.y+f)/p)+1;if(!(A<0||b<0||y>d.length||w>d[0].length)){y<0&&(y=0),A<0&&(A=0),w<0&&(w=0),b<0&&(b=0),y>=d.length&&(y=d.length-1),A>=d.length&&(A=d.length-1),b>=d[0].length&&(b=d[0].length-1),w>=d[0].length&&(w=d[0].length-1);var M=[];e.getRectMinMax(y,w,A,b,M);var E=M[0],x=M[1];if(!(v.z-f>x||v.z+f<E))for(var T=y;T<A;T++)for(var C=w;C<b;C++){var S=!1;if(e.getConvexTrianglePillar(T,C,!1),c.pointToWorldFrame(i,o,e.pillarOffset,m),n.distanceTo(m)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(S=this.convexConvex(t,e.pillarConvex,n,m,r,o,a,s,null,null,h,g,null)),h&&S)return!0;if(e.getConvexTrianglePillar(T,C,!0),c.pointToWorldFrame(i,o,e.pillarOffset,m),n.distanceTo(m)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(S=this.convexConvex(t,e.pillarConvex,n,m,r,o,a,s,null,null,h,g,null)),h&&S)return!0}}};var Dt=new s,_t=new s;p.prototype[o.types.SPHERE|o.types.HEIGHTFIELD]=p.prototype.sphereHeightfield=function(t,e,n,i,r,o,a,s,l,u,h){var d=e.data,p=t.radius,f=e.elementSize,m=_t,g=Dt;c.pointToLocalFrame(i,o,n,g);var v=Math.floor((g.x-p)/f)-1,y=Math.ceil((g.x+p)/f)+1,A=Math.floor((g.y-p)/f)-1,w=Math.ceil((g.y+p)/f)+1;if(!(y<0||w<0||v>d.length||w>d[0].length)){v<0&&(v=0),y<0&&(y=0),A<0&&(A=0),w<0&&(w=0),v>=d.length&&(v=d.length-1),y>=d.length&&(y=d.length-1),w>=d[0].length&&(w=d[0].length-1),A>=d[0].length&&(A=d[0].length-1);var b=[];e.getRectMinMax(v,A,y,w,b);var M=b[0],E=b[1];if(!(g.z-p>E||g.z+p<M))for(var x=this.result,T=v;T<y;T++)for(var C=A;C<w;C++){var S=x.length,D=!1;if(e.getConvexTrianglePillar(T,C,!1),c.pointToWorldFrame(i,o,e.pillarOffset,m),n.distanceTo(m)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(D=this.sphereConvex(t,e.pillarConvex,n,m,r,o,a,s,t,e,h)),h&&D)return!0;if(e.getConvexTrianglePillar(T,C,!0),c.pointToWorldFrame(i,o,e.pillarOffset,m),n.distanceTo(m)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(D=this.sphereConvex(t,e.pillarConvex,n,m,r,o,a,s,t,e,h)),h&&D)return!0;if(x.length-S>2)return}}}},function(t,e,n){t.exports=o;var i=n(5),r=n(3);function o(){i.call(this),this.type=i.types.PLANE,this.worldNormal=new r,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE}o.prototype=new i,o.prototype.constructor=o,o.prototype.computeWorldNormal=function(t){var e=this.worldNormal;e.set(0,0,1),t.vmult(e,e),this.worldNormalNeedsUpdate=!1},o.prototype.calculateLocalInertia=function(t,e){return e||new r},o.prototype.volume=function(){return Number.MAX_VALUE};var a=new r;o.prototype.calculateWorldAABB=function(t,e,n,i){a.set(0,0,1),e.vmult(a,a);var r=Number.MAX_VALUE;n.set(-r,-r,-r),i.set(r,r,r),1===a.x&&(i.x=t.x),1===a.y&&(i.y=t.y),1===a.z&&(i.z=t.z),-1===a.x&&(n.x=t.x),-1===a.y&&(n.y=t.y),-1===a.z&&(n.z=t.z)},o.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=Number.MAX_VALUE}},function(t,e){function n(){this.matrix=[]}t.exports=n,n.prototype.get=function(t,e){if(t=t.index,(e=e.index)>t){var n=e;e=t,t=n}return this.matrix[(t*(t+1)>>1)+e-1]},n.prototype.set=function(t,e,n){if(t=t.index,(e=e.index)>t){var i=e;e=t,t=i}this.matrix[(t*(t+1)>>1)+e-1]=n?1:0},n.prototype.reset=function(){for(var t=0,e=this.matrix.length;t!==e;t++)this.matrix[t]=0},n.prototype.setNumObjects=function(t){this.matrix.length=t*(t-1)>>1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inGameActions={default:{move:{label:"Move"},menue:{label:"Menue"},snap_rotate_left:{label:"Snap Rotate Left"},snap_rotate_right:{label:"Snap Rotate Right"},action_mute:{label:"Mute"},action_teleport_down:{label:"Teleport Aim"},action_teleport_up:{label:"Teleport"},action_share_screen:{label:"Share Screen"},escape:{label:"Escape"}}},e.config={behaviours:{default:{"oculus-touch-controls":{joystick:"oculus_touch_joystick_dpad4"},"vive-controls":{trackpad:"vive_trackpad_dpad4"}}},mappings:{default:{"vive-controls":{menudown:"action_mute","trackpad.pressedmove":{left:"move"},trackpad_dpad4_pressed_west_down:{right:"snap_rotate_left"},trackpad_dpad4_pressed_east_down:{right:"snap_rotate_right"},trackpad_dpad4_pressed_center_down:{right:"action_teleport_down"},trackpadup:{right:"action_teleport_up"}},"oculus-touch-controls":{joystick_dpad4_west:{right:"snap_rotate_left"},joystick_dpad4_east:{right:"snap_rotate_right"},xbuttondown:"action_mute",gripdown:"middle_ring_pinky_down",gripup:"middle_ring_pinky_up",thumbsticktouchstart:"thumb_down",thumbsticktouchend:"thumb_up",triggerdown:"action_teleport_down",triggerup:"action_teleport_up","axismove.reverseY":{left:"move"},right_dpad_east:"snap_rotate_right",right_dpad_west:"snap_rotate_left",abuttondown:"action_teleport_down",abuttonup:"action_teleport_up"},"daydream-controls":{menudown:"action_mute",trackpaddown:"action_teleport_down",trackpadup:"action_teleport_up"},keyboard:{m_press:"action_mute",q_press:"snap_rotate_left",e_press:"snap_rotate_right",v_press:"action_share_screen",w_press:"move",s_press:"move",space_press:"jump",arrowup_down:"move",arrowup_up:"idle",arrowdown_down:"move",arrowdown_up:"idle",escape_down:"menue",w_down:"w_down",w_up:"w_up",a_down:"a_down",a_up:"a_up",s_down:"s_down",s_up:"s_up",d_down:"d_down",d_up:"d_up",W_down:"w_down",W_up:"w_up",A_down:"a_down",A_up:"a_up",S_down:"s_down",S_up:"s_up",D_down:"d_down",D_up:"d_up"}}}}},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var c,l=[],u=!1,h=-1;function d(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&p())}function p(){if(!u){var t=s(d);u=!0;for(var e=l.length;e;){for(c=l,l=[];++h<e;)c&&c[h].run();h=-1,e=l.length}c=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||u||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,n,i){(function(n,i){var r;t.exports=function t(e,n,i){function o(s,c){if(!n[s]){if(!e[s]){if(!c&&("function"==typeof r&&r))return r(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){return o(e[s][1][t]||t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){(function(t){var i=function(){this._tweens={},this._tweensAddedDuringUpdate={}};i.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(t=void 0!==t?t:o.now();n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++)!1===this._tweens[n[i]].update(t)&&(this._tweens[n[i]]._isPlaying=!1,e||delete this._tweens[n[i]]);n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var r,o=new i;o.Group=i,o._nextId=0,o.nextId=function(){return o._nextId++},"undefined"==typeof window&&void 0!==t?o.now=function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?o.now=window.performance.now.bind(window.performance):void 0!==Date.now?o.now=Date.now:o.now=function(){return(new Date).getTime()},o.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=o.Easing.Linear.None,this._interpolationFunction=o.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||o,this._id=o.nextId()},o.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=t,void 0!==e&&(this._duration=e),this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?t:o.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array==0&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback.call(this._object,this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,n,i;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback.call(this._object,this._object),this._onStartCallbackFired=!0),n=(n=(t-this._startTime)/this._duration)>1?1:n,i=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[e]){var r=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,i):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?r+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[e]=r+(o-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._object,i),1===n){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var a=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=a}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback.call(this._object,this._object);for(var s=0,c=this._chainedTweens.length;s<c;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},o.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-o.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*o.Easing.Bounce.In(2*t):.5*o.Easing.Bounce.Out(2*t-1)+.5}}},o.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),a=o.Interpolation.Utils.Linear;return e<0?a(t[0],t[1],i):e>1?a(t[n],t[n-1],n-i):a(t[r],t[r+1>n?n:r+1],i-r)},Bezier:function(t,e){for(var n=0,i=t.length-1,r=Math.pow,a=o.Interpolation.Utils.Bernstein,s=0;s<=i;s++)n+=r(1-e,i-s)*r(e,s)*t[s]*a(i,s);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),a=o.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),a(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):a(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=o.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(r=[1],function(t){var e=1;if(r[t])return r[t];for(var n=t;n>1;n--)e*=n;return r[t]=e,e}),CatmullRom:function(t,e,n,i,r){var o=.5*(n-t),a=.5*(i-e),s=r*r;return(2*e-2*n+o+a)*(r*s)+(-3*e+3*n-2*o-a)*s+o*r+e}}},void 0!==e&&"object"==typeof n?e.exports=o:void 0!==this&&(this.TWEEN=o)}).call(this,t("_process"))},{_process:32}],2:[function(t,e,n){var i=Object.prototype.toString;e.exports=function(t){return t.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===i.call(t.buffer)||Array.isArray(t)}},{}],3:[function(t,e,n){e.exports=function(t,e){return"number"==typeof t?t:"number"==typeof e?e:0}},{}],4:[function(t,e,n){"use strict";n.byteLength=function(t){return 3*t.length/4-l(t)},n.toByteArray=function(t){var e,n,i,a,s,c=t.length;a=l(t),s=new o(3*c/4-a),n=a>0?c-4:c;var u=0;for(e=0;e<n;e+=4)i=r[t.charCodeAt(e)]<<18|r[t.charCodeAt(e+1)]<<12|r[t.charCodeAt(e+2)]<<6|r[t.charCodeAt(e+3)],s[u++]=i>>16&255,s[u++]=i>>8&255,s[u++]=255&i;return 2===a?(i=r[t.charCodeAt(e)]<<2|r[t.charCodeAt(e+1)]>>4,s[u++]=255&i):1===a&&(i=r[t.charCodeAt(e)]<<10|r[t.charCodeAt(e+1)]<<4|r[t.charCodeAt(e+2)]>>2,s[u++]=i>>8&255,s[u++]=255&i),s},n.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o="",a=[],s=0,c=n-r;s<c;s+=16383)a.push(u(t,s,s+16383>c?c:s+16383));return 1===r?(e=t[n-1],o+=i[e>>2],o+=i[e<<4&63],o+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],o+=i[e>>10],o+=i[e>>4&63],o+=i[e<<2&63],o+="="),a.push(o),a.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)i[s]=a[s],r[a.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function u(t,e,n){for(var r,o,a=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],5:[function(t,e,n){"use strict";e.exports={createLink:function(t,e){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("link");for(var r in i.href=t,i.rel="stylesheet",e)if(e.hasOwnProperty(r)){var o=e[r];i.setAttribute("data-"+r,o)}n.appendChild(i)},createStyle:function(t,e){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");for(var r in i.type="text/css",e)if(e.hasOwnProperty(r)){var o=e[r];i.setAttribute("data-"+r,o)}i.sheet?(i.innerHTML=t,i.sheet.cssText=t,n.appendChild(i)):i.styleSheet?(n.appendChild(i),i.styleSheet.cssText=t):(i.appendChild(document.createTextNode(t)),n.appendChild(i))}}},{}],6:[function(t,e,n){var i=t("buffer").Buffer;e.exports=function(t,e){if(i.isBuffer(t)&&i.isBuffer(e)){if("function"==typeof t.equals)return t.equals(e);if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}}},{buffer:7}],7:[function(t,e,i){(function(e){"use strict";var n=t("base64-js"),r=t("ieee754"),o=t("isarray");function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,n)}function l(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=d(t,e),t}(t,e,n,i):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|f(e,n),r=(t=s(t,i)).write(e,n);return r!==i&&(t=t.slice(0,r)),t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?s(t,0):d(t,e);if("Buffer"===e.type&&o(e.data))return d(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(u(e),t=s(t,e<0?0:0|p(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function f(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(t).length;default:if(i)return B(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function g(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=c.from(e,i)),c.isBuffer(e))return 0===e.length?-1:v(t,e,n,i,r);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,i,r){var o,a=1,s=t.length,c=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var u=-1;for(o=n;o<s;o++)if(l(t,o)===l(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var h=!0,d=0;d<c;d++)if(l(t,o+d)!==l(e,d)){h=!1;break}if(h)return o}return-1}function y(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function A(t,e,n,i){return U(B(e,t.length-n),t,n,i)}function w(t,e,n,i){return U(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function b(t,e,n,i){return w(t,e,n,i)}function M(t,e,n,i){return U(F(e),t,n,i)}function E(t,e,n,i){return U(function(t,e){for(var n,i,r,o=[],a=0;a<t.length&&!((e-=2)<0);++a)i=(n=t.charCodeAt(a))>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function x(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function T(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,a,s,c,l=t[r],u=null,h=l>239?4:l>223?3:l>191?2:1;if(r+h<=n)switch(h){case 1:l<128&&(u=l);break;case 2:128==(192&(o=t[r+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=t[r+1],a=t[r+2],128==(192&o)&&128==(192&a)&&(c=(15&l)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=t[r+1],a=t[r+2],s=t[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,h=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=h}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=C));return n}(i)}i.Buffer=c,i.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},i.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),i.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return l(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,i){return u(e),e<=0?s(null,e):void 0!==n?"string"==typeof i?s(null,e).fill(n,i):s(null,e).fill(n):s(null,e)}(0,t,e,n)},c.allocUnsafe=function(t){return h(null,t)},c.allocUnsafeSlow=function(t){return h(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=c.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,r),r+=a.length}return i},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):function(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return _(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return S(this,e,n);case"latin1":case"binary":return D(this,e,n);case"base64":return x(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",e=i.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,i,r){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var o=r-i,a=n-e,s=Math.min(o,a),l=this.slice(i,r),u=t.slice(e,n),h=0;h<s;++h)if(l[h]!==u[h]){o=l[h],a=u[h];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},c.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return A(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return b(this,t,e,n);case"base64":return M(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function S(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function D(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function _(t,e,n){var i,r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",a=e;a<n;++a)o+=(i=t[a])<16?"0"+i.toString(16):i.toString(16);return o}function L(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function N(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,n,i,r,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function O(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function j(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function P(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(t,e,n,i,o){return o||P(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function k(t,e,n,i,o){return o||P(t,0,n,8),r.write(t,e,n,i,52,8),n+8}c.prototype.slice=function(t,e){var n,i=this.length;if(t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var r=e-t;n=new c(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},c.prototype.readUInt8=function(t,e){return e||N(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||N(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||N(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||N(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||N(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||N(t,4,this.length),r.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||N(t,4,this.length),r.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||N(t,8,this.length),r.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||N(t,8,this.length),r.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,i){t=+t,e|=0,n|=0,i||I(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,i){t=+t,e|=0,n|=0,i||I(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):O(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):O(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):j(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);I(this,t,e,n,r-1,-r)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);I(this,t,e,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):O(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):O(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):j(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return R(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return R(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return k(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return k(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=c.isBuffer(t)?t:B(new c(t,i).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function B(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],a=0;a<i;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function F(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(z,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function U(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":4,ieee754:17,isarray:8}],8:[function(t,e,n){var i={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},{}],9:[function(t,e,n){function i(){var t;try{t=n.storage.debug}catch(t){}return t}(n=e.exports=t("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" "),!e)return t;var n="color: "+this.color,i=0,r=0;return(t=[t[0],n,"color: inherit"].concat(Array.prototype.slice.call(t,1)))[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&"%c"===t&&(r=++i)}),t.splice(r,0,n),t},n.save=function(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(t){}},n.load=i,n.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(t){return JSON.stringify(t)},n.enable(i())},{"./debug":10}],10:[function(t,e,n){(n=e.exports=function(t){function e(){}function r(){var t=r;null==t.useColors&&(t.useColors=n.useColors()),null==t.color&&t.useColors&&(t.color=n.colors[i++%n.colors.length]);var e=Array.prototype.slice.call(arguments);e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&(e=["%o"].concat(e));var o=0;e[0]=e[0].replace(/%([a-z%])/g,function(i,r){if("%%"===i)return i;o++;var a=n.formatters[r];if("function"==typeof a){var s=e[o];i=a.call(t,s),e.splice(o,1),o--}return i}),"function"==typeof n.formatArgs&&(e=n.formatArgs.apply(t,e)),(r.log||n.log||void 0).apply(t,e)}e.enabled=!1,r.enabled=!0;var o=n.enabled(t)?r:e;return o.namespace=t,o}).coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){n.enable("")},n.enable=function(t){n.save(t);for(var e=(t||"").split(/[\s,]+/),i=e.length,r=0;r<i;r++)e[r]&&("-"===(t=e[r].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))},n.enabled=function(t){var e,i;for(e=0,i=n.skips.length;e<i;e++)if(n.skips[e].test(t))return!1;for(e=0,i=n.names.length;e<i;e++)if(n.names[e].test(t))return!0;return!1},n.names=[],n.skips=[],n.formatters={};var i=0},{}],11:[function(t,e,n){"use strict";var i=t("is-obj"),r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t,e,n){var o=e[n];if(void 0!==o&&null!==o){if(r.call(t,n)&&(void 0===t[n]||null===t[n]))throw new TypeError("Cannot convert undefined or null to object ("+n+")");r.call(t,n)&&i(o)?t[n]=s(Object(t[n]),e[n]):t[n]=o}}function s(t,e){if(t===e)return t;for(var n in e=Object(e))r.call(e,n)&&a(t,e,n);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),s=0;s<i.length;s++)o.call(e,i[s])&&a(t,e,i[s]);return t}e.exports=function(t){t=function(t){if(null===t||void 0===t)throw new TypeError("Sources cannot be null or undefined");return Object(t)}(t);for(var e=1;e<arguments.length;e++)s(t,arguments[e]);return t}},{"is-obj":21}],12:[function(t,n,i){!function(t,n,i,r){"use strict";function o(t,e){for(var n=0,i=t.length;n<i;n++)m(t[n],e)}function a(t){return function(e){nt(e)&&(m(e,t),o(e.querySelectorAll(B),t))}}function s(t){var e=ot.call(t,"is"),n=t.nodeName.toUpperCase(),i=U.call(k,e?j+e.toUpperCase():O+n);return e&&-1<i&&!c(n,e)?-1:i}function c(t,e){return-1<B.indexOf(t+'[is="'+e+'"]')}function l(t){var e=t.currentTarget,n=t.attrChange,i=t.attrName,r=t.target;mt&&(!r||r===e)&&e.attributeChangedCallback&&"style"!==i&&t.prevValue!==t.newValue&&e.attributeChangedCallback(i,n===t[S]?null:t.prevValue,n===t[_]?null:t.newValue)}function u(t){var e=a(t);return function(t){g.push(e,t.target)}}function h(t){ft&&(ft=!1,t.currentTarget.removeEventListener(N,h)),o((t.target||n).querySelectorAll(B),t.detail===T?T:x),et&&function(){for(var t,e=0,n=it.length;e<n;e++)t=it[e],F.contains(t)||(n--,it.splice(e--,1),m(t,T))}()}function d(t,e){var n=this;at.call(n,t,e),v.call(n,{target:n})}function p(t,e){J(t,e),w?w.observe(t,lt):(pt&&(t.setAttribute=d,t[E]=A(t),t.addEventListener(I,v)),t.addEventListener(L,l)),t.createdCallback&&mt&&(t.created=!0,t.createdCallback(),t.created=!1)}function f(t){throw new Error("A "+t+" type is already registered")}function m(t,e){var n,i=s(t);-1<i&&(b(t,z[i]),i=0,e!==x||t[x]?e===T&&!t[T]&&(t[x]=!1,t[T]=!0,i=1):(t[T]=!1,t[x]=!0,i=1,et&&U.call(it,t)<0&&it.push(t)),i&&(n=t[e+"Callback"])&&n.call(t))}if(!(r in n)){var g,v,y,A,w,b,M,E="__"+r+(1e5*Math.random()>>0),x="attached",T="detached",C="extends",S="ADDITION",D="MODIFICATION",_="REMOVAL",L="DOMAttrModified",N="DOMContentLoaded",I="DOMSubtreeModified",O="<",j="=",P=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,R=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],k=[],z=[],B="",F=n.documentElement,U=k.indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},H=i.prototype,G=H.hasOwnProperty,Q=H.isPrototypeOf,V=i.defineProperty,Y=i.getOwnPropertyDescriptor,W=i.getOwnPropertyNames,q=i.getPrototypeOf,X=i.setPrototypeOf,Z=!!i.__proto__,K=i.create||function t(e){return e?(t.prototype=e,new t):this},J=X||(Z?function(t,e){return t.__proto__=e,t}:W&&Y?function(){function t(t,e){for(var n,i=W(e),r=0,o=i.length;r<o;r++)n=i[r],G.call(t,n)||V(t,n,Y(e,n))}return function(e,n){do{t(e,n)}while((n=q(n))&&!Q.call(n,e));return e}}():function(t,e){for(var n in e)t[n]=e[n];return t}),$=t.MutationObserver||t.WebKitMutationObserver,tt=(t.HTMLElement||t.Element||t.Node).prototype,et=!Q.call(tt,F),nt=et?function(t){return 1===t.nodeType}:function(t){return Q.call(tt,t)},it=et&&[],rt=tt.cloneNode,ot=tt.getAttribute,at=tt.setAttribute,st=tt.removeAttribute,ct=n.createElement,lt=$&&{attributes:!0,characterData:!0,attributeOldValue:!0},ut=$||function(t){pt=!1,F.removeEventListener(L,ut)},ht=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,10)},dt=!1,pt=!0,ft=!0,mt=!0;X||Z?(b=function(t,e){Q.call(e,t)||p(t,e)},M=p):M=b=function(t,e){t[E]||(t[E]=i(!0),p(t,e))},et?(pt=!1,function(){var t=Y(tt,"addEventListener"),n=t.value,i=function(t){var e=new CustomEvent(L,{bubbles:!0});e.attrName=t,e.prevValue=ot.call(this,t),e.newValue=null,e[_]=e.attrChange=2,st.call(this,t),this.dispatchEvent(e)},r=function(t,n){var i=this.hasAttribute(t),r=i&&ot.call(this,t);e=new CustomEvent(L,{bubbles:!0}),at.call(this,t,n),e.attrName=t,e.prevValue=i?r:null,e.newValue=n,i?e[D]=e.attrChange=1:e[S]=e.attrChange=0,this.dispatchEvent(e)},o=function(t){var e,n=t.currentTarget,i=n[E],r=t.propertyName;i.hasOwnProperty(r)&&(i=i[r],(e=new CustomEvent(L,{bubbles:!0})).attrName=i.name,e.prevValue=i.value||null,e.newValue=i.value=n[r]||null,null==e.prevValue?e[S]=e.attrChange=0:e[D]=e.attrChange=1,n.dispatchEvent(e))};t.value=function(t,e,a){t===L&&this.attributeChangedCallback&&this.setAttribute!==r&&(this[E]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=i,n.call(this,"propertychange",o)),n.call(this,t,e,a)},V(tt,"addEventListener",t)}()):$||(F.addEventListener(L,ut),F.setAttribute(E,1),F.removeAttribute(E),pt&&(v=function(t){var e,n,i,r=this;if(r===t.target){for(i in e=r[E],r[E]=n=A(r),n){if(!(i in e))return y(0,r,i,e[i],n[i],S);if(n[i]!==e[i])return y(1,r,i,e[i],n[i],D)}for(i in e)if(!(i in n))return y(2,r,i,e[i],n[i],_)}},y=function(t,e,n,i,r,o){var a={attrChange:t,currentTarget:e,attrName:n,prevValue:i,newValue:r};a[o]=t,l(a)},A=function(t){for(var e,n,i={},r=t.attributes,o=0,a=r.length;o<a;o++)"setAttribute"!==(n=(e=r[o]).name)&&(i[n]=e.value);return i})),n[r]=function(t,e){if(i=t.toUpperCase(),dt||(dt=!0,$?(w=function(t,e){function n(t,e){for(var n=0,i=t.length;n<i;e(t[n++]));}return new $(function(i){for(var r,o,a,s=0,c=i.length;s<c;s++)"childList"===(r=i[s]).type?(n(r.addedNodes,t),n(r.removedNodes,e)):(o=r.target,mt&&o.attributeChangedCallback&&"style"!==r.attributeName&&(a=ot.call(o,r.attributeName))!==r.oldValue&&o.attributeChangedCallback(r.attributeName,r.oldValue,a))})}(a(x),a(T))).observe(n,{childList:!0,subtree:!0}):(g=[],ht(function t(){for(;g.length;)g.shift().call(null,g.shift());ht(t)}),n.addEventListener("DOMNodeInserted",u(x)),n.addEventListener("DOMNodeRemoved",u(T))),n.addEventListener(N,h),n.addEventListener("readystatechange",h),n.createElement=function(t,e){var i=ct.apply(n,arguments),r=""+t,o=U.call(k,(e?j:O)+(e||r).toUpperCase()),a=-1<o;return e&&(i.setAttribute("is",e=e.toLowerCase()),a&&(a=c(r.toUpperCase(),e))),mt=!n.createElement.innerHTMLHelper,a&&M(i,z[o]),i},tt.cloneNode=function(t){var e=rt.call(this,!!t),n=s(e);return-1<n&&M(e,z[n]),t&&function(t){for(var e,n=0,i=t.length;n<i;n++)e=t[n],M(e,z[s(e)])}(e.querySelectorAll(B)),e}),-2<U.call(k,j+i)+U.call(k,O+i)&&f(t),!P.test(i)||-1<U.call(R,i))throw new Error("The type "+t+" is invalid");var i,r,l=function(){return p?n.createElement(m,i):n.createElement(m)},d=e||H,p=G.call(d,C),m=p?e[C].toUpperCase():i;return p&&-1<U.call(k,O+m)&&f(m),r=k.push((p?j:O)+i)-1,B=B.concat(B.length?",":"",p?m+'[is="'+t.toLowerCase()+'"]':m),l.prototype=z[r]=G.call(d,"prototype")?d.prototype:K(tt),o(n.querySelectorAll(B),x),l}}}(window,document,Object,"registerElement")},{}],13:[function(t,e,n){e.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],14:[function(t,e,n){var i=t("dtype");e.exports=function(t,e,n){if(!t)throw new TypeError("must specify data as first parameter");if(n=0|+(n||0),Array.isArray(t)&&Array.isArray(t[0])){var r=t[0].length,o=t.length*r;e&&"string"!=typeof e||(e=new(i(e||"float32"))(o+n));var a=e.length-n;if(o!==a)throw new Error("source length "+o+" ("+r+"x"+t.length+") does not match destination length "+a);for(var s=0,c=n;s<t.length;s++)for(var l=0;l<r;l++)e[c++]=t[s][l]}else if(e&&"string"!=typeof e)e.set(t,n);else{var u=i(e||"float32");0===n?e=new u(t):(e=new u(t.length+n)).set(t,n)}return e}},{dtype:13}],15:[function(t,e,n){var i=t("is-function");e.exports=function(t,e,n){if(!i(e))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===r.call(t)?function(t,e,n){for(var i=0,r=t.length;i<r;i++)o.call(t,i)&&e.call(n,t[i],i,t)}(t,e,n):"string"==typeof t?function(t,e,n){for(var i=0,r=t.length;i<r;i++)e.call(n,t.charAt(i),i,t)}(t,e,n):function(t,e,n){for(var i in t)o.call(t,i)&&e.call(n,t[i],i,t)}(t,e,n)};var r=Object.prototype.toString,o=Object.prototype.hasOwnProperty},{"is-function":20}],16:[function(t,e,i){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(t,e,n){n.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,c=(1<<s)-1,l=c>>1,u=-7,h=n?r-1:0,d=n?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+t[e+h],h+=d,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=l}return(p?-1:1)*a*Math.pow(2,o-i)},n.write=function(t,e,n,i,r,o){var a,s,c,l=8*o-r-1,u=(1<<l)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(a++,c/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*c-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,l+=r;l>0;t[n+p]=255&a,p+=f,a/=256,l-=8);t[n+p-f]|=128*m}},{}],18:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],19:[function(t,e,n){function i(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.exports=function(t){return null!=t&&(i(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],20:[function(t,e,n){e.exports=function(t){var e=i.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var i=Object.prototype.toString},{}],21:[function(t,e,n){"use strict";e.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}},{}],22:[function(t,e,n){var i=t("word-wrapper"),r=t("xtend"),o=t("as-number"),a=["x","e","a","o","n","s","r","c","u","m","v","w","z"],s=["m","w"],c=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],l="\t".charCodeAt(0),u=" ".charCodeAt(0);function h(t){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(t)}function d(t,e){if(!t.chars||0===t.chars.length)return null;var n=f(t.chars,e);return n>=0?t.chars[n]:null}function p(t,e,n){if(!t.kernings||0===t.kernings.length)return 0;for(var i=t.kernings,r=0;r<i.length;r++){var o=i[r];if(o.first===e&&o.second===n)return o.amount}return 0}function f(t,e,n){for(var i=n=n||0;i<t.length;i++)if(t[i].id===e)return i;return-1}e.exports=function(t){return new h(t)},h.prototype.update=function(t){if(t=r({measure:this._measure},t),this._opt=t,this._opt.tabSize=o(this._opt.tabSize,4),!t.font)throw new Error("must provide a valid bitmap font");var e=this.glyphs,n=t.text||"",s=t.font;this._setupSpaceGlyphs(s);var l=i.lines(n,t),u=t.width||0;e.length=0;var h=l.reduce(function(t,e){return Math.max(t,e.width,u)},0),d=0,m=0,g=o(t.lineHeight,s.common.lineHeight),v=s.common.base,y=g-v,A=t.letterSpacing||0,w=g*l.length-y,b=function(t){return"center"===t?1:"right"===t?2:0}(this._opt.align);m-=w,this._width=h,this._height=w,this._descender=g-v,this._baseline=v,this._xHeight=function(t){for(var e=0;e<a.length;e++){var n=a[e].charCodeAt(0),i=f(t.chars,n);if(i>=0)return t.chars[i].height}return 0}(s),this._capHeight=function(t){for(var e=0;e<c.length;e++){var n=c[e].charCodeAt(0),i=f(t.chars,n);if(i>=0)return t.chars[i].height}return 0}(s),this._lineHeight=g,this._ascender=g-y-this._xHeight;var M=this;l.forEach(function(t,i){for(var r,o=t.start,a=t.end,c=t.width,l=o;l<a;l++){var u=n.charCodeAt(l),f=M.getGlyph(s,u);if(f){r&&(d+=p(s,r.id,f.id));var v=d;1===b?v+=(h-c)/2:2===b&&(v+=h-c),e.push({position:[v,m],data:f,index:l,line:i}),d+=f.xadvance+A,r=f}}m+=g,d=0}),this._linesTotal=l.length},h.prototype._setupSpaceGlyphs=function(t){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,t.chars&&0!==t.chars.length){var e=d(t,u)||function(t){for(var e=0;e<s.length;e++){var n=s[e].charCodeAt(0),i=f(t.chars,n);if(i>=0)return t.chars[i]}return 0}(t)||t.chars[0],n=this._opt.tabSize*e.xadvance;this._fallbackSpaceGlyph=e,this._fallbackTabGlyph=r(e,{x:0,y:0,xadvance:n,id:l,xoffset:0,yoffset:0,width:0,height:0})}},h.prototype.getGlyph=function(t,e){return d(t,e)||(e===l?this._fallbackTabGlyph:e===u?this._fallbackSpaceGlyph:null)},h.prototype.computeMetrics=function(t,e,n,i){var r,o=this._opt.letterSpacing||0,a=this._opt.font,s=0,c=0,l=0;if(!a.chars||0===a.chars.length)return{start:e,end:e,width:0};n=Math.min(t.length,n);for(var u=e;u<n;u++){var h,d=t.charCodeAt(u);if(h=this.getGlyph(a,d)){h.xoffset;var f=(s+=r?p(a,r.id,h.id):0)+h.xadvance+o,m=s+h.width;if(m>=i||f>=i)break;s=f,c=m,r=h}l++}return r&&(c+=r.xoffset),{start:e,end:e+l,width:c}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(function(t){Object.defineProperty(h.prototype,t,{get:function(t){return new Function(["return function "+t+"() {","  return this._"+t,"}"].join("\n"))()}(t),configurable:!0})})},{"as-number":3,"word-wrapper":47,xtend:50}],23:[function(t,e,n){(function(n){var i=t("xhr"),r=function(){},o=t("parse-bmfont-ascii"),a=t("parse-bmfont-xml"),s=t("parse-bmfont-binary"),c=t("./lib/is-binary"),l=t("xtend"),u=self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;e.exports=function(t,e){e="function"==typeof e?e:r,"string"==typeof t?t={uri:t}:t||(t={}),t.binary&&(t=function(t){if(u)return l(t,{responseType:"arraybuffer"});if(void 0===self.XMLHttpRequest)throw new Error("your browser does not support XHR loading");var e=new self.XMLHttpRequest;return e.overrideMimeType("text/plain; charset=x-user-defined"),l({xhr:e},t)}(t)),i(t,function(i,l,u){if(i)return e(i);if(!/^2/.test(l.statusCode))return e(new Error("http status code: "+l.statusCode));if(!u)return e(new Error("no body result"));var h,d,p=!1;if(h=u,"[object ArrayBuffer]"===Object.prototype.toString.call(h)){var f=new Uint8Array(u);u=new n(f,"binary")}c(u)&&(p=!0,"string"==typeof u&&(u=new n(u,"binary"))),p||(n.isBuffer(u)&&(u=u.toString(t.encoding)),u=u.trim());try{var m=l.headers["content-type"];d=p?s(u):/json/.test(m)||"{"===u.charAt(0)?JSON.parse(u):/xml/.test(m)||"<"===u.charAt(0)?a(u):o(u)}catch(t){e(new Error("error parsing font "+t.message)),e=r}e(null,d)})}}).call(this,t("buffer").Buffer)},{"./lib/is-binary":24,buffer:7,"parse-bmfont-ascii":26,"parse-bmfont-binary":27,"parse-bmfont-xml":28,xhr:48,xtend:50}],24:[function(t,e,n){(function(n){var i=t("buffer-equal"),r=new n([66,77,70,3]);e.exports=function(t){return"string"==typeof t?"BMF"===t.substring(0,3):t.length>4&&i(t.slice(0,4),r)}}).call(this,t("buffer").Buffer)},{buffer:7,"buffer-equal":6}],25:[function(t,e,n){"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))r.call(n,l)&&(s[l]=n[l]);if(i){a=i(n);for(var u=0;u<a.length;u++)o.call(n,a[u])&&(s[a[u]]=n[a[u]])}}return s}},{}],26:[function(t,e,n){function i(t,e){if(!(t=t.replace(/\t+/g," ").trim()))return null;var n=t.indexOf(" ");if(-1===n)throw new Error("no named row at line "+e);var i=t.substring(0,n);t=(t=(t=(t=t.substring(n+1)).replace(/letter=[\'\"]\S+[\'\"]/gi,"")).split("=")).map(function(t){return t.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var o=[],a=0;a<t.length;a++){var s=t[a];0===a?o.push({key:s[0],data:""}):a===t.length-1?o[o.length-1].data=r(s[0]):(o[o.length-1].data=r(s[0]),o.push({key:s[1],data:""}))}var c={key:i,data:{}};return o.forEach(function(t){c.data[t.key]=t.data}),c}function r(t){return t&&0!==t.length?0===t.indexOf('"')||0===t.indexOf("'")?t.substring(1,t.length-1):-1!==t.indexOf(",")?function(t){return t.split(",").map(function(t){return parseInt(t,10)})}(t):parseInt(t,10):""}e.exports=function(t){if(!t)throw new Error("no data provided");var e={pages:[],chars:[],kernings:[]},n=(t=t.toString().trim()).split(/\r\n?|\n/g);if(0===n.length)throw new Error("no data in BMFont file");for(var r=0;r<n.length;r++){var o=i(n[r],r);if(o)if("page"===o.key){if("number"!=typeof o.data.id)throw new Error("malformed file at line "+r+" -- needs page id=N");if("string"!=typeof o.data.file)throw new Error("malformed file at line "+r+' -- needs page file="path"');e.pages[o.data.id]=o.data.file}else"chars"===o.key||"kernings"===o.key||("char"===o.key?e.chars.push(o.data):"kerning"===o.key?e.kernings.push(o.data):e[o.key]=o.data)}return e}},{}],27:[function(t,e,n){var i=[66,77,70];function r(t,e,n){if(n>e.length-1)return 0;var i=e.readUInt8(n++),r=e.readInt32LE(n);switch(n+=4,i){case 1:t.info=function(t,e){var n={};n.size=t.readInt16LE(e);var i=t.readUInt8(e+2);return n.smooth=i>>7&1,n.unicode=i>>6&1,n.italic=i>>5&1,n.bold=i>>4&1,i>>3&1&&(n.fixedHeight=1),n.charset=t.readUInt8(e+3)||"",n.stretchH=t.readUInt16LE(e+4),n.aa=t.readUInt8(e+6),n.padding=[t.readInt8(e+7),t.readInt8(e+8),t.readInt8(e+9),t.readInt8(e+10)],n.spacing=[t.readInt8(e+11),t.readInt8(e+12)],n.outline=t.readUInt8(e+13),n.face=function(t,n){return o(t,e+14).toString("utf8")}(t),n}(e,n);break;case 2:t.common=function(t,e){var n={};return n.lineHeight=t.readUInt16LE(e),n.base=t.readUInt16LE(e+2),n.scaleW=t.readUInt16LE(e+4),n.scaleH=t.readUInt16LE(e+6),n.pages=t.readUInt16LE(e+8),t.readUInt8(e+10),n.packed=0,n.alphaChnl=t.readUInt8(e+11),n.redChnl=t.readUInt8(e+12),n.greenChnl=t.readUInt8(e+13),n.blueChnl=t.readUInt8(e+14),n}(e,n);break;case 3:t.pages=function(t,e,n){for(var i=[],r=o(t,e),a=r.length+1,s=n/a,c=0;c<s;c++)i[c]=t.slice(e,e+r.length).toString("utf8"),e+=a;return i}(e,n,r);break;case 4:t.chars=function(t,e,n){for(var i=[],r=n/20,o=0;o<r;o++){var a={},s=20*o;a.id=t.readUInt32LE(e+0+s),a.x=t.readUInt16LE(e+4+s),a.y=t.readUInt16LE(e+6+s),a.width=t.readUInt16LE(e+8+s),a.height=t.readUInt16LE(e+10+s),a.xoffset=t.readInt16LE(e+12+s),a.yoffset=t.readInt16LE(e+14+s),a.xadvance=t.readInt16LE(e+16+s),a.page=t.readUInt8(e+18+s),a.chnl=t.readUInt8(e+19+s),i[o]=a}return i}(e,n,r);break;case 5:t.kernings=function(t,e,n){for(var i=[],r=n/10,o=0;o<r;o++){var a={},s=10*o;a.first=t.readUInt32LE(e+0+s),a.second=t.readUInt32LE(e+4+s),a.amount=t.readInt16LE(e+8+s),i[o]=a}return i}(e,n,r)}return 5+r}function o(t,e){for(var n=e;n<t.length&&0!==t[n];n++);return t.slice(e,n)}e.exports=function(t){if(t.length<6)throw new Error("invalid buffer length for BMFont");if(!i.every(function(e,n){return t.readUInt8(n)===e}))throw new Error("BMFont missing BMF byte header");var e=3;if(t.readUInt8(e++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var n={kernings:[],chars:[]},o=0;o<5;o++)e+=r(n,t,e);return n}},{}],28:[function(t,e,n){var i=t("./parse-attribs"),r=t("xml-parse-from-string"),o={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};function a(t){return function(t){for(var e=[],n=0;n<t.attributes.length;n++)e.push(t.attributes[n]);return e}(t).reduce(function(t,e){var n;return t[(n=e.nodeName,o[n.toLowerCase()]||n)]=e.nodeValue,t},{})}e.exports=function(t){t=t.toString();var e=r(t),n={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(t){var r=e.getElementsByTagName(t)[0];r&&(n[t]=i(a(r)))});var o=e.getElementsByTagName("pages")[0];if(!o)throw new Error("malformed file -- no <pages> element");for(var s=o.getElementsByTagName("page"),c=0;c<s.length;c++){var l=s[c],u=parseInt(l.getAttribute("id"),10),h=l.getAttribute("file");if(isNaN(u))throw new Error('malformed file -- page "id" attribute is NaN');if(!h)throw new Error('malformed file -- needs page "file" attribute');n.pages[parseInt(u,10)]=h}return["chars","kernings"].forEach(function(t){var r=e.getElementsByTagName(t)[0];if(r)for(var o=t.substring(0,t.length-1),s=r.getElementsByTagName(o),c=0;c<s.length;c++){var l=s[c];n[t].push(i(a(l)))}}),n}},{"./parse-attribs":29,"xml-parse-from-string":49}],29:[function(t,e,n){e.exports=function(t){for(var e in"chasrset"in t&&(t.charset=t.chasrset,delete t.chasrset),t)"face"!==e&&"charset"!==e&&(t[e]="padding"===e||"spacing"===e?t[e].split(",").map(function(t){return parseInt(t,10)}):parseInt(t[e],10));return t}},{}],30:[function(t,e,n){var i=t("trim"),r=t("for-each");e.exports=function(t){if(!t)return{};var e={};return r(i(t).split("\n"),function(t){var n,r=t.indexOf(":"),o=i(t.slice(0,r)).toLowerCase(),a=i(t.slice(r+1));void 0===e[o]?e[o]=a:(n=e[o],"[object Array]"===Object.prototype.toString.call(n)?e[o].push(a):e[o]=[e[o],a])}),e}},{"for-each":15,trim:45}],31:[function(t,e,i){(function(t){var n=t.performance||{},i=function(){for(var t=["now","webkitNow","msNow","mozNow","oNow"];t.length;){var e=t.shift();if(e in n)return n[e].bind(n)}var i=Date.now||function(){return(new Date).getTime()},r=(n.timing||{}).navigationStart||i();return function(){return i()-r}}();i.performanceNow=n.now,i.noConflict=function(){n.now=i.performanceNow},i.conflict=function(){n.now=i},i.conflict(),e.exports=i}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(t,e,n){var i,r,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(t){if(i===setTimeout)return setTimeout(t,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(t){i=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var l,u=[],h=!1,d=-1;function p(){h&&l&&(h=!1,l.length?u=l.concat(u):d=-1,u.length&&f())}function f(){if(!h){var t=c(p);h=!0;for(var e=u.length;e;){for(l=u,u=[];++d<e;)l&&l[d].run();d=-1,e=u.length}l=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new m(t,e)),1!==u.length||h||c(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],33:[function(t,e,n){!function(t){var n=setTimeout,r="function"==typeof i&&i||function(t){n(t,1)};function o(t,e){return function(){t.apply(e,arguments)}}var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],d(t,o(l,this),o(u,this))}function c(t){var e=this;null!==this._state?r(function(){var n=e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void t.reject(e)}t.resolve(i)}else(e._state?t.resolve:t.reject)(e._value)}):this._deferreds.push(t)}function l(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void d(o(e,t),o(l,this),o(u,this))}this._state=!0,this._value=t,h.call(this)}catch(t){u.call(this,t)}}function u(t){this._state=!1,this._value=t,h.call(this)}function h(){for(var t=0,e=this._deferreds.length;t<e;t++)c.call(this,this._deferreds[t]);this._deferreds=null}function d(t,e,n){var i=!1;try{t(function(t){i||(i=!0,e(t))},function(t){i||(i=!0,n(t))})}catch(t){if(i)return;i=!0,n(t)}}s.prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,e){var n=this;return new s(function(i,r){c.call(n,new function(t,e,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i}(t,e,i,r))})},s.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&a(arguments[0])?arguments[0]:arguments);return new s(function(e,n){if(0===t.length)return e([]);var i=t.length;function r(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){r(o,t)},n)}t[o]=a,0==--i&&e(t)}catch(t){n(t)}}for(var o=0;o<t.length;o++)r(o,t[o])})},s.resolve=function(t){return t&&"object"==typeof t&&t.constructor===s?t:new s(function(e){e(t)})},s.reject=function(t){return new s(function(e,n){n(t)})},s.race=function(t){return new s(function(e,n){for(var i=0,r=t.length;i<r;i++)t[i].then(e,n)})},s._setImmediateFn=function(t){r=t},void 0!==e&&e.exports?e.exports=s:t.Promise||(t.Promise=s)}(this)},{}],34:[function(t,e,n){var i=t("dtype"),r=t("an-array"),o=t("is-buffer"),a=[0,2,3],s=[2,1,3];e.exports=function(t,e){t&&(r(t)||o(t))||(e=t||{},t=null);for(var n="string"==typeof(e="number"==typeof e?{count:e}:e||{}).type?e.type:"uint16",c="number"==typeof e.count?e.count:1,l=e.start||0,u=!1!==e.clockwise?a:s,h=u[0],d=u[1],p=u[2],f=6*c,m=t||new(i(n))(f),g=0,v=0;g<f;g+=6,v+=4){var y=g+l;m[y+0]=v+0,m[y+1]=v+1,m[y+2]=v+2,m[y+3]=v+h,m[y+4]=v+d,m[y+5]=v+p}return m}},{"an-array":2,dtype:13,"is-buffer":19}],35:[function(t,e,n){function i(t,e){var n=(e=e||{}).preserveNumbers,i={};return function(t){for(var e,n=[],i=0,r=/url\([^\)]+$/,o="";i<t.length;)-1===(e=t.indexOf(";",i))&&(e=t.length),o+=t.substring(i,e),r.test(o)?(o+=";",i=e+1):(n.push(o),o="",i=e+1);return n}(t).map(function(t){return t.trim()}).filter(Boolean).forEach(function(t){var e,r=t.indexOf(":"),o=t.substr(0,r).trim(),a=t.substr(r+1).trim();n&&(e=a,!isNaN(parseFloat(e))&&isFinite(e))&&(a=Number(a)),i[o]=a}),i}function r(t){return Object.keys(t).map(function(e){return e+":"+t[e]}).join(";")}e.exports.parse=i,e.exports.stringify=r,e.exports.normalize=function(t,e){return r(i(t,e))}},{}],36:[function(t,e,n){var i=t("layout-bmfont-text"),r=t("inherits"),o=t("quad-indices"),a=t("three-buffer-vertex-data"),s=t("object-assign"),c=t("./lib/vertices"),l=t("./lib/utils"),u=THREE.BufferGeometry;function h(t){u.call(this),"string"==typeof t&&(t={text:t}),this._opt=s({},t),t&&this.update(t)}e.exports=function(t){return new h(t)},r(h,u),h.prototype.update=function(t){if("string"==typeof t&&(t={text:t}),!(t=s({},this._opt,t)).font)throw new TypeError("must specify a { font } in options");this.layout=i(t);var e=!1!==t.flipY,n=t.font,r=n.common.scaleW,l=n.common.scaleH,u=this.layout.glyphs.filter(function(t){var e=t.data;return e.width*e.height>0});this.visibleGlyphs=u;var h=c.positions(u),d=c.uvs(u,r,l,e),p=o({clockwise:!0,type:"uint16",count:u.length});if(a.index(this,p,1,"uint16"),a.attr(this,"position",h,2),a.attr(this,"uv",d,2),!t.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(t.multipage){var f=c.pages(u);a.attr(this,"page",f,1)}},h.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var t=this.attributes.position.array,e=this.attributes.position.itemSize;if(!t||!e||t.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);l.computeSphere(t,this.boundingSphere),isNaN(this.boundingSphere.radius)},h.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var t=this.boundingBox,e=this.attributes.position.array,n=this.attributes.position.itemSize;!e||!n||e.length<2?t.makeEmpty():l.computeBox(e,t)}},{"./lib/utils":37,"./lib/vertices":38,inherits:18,"layout-bmfont-text":22,"object-assign":25,"quad-indices":34,"three-buffer-vertex-data":39}],37:[function(t,e,n){var i=2,r={min:[0,0],max:[0,0]};function o(t){var e=t.length/i;r.min[0]=t[0],r.min[1]=t[1],r.max[0]=t[0],r.max[1]=t[1];for(var n=0;n<e;n++){var o=t[n*i+0],a=t[n*i+1];r.min[0]=Math.min(o,r.min[0]),r.min[1]=Math.min(a,r.min[1]),r.max[0]=Math.max(o,r.max[0]),r.max[1]=Math.max(a,r.max[1])}}e.exports.computeBox=function(t,e){o(t),e.min.set(r.min[0],r.min[1],0),e.max.set(r.max[0],r.max[1],0)},e.exports.computeSphere=function(t,e){o(t);var n=r.min[0],i=r.min[1],a=r.max[0]-n,s=r.max[1]-i,c=Math.sqrt(a*a+s*s);e.center.set(n+a/2,i+s/2,0),e.radius=c/2}},{}],38:[function(t,e,n){e.exports.pages=function(t){var e=new Float32Array(4*t.length*1),n=0;return t.forEach(function(t){var i=t.data.page||0;e[n++]=i,e[n++]=i,e[n++]=i,e[n++]=i}),e},e.exports.uvs=function(t,e,n,i){var r=new Float32Array(4*t.length*2),o=0;return t.forEach(function(t){var a=t.data,s=a.x+a.width,c=a.y+a.height,l=a.x/e,u=a.y/n,h=s/e,d=c/n;i&&(u=(n-a.y)/n,d=(n-c)/n),r[o++]=l,r[o++]=u,r[o++]=l,r[o++]=d,r[o++]=h,r[o++]=d,r[o++]=h,r[o++]=u}),r},e.exports.positions=function(t){var e=new Float32Array(4*t.length*2),n=0;return t.forEach(function(t){var i=t.data,r=t.position[0]+i.xoffset,o=t.position[1]+i.yoffset,a=i.width,s=i.height;e[n++]=r,e[n++]=o,e[n++]=r,e[n++]=o+s,e[n++]=r+a,e[n++]=o+s,e[n++]=r+a,e[n++]=o}),e}},{}],39:[function(t,e,n){var i=t("flatten-vertex-data"),r=!1;function o(t,e,n,o){if(e=e||[],!t||function(t,e,n){if(t.itemSize!==n)return!0;if(!t.array)return!0;var i=t.array.length;return Array.isArray(e)&&Array.isArray(e[0])?i!==e.length*n:i!==e.length}(t,e,n)){e=i(e,o);var a=t&&"function"!=typeof t.setArray;return t&&!a||(a&&!r&&(r=!0),t=new THREE.BufferAttribute(e,n)),t.itemSize=n,t.needsUpdate=!0,"function"==typeof t.setArray&&t.setArray(e),t}return i(e,t.array),t.needsUpdate=!0,null}e.exports.attr=function(t,e,n,i,r){if("number"!=typeof i&&(i=3),"string"!=typeof r&&(r="float32"),Array.isArray(n)&&Array.isArray(n[0])&&n[0].length!==i)throw new Error("Nested vertex array has unexpected size; expected "+i+" but found "+n[0].length);var a=o(t.getAttribute(e),n,i,r);a&&t.addAttribute(e,a)},e.exports.index=function(t,e,n,i){"number"!=typeof n&&(n=1),"string"!=typeof i&&(i="uint16");var r=!t.index&&"function"!=typeof t.setIndex,a=o(r?t.getAttribute("index"):t.index,e,n,i);a&&(r?t.addAttribute("index",a):t.index=a)}},{"flatten-vertex-data":14}],40:[function(t,e,n){!function(t){"use strict";function e(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,t)}}}});var n,i,r,o,a,s,c,l,u,h=0,d=1,p=2,f=1,m=2,g=0,v=1,y=2,A=0,w=1,b=2,M=0,E=1,x=2,T=3,C=4,S=5,D=100,_=101,L=102,N=103,I=104,O=200,j=201,P=202,R=203,k=204,z=205,B=206,F=207,U=208,H=209,G=210,Q=0,V=1,Y=2,W=3,q=4,X=5,Z=6,K=7,J=0,$=1,tt=2,et=0,nt=1,it=2,rt=3,ot=4,at=301,st=302,ct=303,lt=304,ut=305,ht=306,dt=307,pt=1e3,ft=1001,mt=1002,gt=1003,vt=1004,yt=1005,At=1006,wt=1007,bt=1008,Mt=1009,Et=1010,xt=1011,Tt=1012,Ct=1013,St=1014,Dt=1015,_t=1016,Lt=1017,Nt=1018,It=1019,Ot=1020,jt=1021,Pt=1022,Rt=1023,kt=1024,zt=1025,Bt=Rt,Ft=1026,Ut=1027,Ht=33776,Gt=33777,Qt=33778,Vt=33779,Yt=35840,Wt=35841,qt=35842,Xt=35843,Zt=36196,Kt=37808,Jt=37809,$t=37810,te=37811,ee=37812,ne=37813,ie=37814,re=37815,oe=37816,ae=37817,se=37818,ce=37819,le=37820,ue=37821,he=2201,de=2400,pe=0,fe=1,me=2,ge=3e3,ve=3001,ye=3007,Ae=3002,we=3004,be=3005,Me=3006,Ee=3200,xe=3201,Te={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&i|128]+t[i>>8&255]+"-"+t[i>>16&255]+t[i>>24&255]+t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]).toUpperCase()}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Te.DEG2RAD},radToDeg:function(t){return t*Te.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function Ce(t,e){this.x=t||0,this.y=e||0}function Se(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length}function De(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}function _e(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function Le(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length}Object.defineProperties(Ce.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(Ce.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:(n=new Ce,i=new Ce,function(t,e){return n.set(t,t),i.set(e,e),this.clamp(n,i)}),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*i+t.x,this.y=r*i+o*n+t.y,this}}),Object.assign(Se.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,o,a,s,c,l,u,h,d,p,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=o,g[9]=a,g[13]=s,g[2]=c,g[6]=l,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Se).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:(l=new _e,function(t){var e=this.elements,n=t.elements,i=1/l.setFromMatrixColumn(t,0).length(),r=1/l.setFromMatrixColumn(t,1).length(),o=1/l.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,this}),makeRotationFromEuler:function(t){!t||t.isEuler;var e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),c=Math.sin(i),l=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){var h=o*l,d=o*u,p=a*l,f=a*u;e[0]=s*l,e[4]=-s*u,e[8]=c,e[1]=d+p*c,e[5]=h-f*c,e[9]=-a*s,e[2]=f-h*c,e[6]=p+d*c,e[10]=o*s}else if("YXZ"===t.order){var m=s*l,g=s*u,v=c*l,y=c*u;e[0]=m+y*a,e[4]=v*a-g,e[8]=o*c,e[1]=o*u,e[5]=o*l,e[9]=-a,e[2]=g*a-v,e[6]=y+m*a,e[10]=o*s}else if("ZXY"===t.order)m=s*l,g=s*u,v=c*l,y=c*u,e[0]=m-y*a,e[4]=-o*u,e[8]=v+g*a,e[1]=g+v*a,e[5]=o*l,e[9]=y-m*a,e[2]=-o*c,e[6]=a,e[10]=o*s;else if("ZYX"===t.order)h=o*l,d=o*u,p=a*l,f=a*u,e[0]=s*l,e[4]=p*c-d,e[8]=h*c+f,e[1]=s*u,e[5]=f*c+h,e[9]=d*c-p,e[2]=-c,e[6]=a*s,e[10]=o*s;else if("YZX"===t.order){var A=o*s,w=o*c,b=a*s,M=a*c;e[0]=s*l,e[4]=M-A*u,e[8]=b*u+w,e[1]=u,e[5]=o*l,e[9]=-a*l,e[2]=-c*l,e[6]=w*u+b,e[10]=A-M*u}else"XZY"===t.order&&(A=o*s,w=o*c,b=a*s,M=a*c,e[0]=s*l,e[4]=-u,e[8]=c*l,e[1]=A*u+M,e[5]=o*l,e[9]=w*u-b,e[2]=b*u-w,e[6]=a*l,e[10]=M*u+A);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t._x,i=t._y,r=t._z,o=t._w,a=n+n,s=i+i,c=r+r,l=n*a,u=n*s,h=n*c,d=i*s,p=i*c,f=r*c,m=o*a,g=o*s,v=o*c;return e[0]=1-(d+f),e[4]=u-v,e[8]=h+g,e[1]=u+v,e[5]=1-(l+f),e[9]=p-m,e[2]=h-g,e[6]=p+m,e[10]=1-(l+d),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:(a=new _e,s=new _e,c=new _e,function(t,e,n){var i=this.elements;return c.subVectors(t,e),0===c.lengthSq()&&(c.z=1),c.normalize(),a.crossVectors(n,c),0===a.lengthSq()&&(1===Math.abs(n.z)?c.x+=1e-4:c.z+=1e-4,c.normalize(),a.crossVectors(n,c)),a.normalize(),s.crossVectors(c,a),i[0]=a.x,i[4]=s.x,i[8]=c.x,i[1]=a.y,i[5]=s.y,i[9]=c.y,i[2]=a.z,i[6]=s.z,i[10]=c.z,this}),multiply:function(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[4],s=n[8],c=n[12],l=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],A=n[11],w=n[15],b=i[0],M=i[4],E=i[8],x=i[12],T=i[1],C=i[5],S=i[9],D=i[13],_=i[2],L=i[6],N=i[10],I=i[14],O=i[3],j=i[7],P=i[11],R=i[15];return r[0]=o*b+a*T+s*_+c*O,r[4]=o*M+a*C+s*L+c*j,r[8]=o*E+a*S+s*N+c*P,r[12]=o*x+a*D+s*I+c*R,r[1]=l*b+u*T+h*_+d*O,r[5]=l*M+u*C+h*L+d*j,r[9]=l*E+u*S+h*N+d*P,r[13]=l*x+u*D+h*I+d*R,r[2]=p*b+f*T+m*_+g*O,r[6]=p*M+f*C+m*L+g*j,r[10]=p*E+f*S+m*N+g*P,r[14]=p*x+f*D+m*I+g*R,r[3]=v*b+y*T+A*_+w*O,r[7]=v*M+y*C+A*L+w*j,r[11]=v*E+y*S+A*N+w*P,r[15]=v*x+y*D+A*I+w*R,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new _e;return function(e){for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],a=t[5],s=t[9],c=t[13],l=t[2],u=t[6],h=t[10],d=t[14];return t[3]*(+r*s*u-i*c*u-r*a*h+n*c*h+i*a*d-n*s*d)+t[7]*(+e*s*d-e*c*h+r*o*h-i*o*d+i*c*l-r*s*l)+t[11]*(+e*c*u-e*a*d-r*o*u+n*o*d+r*a*l-n*c*l)+t[15]*(-i*a*l-e*s*u+e*a*h+i*o*u-n*o*h+n*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],o=i[1],a=i[2],s=i[3],c=i[4],l=i[5],u=i[6],h=i[7],d=i[8],p=i[9],f=i[10],m=i[11],g=i[12],v=i[13],y=i[14],A=i[15],w=p*y*h-v*f*h+v*u*m-l*y*m-p*u*A+l*f*A,b=g*f*h-d*y*h-g*u*m+c*y*m+d*u*A-c*f*A,M=d*v*h-g*p*h+g*l*m-c*v*m-d*l*A+c*p*A,E=g*p*u-d*v*u-g*l*f+c*v*f+d*l*y-c*p*y,x=r*w+o*b+a*M+s*E;if(0===x){if(!0===e)throw new Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return this.identity()}var T=1/x;return n[0]=w*T,n[1]=(v*f*s-p*y*s-v*a*m+o*y*m+p*a*A-o*f*A)*T,n[2]=(l*y*s-v*u*s+v*a*h-o*y*h-l*a*A+o*u*A)*T,n[3]=(p*u*s-l*f*s-p*a*h+o*f*h+l*a*m-o*u*m)*T,n[4]=b*T,n[5]=(d*y*s-g*f*s+g*a*m-r*y*m-d*a*A+r*f*A)*T,n[6]=(g*u*s-c*y*s-g*a*h+r*y*h+c*a*A-r*u*A)*T,n[7]=(c*f*s-d*u*s+d*a*h-r*f*h-c*a*m+r*u*m)*T,n[8]=M*T,n[9]=(g*p*s-d*v*s-g*o*m+r*v*m+d*o*A-r*p*A)*T,n[10]=(c*v*s-g*l*s+g*o*h-r*v*h-c*o*A+r*l*A)*T,n[11]=(d*l*s-c*p*s-d*o*h+r*p*h+c*o*m-r*l*m)*T,n[12]=E*T,n[13]=(d*v*a-g*p*a+g*o*f-r*v*f-d*o*y+r*p*y)*T,n[14]=(g*l*a-c*v*a-g*o*u+r*v*u+c*o*y-r*l*y)*T,n[15]=(c*p*a-d*l*a+d*o*u-r*p*u-c*o*f+r*l*f)*T,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,a=t.y,s=t.z,c=r*o,l=r*a;return this.set(c*o+n,c*a-i*s,c*s+i*a,0,c*a+i*s,l*a+n,l*s-i*o,0,c*s-i*a,l*s+i*o,r*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:(r=new _e,o=new Se,function(t,e,n){var i=this.elements,a=r.set(i[0],i[1],i[2]).length(),s=r.set(i[4],i[5],i[6]).length(),c=r.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),t.x=i[12],t.y=i[13],t.z=i[14],o.copy(this);var l=1/a,u=1/s,h=1/c;return o.elements[0]*=l,o.elements[1]*=l,o.elements[2]*=l,o.elements[4]*=u,o.elements[5]*=u,o.elements[6]*=u,o.elements[8]*=h,o.elements[9]*=h,o.elements[10]*=h,e.setFromRotationMatrix(o),n.x=a,n.y=s,n.z=c,this}),makePerspective:function(t,e,n,i,r,o){var a=this.elements,s=2*r/(e-t),c=2*r/(n-i),l=(e+t)/(e-t),u=(n+i)/(n-i),h=-(o+r)/(o-r),d=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,i,r,o){var a=this.elements,s=1/(e-t),c=1/(n-i),l=1/(o-r),u=(e+t)*s,h=(n+i)*c,d=(o+r)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),Object.assign(De,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,o,a){var s=n[i+0],c=n[i+1],l=n[i+2],u=n[i+3],h=r[o+0],d=r[o+1],p=r[o+2],f=r[o+3];if(u!==f||s!==h||c!==d||l!==p){var m=1-a,g=s*h+c*d+l*p+u*f,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var A=Math.sqrt(y),w=Math.atan2(A,g*v);m=Math.sin(m*w)/A,a=Math.sin(a*w)/A}var b=a*v;if(s=s*m+h*b,c=c*m+d*b,l=l*m+p*b,u=u*m+f*b,m===1-a){var M=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=M,c*=M,l*=M,u*=M}}t[e]=s,t[e+1]=c,t[e+2]=l,t[e+3]=u}}),Object.defineProperties(De.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(De.prototype,{set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,o=t.order,a=Math.cos,s=Math.sin,c=a(n/2),l=a(i/2),u=a(r/2),h=s(n/2),d=s(i/2),p=s(r/2);return"XYZ"===o?(this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p):"YXZ"===o?(this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p):"ZXY"===o?(this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p):"ZYX"===o?(this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p):"YZX"===o?(this._x=h*l*u+c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u-h*d*p):"XZY"===o&&(this._x=h*l*u-c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u+h*d*p),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],o=n[8],a=n[1],s=n[5],c=n[9],l=n[2],u=n[6],h=n[10],d=i+s+h;return d>0?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(u-c)*e,this._y=(o-l)*e,this._z=(a-r)*e):i>s&&i>h?(e=2*Math.sqrt(1+i-s-h),this._w=(u-c)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(o+l)/e):s>h?(e=2*Math.sqrt(1+s-i-h),this._w=(o-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(c+u)/e):(e=2*Math.sqrt(1+h-i-s),this._w=(a-r)/e,this._x=(o+l)/e,this._y=(c+u)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new _e;return function(n,i){return void 0===e&&(e=new _e),(t=n.dot(i)+1)<1e-6?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,i),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,o=t._w,a=e._x,s=e._y,c=e._z,l=e._w;return this._x=n*l+o*a+i*c-r*s,this._y=i*l+o*s+r*a-n*c,this._z=r*l+o*c+n*s-i*a,this._w=o*l-n*a-i*s-r*c,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,o=this._w,a=o*t._w+n*t._x+i*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var c=Math.atan2(s,a),l=Math.sin((1-e)*c)/s,u=Math.sin(e*c)/s;return this._w=o*l+this._w*u,this._x=n*l+this._x*u,this._y=i*l+this._y*u,this._z=r*l+this._z*u,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(_e.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(u=new De,function(t){return!t||t.isEuler,this.applyQuaternion(u.setFromEuler(t))}),applyAxisAngle:function(){var t=new De;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,a=t.z,s=t.w,c=s*e+o*i-a*n,l=s*n+a*e-r*i,u=s*i+r*n-o*e,h=-r*e-o*n-a*i;return this.x=c*s+h*-r+l*-a-u*-o,this.y=l*s+h*-o+u*-r-c*-a,this.z=u*s+h*-a+c*-o-l*-r,this},project:function(){var t=new Se;return function(e){return t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t=new Se;return function(e){return t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t=new _e,e=new _e;return function(n,i){return t.set(n,n,n),e.set(i,i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?this.crossVectors(t,e):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new _e;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new _e;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(Te.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(Le.prototype,{isMatrix3:!0,set:function(t,e,n,i,r,o,a,s,c){var l=this.elements;return l[0]=t,l[1]=i,l[2]=a,l[3]=e,l[4]=r,l[5]=s,l[6]=n,l[7]=o,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new _e;return function(e){for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[3],s=n[6],c=n[1],l=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],A=i[7],w=i[2],b=i[5],M=i[8];return r[0]=o*f+a*v+s*w,r[3]=o*m+a*y+s*b,r[6]=o*g+a*A+s*M,r[1]=c*f+l*v+u*w,r[4]=c*m+l*y+u*b,r[7]=c*g+l*A+u*M,r[2]=h*f+d*v+p*w,r[5]=h*m+d*y+p*b,r[8]=h*g+d*A+p*M,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8];return e*o*l-e*a*c-n*r*l+n*a*s+i*r*c-i*o*s},getInverse:function(t,e){t&&t.isMatrix4;var n=t.elements,i=this.elements,r=n[0],o=n[1],a=n[2],s=n[3],c=n[4],l=n[5],u=n[6],h=n[7],d=n[8],p=d*c-l*h,f=l*u-d*s,m=h*s-c*u,g=r*p+o*f+a*m;if(0===g){if(!0===e)throw new Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return this.identity()}var v=1/g;return i[0]=p*v,i[1]=(a*h-d*o)*v,i[2]=(l*o-a*c)*v,i[3]=f*v,i[4]=(d*r-a*u)*v,i[5]=(a*s-l*r)*v,i[6]=m*v,i[7]=(o*u-h*r)*v,i[8]=(c*r-o*s)*v,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,o,a){var s=Math.cos(r),c=Math.sin(r);this.set(n*s,n*c,-n*(s*o+c*a)+o+t,-i*c,i*s,-i*(-c*o+s*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],c=i[4],l=i[7];return i[0]=e*r+n*s,i[3]=e*o+n*c,i[6]=e*a+n*l,i[1]=-n*r+e*s,i[4]=-n*o+e*c,i[7]=-n*a+e*l,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var Ne,Ie,Oe,je,Pe,Re,ke=0;function ze(t,e,n,i,r,o,a,s,c,l){Object.defineProperty(this,"id",{value:ke++}),this.uuid=Te.generateUUID(),this.name="",this.image=void 0!==t?t:ze.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:ze.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:ft,this.wrapT=void 0!==i?i:ft,this.magFilter=void 0!==r?r:At,this.minFilter=void 0!==o?o:bt,this.anisotropy=void 0!==c?c:1,this.format=void 0!==a?a:Rt,this.type=void 0!==s?s:Mt,this.offset=new Ce(0,0),this.repeat=new Ce(1,1),this.center=new Ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Le,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:ge,this.version=0,this.onUpdate=null}function Be(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function Fe(t,e,n){this.width=t,this.height=e,this.scissor=new Be(0,0,t,e),this.scissorTest=!1,this.viewport=new Be(0,0,t,e),void 0===(n=n||{}).minFilter&&(n.minFilter=At),this.texture=new ze(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Ue(t,e,n){Fe.call(this,t,e,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function He(t,e,n,i,r,o,a,s,c,l,u,h){ze.call(this,null,o,a,s,c,l,i,r,u,h),this.image={data:t,width:e,height:n},this.magFilter=void 0!==c?c:gt,this.minFilter=void 0!==l?l:gt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Ge(t,e){this.min=void 0!==t?t:new _e(1/0,1/0,1/0),this.max=void 0!==e?e:new _e(-1/0,-1/0,-1/0)}function Qe(t,e){this.center=void 0!==t?t:new _e,this.radius=void 0!==e?e:0}function Ve(t,e){this.normal=void 0!==t?t:new _e(1,0,0),this.constant=void 0!==e?e:0}function Ye(t,e,n,i,r,o){this.planes=[void 0!==t?t:new Ve,void 0!==e?e:new Ve,void 0!==n?n:new Ve,void 0!==i?i:new Ve,void 0!==r?r:new Ve,void 0!==o?o:new Ve]}ze.DEFAULT_IMAGE=void 0,ze.DEFAULT_MAPPING=300,ze.prototype=Object.assign(Object.create(e.prototype),{constructor:ze,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=Te.generateUUID()),e||void 0!==t.images[i.uuid]||(t.images[i.uuid]={uuid:i.uuid,url:function(t){var e;if(t instanceof HTMLCanvasElement)e=t;else{(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=t.width,e.height=t.height;var n=e.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height)}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}(i)}),n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300===this.mapping){if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case pt:t.x=t.x-Math.floor(t.x);break;case ft:t.x=t.x<0?0:1;break;case mt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case pt:t.y=t.y-Math.floor(t.y);break;case ft:t.y=t.y<0?0:1;break;case mt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}}),Object.defineProperty(ze.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Be.prototype,{isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,o=t.elements,a=o[0],s=o[4],c=o[8],l=o[1],u=o[5],h=o[9],d=o[2],p=o[6],f=o[10];if(Math.abs(s-l)<.01&&Math.abs(c-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(s+l)<.1&&Math.abs(c+d)<.1&&Math.abs(h+p)<.1&&Math.abs(a+u+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(a+1)/2,g=(u+1)/2,v=(f+1)/2,y=(s+l)/4,A=(c+d)/4,w=(h+p)/4;return m>g&&m>v?m<.01?(n=0,i=.707106781,r=.707106781):(i=y/(n=Math.sqrt(m)),r=A/n):g>v?g<.01?(n=.707106781,i=0,r=.707106781):(n=y/(i=Math.sqrt(g)),r=w/i):v<.01?(n=.707106781,i=.707106781,r=0):(n=A/(r=Math.sqrt(v)),i=w/r),this.set(n,i,r,e),this}var b=Math.sqrt((p-h)*(p-h)+(c-d)*(c-d)+(l-s)*(l-s));return Math.abs(b)<.001&&(b=1),this.x=(p-h)/b,this.y=(c-d)/b,this.z=(l-s)/b,this.w=Math.acos((a+u+f-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new Be,e=new Be),t.set(n,n,n,n),e.set(i,i,i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Fe.prototype=Object.assign(Object.create(e.prototype),{constructor:Fe,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ue.prototype=Object.create(Fe.prototype),Ue.prototype.constructor=Ue,Ue.prototype.isWebGLRenderTargetCube=!0,He.prototype=Object.create(ze.prototype),He.prototype.constructor=He,He.prototype.isDataTexture=!0,Object.assign(Ge.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,c=t.length;s<c;s+=3){var l=t[s],u=t[s+1],h=t[s+2];l<e&&(e=l),u<n&&(n=u),h<i&&(i=h),l>r&&(r=l),u>o&&(o=u),h>a&&(a=h)}return this.min.set(e,n,i),this.max.set(r,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,c=t.count;s<c;s++){var l=t.getX(s),u=t.getY(s),h=t.getZ(s);l<e&&(e=l),u<n&&(n=u),h<i&&(i=h),l>r&&(r=l),u>o&&(o=u),h>a&&(a=h)}return this.min.set(e,n,i),this.max.set(r,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new _e;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(t=new _e),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(t=new _e),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t,e,n,i=new _e;function r(r){var o=r.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(e=0,n=a.length;e<n;e++)i.copy(a[e]),i.applyMatrix4(r.matrixWorld),t.expandByPoint(i)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(e=0,n=s.count;e<n;e++)i.fromBufferAttribute(s,e).applyMatrix4(r.matrixWorld),t.expandByPoint(i)}}return function(e){return t=this,e.updateMatrixWorld(!0),e.traverse(r),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(e=new _e),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:(Ie=new _e,function(t){return this.clampPoint(t.center,Ie),Ie.distanceToSquared(t.center)<=t.radius*t.radius}),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},intersectsTriangle:function(){var t=new _e,e=new _e,n=new _e,i=new _e,r=new _e,o=new _e,a=new _e,s=new _e,c=new _e,l=new _e;function u(i){var r,o;for(r=0,o=i.length-3;r<=o;r+=3){a.fromArray(i,r);var s=c.x*Math.abs(a.x)+c.y*Math.abs(a.y)+c.z*Math.abs(a.z),l=t.dot(a),u=e.dot(a),h=n.dot(a);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),c.subVectors(this.max,s),t.subVectors(a.a,s),e.subVectors(a.b,s),n.subVectors(a.c,s),i.subVectors(e,t),r.subVectors(n,e),o.subVectors(t,n);var h=[0,-i.z,i.y,0,-r.z,r.y,0,-o.z,o.y,i.z,0,-i.x,r.z,0,-r.x,o.z,0,-o.x,-i.y,i.x,0,-r.y,r.x,0,-o.y,o.x,0];return!!u(h)&&!!u(h=[1,0,0,0,1,0,0,0,1])&&(l.crossVectors(i,r),u(h=[l.x,l.y,l.z]))}}(),clampPoint:function(t,e){return void 0===e&&(e=new _e),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new _e;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new _e;return function(e){return void 0===e&&(e=new Qe),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:(Ne=[new _e,new _e,new _e,new _e,new _e,new _e,new _e,new _e],function(t){return this.isEmpty()?this:(Ne[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ne[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ne[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ne[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ne[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ne[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ne[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ne[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ne),this)}),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(Qe.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:(Oe=new Ge,function(t,e){var n=this.center;void 0!==e?n.copy(e):Oe.setFromPoints(t).getCenter(n);for(var i=0,r=0,o=t.length;r<o;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(e=new _e),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(t=new Ge),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(Ve.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new _e,e=new _e;return function(n,i,r){var o=t.subVectors(r,i).cross(e.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(e=new _e),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new _e;return function(e,n){void 0===n&&(n=new _e);var i=e.delta(t),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?n.copy(e.start):void 0;var o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?void 0:n.copy(i).multiplyScalar(o).add(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(t=new _e),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new _e,e=new Le;return function(n,i){var r=i||e.getNormalMatrix(n),o=this.coplanarPoint(t).applyMatrix4(n),a=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(a),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(Ye.prototype,{set:function(t,e,n,i,r,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(a-i,u-s,f-h,y-m).normalize(),e[1].setComponents(a+i,u+s,f+h,y+m).normalize(),e[2].setComponents(a+r,u+c,f+d,y+g).normalize(),e[3].setComponents(a-r,u-c,f-d,y-g).normalize(),e[4].setComponents(a-o,u-l,f-p,y-v).normalize(),e[5].setComponents(a+o,u+l,f+p,y+v).normalize(),this},intersectsObject:(Re=new Qe,function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Re.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Re)}),intersectsSprite:function(){var t=new Qe;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++)if(e[r].distanceToPoint(n)<i)return!1;return!0},intersectsBox:(je=new _e,Pe=new _e,function(t){for(var e=this.planes,n=0;n<6;n++){var i=e[n];je.x=i.normal.x>0?t.min.x:t.max.x,Pe.x=i.normal.x>0?t.max.x:t.min.x,je.y=i.normal.y>0?t.min.y:t.max.y,Pe.y=i.normal.y>0?t.max.y:t.min.y,je.z=i.normal.z>0?t.min.z:t.max.z,Pe.z=i.normal.z>0?t.max.z:t.min.z;var r=i.distanceToPoint(je),o=i.distanceToPoint(Pe);if(r<0&&o<0)return!1}return!0}),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var We,qe={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},Xe={merge:function(t){for(var e={},n=0;n<t.length;n++){var i=this.clone(t[n]);for(var r in i)e[r]=i[r]}return e},clone:function(t){var e={};for(var n in t)for(var i in e[n]={},t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}return e}},Ze={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ke(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}Object.assign(Ke.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,i){if(e=Te.euclideanModulo(e,1),n=Te.clamp(n,0,1),i=Te.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,o=2*i-r;this.r=t(o,r,e+1/3),this.g=t(o,r,e),this.b=t(o,r,e-1/3)}return this}}(),setStyle:function(t){function e(t){void 0!==t&&parseFloat(t)}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,c=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(a,s,c)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l,u=(l=n[1]).length;if(3===u)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return t&&t.length>0&&void 0!==(l=Ze[t])&&this.setHex(l),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(t={h:0,s:0,l:0});var e,n,i=this.r,r=this.g,o=this.b,a=Math.max(i,r,o),s=Math.min(i,r,o),c=(s+a)/2;if(s===a)e=0,n=0;else{var l=a-s;switch(n=c<=.5?l/(a+s):l/(2-a-s),a){case i:e=(r-o)/l+(r<o?6:0);break;case r:e=(o-i)/l+2;break;case o:e=(i-r)/l+4}e/=6}return t.h=e,t.s=n,t.l=c,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(We={},function(t,e,n){return this.getHSL(We),We.h+=t,We.s+=e,We.l+=n,this.setHSL(We.h,We.s,We.l),this}),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var Je,$e={common:{diffuse:{value:new Ke(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Le},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ke(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Ke(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Le}}},tn={basic:{uniforms:Xe.merge([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.fog]),vertexShader:qe.meshbasic_vert,fragmentShader:qe.meshbasic_frag},lambert:{uniforms:Xe.merge([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.fog,$e.lights,{emissive:{value:new Ke(0)}}]),vertexShader:qe.meshlambert_vert,fragmentShader:qe.meshlambert_frag},phong:{uniforms:Xe.merge([$e.common,$e.specularmap,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.gradientmap,$e.fog,$e.lights,{emissive:{value:new Ke(0)},specular:{value:new Ke(1118481)},shininess:{value:30}}]),vertexShader:qe.meshphong_vert,fragmentShader:qe.meshphong_frag},standard:{uniforms:Xe.merge([$e.common,$e.envmap,$e.aomap,$e.lightmap,$e.emissivemap,$e.bumpmap,$e.normalmap,$e.displacementmap,$e.roughnessmap,$e.metalnessmap,$e.fog,$e.lights,{emissive:{value:new Ke(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:qe.meshphysical_vert,fragmentShader:qe.meshphysical_frag},points:{uniforms:Xe.merge([$e.points,$e.fog]),vertexShader:qe.points_vert,fragmentShader:qe.points_frag},dashed:{uniforms:Xe.merge([$e.common,$e.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:qe.linedashed_vert,fragmentShader:qe.linedashed_frag},depth:{uniforms:Xe.merge([$e.common,$e.displacementmap]),vertexShader:qe.depth_vert,fragmentShader:qe.depth_frag},normal:{uniforms:Xe.merge([$e.common,$e.bumpmap,$e.normalmap,$e.displacementmap,{opacity:{value:1}}]),vertexShader:qe.normal_vert,fragmentShader:qe.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:qe.cube_vert,fragmentShader:qe.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:qe.equirect_vert,fragmentShader:qe.equirect_frag},distanceRGBA:{uniforms:Xe.merge([$e.common,$e.displacementmap,{referencePosition:{value:new _e},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:qe.distanceRGBA_vert,fragmentShader:qe.distanceRGBA_frag},shadow:{uniforms:Xe.merge([$e.lights,$e.fog,{color:{value:new Ke(0)},opacity:{value:1}}]),vertexShader:qe.shadow_vert,fragmentShader:qe.shadow_frag}};function en(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||en.DefaultOrder}function nn(){this.mask=1}tn.physical={uniforms:Xe.merge([tn.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:qe.meshphysical_vert,fragmentShader:qe.meshphysical_frag},en.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],en.DefaultOrder="XYZ",Object.defineProperties(en.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(en.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=Te.clamp,r=t.elements,o=r[0],a=r[4],s=r[8],c=r[1],l=r[5],u=r[9],h=r[2],d=r[6],p=r[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(c,o))):"ZYX"===e?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===e?(this._z=Math.asin(i(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===e&&(this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,p),this._y=0)),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new Se;return function(e,n,i){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:(Je=new De,function(t){return Je.setFromEuler(this),this.setFromQuaternion(Je,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new _e(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(nn.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var rn,on,an,sn,cn=0;function ln(){Object.defineProperty(this,"id",{value:cn++}),this.uuid=Te.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ln.DefaultUp.clone();var t=new _e,e=new en,n=new De,i=new _e(1,1,1);e.onChange(function(){n.setFromEuler(e,!1)}),n.onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new Se},normalMatrix:{value:new Le}}),this.matrix=new Se,this.matrixWorld=new Se,this.matrixAutoUpdate=ln.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new nn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function un(){ln.call(this),this.type="Camera",this.matrixWorldInverse=new Se,this.projectionMatrix=new Se}function hn(t,e,n,i,r,o){un.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function dn(t,e,n,i,r,o){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new _e,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new Ke,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}ln.DefaultUp=new _e(0,1,0),ln.DefaultMatrixAutoUpdate=!0,ln.prototype=Object.assign(Object.create(e.prototype),{constructor:ln,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:(sn=new De,function(t,e){return sn.setFromAxisAngle(t,e),this.quaternion.multiply(sn),this}),rotateOnWorldAxis:function(){var t=new De;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new _e(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new _e(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new _e(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new _e;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new _e(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new _e(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new _e(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:(an=new Se,function(t){return t.applyMatrix4(an.getInverse(this.matrixWorld))}),lookAt:function(){var t=new Se,e=new _e;return function(n,i,r){n.isVector3?e.copy(n):e.set(n,i,r),this.isCamera?t.lookAt(this.position,e,this.up):t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?this:(t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(t=new _e),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(rn=new _e,on=new _e,function(t){return void 0===t&&(t=new De),this.updateMatrixWorld(!0),this.matrixWorld.decompose(rn,t,on),t}),getWorldScale:function(){var t=new _e,e=new De;return function(n){return void 0===n&&(n=new _e),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new De;return function(e){return void 0===e&&(e=new _e),this.getWorldQuaternion(t),e.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},toJSON:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.matrix=this.matrix.toArray(),void 0!==this.geometry){i.geometry=r(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,c=a.length;s<c;s++){var l=a[s];r(t.shapes,l)}else r(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var u=[];for(s=0,c=this.material.length;s<c;s++)u.push(r(t.materials,this.material[s]));i.material=u}else i.material=r(t.materials,this.material);if(this.children.length>0)for(i.children=[],s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(t).object);if(e){var h=m(t.geometries),d=m(t.materials),p=m(t.textures),f=m(t.images);a=m(t.shapes),h.length>0&&(n.geometries=h),d.length>0&&(n.materials=d),p.length>0&&(n.textures=p),f.length>0&&(n.images=f),a.length>0&&(n.shapes=a)}return n.object=i,n;function m(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}}),un.prototype=Object.assign(Object.create(ln.prototype),{constructor:un,isCamera:!0,copy:function(t,e){return ln.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},getWorldDirection:function(){var t=new De;return function(e){return void 0===e&&(e=new _e),this.getWorldQuaternion(t),e.set(0,0,-1).applyQuaternion(t)}}(),updateMatrixWorld:function(t){ln.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),hn.prototype=Object.assign(Object.create(un.prototype),{constructor:hn,isOrthographicCamera:!0,copy:function(t,e){return un.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,o=n+t,a=i+e,s=i-e;if(null!==this.view&&this.view.enabled){var c=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(r+=u*(this.view.offsetX/c))+u*(this.view.width/c),s=(a-=h*(this.view.offsetY/l))-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far)},toJSON:function(t){var e=ln.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Object.assign(dn.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var pn,fn,mn=0;function gn(){Object.defineProperty(this,"id",{value:mn+=2}),this.uuid=Te.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function vn(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function yn(t,e,n){vn.call(this,new Int8Array(t),e,n)}function An(t,e,n){vn.call(this,new Uint8Array(t),e,n)}function wn(t,e,n){vn.call(this,new Uint8ClampedArray(t),e,n)}function bn(t,e,n){vn.call(this,new Int16Array(t),e,n)}function Mn(t,e,n){vn.call(this,new Uint16Array(t),e,n)}function En(t,e,n){vn.call(this,new Int32Array(t),e,n)}function xn(t,e,n){vn.call(this,new Uint32Array(t),e,n)}function Tn(t,e,n){vn.call(this,new Float32Array(t),e,n)}function Cn(t,e,n){vn.call(this,new Float64Array(t),e,n)}function Sn(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Dn(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}gn.prototype=Object.assign(Object.create(e.prototype),{constructor:gn,isGeometry:!0,applyMatrix:function(t){for(var e=(new Le).getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(t);for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(e).normalize();for(var o=0,a=r.vertexNormals.length;o<a;o++)r.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new Se;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Se;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Se;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new Se;return function(e,n,i){return t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t=new Se;return function(e,n,i){return t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:(fn=new ln,function(t){fn.lookAt(t),fn.updateMatrix(),this.applyMatrix(fn.matrix)}),fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,i=t.attributes,r=i.position.array,o=void 0!==i.normal?i.normal.array:void 0,a=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,c=void 0!==i.uv2?i.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var l=[],u=[],h=[],d=0,p=0;d<r.length;d+=3,p+=2)e.vertices.push(new _e(r[d],r[d+1],r[d+2])),void 0!==o&&l.push(new _e(o[d],o[d+1],o[d+2])),void 0!==a&&e.colors.push(new Ke(a[d],a[d+1],a[d+2])),void 0!==s&&u.push(new Ce(s[p],s[p+1])),void 0!==c&&h.push(new Ce(c[p],c[p+1]));function f(t,n,i,r){var d=new dn(t,n,i,void 0!==o?[l[t].clone(),l[n].clone(),l[i].clone()]:[],void 0!==a?[e.colors[t].clone(),e.colors[n].clone(),e.colors[i].clone()]:[],r);e.faces.push(d),void 0!==s&&e.faceVertexUvs[0].push([u[t].clone(),u[n].clone(),u[i].clone()]),void 0!==c&&e.faceVertexUvs[1].push([h[t].clone(),h[n].clone(),h[i].clone()])}var m=t.groups;if(m.length>0)for(d=0;d<m.length;d++)for(var g=m[d],v=g.start,y=(p=v,v+g.count);p<y;p+=3)void 0!==n?f(n[p],n[p+1],n[p+2],g.materialIndex):f(p,p+1,p+2,g.materialIndex);else if(void 0!==n)for(d=0;d<n.length;d+=3)f(n[d],n[d+1],n[d+2]);else for(d=0;d<r.length/3;d+=3)f(d,d+1,d+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:(pn=new _e,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(pn).negate(),this.translate(pn.x,pn.y,pn.z),this}),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new Se;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new _e,e=new _e,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],o=this.vertices[r.a],a=this.vertices[r.b],s=this.vertices[r.c];t.subVectors(s,a),e.subVectors(o,a),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,n,i,r,o,a;for(void 0===t&&(t=!0),a=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)a[e]=new _e;if(t){var s,c,l,u=new _e,h=new _e;for(i=0,r=this.faces.length;i<r;i++)o=this.faces[i],s=this.vertices[o.a],c=this.vertices[o.b],l=this.vertices[o.c],u.subVectors(l,c),h.subVectors(s,c),u.cross(h),a[o.a].add(u),a[o.b].add(u),a[o.c].add(u)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)a[(o=this.faces[i]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)a[e].normalize();for(i=0,r=this.faces.length;i<r;i++){var d=(o=this.faces[i]).vertexNormals;3===d.length?(d[0].copy(a[o.a]),d[1].copy(a[o.b]),d[2].copy(a[o.c])):(d[0]=a[o.a].clone(),d[1]=a[o.b].clone(),d[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var i=(n=this.faces[t]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var o=new gn;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)c=new _e,l={a:new _e,b:new _e,c:new _e},a.push(c),s.push(l)}var c,l,u=this.morphNormals[t];for(o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],c=u.faceNormals[n],l=u.vertexNormals[n],c.copy(r.normal),l.a.copy(r.vertexNormals[0]),l.b.copy(r.vertexNormals[1]),l.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ge),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Qe),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var i,r=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,c=t.faces,l=this.faceVertexUvs[0],u=t.faceVertexUvs[0],h=this.colors,d=t.colors;void 0===n&&(n=0),void 0!==e&&(i=(new Le).getNormalMatrix(e));for(var p=0,f=a.length;p<f;p++){var m=a[p].clone();void 0!==e&&m.applyMatrix4(e),o.push(m)}for(p=0,f=d.length;p<f;p++)h.push(d[p].clone());for(p=0,f=c.length;p<f;p++){var g,v,y,A=c[p],w=A.vertexNormals,b=A.vertexColors;(g=new dn(A.a+r,A.b+r,A.c+r)).normal.copy(A.normal),void 0!==i&&g.normal.applyMatrix3(i).normalize();for(var M=0,E=w.length;M<E;M++)v=w[M].clone(),void 0!==i&&v.applyMatrix3(i).normalize(),g.vertexNormals.push(v);for(g.color.copy(A.color),M=0,E=b.length;M<E;M++)y=b[M],g.vertexColors.push(y.clone());g.materialIndex=A.materialIndex+n,s.push(g)}for(p=0,f=u.length;p<f;p++){var x=u[p],T=[];if(void 0!==x){for(M=0,E=x.length;M<E;M++)T.push(x[M].clone());l.push(T)}}}},mergeMesh:function(t){t&&t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,n,i,r,o,a,s,c={},l=[],u=[],h=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)t=this.vertices[n],void 0===c[e=Math.round(t.x*h)+"_"+Math.round(t.y*h)+"_"+Math.round(t.z*h)]?(c[e]=n,l.push(this.vertices[n]),u[n]=l.length-1):u[n]=u[c[e]];var d=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=u[r.a],r.b=u[r.b],r.c=u[r.c],o=[r.a,r.b,r.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var f=d[n];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new _e(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var i,r,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===e&&(i=[]),a&&a.length===e&&(r=[]),n=0;n<e;n++){var s=t[n]._id;i&&i.push(o[s]),r&&r.push(a[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var i=[],r=0;r<this.vertices.length;r++){var o=this.vertices[r];i.push(o.x,o.y,o.z)}var a=[],s=[],c={},l=[],u={},h=[],d={};for(r=0;r<this.faces.length;r++){var p=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=p.normal.length()>0,g=p.vertexNormals.length>0,v=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,A=0;if(A=E(A=E(A=E(A=E(A=E(A=E(A=E(A=E(A,0,0),1,!0),2,!1),3,f),4,m),5,g),6,v),7,y),a.push(A),a.push(p.a,p.b,p.c),a.push(p.materialIndex),f){var w=this.faceVertexUvs[0][r];a.push(C(w[0]),C(w[1]),C(w[2]))}if(m&&a.push(x(p.normal)),g){var b=p.vertexNormals;a.push(x(b[0]),x(b[1]),x(b[2]))}if(v&&a.push(T(p.color)),y){var M=p.vertexColors;a.push(T(M[0]),T(M[1]),T(M[2]))}}function E(t,e,n){return n?t|1<<e:t&~(1<<e)}function x(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==c[e]?c[e]:(c[e]=s.length/3,s.push(t.x,t.y,t.z),c[e])}function T(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==u[e]?u[e]:(u[e]=l.length,l.push(t.getHex()),u[e])}function C(t){var e=t.x.toString()+t.y.toString();return void 0!==d[e]?d[e]:(d[e]=h.length/2,h.push(t.x,t.y),d[e])}return t.data={},t.data.vertices=i,t.data.normals=s,l.length>0&&(t.data.colors=l),h.length>0&&(t.data.uvs=[h]),t.data.faces=a,t},clone:function(){return(new gn).copy(this)},copy:function(t){var e,n,i,r,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var c=t.colors;for(e=0,n=c.length;e<n;e++)this.colors.push(c[e].clone());var l=t.faces;for(e=0,n=l.length;e<n;e++)this.faces.push(l[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var u=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),i=0,r=u.length;i<r;i++){var h=u[i],d=[];for(o=0,a=h.length;o<a;o++){var p=h[o];d.push(p.clone())}this.faceVertexUvs[e].push(d)}}var f=t.morphTargets;for(e=0,n=f.length;e<n;e++){var m={};if(m.name=f[e].name,void 0!==f[e].vertices)for(m.vertices=[],i=0,r=f[e].vertices.length;i<r;i++)m.vertices.push(f[e].vertices[i].clone());if(void 0!==f[e].normals)for(m.normals=[],i=0,r=f[e].normals.length;i<r;i++)m.normals.push(f[e].normals[i].clone());this.morphTargets.push(m)}var g=t.morphNormals;for(e=0,n=g.length;e<n;e++){var v={};if(void 0!==g[e].vertexNormals)for(v.vertexNormals=[],i=0,r=g[e].vertexNormals.length;i<r;i++){var y=g[e].vertexNormals[i],A={};A.a=y.a.clone(),A.b=y.b.clone(),A.c=y.c.clone(),v.vertexNormals.push(A)}if(void 0!==g[e].faceNormals)for(v.faceNormals=[],i=0,r=g[e].faceNormals.length;i<r;i++)v.faceNormals.push(g[e].faceNormals[i].clone());this.morphNormals.push(v)}var w=t.skinWeights;for(e=0,n=w.length;e<n;e++)this.skinWeights.push(w[e].clone());var b=t.skinIndices;for(e=0,n=b.length;e<n;e++)this.skinIndices.push(b[e].clone());var M=t.lineDistances;for(e=0,n=M.length;e<n;e++)this.lineDistances.push(M[e]);var E=t.boundingBox;null!==E&&(this.boundingBox=E.clone());var x=t.boundingSphere;return null!==x&&(this.boundingSphere=x.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(vn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(vn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(o=new Ke),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(o=new Ce),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(o=new _e),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(o=new Be),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),yn.prototype=Object.create(vn.prototype),yn.prototype.constructor=yn,An.prototype=Object.create(vn.prototype),An.prototype.constructor=An,wn.prototype=Object.create(vn.prototype),wn.prototype.constructor=wn,bn.prototype=Object.create(vn.prototype),bn.prototype.constructor=bn,Mn.prototype=Object.create(vn.prototype),Mn.prototype.constructor=Mn,En.prototype=Object.create(vn.prototype),En.prototype.constructor=En,xn.prototype=Object.create(vn.prototype),xn.prototype.constructor=xn,Tn.prototype=Object.create(vn.prototype),Tn.prototype.constructor=Tn,Cn.prototype=Object.create(vn.prototype),Cn.prototype.constructor=Cn,Object.assign(Sn.prototype,{computeGroups:function(t){for(var e,n=[],i=void 0,r=t.faces,o=0;o<r.length;o++){var a=r[o];a.materialIndex!==i&&(i=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:i})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,i=t.vertices,r=t.faceVertexUvs,o=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,s=t.morphTargets,c=s.length;if(c>0){e=[];for(var l=0;l<c;l++)e[l]=[];this.morphTargets.position=e}var u,h=t.morphNormals,d=h.length;if(d>0){for(u=[],l=0;l<d;l++)u[l]=[];this.morphTargets.normal=u}var p=t.skinIndices,f=t.skinWeights,m=p.length===i.length,g=f.length===i.length;for(l=0;l<n.length;l++){var v=n[l];this.vertices.push(i[v.a],i[v.b],i[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var A=v.normal;this.normals.push(A,A,A)}var w,b=v.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var M=v.color;this.colors.push(M,M,M)}!0===o&&(void 0!==(w=r[0][l])?this.uvs.push(w[0],w[1],w[2]):this.uvs.push(new Ce,new Ce,new Ce)),!0===a&&(void 0!==(w=r[1][l])?this.uvs2.push(w[0],w[1],w[2]):this.uvs2.push(new Ce,new Ce,new Ce));for(var E=0;E<c;E++){var x=s[E].vertices;e[E].push(x[v.a],x[v.b],x[v.c])}for(E=0;E<d;E++){var T=h[E].vertexNormals[l];u[E].push(T.a,T.b,T.c)}m&&this.skinIndices.push(p[v.a],p[v.b],p[v.c]),g&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var _n=1;function Ln(){Object.defineProperty(this,"id",{value:_n+=2}),this.uuid=Te.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Nn(t,e,n,i,r,o){gn.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new In(t,e,n,i,r,o)),this.mergeVertices()}function In(t,e,n,i,r,o){Ln.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};var a=this;t=t||1,e=e||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1;var s=[],c=[],l=[],u=[],h=0,d=0;function p(t,e,n,i,r,o,p,f,m,g,v){var y,A,w=o/m,b=p/g,M=o/2,E=p/2,x=f/2,T=m+1,C=g+1,S=0,D=0,_=new _e;for(A=0;A<C;A++){var L=A*b-E;for(y=0;y<T;y++){var N=y*w-M;_[t]=N*i,_[e]=L*r,_[n]=x,c.push(_.x,_.y,_.z),_[t]=0,_[e]=0,_[n]=f>0?1:-1,l.push(_.x,_.y,_.z),u.push(y/m),u.push(1-A/g),S+=1}}for(A=0;A<g;A++)for(y=0;y<m;y++){var I=h+y+T*A,O=h+y+T*(A+1),j=h+(y+1)+T*(A+1),P=h+(y+1)+T*A;s.push(I,O,P),s.push(O,j,P),D+=6}a.addGroup(d,D,v),d+=D,h+=S}p("z","y","x",-1,-1,n,e,t,o=Math.floor(o)||1,r,0),p("z","y","x",1,-1,n,e,-t,o,r,1),p("x","z","y",1,1,t,n,e,i,o,2),p("x","z","y",1,-1,t,n,-e,i,o,3),p("x","y","z",1,-1,t,e,n,i,r,4),p("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(s),this.addAttribute("position",new Tn(c,3)),this.addAttribute("normal",new Tn(l,3)),this.addAttribute("uv",new Tn(u,2))}function On(t,e,n,i){gn.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new jn(t,e,n,i)),this.mergeVertices()}function jn(t,e,n,i){Ln.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};var r,o,a=(t=t||1)/2,s=(e=e||1)/2,c=Math.floor(n)||1,l=Math.floor(i)||1,u=c+1,h=l+1,d=t/c,p=e/l,f=[],m=[],g=[],v=[];for(o=0;o<h;o++){var y=o*p-s;for(r=0;r<u;r++){var A=r*d-a;m.push(A,-y,0),g.push(0,0,1),v.push(r/c),v.push(1-o/l)}}for(o=0;o<l;o++)for(r=0;r<c;r++){var w=r+u*o,b=r+u*(o+1),M=r+1+u*(o+1),E=r+1+u*o;f.push(w,b,E),f.push(b,M,E)}this.setIndex(f),this.addAttribute("position",new Tn(m,3)),this.addAttribute("normal",new Tn(g,3)),this.addAttribute("uv",new Tn(v,2))}Ln.prototype=Object.assign(Object.create(e.prototype),{constructor:Ln,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(Dn(t)>65535?xn:Mn)(t,1):this.index=t},addAttribute:function(t,e){if(e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute){if("index"!==t)return this.attributes[t]=e,this;this.setIndex(e)}else this.addAttribute(t,new vn(arguments[1],arguments[2]))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;return void 0!==n&&((new Le).getNormalMatrix(t).applyToBufferAttribute(n),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new Se;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Se;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Se;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new Se;return function(e,n,i){return t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t=new Se;return function(e,n,i){return t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t=new ln;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new _e;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new Tn(3*e.vertices.length,3),i=new Tn(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new Tn(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new Tn(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Sn).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new vn(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new vn(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.addAttribute("color",new vn(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new vn(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new vn(o,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,t.morphTargets){for(var s=[],c=t.morphTargets[a],l=0,u=c.length;l<u;l++){var h=c[l],d=new Tn(3*h.length,3);s.push(d.copyVector3sArray(h))}this.morphAttributes[a]=s}if(t.skinIndices.length>0){var p=new Tn(4*t.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var f=new Tn(4*t.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ge);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)},computeBoundingSphere:function(){var t=new Ge,e=new _e;return function(){null===this.boundingSphere&&(this.boundingSphere=new Qe);var n=this.attributes.position;if(n){var i=this.boundingSphere.center;t.setFromBufferAttribute(n),t.getCenter(i);for(var r=0,o=0,a=n.count;o<a;o++)e.x=n.getX(o),e.y=n.getY(o),e.z=n.getZ(o),r=Math.max(r,i.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var i=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new vn(new Float32Array(i.length),3));else for(var r=e.normal.array,o=0,a=r.length;o<a;o++)r[o]=0;var s,c,l,u=e.normal.array,h=new _e,d=new _e,p=new _e,f=new _e,m=new _e;if(t){var g=t.array;0===n.length&&this.addGroup(0,g.length);for(var v=0,y=n.length;v<y;++v){var A=n[v],w=A.start;for(o=w,a=w+A.count;o<a;o+=3)s=3*g[o+0],c=3*g[o+1],l=3*g[o+2],h.fromArray(i,s),d.fromArray(i,c),p.fromArray(i,l),f.subVectors(p,d),m.subVectors(h,d),f.cross(m),u[s]+=f.x,u[s+1]+=f.y,u[s+2]+=f.z,u[c]+=f.x,u[c+1]+=f.y,u[c+2]+=f.z,u[l]+=f.x,u[l+1]+=f.y,u[l+2]+=f.z}}else for(o=0,a=i.length;o<a;o+=9)h.fromArray(i,o),d.fromArray(i,o+3),p.fromArray(i,o+6),f.subVectors(p,d),m.subVectors(h,d),f.cross(m),u[o]=f.x,u[o+1]=f.y,u[o+2]=f.z,u[o+3]=f.x,u[o+4]=f.y,u[o+5]=f.z,u[o+6]=f.x,u[o+7]=f.y,u[o+8]=f.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0);var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i].array,o=t.attributes[i],a=o.array,s=0,c=o.itemSize*e;s<a.length;s++,c++)r[c]=a[s];return this}},normalizeNormals:function(){var t=new _e;return function(){for(var e=this.attributes.normal,n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.normalize(),e.setXYZ(n,t.x,t.y,t.z)}}(),toNonIndexed:function(){if(null===this.index)return this;var t=new Ln,e=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],o=r.array,a=r.itemSize,s=new o.constructor(e.length*a),c=0,l=0,u=0,h=e.length;u<h;u++){c=e[u]*a;for(var d=0;d<a;d++)s[l++]=o[c++]}t.addAttribute(i,new vn(s,a))}var p=this.groups;for(u=0,h=p.length;u<h;u++){var f=p[u];t.addGroup(f.start,f.count,f.materialIndex)}return t},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);t.data.index={type:i.array.constructor.name,array:r}}var o=this.attributes;for(var n in o){var a=o[n];r=Array.prototype.slice.call(a.array),t.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:r,normalized:a.normalized}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t},clone:function(){return(new Ln).copy(this)},copy:function(t){var e,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var o=t.attributes;for(e in o){var a=o[e];this.addAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var c=[],l=s[e];for(n=0,i=l.length;n<i;n++)c.push(l[n].clone());this.morphAttributes[e]=c}var u=t.groups;for(n=0,i=u.length;n<i;n++){var h=u[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=t.boundingBox;null!==d&&(this.boundingBox=d.clone());var p=t.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Nn.prototype=Object.create(gn.prototype),Nn.prototype.constructor=Nn,In.prototype=Object.create(Ln.prototype),In.prototype.constructor=In,On.prototype=Object.create(gn.prototype),On.prototype.constructor=On,jn.prototype=Object.create(Ln.prototype),jn.prototype.constructor=jn;var Pn,Rn,kn,zn,Bn,Fn,Un,Hn=0;function Gn(){Object.defineProperty(this,"id",{value:Hn++}),this.uuid=Te.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=E,this.side=g,this.flatShading=!1,this.vertexColors=A,this.opacity=1,this.transparent=!1,this.blendSrc=k,this.blendDst=z,this.blendEquation=D,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=W,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function Qn(t){Gn.call(this),this.type="MeshBasicMaterial",this.color=new Ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function Vn(t){Gn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(t.attributes,this.setValues(t))}function Yn(t,e){this.origin=void 0!==t?t:new _e,this.direction=void 0!==e?e:new _e}function Wn(t,e){this.start=void 0!==t?t:new _e,this.end=void 0!==e?e:new _e}function qn(t,e,n){this.a=void 0!==t?t:new _e,this.b=void 0!==e?e:new _e,this.c=void 0!==n?n:new _e}function Xn(t,e){ln.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Ln,this.material=void 0!==e?e:new Qn({color:16777215*Math.random()}),this.drawMode=pe,this.updateMorphTargets()}function Zn(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Kn(t,e,n,i,r,o,a,s,c,l){t=void 0!==t?t:[],e=void 0!==e?e:at,ze.call(this,t,e,n,i,r,o,a,s,c,l),this.flipY=!1}Gn.prototype=Object.assign(Object.create(e.prototype),{constructor:Gn,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var i=this[e];void 0!==i&&(i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]="overdraw"===e?Number(n):n)}else this.flatShading=1===n}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==E&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==g&&(n.side=this.side),this.vertexColors!==A&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var r=i(t.textures),o=i(t.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Qn.prototype=Object.create(Gn.prototype),Qn.prototype.constructor=Qn,Qn.prototype.isMeshBasicMaterial=!0,Qn.prototype.copy=function(t){return Gn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Vn.prototype=Object.create(Gn.prototype),Vn.prototype.constructor=Vn,Vn.prototype.isShaderMaterial=!0,Vn.prototype.copy=function(t){return Gn.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Xe.clone(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Vn.prototype.toJSON=function(t){var e=Gn.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},Object.assign(Yn.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(e=new _e),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new _e;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){void 0===e&&(e=new _e),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new _e;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:(Rn=new _e,kn=new _e,zn=new _e,function(t,e,n,i){Rn.copy(t).add(e).multiplyScalar(.5),kn.copy(e).sub(t).normalize(),zn.copy(this.origin).sub(Rn);var r,o,a,s,c=.5*t.distanceTo(e),l=-this.direction.dot(kn),u=zn.dot(this.direction),h=-zn.dot(kn),d=zn.lengthSq(),p=Math.abs(1-l*l);if(p>0)if(o=l*u-h,s=c*p,(r=l*h-u)>=0)if(o>=-s)if(o<=s){var f=1/p;a=(r*=f)*(r+l*(o*=f)+2*u)+o*(l*r+o+2*h)+d}else o=c,a=-(r=Math.max(0,-(l*o+u)))*r+o*(o+2*h)+d;else o=-c,a=-(r=Math.max(0,-(l*o+u)))*r+o*(o+2*h)+d;else o<=-s?a=-(r=Math.max(0,-(-l*c+u)))*r+(o=r>0?-c:Math.min(Math.max(-c,-h),c))*(o+2*h)+d:o<=s?(r=0,a=(o=Math.min(Math.max(-c,-h),c))*(o+2*h)+d):a=-(r=Math.max(0,-(l*c+u)))*r+(o=r>0?c:Math.min(Math.max(-c,-h),c))*(o+2*h)+d;else o=l>0?-c:c,a=-(r=Math.max(0,-(l*o+u)))*r+o*(o+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(kn).multiplyScalar(o).add(Rn),a}),intersectSphere:function(){var t=new _e;return function(e,n){t.subVectors(e.center,this.origin);var i=t.dot(this.direction),r=t.dot(t)-i*i,o=e.radius*e.radius;if(r>o)return null;var a=Math.sqrt(o-r),s=i-a,c=i+a;return s<0&&c<0?null:s<0?this.at(c,n):this.at(s,n)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,i,r,o,a,s,c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(t.min.x-h.x)*c,i=(t.max.x-h.x)*c):(n=(t.max.x-h.x)*c,i=(t.min.x-h.x)*c),l>=0?(r=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(r=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||r>i?null:((r>n||n!=n)&&(n=r),(o<i||i!=i)&&(i=o),u>=0?(a=(t.min.z-h.z)*u,s=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,s=(t.min.z-h.z)*u),n>s||a>i?null:((a>n||n!=n)&&(n=a),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))},intersectsBox:(Pn=new _e,function(t){return null!==this.intersectBox(t,Pn)}),intersectTriangle:function(){var t=new _e,e=new _e,n=new _e,i=new _e;return function(r,o,a,s,c){e.subVectors(o,r),n.subVectors(a,r),i.crossVectors(e,n);var l,u=this.direction.dot(i);if(u>0){if(s)return null;l=1}else{if(!(u<0))return null;l=-1,u=-u}t.subVectors(this.origin,r);var h=l*this.direction.dot(n.crossVectors(t,n));if(h<0)return null;var d=l*this.direction.dot(e.cross(t));if(d<0)return null;if(h+d>u)return null;var p=-l*t.dot(i);return p<0?null:this.at(p/u,c)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(Wn.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(t=new _e),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(t=new _e),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(e=new _e),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:(Bn=new _e,Fn=new _e,function(t,e){Bn.subVectors(t,this.start),Fn.subVectors(this.end,this.start);var n=Fn.dot(Fn),i=Fn.dot(Bn)/n;return e&&(i=Te.clamp(i,0,1)),i}),closestPointToPoint:function(t,e,n){var i=this.closestPointToPointParameter(t,e);return void 0===n&&(n=new _e),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Object.assign(qn,{getNormal:(Un=new _e,function(t,e,n,i){void 0===i&&(i=new _e),i.subVectors(n,e),Un.subVectors(t,e),i.cross(Un);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}),getBarycoord:function(){var t=new _e,e=new _e,n=new _e;return function(i,r,o,a,s){t.subVectors(a,r),e.subVectors(o,r),n.subVectors(i,r);var c=t.dot(t),l=t.dot(e),u=t.dot(n),h=e.dot(e),d=e.dot(n),p=c*h-l*l;if(void 0===s&&(s=new _e),0===p)return s.set(-2,-1,-1);var f=1/p,m=(h*u-l*d)*f,g=(c*d-l*u)*f;return s.set(1-m-g,g,m)}}(),containsPoint:function(){var t=new _e;return function(e,n,i,r){return qn.getBarycoord(e,n,i,r,t),t.x>=0&&t.y>=0&&t.x+t.y<=1}}()}),Object.assign(qn.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new _e,e=new _e;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(t=new _e),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return qn.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(t=new _e),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return qn.getBarycoord(t,this.a,this.b,this.c,e)},containsPoint:function(t){return qn.containsPoint(t,this.a,this.b,this.c)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(){var t=new Ve,e=[new Wn,new Wn,new Wn],n=new _e,i=new _e;return function(r,o){void 0===o&&(o=new _e);var a=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(r,n),!0===this.containsPoint(n))o.copy(n);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var s=0;s<e.length;s++){e[s].closestPointToPoint(n,!0,i);var c=n.distanceToSquared(i);c<a&&(a=c,o.copy(i))}}return o}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),Xn.prototype=Object.assign(Object.create(ln.prototype),{constructor:Xn,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return ln.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,o=Object.keys(r);if(o.length>0){var a=r[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=i.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=s.length;t<e;t++)n=s[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}},raycast:function(){var t=new Se,e=new Yn,n=new Qe,i=new _e,r=new _e,o=new _e,a=new _e,s=new _e,c=new _e,l=new Ce,u=new Ce,h=new Ce,d=new _e,p=new _e,f=new _e;function m(t,e,n,i,r,o,a){return qn.getBarycoord(t,e,n,i,d),r.multiplyScalar(d.x),o.multiplyScalar(d.y),a.multiplyScalar(d.z),r.add(o).add(a),r.clone()}function g(t,e,n,i,r,o,a,s){if(null===(e.side===v?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,e.side!==y,s)))return null;f.copy(s),f.applyMatrix4(t.matrixWorld);var c=n.ray.origin.distanceTo(f);return c<n.near||c>n.far?null:{distance:c,point:f.clone(),object:t}}function A(t,e,n,a,s,c,d,f){i.fromBufferAttribute(a,c),r.fromBufferAttribute(a,d),o.fromBufferAttribute(a,f);var v=g(t,t.material,e,n,i,r,o,p);if(v){s&&(l.fromBufferAttribute(s,c),u.fromBufferAttribute(s,d),h.fromBufferAttribute(s,f),v.uv=m(p,i,r,o,l,u,h));var y=new dn(c,d,f);qn.getNormal(i,r,o,y.normal),v.face=y,v.faceIndex=c}return v}return function(d,f){var v,y=this.geometry,w=this.material,b=this.matrixWorld;if(void 0!==w&&(null===y.boundingSphere&&y.computeBoundingSphere(),n.copy(y.boundingSphere),n.applyMatrix4(b),!1!==d.ray.intersectsSphere(n)&&(t.getInverse(b),e.copy(d.ray).applyMatrix4(t),null===y.boundingBox||!1!==e.intersectsBox(y.boundingBox))))if(y.isBufferGeometry){var M,E,x,T,C,S=y.index,D=y.attributes.position,_=y.attributes.uv;if(null!==S)for(T=0,C=S.count;T<C;T+=3)M=S.getX(T),E=S.getX(T+1),x=S.getX(T+2),(v=A(this,d,e,D,_,M,E,x))&&(v.faceIndex=Math.floor(T/3),f.push(v));else if(void 0!==D)for(T=0,C=D.count;T<C;T+=3)(v=A(this,d,e,D,_,M=T,E=T+1,x=T+2))&&f.push(v)}else if(y.isGeometry){var L,N,I,O,j=Array.isArray(w),P=y.vertices,R=y.faces,k=y.faceVertexUvs[0];k.length>0&&(O=k);for(var z=0,B=R.length;z<B;z++){var F=R[z],U=j?w[F.materialIndex]:w;if(void 0!==U){if(L=P[F.a],N=P[F.b],I=P[F.c],!0===U.morphTargets){var H=y.morphTargets,G=this.morphTargetInfluences;i.set(0,0,0),r.set(0,0,0),o.set(0,0,0);for(var Q=0,V=H.length;Q<V;Q++){var Y=G[Q];if(0!==Y){var W=H[Q].vertices;i.addScaledVector(a.subVectors(W[F.a],L),Y),r.addScaledVector(s.subVectors(W[F.b],N),Y),o.addScaledVector(c.subVectors(W[F.c],I),Y)}}i.add(L),r.add(N),o.add(I),L=i,N=r,I=o}if(v=g(this,U,d,e,L,N,I,p)){if(O&&O[z]){var q=O[z];l.copy(q[0]),u.copy(q[1]),h.copy(q[2]),v.uv=m(p,L,N,I,l,u,h)}v.face=F,v.faceIndex=z,f.push(v)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Kn.prototype=Object.create(ze.prototype),Kn.prototype.constructor=Kn,Kn.prototype.isCubeTexture=!0,Object.defineProperty(Kn.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var Jn=new ze,$n=new Kn;function ti(){this.seq=[],this.map={}}var ei=[],ni=[],ii=new Float32Array(16),ri=new Float32Array(9);function oi(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,o=ei[r];if(void 0===o&&(o=new Float32Array(r),ei[r]=o),0!==e){i.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function ai(t,e){var n=ni[e];void 0===n&&(n=new Int32Array(e),ni[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocTextureUnit();return n}function si(t,e){t.uniform1f(this.addr,e)}function ci(t,e){t.uniform1i(this.addr,e)}function li(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function ui(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function hi(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function di(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function pi(t,e){void 0===e.elements?t.uniformMatrix3fv(this.addr,!1,e):(ri.set(e.elements),t.uniformMatrix3fv(this.addr,!1,ri))}function fi(t,e){void 0===e.elements?t.uniformMatrix4fv(this.addr,!1,e):(ii.set(e.elements),t.uniformMatrix4fv(this.addr,!1,ii))}function mi(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTexture2D(e||Jn,i)}function gi(t,e,n){var i=n.allocTextureUnit();t.uniform1i(this.addr,i),n.setTextureCube(e||$n,i)}function vi(t,e){t.uniform2iv(this.addr,e)}function yi(t,e){t.uniform3iv(this.addr,e)}function Ai(t,e){t.uniform4iv(this.addr,e)}function wi(t,e){t.uniform1fv(this.addr,e)}function bi(t,e){t.uniform1iv(this.addr,e)}function Mi(t,e){t.uniform2fv(this.addr,oi(e,this.size,2))}function Ei(t,e){t.uniform3fv(this.addr,oi(e,this.size,3))}function xi(t,e){t.uniform4fv(this.addr,oi(e,this.size,4))}function Ti(t,e){t.uniformMatrix2fv(this.addr,!1,oi(e,this.size,4))}function Ci(t,e){t.uniformMatrix3fv(this.addr,!1,oi(e,this.size,9))}function Si(t,e){t.uniformMatrix4fv(this.addr,!1,oi(e,this.size,16))}function Di(t,e,n){var i=e.length,r=ai(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.setTexture2D(e[o]||Jn,r[o])}function _i(t,e,n){var i=e.length,r=ai(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.setTextureCube(e[o]||$n,r[o])}function Li(t,e,n){this.id=t,this.addr=n,this.setValue=function(t){switch(e.type){case 5126:return si;case 35664:return li;case 35665:return ui;case 35666:return hi;case 35674:return di;case 35675:return pi;case 35676:return fi;case 35678:case 36198:return mi;case 35680:return gi;case 5124:case 35670:return ci;case 35667:case 35671:return vi;case 35668:case 35672:return yi;case 35669:case 35673:return Ai}}()}function Ni(t,e,n){this.id=t,this.addr=n,this.size=e.size,this.setValue=function(t){switch(e.type){case 5126:return wi;case 35664:return Mi;case 35665:return Ei;case 35666:return xi;case 35674:return Ti;case 35675:return Ci;case 35676:return Si;case 35678:return Di;case 35680:return _i;case 5124:case 35670:return bi;case 35667:case 35671:return vi;case 35668:case 35672:return yi;case 35669:case 35673:return Ai}}()}function Ii(t){this.id=t,ti.call(this)}Ii.prototype.setValue=function(t,e){for(var n=this.seq,i=0,r=n.length;i!==r;++i){var o=n[i];o.setValue(t,e[o.id])}};var Oi=/([\w\d_]+)(\])?(\[|\.)?/g;function ji(t,e){t.seq.push(e),t.map[e.id]=e}function Pi(t,e,n){var i=t.name,r=i.length;for(Oi.lastIndex=0;;){var o=Oi.exec(i),a=Oi.lastIndex,s=o[1],c="]"===o[2],l=o[3];if(c&&(s|=0),void 0===l||"["===l&&a+2===r){ji(n,void 0===l?new Li(s,t,e):new Ni(s,t,e));break}var u=n.map[s];void 0===u&&ji(n,u=new Ii(s)),n=u}}function Ri(t,e,n){ti.call(this),this.renderer=n;for(var i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0;r<i;++r){var o=t.getActiveUniform(e,r);Pi(o,t.getUniformLocation(e,o.name),this)}}function ki(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS),t.getShaderInfoLog(i),i}Ri.prototype.setValue=function(t,e,n){var i=this.map[e];void 0!==i&&i.setValue(t,n,this.renderer)},Ri.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},Ri.upload=function(t,e,n,i){for(var r=0,o=e.length;r!==o;++r){var a=e[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,i)}},Ri.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var o=t[i];o.id in e&&n.push(o)}return n};var zi=0;function Bi(t){switch(t){case ge:return["Linear","( value )"];case ve:return["sRGB","( value )"];case Ae:return["RGBE","( value )"];case we:return["RGBM","( value, 7.0 )"];case be:return["RGBM","( value, 16.0 )"];case Me:return["RGBD","( value, 256.0 )"];case ye:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function Fi(t,e){var n=Bi(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ui(t){return""!==t}function Hi(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Gi(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function Qi(t){return t.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(t,e){var n=qe[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Qi(n)})}function Vi(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(t,e,n,i){for(var r="",o=parseInt(e);o<parseInt(n);o++)r+=i.replace(/\[ i \]/g,"[ "+o+" ]");return r})}function Yi(t,e,n){var i=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(n=t.texture.encoding):n=ge,n===ge&&e&&(n=ye),n}this.getParameters=function(e,i,o,s,c,l,u){var h=r[e.type],d=u.isSkinnedMesh?function(t){var e=u.skeleton.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,r=Math.floor((i-20)/4),o=Math.min(r,e.length);return o<e.length?0:o}():0,p=n.precision;null!==e.precision&&(p=n.getMaxPrecision(e.precision),e.precision);var f=t.getRenderTarget();return{shaderID:h,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:a(f?f.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:a(e.map,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:a(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===ht||e.envMap.mapping===dt),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:a(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!s,useFog:e.fog,fogExp:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:c,numClipIntersection:l,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.receiveShadow&&o.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===y,flipSided:e.side===v,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)i.push(r),i.push(e.defines[r]);for(var a=0;a<o.length;a++)i.push(n[o[a]]);return i.push(e.onBeforeCompile.toString()),i.push(t.gammaOutput),i.join()},this.acquireProgram=function(n,r,o,a){for(var s,c=0,l=i.length;c<l;c++){var u=i[c];if(u.code===a){++(s=u).usedTimes;break}}return void 0===s&&(s=new function(t,e,n,i,r,o){var a=t.context,s=i.defines,c=r.vertexShader,l=r.fragmentShader,u="SHADOWMAP_TYPE_BASIC";o.shadowMapType===f?u="SHADOWMAP_TYPE_PCF":o.shadowMapType===m&&(u="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(i.envMap.mapping){case at:case st:h="ENVMAP_TYPE_CUBE";break;case ht:case dt:h="ENVMAP_TYPE_CUBE_UV";break;case ct:case lt:h="ENVMAP_TYPE_EQUIREC";break;case ut:h="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case st:case lt:d="ENVMAP_MODE_REFRACTION"}switch(i.combine){case J:p="ENVMAP_BLENDING_MULTIPLY";break;case $:p="ENVMAP_BLENDING_MIX";break;case tt:p="ENVMAP_BLENDING_ADD"}}var g,v,y,A,w,b=t.gammaFactor>0?t.gammaFactor:1,M=function(t,e,n){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ui).join("\n")}(i.extensions,o,e),E=function(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(s),x=a.createProgram();i.isRawShaderMaterial?((g=[E].filter(Ui).join("\n")).length>0&&(g+="\n"),(v=[M,E].filter(Ui).join("\n")).length>0&&(v+="\n")):(g=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,E,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+u:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ui).join("\n"),v=[M,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,E,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+b,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+d:"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+u:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&e.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==et?"#define TONE_MAPPING":"",o.toneMapping!==et?qe.tonemapping_pars_fragment:"",o.toneMapping!==et?function(t,e){var n;switch(e){case nt:n="Linear";break;case it:n="Reinhard";break;case rt:n="Uncharted2";break;case ot:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 toneMapping( vec3 color ) { return "+n+"ToneMapping( color ); }"}(0,o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?qe.encodings_pars_fragment:"",o.mapEncoding?Fi("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?Fi("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Fi("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?(y="linearToOutputTexel",A=o.outputEncoding,w=Bi(A),"vec4 "+y+"( vec4 value ) { return LinearTo"+w[0]+w[1]+"; }"):"",o.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Ui).join("\n")),c=Gi(c=Hi(c=Qi(c),o),o),l=Gi(l=Hi(l=Qi(l),o),o);var T=g+(c=Vi(c)),C=v+(l=Vi(l)),S=ki(a,a.VERTEX_SHADER,T),D=ki(a,a.FRAGMENT_SHADER,C);a.attachShader(x,S),a.attachShader(x,D),void 0!==i.index0AttributeName?a.bindAttribLocation(x,0,i.index0AttributeName):!0===o.morphTargets&&a.bindAttribLocation(x,0,"position"),a.linkProgram(x);var _,L,N=a.getProgramInfoLog(x).trim(),I=a.getShaderInfoLog(S).trim(),O=a.getShaderInfoLog(D).trim(),j=!0,P=!0;return!1===a.getProgramParameter(x,a.LINK_STATUS)?j=!1:""!==N||""!==I&&""!==O||(P=!1),P&&(this.diagnostics={runnable:j,material:i,programLog:N,vertexShader:{log:I,prefix:g},fragmentShader:{log:O,prefix:v}}),a.deleteShader(S),a.deleteShader(D),this.getUniforms=function(){return void 0===_&&(_=new Ri(a,x,t)),_},this.getAttributes=function(){return void 0===L&&(L=function(t,e){for(var n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=0;r<i;r++){var o=t.getActiveAttrib(e,r).name;n[o]=t.getAttribLocation(e,o)}return n}(a,x)),L},this.destroy=function(){a.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return this.getUniforms()}},attributes:{get:function(){return this.getAttributes()}}}),this.id=zi++,this.code=n,this.usedTimes=1,this.program=x,this.vertexShader=S,this.fragmentShader=D,this}(t,e,a,n,r,o),i.push(s)),s},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=i.indexOf(t);i[e]=i[i.length-1],i.pop(),t.destroy()}},this.programs=i}function Wi(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program&&e.program&&t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function qi(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}var Xi,Zi,Ki,Ji,$i,tr,er,nr,ir=0;function rr(t){Gn.call(this),this.type="MeshDepthMaterial",this.depthPacking=Ee,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function or(t){Gn.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new _e,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function ar(t,e,n){for(var i=new Ye,r=new Se,o=new Ce,a=new Ce(n,n),s=new _e,c=new _e,l=1,u=2,h=1+(l|u),d=new Array(h),p=new Array(h),m={},A={0:v,1:g,2:y},w=[new _e(1,0,0),new _e(-1,0,0),new _e(0,0,1),new _e(0,0,-1),new _e(0,1,0),new _e(0,-1,0)],b=[new _e(0,1,0),new _e(0,1,0),new _e(0,1,0),new _e(0,1,0),new _e(0,0,1),new _e(0,0,-1)],M=[new Be,new Be,new Be,new Be,new Be,new Be],E=0;E!==h;++E){var x=0!=(E&l),T=0!=(E&u),C=new rr({depthPacking:xe,morphTargets:x,skinning:T});d[E]=C;var S=new or({morphTargets:x,skinning:T});p[E]=S}var D=this;function _(e,n,i,r,o,a){var s=e.geometry,c=null,h=d,f=e.customDepthMaterial;if(i&&(h=p,f=e.customDistanceMaterial),f)c=f;else{var g=!1;n.morphTargets&&(s&&s.isBufferGeometry?g=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(g=s.morphTargets&&s.morphTargets.length>0)),e.isSkinnedMesh&&n.skinning;var v=e.isSkinnedMesh&&n.skinning,y=0;g&&(y|=l),v&&(y|=u),c=h[y]}if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var w=c.uuid,b=n.uuid,M=m[w];void 0===M&&(M={},m[w]=M);var E=M[b];void 0===E&&(E=c.clone(),M[b]=E),c=E}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=null!=n.shadowSide?n.shadowSide:A[n.side],c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,i&&c.isMeshDistanceMaterial&&(c.referencePosition.copy(r),c.nearDistance=o,c.farDistance=a),c}function L(n,r,o,a){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var s=e.update(n),l=n.material;if(Array.isArray(l))for(var u=s.groups,h=0,d=u.length;h<d;h++){var p=u[h],f=l[p.materialIndex];if(f&&f.visible){var m=_(n,f,a,c,o.near,o.far);t.renderBufferDirect(o,null,s,m,n,p)}}else l.visible&&(m=_(n,l,a,c,o.near,o.far),t.renderBufferDirect(o,null,s,m,n,null))}for(var g=n.children,v=0,y=g.length;v<y;v++)L(g[v],r,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=f,this.render=function(e,n,l){if(!1!==D.enabled&&(!1!==D.autoUpdate||!1!==D.needsUpdate)&&0!==e.length){var u,h=t.context,d=t.state;d.disable(h.BLEND),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var p=0,f=e.length;p<f;p++){var m=e[p],g=m.shadow,v=m&&m.isPointLight;if(void 0!==g){var y=g.camera;if(o.copy(g.mapSize),o.min(a),v){var A=o.x,E=o.y;M[0].set(2*A,E,A,E),M[1].set(0,E,A,E),M[2].set(3*A,E,A,E),M[3].set(A,E,A,E),M[4].set(3*A,0,A,E),M[5].set(A,0,A,E),o.x*=4,o.y*=2}if(null===g.map){var x={minFilter:gt,magFilter:gt,format:Rt};g.map=new Fe(o.x,o.y,x),g.map.texture.name=m.name+".shadowMap",y.updateProjectionMatrix()}g.isSpotLightShadow&&g.update(m);var T=g.map,C=g.matrix;c.setFromMatrixPosition(m.matrixWorld),y.position.copy(c),v?(u=6,C.makeTranslation(-c.x,-c.y,-c.z)):(u=1,s.setFromMatrixPosition(m.target.matrixWorld),y.lookAt(s),y.updateMatrixWorld(),C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.multiply(y.projectionMatrix),C.multiply(y.matrixWorldInverse)),t.setRenderTarget(T),t.clear();for(var S=0;S<u;S++){if(v){s.copy(y.position),s.add(w[S]),y.up.copy(b[S]),y.lookAt(s),y.updateMatrixWorld();var _=M[S];d.viewport(_)}r.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),i.setFromMatrix(r),L(n,l,y,v)}}}D.needsUpdate=!1}}}function sr(t,e,n,i,r,o,a,s,c){ze.call(this,t,e,n,i,r,o,a,s,c),this.needsUpdate=!0}function cr(t,e,n,i,r,o,a){var s,c="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,l={};function u(t,e){if(t.width>e||t.height>e){if("data"in t)return;var n=e/Math.max(t.width,t.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.width=Math.floor(t.width*n),i.height=Math.floor(t.height*n),i.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),i}return t}function h(t){return Te.isPowerOfTwo(t.width)&&Te.isPowerOfTwo(t.height)}function d(t,e){return t.generateMipmaps&&e&&t.minFilter!==gt&&t.minFilter!==At}function p(e,n,r,o){t.generateMipmap(e),i.get(n).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function f(e){return e===gt||e===vt||e===yt?t.NEAREST:t.LINEAR}function m(e){var n=e.target;n.removeEventListener("dispose",m),function(e){var n=i.get(e);if(e.image&&n.__image__webglTextureCube)t.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture)}i.remove(e)}(n),n.isVideoTexture&&delete l[n.id],a.memory.textures--}function g(e){var n=e.target;n.removeEventListener("dispose",g),function(e){var n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(e.texture),i.remove(e)}}(n),a.memory.textures--}function v(e,f){var g=i.get(e);if(e.isVideoTexture&&function(t){var e=t.id,n=a.render.frame;l[e]!==n&&(l[e]=n,t.update())}(e),e.version>0&&g.__version!==e.version){var v=e.image;if(void 0===v);else if(!1!==v.complete)return void function(e,i,l){void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",m),e.__webglTexture=t.createTexture(),a.memory.textures++),n.activeTexture(t.TEXTURE0+l),n.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment);var f=u(i.image,r.maxTextureSize);(function(t){return t.wrapS!==ft||t.wrapT!==ft||t.minFilter!==gt&&t.minFilter!==At})(i)&&!1===h(f)&&(f=function(t){return t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=Te.floorPowerOfTwo(t.width),s.height=Te.floorPowerOfTwo(t.height),s.getContext("2d").drawImage(t,0,0,s.width,s.height),s):t}(f));var g=h(f),v=o.convert(i.format),A=o.convert(i.type);y(t.TEXTURE_2D,i,g);var w,b=i.mipmaps;if(i.isDepthTexture){var M=t.DEPTH_COMPONENT;if(i.type===Dt){if(!c)throw new Error("Float Depth Texture only supported in WebGL2.0");M=t.DEPTH_COMPONENT32F}else c&&(M=t.DEPTH_COMPONENT16);i.format===Ft&&M===t.DEPTH_COMPONENT&&i.type!==Tt&&i.type!==St&&(i.type=Tt,A=o.convert(i.type)),i.format===Ut&&(M=t.DEPTH_STENCIL,i.type!==Ot&&(i.type=Ot,A=o.convert(i.type))),n.texImage2D(t.TEXTURE_2D,0,M,f.width,f.height,0,v,A,null)}else if(i.isDataTexture)if(b.length>0&&g){for(var E=0,x=b.length;E<x;E++)w=b[E],n.texImage2D(t.TEXTURE_2D,E,v,w.width,w.height,0,v,A,w.data);i.generateMipmaps=!1,e.__maxMipLevel=b.length-1}else n.texImage2D(t.TEXTURE_2D,0,v,f.width,f.height,0,v,A,f.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(E=0,x=b.length;E<x;E++)w=b[E],i.format!==Rt&&i.format!==Pt?n.getCompressedTextureFormats().indexOf(v)>-1&&n.compressedTexImage2D(t.TEXTURE_2D,E,v,w.width,w.height,0,w.data):n.texImage2D(t.TEXTURE_2D,E,v,w.width,w.height,0,v,A,w.data);e.__maxMipLevel=b.length-1}else if(b.length>0&&g){for(E=0,x=b.length;E<x;E++)w=b[E],n.texImage2D(t.TEXTURE_2D,E,v,v,A,w);i.generateMipmaps=!1,e.__maxMipLevel=b.length-1}else n.texImage2D(t.TEXTURE_2D,0,v,v,A,f),e.__maxMipLevel=0;d(i,g)&&p(t.TEXTURE_2D,i,f.width,f.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}(g,e,f)}n.activeTexture(t.TEXTURE0+f),n.bindTexture(t.TEXTURE_2D,g.__webglTexture)}function y(n,a,s){var c;if(s?(t.texParameteri(n,t.TEXTURE_WRAP_S,o.convert(a.wrapS)),t.texParameteri(n,t.TEXTURE_WRAP_T,o.convert(a.wrapT)),t.texParameteri(n,t.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),a.wrapS!==ft||a.wrapT,t.texParameteri(n,t.TEXTURE_MAG_FILTER,f(a.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,f(a.minFilter)),a.minFilter!==gt&&a.minFilter),c=e.get("EXT_texture_filter_anisotropic")){if(a.type===Dt&&null===e.get("OES_texture_float_linear"))return;if(a.type===_t&&null===e.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(t.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function A(e,r,a,s){var c=o.convert(r.texture.format),l=o.convert(r.texture.type);n.texImage2D(s,0,c,r.width,r.height,0,c,l,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,a,s,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function w(e,n){t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):n.depthBuffer&&n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,n.width,n.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}this.setTexture2D=v,this.setTextureCube=function(e,s){var c=i.get(e);if(6===e.image.length)if(e.version>0&&c.__version!==e.version){c.__image__webglTextureCube||(e.addEventListener("dispose",m),c.__image__webglTextureCube=t.createTexture(),a.memory.textures++),n.activeTexture(t.TEXTURE0+s),n.bindTexture(t.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var l=e&&e.isCompressedTexture,f=e.image[0]&&e.image[0].isDataTexture,g=[],v=0;v<6;v++)g[v]=l||f?f?e.image[v].image:e.image[v]:u(e.image[v],r.maxCubemapSize);var A=g[0],w=h(A),b=o.convert(e.format),M=o.convert(e.type);for(y(t.TEXTURE_CUBE_MAP,e,w),v=0;v<6;v++)if(l)for(var E,x=g[v].mipmaps,T=0,C=x.length;T<C;T++)E=x[T],e.format!==Rt&&e.format!==Pt?n.getCompressedTextureFormats().indexOf(b)>-1&&n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,T,b,E.width,E.height,0,E.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,T,b,E.width,E.height,0,b,M,E.data);else f?n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,g[v].width,g[v].height,0,b,M,g[v].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,b,M,g[v]);c.__maxMipLevel=l?x.length-1:0,d(e,w)&&p(t.TEXTURE_CUBE_MAP,e,A.width,A.height),c.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(t.TEXTURE0+s),n.bindTexture(t.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,r){n.activeTexture(t.TEXTURE0+r),n.bindTexture(t.TEXTURE_CUBE_MAP,i.get(e).__webglTexture)},this.setupRenderTarget=function(e){var r=i.get(e),o=i.get(e.texture);e.addEventListener("dispose",g),o.__webglTexture=t.createTexture(),a.memory.textures++;var s=!0===e.isWebGLRenderTargetCube,c=h(e);if(s){r.__webglFramebuffer=[];for(var l=0;l<6;l++)r.__webglFramebuffer[l]=t.createFramebuffer()}else r.__webglFramebuffer=t.createFramebuffer();if(s){for(n.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture),y(t.TEXTURE_CUBE_MAP,e.texture,c),l=0;l<6;l++)A(r.__webglFramebuffer[l],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+l);d(e.texture,c)&&p(t.TEXTURE_CUBE_MAP,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_CUBE_MAP,null)}else n.bindTexture(t.TEXTURE_2D,o.__webglTexture),y(t.TEXTURE_2D,e.texture,c),A(r.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),d(e.texture,c)&&p(t.TEXTURE_2D,e.texture,e.width,e.height),n.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&function(e){var n=i.get(e),r=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),v(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ft)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,r,0);else{if(n.depthTexture.format!==Ut)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,r,0)}}(n.__webglFramebuffer,e)}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),w(n.__webglDepthbuffer[o],e)}else t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),w(n.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}(e)},this.updateRenderTargetMipmap=function(e){var r=e.texture;if(d(r,h(e))){var o=e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,a=i.get(r).__webglTexture;n.bindTexture(o,a),p(o,r,e.width,e.height),n.bindTexture(o,null)}}}function lr(t,e){return{convert:function(n){var i;if(n===pt)return t.REPEAT;if(n===ft)return t.CLAMP_TO_EDGE;if(n===mt)return t.MIRRORED_REPEAT;if(n===gt)return t.NEAREST;if(n===vt)return t.NEAREST_MIPMAP_NEAREST;if(n===yt)return t.NEAREST_MIPMAP_LINEAR;if(n===At)return t.LINEAR;if(n===wt)return t.LINEAR_MIPMAP_NEAREST;if(n===bt)return t.LINEAR_MIPMAP_LINEAR;if(n===Mt)return t.UNSIGNED_BYTE;if(n===Lt)return t.UNSIGNED_SHORT_4_4_4_4;if(n===Nt)return t.UNSIGNED_SHORT_5_5_5_1;if(n===It)return t.UNSIGNED_SHORT_5_6_5;if(n===Et)return t.BYTE;if(n===xt)return t.SHORT;if(n===Tt)return t.UNSIGNED_SHORT;if(n===Ct)return t.INT;if(n===St)return t.UNSIGNED_INT;if(n===Dt)return t.FLOAT;if(n===_t&&null!==(i=e.get("OES_texture_half_float")))return i.HALF_FLOAT_OES;if(n===jt)return t.ALPHA;if(n===Pt)return t.RGB;if(n===Rt)return t.RGBA;if(n===kt)return t.LUMINANCE;if(n===zt)return t.LUMINANCE_ALPHA;if(n===Ft)return t.DEPTH_COMPONENT;if(n===Ut)return t.DEPTH_STENCIL;if(n===D)return t.FUNC_ADD;if(n===_)return t.FUNC_SUBTRACT;if(n===L)return t.FUNC_REVERSE_SUBTRACT;if(n===O)return t.ZERO;if(n===j)return t.ONE;if(n===P)return t.SRC_COLOR;if(n===R)return t.ONE_MINUS_SRC_COLOR;if(n===k)return t.SRC_ALPHA;if(n===z)return t.ONE_MINUS_SRC_ALPHA;if(n===B)return t.DST_ALPHA;if(n===F)return t.ONE_MINUS_DST_ALPHA;if(n===U)return t.DST_COLOR;if(n===H)return t.ONE_MINUS_DST_COLOR;if(n===G)return t.SRC_ALPHA_SATURATE;if((n===Ht||n===Gt||n===Qt||n===Vt)&&null!==(i=e.get("WEBGL_compressed_texture_s3tc"))){if(n===Ht)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Gt)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Qt)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Vt)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===Yt||n===Wt||n===qt||n===Xt)&&null!==(i=e.get("WEBGL_compressed_texture_pvrtc"))){if(n===Yt)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Wt)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===qt)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Xt)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Zt&&null!==(i=e.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((n===Kt||n===Jt||n===$t||n===te||n===ee||n===ne||n===ie||n===re||n===oe||n===ae||n===se||n===ce||n===le||n===ue)&&null!==(i=e.get("WEBGL_compressed_texture_astc")))return n;if((n===N||n===I)&&null!==(i=e.get("EXT_blend_minmax"))){if(n===N)return i.MIN_EXT;if(n===I)return i.MAX_EXT}return n===Ot&&null!==(i=e.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:0}}}function ur(t,e,n,i){un.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function hr(t){ur.call(this),this.cameras=t||[]}function dr(t){var e=this,n=null,i=null,r=null,o=new Se,a=new Se;"undefined"!=typeof window&&"VRFrameData"in window&&(i=new window.VRFrameData);var s=new Se,c=new De,l=new _e,u=new ur;u.bounds=new Be(0,0,.5,1),u.layers.enable(1);var h=new ur;h.bounds=new Be(.5,0,.5,1),h.layers.enable(2);var d,p,f=new hr([u,h]);function m(){if(null!==n&&n.isPresenting){var i=n.getEyeParameters("left"),r=i.renderWidth,o=i.renderHeight;p=t.getPixelRatio(),d=t.getSize(),t.setDrawingBufferSize(2*r,o,1)}else e.enabled&&t.setDrawingBufferSize(d.width,d.height,p)}f.layers.enable(1),f.layers.enable(2),"undefined"!=typeof window&&window.addEventListener("vrdisplaypresentchange",m,!1),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return n},this.setDevice=function(t){void 0!==t&&(n=t)},this.setPoseTarget=function(t){void 0!==t&&(r=t)},this.getCamera=function(t){if(null===n)return t;n.depthNear=t.near,n.depthFar=t.far,n.getFrameData(i);var d=n.stageParameters;d?o.fromArray(d.sittingToStandingTransform):o.makeTranslation(0,e.userHeight,0);var p=i.pose,m=null!==r?r:t;if(m.matrix.copy(o),m.matrix.decompose(m.position,m.quaternion,m.scale),null!==p.orientation&&(c.fromArray(p.orientation),m.quaternion.multiply(c)),null!==p.position&&(c.setFromRotationMatrix(o),l.fromArray(p.position),l.applyQuaternion(c),m.position.add(l)),m.updateMatrixWorld(),!1===n.isPresenting)return t;u.near=t.near,h.near=t.near,u.far=t.far,h.far=t.far,f.matrixWorld.copy(t.matrixWorld),f.matrixWorldInverse.copy(t.matrixWorldInverse),u.matrixWorldInverse.fromArray(i.leftViewMatrix),h.matrixWorldInverse.fromArray(i.rightViewMatrix),a.getInverse(o),u.matrixWorldInverse.multiply(a),h.matrixWorldInverse.multiply(a);var g=m.parent;null!==g&&(s.getInverse(g.matrixWorld),u.matrixWorldInverse.multiply(s),h.matrixWorldInverse.multiply(s)),u.matrixWorld.getInverse(u.matrixWorldInverse),h.matrixWorld.getInverse(h.matrixWorldInverse),u.projectionMatrix.fromArray(i.leftProjectionMatrix),h.projectionMatrix.fromArray(i.rightProjectionMatrix),f.projectionMatrix.copy(u.projectionMatrix);var v=n.getLayers();if(v.length){var y=v[0];null!==y.leftBounds&&4===y.leftBounds.length&&u.bounds.fromArray(y.leftBounds),null!==y.rightBounds&&4===y.rightBounds.length&&h.bounds.fromArray(y.rightBounds)}return f},this.getStandingMatrix=function(){return o},this.submitFrame=function(){n&&n.isPresenting&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",m)}}function pr(t){var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,c=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:"default",u=null,f=null;this.domElement=e,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=nt,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var m,g,w,b,D,_,L,N,I,O,j,P,R,k,z,B,F,U,H,G=this,J=!1,$=null,tt=null,et=-1,it="",rt=null,ot=null,at=new Be,st=new Be,ct=null,lt=0,ut=e.width,ht=e.height,dt=1,pt=new Be(0,0,ut,ht),ft=new Be(0,0,ut,ht),mt=!1,gt=new Ye,vt=new function(){var t=this,e=null,n=0,i=!1,r=!1,o=new Ve,a=new Le,s={value:null,needsUpdate:!1};function c(){s.value!==e&&(s.value=e,s.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function l(e,n,i,r){var c=null!==e?e.length:0,l=null;if(0!==c){if(l=s.value,!0!==r||null===l){var u=i+4*c,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===l||l.length<u)&&(l=new Float32Array(u));for(var d=0,p=i;d!==c;++d,p+=4)o.copy(e[d]).applyMatrix4(h,a),o.normal.toArray(l,p),l[p+3]=o.constant}s.value=l,s.needsUpdate=!0}return t.numPlanes=c,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,r,o){var a=0!==t.length||r||0!==n||i;return i=r,e=l(t,o,0),n=t.length,a},this.beginShadows=function(){r=!0,l(null)},this.endShadows=function(){r=!1,c()},this.setState=function(t,o,a,u,h,d){if(!i||null===t||0===t.length||r&&!a)r?l(null):c();else{var p=r?0:n,f=4*p,m=h.clippingState||null;s.value=m,m=l(t,u,f,d);for(var g=0;g!==f;++g)m[g]=e[g];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}},yt=!1,At=!1,wt=new Se,bt=new _e;function Et(){return null===$?dt:1}try{var xt={alpha:i,depth:r,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:l};if(e.addEventListener("webglcontextlost",Lt,!1),e.addEventListener("webglcontextrestored",Nt,!1),null===(m=n||e.getContext("webgl",xt)||e.getContext("experimental-webgl",xt)))throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===m.getShaderPrecisionFormat&&(m.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){}function Tt(){(g=new function(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=t.getExtension("WEBGL_compressed_texture_etc1");break;default:i=t.getExtension(n)}return e[n]=i,i}}}(m)).get("WEBGL_depth_texture"),g.get("OES_texture_float"),g.get("OES_texture_float_linear"),g.get("OES_texture_half_float"),g.get("OES_texture_half_float_linear"),g.get("OES_standard_derivatives"),g.get("OES_element_index_uint"),g.get("ANGLE_instanced_arrays"),H=new lr(m,g),w=new function(t,e,n){var i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o=void 0!==n.precision?n.precision:"highp",a=r(o);a!==o&&(o=a);var s=!0===n.logarithmicDepthBuffer,c=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),l=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_TEXTURE_SIZE),h=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),d=t.getParameter(t.MAX_VERTEX_ATTRIBS),p=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),f=t.getParameter(t.MAX_VARYING_VECTORS),m=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),g=l>0,v=!!e.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==i)return i;var n=e.get("EXT_texture_filter_anisotropic");return i=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:s,maxTextures:c,maxVertexTextures:l,maxTextureSize:u,maxCubemapSize:h,maxAttributes:d,maxVertexUniforms:p,maxVaryings:f,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v}}(m,g,t),(b=new function(t,e,n){var i=new function(){var e=!1,n=new Be,i=null,r=new Be(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,o,a,s){!0===s&&(e*=a,i*=a,o*=a),n.set(e,i,o,a),!1===r.equals(n)&&(t.clearColor(e,i,o,a),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},r=new function(){var e=!1,n=null,i=null,r=null;return{setTest:function(e){e?et(t.DEPTH_TEST):nt(t.DEPTH_TEST)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case Q:t.depthFunc(t.NEVER);break;case V:t.depthFunc(t.ALWAYS);break;case Y:t.depthFunc(t.LESS);break;case W:t.depthFunc(t.LEQUAL);break;case q:t.depthFunc(t.EQUAL);break;case X:t.depthFunc(t.GEQUAL);break;case Z:t.depthFunc(t.GREATER);break;case K:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},o=new function(){var e=!1,n=null,i=null,r=null,o=null,a=null,s=null,c=null,l=null;return{setTest:function(e){e?et(t.STENCIL_TEST):nt(t.STENCIL_TEST)},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,a){i===e&&r===n&&o===a||(t.stencilFunc(e,n,a),i=e,r=n,o=a)},setOp:function(e,n,i){a===e&&s===n&&c===i||(t.stencilOp(e,n,i),a=e,s=n,c=i)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,i=null,r=null,o=null,a=null,s=null,c=null,l=null}}},a=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=new Uint8Array(a),c=new Uint8Array(a),l=new Uint8Array(a),u={},f=null,m=null,g=null,A=null,w=null,b=null,D=null,_=null,L=null,N=!1,I=null,O=null,j=null,P=null,R=null,k=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),z=!1,B=0,F=t.getParameter(t.VERSION);-1!==F.indexOf("WebGL")?(B=parseFloat(/^WebGL\ ([0-9])/.exec(F)[1]),z=B>=1):-1!==F.indexOf("OpenGL ES")&&(B=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(F)[1]),z=B>=2);var U=null,H={},G=new Be,J=new Be;function $(e,n,i){var r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var a=0;a<i;a++)t.texImage2D(n+a,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);return o}var tt={};function et(e){!0!==u[e]&&(t.enable(e),u[e]=!0)}function nt(e){!1!==u[e]&&(t.disable(e),u[e]=!1)}function it(e,i,r,o,a,s,c,l){if(e!==M?et(t.BLEND):nt(t.BLEND),e!==S){if(e!==g||l!==N)switch(e){case x:l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE));break;case T:l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR));break;case C:l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR));break;default:l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA))}A=null,w=null,b=null,D=null,_=null,L=null}else a=a||i,s=s||r,c=c||o,i===A&&a===D||(t.blendEquationSeparate(n.convert(i),n.convert(a)),A=i,D=a),r===w&&o===b&&s===_&&c===L||(t.blendFuncSeparate(n.convert(r),n.convert(o),n.convert(s),n.convert(c)),w=r,b=o,_=s,L=c);g=e,N=l}function rt(e){I!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),I=e)}function ot(e){e!==h?(et(t.CULL_FACE),e!==O&&(e===d?t.cullFace(t.BACK):e===p?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):nt(t.CULL_FACE),O=e}function at(e,n,i){e?(et(t.POLYGON_OFFSET_FILL),P===n&&R===i||(t.polygonOffset(n,i),P=n,R=i)):nt(t.POLYGON_OFFSET_FILL)}function st(e){void 0===e&&(e=t.TEXTURE0+k-1),U!==e&&(t.activeTexture(e),U=e)}return tt[t.TEXTURE_2D]=$(t.TEXTURE_2D,t.TEXTURE_2D,1),tt[t.TEXTURE_CUBE_MAP]=$(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),i.setClear(0,0,0,1),r.setClear(1),o.setClear(0),et(t.DEPTH_TEST),r.setFunc(W),rt(!1),ot(d),et(t.CULL_FACE),et(t.BLEND),it(E),{buffers:{color:i,depth:r,stencil:o},initAttributes:function(){for(var t=0,e=s.length;t<e;t++)s[t]=0},enableAttribute:function(n){s[n]=1,0===c[n]&&(t.enableVertexAttribArray(n),c[n]=1),0!==l[n]&&(e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),l[n]=0)},enableAttributeAndDivisor:function(n,i){s[n]=1,0===c[n]&&(t.enableVertexAttribArray(n),c[n]=1),l[n]!==i&&(e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,i),l[n]=i)},disableUnusedAttributes:function(){for(var e=0,n=c.length;e!==n;++e)c[e]!==s[e]&&(t.disableVertexAttribArray(e),c[e]=0)},enable:et,disable:nt,getCompressedTextureFormats:function(){if(null===f&&(f=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++)f.push(n[i]);return f},useProgram:function(e){return m!==e&&(t.useProgram(e),m=e,!0)},setBlending:it,setMaterial:function(e,n){e.side===y?nt(t.CULL_FACE):et(t.CULL_FACE);var o=e.side===v;n&&(o=!o),rt(o),!0===e.transparent?it(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):it(M),r.setFunc(e.depthFunc),r.setTest(e.depthTest),r.setMask(e.depthWrite),i.setMask(e.colorWrite),at(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:rt,setCullFace:ot,setLineWidth:function(e){e!==j&&(z&&t.lineWidth(e),j=e)},setPolygonOffset:at,setScissorTest:function(e){e?et(t.SCISSOR_TEST):nt(t.SCISSOR_TEST)},activeTexture:st,bindTexture:function(e,n){null===U&&st();var i=H[U];void 0===i&&(i={type:void 0,texture:void 0},H[U]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||tt[e]),i.type=e,i.texture=n)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){}},scissor:function(e){!1===G.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),G.copy(e))},viewport:function(e){!1===J.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),J.copy(e))},reset:function(){for(var e=0;e<c.length;e++)1===c[e]&&(t.disableVertexAttribArray(e),c[e]=0);u={},f=null,U=null,H={},m=null,g=null,I=null,O=null,i.reset(),r.reset(),o.reset()}}}(m,g,H)).scissor(st.copy(ft).multiplyScalar(dt)),b.viewport(at.copy(pt).multiplyScalar(dt)),D=new function(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(n,i,r){switch(r=r||1,e.calls++,i){case t.TRIANGLES:e.triangles+=r*(n/3);break;case t.TRIANGLE_STRIP:case t.TRIANGLE_FAN:e.triangles+=r*(n-2);break;case t.LINES:e.lines+=r*(n/2);break;case t.LINE_STRIP:e.lines+=r*(n-1);break;case t.LINE_LOOP:e.lines+=r*n;break;case t.POINTS:e.points+=r*n}}}}(m),_=new function(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}},L=new cr(m,g,b,_,w,H,D),N=new function(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=e.get(n);i&&(t.deleteBuffer(i.buffer),e.delete(n))},update:function(n,i){n.isInterleavedBufferAttribute&&(n=n.data);var r=e.get(n);void 0===r?e.set(n,function(e,n){var i=e.array,r=e.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,i,r),e.onUploadCallback();var a=t.FLOAT;return i instanceof Float32Array?a=t.FLOAT:i instanceof Float64Array||(i instanceof Uint16Array?a=t.UNSIGNED_SHORT:i instanceof Int16Array?a=t.SHORT:i instanceof Uint32Array?a=t.UNSIGNED_INT:i instanceof Int32Array?a=t.INT:i instanceof Int8Array?a=t.BYTE:i instanceof Uint8Array&&(a=t.UNSIGNED_BYTE)),{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(n,i)):r.version<n.version&&(function(e,n,i){var r=n.array,o=n.updateRange;t.bindBuffer(i,e),!1===n.dynamic?t.bufferData(i,r,t.STATIC_DRAW):-1===o.count?t.bufferSubData(i,0,r):0===o.count||(t.bufferSubData(i,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=-1)}(r.buffer,n,i),r.version=n.version)}}}(m),I=new function(t,e,n){var i={},r={};function o(t){var a=t.target,s=i[a.id];for(var c in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[c]);a.removeEventListener("dispose",o),delete i[a.id];var l=r[a.id];l&&(e.remove(l),delete r[a.id]),(l=r[s.id])&&(e.remove(l),delete r[s.id]),n.memory.geometries--}return{get:function(t,e){var r=i[e.id];return r||(e.addEventListener("dispose",o),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Ln).setFromObject(t)),r=e._bufferGeometry),i[e.id]=r,n.memory.geometries++,r)},update:function(n){var i=n.index,r=n.attributes;for(var o in null!==i&&e.update(i,t.ELEMENT_ARRAY_BUFFER),r)e.update(r[o],t.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],c=0,l=s.length;c<l;c++)e.update(s[c],t.ARRAY_BUFFER)},getWireframeAttribute:function(n){var i=r[n.id];if(i)return i;var o,a=[],s=n.index,c=n.attributes;if(null!==s)for(var l=0,u=(o=s.array).length;l<u;l+=3){var h=o[l+0],d=o[l+1],p=o[l+2];a.push(h,d,d,p,p,h)}else for(l=0,u=(o=c.position.array).length/3-1;l<u;l+=3)h=l+0,d=l+1,p=l+2,a.push(h,d,d,p,p,h);return i=new(Dn(a)>65535?xn:Mn)(a,1),e.update(i,t.ELEMENT_ARRAY_BUFFER),r[n.id]=i,i}}}(m,N,D),O=new function(t,e){var n={};return{update:function(i){var r=e.render.frame,o=i.geometry,a=t.get(i,o);return n[a.id]!==r&&(o.isGeometry&&a.updateFromObject(i),t.update(a),n[a.id]=r),a},dispose:function(){n={}}}}(I,D),z=new function(t){var e={},n=new Float32Array(8);return{update:function(i,r,o,a){var s=i.morphTargetInfluences,c=s.length,l=e[r.id];if(void 0===l){l=[];for(var u=0;u<c;u++)l[u]=[u,0];e[r.id]=l}var h=o.morphTargets&&r.morphAttributes.position,d=o.morphNormals&&r.morphAttributes.normal;for(u=0;u<c;u++)0!==(p=l[u])[1]&&(h&&r.removeAttribute("morphTarget"+u),d&&r.removeAttribute("morphNormal"+u));for(u=0;u<c;u++)(p=l[u])[0]=u,p[1]=s[u];for(l.sort(Zn),u=0;u<8;u++){var p;if(p=l[u]){var f=p[0],m=p[1];if(m){h&&r.addAttribute("morphTarget"+u,h[f]),d&&r.addAttribute("morphNormal"+u,d[f]),n[u]=m;continue}}n[u]=0}a.getUniforms().setValue(t,"morphTargetInfluences",n)}}}(m),j=new Yi(G,g,w),P=new function(){var t={};return{get:function(e,n){var i=e.id+","+n.id,r=t[i];return void 0===r&&(r=new function(){var t=[],e=0,n=[],i=[];return{opaque:n,transparent:i,init:function(){e=0,n.length=0,i.length=0},push:function(r,o,a,s,c){var l=t[e];void 0===l?(l={id:r.id,object:r,geometry:o,material:a,program:a.program,renderOrder:r.renderOrder,z:s,group:c},t[e]=l):(l.id=r.id,l.object=r,l.geometry=o,l.material=a,l.program=a.program,l.renderOrder=r.renderOrder,l.z=s,l.group=c),(!0===a.transparent?i:n).push(l),e++},sort:function(){n.length>1&&n.sort(Wi),i.length>1&&i.sort(qi)}}},t[i]=r),r},dispose:function(){t={}}}},R=new function(){var t={};return{get:function(e,n){var i=e.id+","+n.id,r=t[i];return void 0===r&&(r=new function(){var t=new function(){var t=new function(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new _e,color:new Ke,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"SpotLight":n={position:new _e,direction:new _e,color:new Ke,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"PointLight":n={position:new _e,color:new Ke,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Ce,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new _e,skyColor:new Ke,groundColor:new Ke};break;case"RectAreaLight":n={color:new Ke,position:new _e,halfWidth:new _e,halfHeight:new _e}}return t[e.id]=n,n}}},e={id:ir++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new _e,i=new Se,r=new Se;return{setup:function(o,a,s){for(var c=0,l=0,u=0,h=0,d=0,p=0,f=0,m=0,g=s.matrixWorldInverse,v=0,y=o.length;v<y;v++){var A=o[v],w=A.color,b=A.intensity,M=A.distance,E=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)c+=w.r*b,l+=w.g*b,u+=w.b*b;else if(A.isDirectionalLight){if((T=t.get(A)).color.copy(A.color).multiplyScalar(A.intensity),T.direction.setFromMatrixPosition(A.matrixWorld),n.setFromMatrixPosition(A.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(g),T.shadow=A.castShadow,A.castShadow){var x=A.shadow;T.shadowBias=x.bias,T.shadowRadius=x.radius,T.shadowMapSize=x.mapSize}e.directionalShadowMap[h]=E,e.directionalShadowMatrix[h]=A.shadow.matrix,e.directional[h]=T,h++}else if(A.isSpotLight)(T=t.get(A)).position.setFromMatrixPosition(A.matrixWorld),T.position.applyMatrix4(g),T.color.copy(w).multiplyScalar(b),T.distance=M,T.direction.setFromMatrixPosition(A.matrixWorld),n.setFromMatrixPosition(A.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(g),T.coneCos=Math.cos(A.angle),T.penumbraCos=Math.cos(A.angle*(1-A.penumbra)),T.decay=0===A.distance?0:A.decay,T.shadow=A.castShadow,A.castShadow&&(x=A.shadow,T.shadowBias=x.bias,T.shadowRadius=x.radius,T.shadowMapSize=x.mapSize),e.spotShadowMap[p]=E,e.spotShadowMatrix[p]=A.shadow.matrix,e.spot[p]=T,p++;else if(A.isRectAreaLight)(T=t.get(A)).color.copy(w).multiplyScalar(b),T.position.setFromMatrixPosition(A.matrixWorld),T.position.applyMatrix4(g),r.identity(),i.copy(A.matrixWorld),i.premultiply(g),r.extractRotation(i),T.halfWidth.set(.5*A.width,0,0),T.halfHeight.set(0,.5*A.height,0),T.halfWidth.applyMatrix4(r),T.halfHeight.applyMatrix4(r),e.rectArea[f]=T,f++;else if(A.isPointLight)(T=t.get(A)).position.setFromMatrixPosition(A.matrixWorld),T.position.applyMatrix4(g),T.color.copy(A.color).multiplyScalar(A.intensity),T.distance=A.distance,T.decay=0===A.distance?0:A.decay,T.shadow=A.castShadow,A.castShadow&&(x=A.shadow,T.shadowBias=x.bias,T.shadowRadius=x.radius,T.shadowMapSize=x.mapSize,T.shadowCameraNear=x.camera.near,T.shadowCameraFar=x.camera.far),e.pointShadowMap[d]=E,e.pointShadowMatrix[d]=A.shadow.matrix,e.point[d]=T,d++;else if(A.isHemisphereLight){var T;(T=t.get(A)).direction.setFromMatrixPosition(A.matrixWorld),T.direction.transformDirection(g),T.direction.normalize(),T.skyColor.copy(A.color).multiplyScalar(b),T.groundColor.copy(A.groundColor).multiplyScalar(b),e.hemi[m]=T,m++}}e.ambient[0]=c,e.ambient[1]=l,e.ambient[2]=u,e.directional.length=h,e.spot.length=p,e.rectArea.length=f,e.point.length=d,e.hemi.length=m,e.hash=e.id+","+h+","+d+","+p+","+f+","+m+","+a.length},state:e}},e=[],n=[],i=[];return{init:function(){e.length=0,n.length=0,i.length=0},state:{lightsArray:e,shadowsArray:n,spritesArray:i,lights:t},setupLights:function(i){t.setup(e,n,i)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)},pushSprite:function(t){i.push(t)}}},t[i]=r),r},dispose:function(){t={}}}},k=new function(t,e,n,i){var r,o,a,s=new Ke(0),c=0;function l(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,i)}return{getClearColor:function(){return s},setClearColor:function(t,e){s.set(t),l(s,c=void 0!==e?e:1)},getClearAlpha:function(){return c},setClearAlpha:function(t){l(s,c=t)},render:function(e,i,u,h){var d=i.background;null===d?l(s,c):d&&d.isColor&&(l(d,1),h=!0),(t.autoClear||h)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),d&&d.isCubeTexture?(void 0===a&&((a=new Xn(new In(1,1,1),new Vn({uniforms:tn.cube.uniforms,vertexShader:tn.cube.vertexShader,fragmentShader:tn.cube.fragmentShader,side:v,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(a.geometry)),a.material.uniforms.tCube.value=d,e.push(a,a.geometry,a.material,0,null)):d&&d.isTexture&&(void 0===r&&(r=new hn(-1,1,1,-1,0,1),o=new Xn(new jn(2,2),new Qn({depthTest:!1,depthWrite:!1,fog:!1})),n.update(o.geometry)),o.material.map=d,t.renderBufferDirect(r,null,o.geometry,o.material,o,null))}}}(G,b,I,s),B=new function(t,e,n){var i;this.setMode=function(t){i=t},this.render=function(e,r){t.drawArrays(i,e,r),n.update(r,i)},this.renderInstances=function(t,r,o){var a=e.get("ANGLE_instanced_arrays");if(null!==a){var s=t.attributes.position;s.isInterleavedBufferAttribute?(o=s.data.count,a.drawArraysInstancedANGLE(i,0,o,t.maxInstancedCount)):a.drawArraysInstancedANGLE(i,r,o,t.maxInstancedCount),n.update(o,i,t.maxInstancedCount)}}}(m,g,D),F=new function(t,e,n){var i,r,o;this.setMode=function(t){i=t},this.setIndex=function(t){r=t.type,o=t.bytesPerElement},this.render=function(e,a){t.drawElements(i,a,r,e*o),n.update(a,i)},this.renderInstances=function(t,a,s){var c=e.get("ANGLE_instanced_arrays");null!==c&&(c.drawElementsInstancedANGLE(i,s,r,a*o,t.maxInstancedCount),n.update(s,i,t.maxInstancedCount))}}(m,g,D),U=new function(t,e,n,i,r){var o,a,s,c,l,u,h=new _e,d=new De,p=new _e;function f(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}this.render=function(m,g,v){if(0!==m.length){void 0===s&&function(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);o=e.createBuffer(),a=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW),s=function(){var t=e.createProgram(),n=e.createShader(e.VERTEX_SHADER),i=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(n,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),e.shaderSource(i,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),e.compileShader(n),e.compileShader(i),e.attachShader(t,n),e.attachShader(t,i),e.linkProgram(t),t}(),c={position:e.getAttribLocation(s,"position"),uv:e.getAttribLocation(s,"uv")},l={uvOffset:e.getUniformLocation(s,"uvOffset"),uvScale:e.getUniformLocation(s,"uvScale"),rotation:e.getUniformLocation(s,"rotation"),center:e.getUniformLocation(s,"center"),scale:e.getUniformLocation(s,"scale"),color:e.getUniformLocation(s,"color"),map:e.getUniformLocation(s,"map"),opacity:e.getUniformLocation(s,"opacity"),modelViewMatrix:e.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:e.getUniformLocation(s,"projectionMatrix"),fogType:e.getUniformLocation(s,"fogType"),fogDensity:e.getUniformLocation(s,"fogDensity"),fogNear:e.getUniformLocation(s,"fogNear"),fogFar:e.getUniformLocation(s,"fogFar"),fogColor:e.getUniformLocation(s,"fogColor"),fogDepth:e.getUniformLocation(s,"fogDepth"),alphaTest:e.getUniformLocation(s,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var h=i.getContext("2d");h.fillStyle="white",h.fillRect(0,0,8,8),u=new sr(i)}(),n.useProgram(s),n.initAttributes(),n.enableAttribute(c.position),n.enableAttribute(c.uv),n.disableUnusedAttributes(),n.disable(e.CULL_FACE),n.enable(e.BLEND),e.bindBuffer(e.ARRAY_BUFFER,o),e.vertexAttribPointer(c.position,2,e.FLOAT,!1,16,0),e.vertexAttribPointer(c.uv,2,e.FLOAT,!1,16,8),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.uniformMatrix4fv(l.projectionMatrix,!1,v.projectionMatrix.elements),n.activeTexture(e.TEXTURE0),e.uniform1i(l.map,0);var y=0,A=0,w=g.fog;w?(e.uniform3f(l.fogColor,w.color.r,w.color.g,w.color.b),w.isFog?(e.uniform1f(l.fogNear,w.near),e.uniform1f(l.fogFar,w.far),e.uniform1i(l.fogType,1),y=1,A=1):w.isFogExp2&&(e.uniform1f(l.fogDensity,w.density),e.uniform1i(l.fogType,2),y=2,A=2)):(e.uniform1i(l.fogType,0),y=0,A=0);for(var b=0,M=m.length;b<M;b++)(T=m[b]).modelViewMatrix.multiplyMatrices(v.matrixWorldInverse,T.matrixWorld),T.z=-T.modelViewMatrix.elements[14];m.sort(f);var E=[],x=[];for(b=0,M=m.length;b<M;b++){var T,C=(T=m[b]).material;if(!1!==C.visible){T.onBeforeRender(t,g,v,void 0,C,void 0),e.uniform1f(l.alphaTest,C.alphaTest),e.uniformMatrix4fv(l.modelViewMatrix,!1,T.modelViewMatrix.elements),T.matrixWorld.decompose(h,d,p),E[0]=p.x,E[1]=p.y,x[0]=T.center.x-.5,x[1]=T.center.y-.5;var S=0;g.fog&&C.fog&&(S=A),y!==S&&(e.uniform1i(l.fogType,S),y=S),null!==C.map?(e.uniform2f(l.uvOffset,C.map.offset.x,C.map.offset.y),e.uniform2f(l.uvScale,C.map.repeat.x,C.map.repeat.y)):(e.uniform2f(l.uvOffset,0,0),e.uniform2f(l.uvScale,1,1)),e.uniform1f(l.opacity,C.opacity),e.uniform3f(l.color,C.color.r,C.color.g,C.color.b),e.uniform1f(l.rotation,C.rotation),e.uniform2fv(l.center,x),e.uniform2fv(l.scale,E),n.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst,C.blendEquationAlpha,C.blendSrcAlpha,C.blendDstAlpha,C.premultipliedAlpha),n.buffers.depth.setTest(C.depthTest),n.buffers.depth.setMask(C.depthWrite),n.buffers.color.setMask(C.colorWrite),i.setTexture2D(C.map||u,0),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),T.onAfterRender(t,g,v,void 0,C,void 0)}}n.enable(e.CULL_FACE),n.reset()}}}(G,m,b,L,w),D.programs=j.programs,G.context=m,G.capabilities=w,G.extensions=g,G.properties=_,G.renderLists=P,G.state=b,G.info=D}Tt();var Ct=new dr(G);this.vr=Ct;var St=new ar(G,O,w.maxTextureSize);function Lt(t){t.preventDefault(),J=!0}function Nt(){J=!1,Tt()}function It(t){var e=t.target;e.removeEventListener("dispose",It),function(t){Ot(t),_.remove(t)}(e)}function Ot(t){var e=_.get(t).program;t.program=void 0,void 0!==e&&j.releaseProgram(e)}this.shadowMap=St,this.getContext=function(){return m},this.getContextAttributes=function(){return m.getContextAttributes()},this.forceContextLoss=function(){var t=g.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=g.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return dt},this.setPixelRatio=function(t){void 0!==t&&(dt=t,this.setSize(ut,ht,!1))},this.getSize=function(){return{width:ut,height:ht}},this.setSize=function(t,n,i){var r=Ct.getDevice();r&&r.isPresenting||(ut=t,ht=n,e.width=t*dt,e.height=n*dt,!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(){return{width:ut*dt,height:ht*dt}},this.setDrawingBufferSize=function(t,n,i){ut=t,ht=n,dt=i,e.width=t*i,e.height=n*i,this.setViewport(0,0,t,n)},this.getCurrentViewport=function(){return at},this.setViewport=function(t,e,n,i){pt.set(t,ht-e-i,n,i),b.viewport(at.copy(pt).multiplyScalar(dt))},this.setScissor=function(t,e,n,i){ft.set(t,ht-e-i,n,i),b.scissor(st.copy(ft).multiplyScalar(dt))},this.setScissorTest=function(t){b.setScissorTest(mt=t)},this.getClearColor=function(){return k.getClearColor()},this.setClearColor=function(){k.setClearColor.apply(k,arguments)},this.getClearAlpha=function(){return k.getClearAlpha()},this.setClearAlpha=function(){k.setClearAlpha.apply(k,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=m.COLOR_BUFFER_BIT),(void 0===e||e)&&(i|=m.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=m.STENCIL_BUFFER_BIT),m.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,n,i){this.setRenderTarget(t),this.clear(e,n,i)},this.dispose=function(){e.removeEventListener("webglcontextlost",Lt,!1),e.removeEventListener("webglcontextrestored",Nt,!1),P.dispose(),R.dispose(),_.dispose(),O.dispose(),Ct.dispose(),zt()},this.renderBufferImmediate=function(t,e,n){b.initAttributes();var i=_.get(t);t.hasPositions&&!i.position&&(i.position=m.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=m.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=m.createBuffer()),t.hasColors&&!i.color&&(i.color=m.createBuffer());var r=e.getAttributes();if(t.hasPositions&&(m.bindBuffer(m.ARRAY_BUFFER,i.position),m.bufferData(m.ARRAY_BUFFER,t.positionArray,m.DYNAMIC_DRAW),b.enableAttribute(r.position),m.vertexAttribPointer(r.position,3,m.FLOAT,!1,0,0)),t.hasNormals){if(m.bindBuffer(m.ARRAY_BUFFER,i.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var o=0,a=3*t.count;o<a;o+=9){var s=t.normalArray,c=(s[o+0]+s[o+3]+s[o+6])/3,l=(s[o+1]+s[o+4]+s[o+7])/3,u=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=c,s[o+1]=l,s[o+2]=u,s[o+3]=c,s[o+4]=l,s[o+5]=u,s[o+6]=c,s[o+7]=l,s[o+8]=u}m.bufferData(m.ARRAY_BUFFER,t.normalArray,m.DYNAMIC_DRAW),b.enableAttribute(r.normal),m.vertexAttribPointer(r.normal,3,m.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(m.bindBuffer(m.ARRAY_BUFFER,i.uv),m.bufferData(m.ARRAY_BUFFER,t.uvArray,m.DYNAMIC_DRAW),b.enableAttribute(r.uv),m.vertexAttribPointer(r.uv,2,m.FLOAT,!1,0,0)),t.hasColors&&n.vertexColors!==A&&(m.bindBuffer(m.ARRAY_BUFFER,i.color),m.bufferData(m.ARRAY_BUFFER,t.colorArray,m.DYNAMIC_DRAW),b.enableAttribute(r.color),m.vertexAttribPointer(r.color,3,m.FLOAT,!1,0,0)),b.disableUnusedAttributes(),m.drawArrays(m.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,i,r,o){var a=r.isMesh&&r.matrixWorld.determinant()<0;b.setMaterial(i,a);var s=Qt(t,e,i,r),c=n.id+"_"+s.id+"_"+(!0===i.wireframe),l=!1;c!==it&&(it=c,l=!0),r.morphTargetInfluences&&(z.update(r,n,i,s),l=!0);var u,h=n.index,d=n.attributes.position,p=1;!0===i.wireframe&&(h=I.getWireframeAttribute(n),p=2);var f=B;null!==h&&(u=N.get(h),(f=F).setIndex(u)),l&&(function(t,e,n){if(!n||!n.isInstancedBufferGeometry||null!==g.get("ANGLE_instanced_arrays")){b.initAttributes();var i=n.attributes,r=e.getAttributes(),o=t.defaultAttributeValues;for(var a in r){var s=r[a];if(s>=0){var c=i[a];if(void 0!==c){var l=c.normalized,u=c.itemSize,h=N.get(c);if(void 0===h)continue;var d=h.buffer,p=h.type,f=h.bytesPerElement;if(c.isInterleavedBufferAttribute){var v=c.data,y=v.stride,A=c.offset;v&&v.isInstancedInterleavedBuffer?(b.enableAttributeAndDivisor(s,v.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=v.meshPerAttribute*v.count)):b.enableAttribute(s),m.bindBuffer(m.ARRAY_BUFFER,d),m.vertexAttribPointer(s,u,p,l,y*f,A*f)}else c.isInstancedBufferAttribute?(b.enableAttributeAndDivisor(s,c.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=c.meshPerAttribute*c.count)):b.enableAttribute(s),m.bindBuffer(m.ARRAY_BUFFER,d),m.vertexAttribPointer(s,u,p,l,0,0)}else if(void 0!==o){var w=o[a];if(void 0!==w)switch(w.length){case 2:m.vertexAttrib2fv(s,w);break;case 3:m.vertexAttrib3fv(s,w);break;case 4:m.vertexAttrib4fv(s,w);break;default:m.vertexAttrib1fv(s,w)}}}}b.disableUnusedAttributes()}}(i,s,n),null!==h&&m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,u.buffer));var v=1/0;null!==h?v=h.count:void 0!==d&&(v=d.count);var y=n.drawRange.start*p,A=n.drawRange.count*p,w=null!==o?o.start*p:0,M=null!==o?o.count*p:1/0,E=Math.max(y,w),x=Math.min(v,y+A,w+M)-1,T=Math.max(0,x-E+1);if(0!==T){if(r.isMesh)if(!0===i.wireframe)b.setLineWidth(i.wireframeLinewidth*Et()),f.setMode(m.LINES);else switch(r.drawMode){case pe:f.setMode(m.TRIANGLES);break;case fe:f.setMode(m.TRIANGLE_STRIP);break;case me:f.setMode(m.TRIANGLE_FAN)}else if(r.isLine){var C=i.linewidth;void 0===C&&(C=1),b.setLineWidth(C*Et()),r.isLineSegments?f.setMode(m.LINES):r.isLineLoop?f.setMode(m.LINE_LOOP):f.setMode(m.LINE_STRIP)}else r.isPoints&&f.setMode(m.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&f.renderInstances(n,E,T):f.render(E,T)}},this.compile=function(t,e){(f=R.get(t,e)).init(),t.traverse(function(t){t.isLight&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))}),f.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)Gt(e.material[n],t.fog,e);else Gt(e.material,t.fog,e)})};var jt,Pt=!1,kt=null;function zt(){Pt=!1}function Bt(){var t=Ct.getDevice();t&&t.isPresenting?t.requestAnimationFrame(Ft):window.requestAnimationFrame(Ft)}function Ft(t){!1!==Pt&&(kt(t),Bt())}function Ut(t,e,n,i){for(var r=0,o=t.length;r<o;r++){var a=t[r],s=a.object,c=a.geometry,l=void 0===i?a.material:i,u=a.group;if(n.isArrayCamera){ot=n;for(var h=n.cameras,d=0,p=h.length;d<p;d++){var f=h[d];if(s.layers.test(f.layers)){var m=f.bounds,g=m.x*ut,v=m.y*ht,y=m.z*ut,A=m.w*ht;b.viewport(at.set(g,v,y,A).multiplyScalar(dt)),Ht(s,e,f,c,l,u)}}}else ot=null,Ht(s,e,n,c,l,u)}}function Ht(t,e,n,i,r,o){if(t.onBeforeRender(G,e,n,i,r,o),f=R.get(e,ot||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var a=t.isMesh&&t.matrixWorld.determinant()<0;b.setMaterial(r,a);var s=Qt(n,e.fog,r,t);it="",function(t,e,n){t.render(function(t){G.renderBufferImmediate(t,e,n)})}(t,s,r)}else G.renderBufferDirect(n,e.fog,i,r,t,o);t.onAfterRender(G,e,n,i,r,o),f=R.get(e,ot||n)}function Gt(t,e,n){var i=_.get(t),r=f.state.lights,o=f.state.shadowsArray,a=j.getParameters(t,r.state,o,e,vt.numPlanes,vt.numIntersection,n),s=j.getProgramCode(t,a),c=i.program,l=!0;if(void 0===c)t.addEventListener("dispose",It);else if(c.code!==s)Ot(t);else if(i.lightsHash!==r.state.hash)_.update(t,"lightsHash",r.state.hash),l=!1;else{if(void 0!==a.shaderID)return;l=!1}if(l){if(a.shaderID){var u=tn[a.shaderID];i.shader={name:t.type,uniforms:Xe.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else i.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(i.shader,G),c=j.acquireProgram(t,i.shader,a,s),i.program=c,t.program=c}var h=c.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var d=0;d<G.maxMorphTargets;d++)h["morphTarget"+d]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals)for(t.numSupportedMorphNormals=0,d=0;d<G.maxMorphNormals;d++)h["morphNormal"+d]>=0&&t.numSupportedMorphNormals++;var p=i.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=vt.numPlanes,i.numIntersection=vt.numIntersection,p.clippingPlanes=vt.uniform),i.fog=e,i.lightsHash=r.state.hash,t.lights&&(p.ambientLightColor.value=r.state.ambient,p.directionalLights.value=r.state.directional,p.spotLights.value=r.state.spot,p.rectAreaLights.value=r.state.rectArea,p.pointLights.value=r.state.point,p.hemisphereLights.value=r.state.hemi,p.directionalShadowMap.value=r.state.directionalShadowMap,p.directionalShadowMatrix.value=r.state.directionalShadowMatrix,p.spotShadowMap.value=r.state.spotShadowMap,p.spotShadowMatrix.value=r.state.spotShadowMatrix,p.pointShadowMap.value=r.state.pointShadowMap,p.pointShadowMatrix.value=r.state.pointShadowMatrix);var m=i.program.getUniforms(),g=Ri.seqWithValue(m.seq,p);i.uniformsList=g}function Qt(t,e,n,i){lt=0;var r=_.get(n),o=f.state.lights;if(yt&&(At||t!==rt)){var a=t===rt&&n.id===et;vt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,r,a)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==e?n.needsUpdate=!0:n.lights&&r.lightsHash!==o.state.hash?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===vt.numPlanes&&r.numIntersection===vt.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(Gt(n,e,i),n.needsUpdate=!1);var s,c,l=!1,u=!1,h=!1,d=r.program,p=d.getUniforms(),g=r.shader.uniforms;if(b.useProgram(d.program)&&(l=!0,u=!0,h=!0),n.id!==et&&(et=n.id,u=!0),l||t!==rt){if(p.setValue(m,"projectionMatrix",t.projectionMatrix),w.logarithmicDepthBuffer&&p.setValue(m,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),rt!==(ot||t)&&(rt=ot||t,u=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var v=p.map.cameraPosition;void 0!==v&&v.setValue(m,bt.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&p.setValue(m,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){p.setOptional(m,i,"bindMatrix"),p.setOptional(m,i,"bindMatrixInverse");var y=i.skeleton;if(y){var A=y.bones;if(w.floatVertexTextures){if(void 0===y.boneTexture){var M=Math.sqrt(4*A.length);M=Te.ceilPowerOfTwo(M),M=Math.max(M,4);var E=new Float32Array(M*M*4);E.set(y.boneMatrices);var x=new He(E,M,M,Rt,Dt);x.needsUpdate=!0,y.boneMatrices=E,y.boneTexture=x,y.boneTextureSize=M}p.setValue(m,"boneTexture",y.boneTexture),p.setValue(m,"boneTextureSize",y.boneTextureSize)}else p.setOptional(m,y,"boneMatrices")}}return u&&(p.setValue(m,"toneMappingExposure",G.toneMappingExposure),p.setValue(m,"toneMappingWhitePoint",G.toneMappingWhitePoint),n.lights&&(c=h,(s=g).ambientLightColor.needsUpdate=c,s.directionalLights.needsUpdate=c,s.pointLights.needsUpdate=c,s.spotLights.needsUpdate=c,s.rectAreaLights.needsUpdate=c,s.hemisphereLights.needsUpdate=c),e&&n.fog&&function(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}(g,e),n.isMeshBasicMaterial?Vt(g,n):n.isMeshLambertMaterial?(Vt(g,n),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(g,n)):n.isMeshPhongMaterial?(Vt(g,n),n.isMeshToonMaterial?function(t,e){Yt(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(g,n):Yt(g,n)):n.isMeshStandardMaterial?(Vt(g,n),n.isMeshPhysicalMaterial?function(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,Wt(t,e)}(g,n):Wt(g,n)):n.isMeshDepthMaterial?(Vt(g,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(g,n)):n.isMeshDistanceMaterial?(Vt(g,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(g,n)):n.isMeshNormalMaterial?(Vt(g,n),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(g,n)):n.isLineBasicMaterial?(function(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}(g,n),n.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(g,n)):n.isPointsMaterial?function(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*dt,t.scale.value=.5*ht,t.map.value=e.map,null!==e.map){if(!0===e.map.matrixAutoUpdate){var n=e.map.offset,i=e.map.repeat,r=e.map.rotation,o=e.map.center;e.map.matrix.setUvTransform(n.x,n.y,i.x,i.y,r,o.x,o.y)}t.uvTransform.value.copy(e.map.matrix)}}(g,n):n.isShadowMaterial&&(g.color.value=n.color,g.opacity.value=n.opacity),void 0!==g.ltc_1&&(g.ltc_1.value=$e.LTC_1),void 0!==g.ltc_2&&(g.ltc_2.value=$e.LTC_2),Ri.upload(m,r.uniformsList,g,G)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Ri.upload(m,r.uniformsList,g,G),n.uniformsNeedUpdate=!1),p.setValue(m,"modelViewMatrix",i.modelViewMatrix),p.setValue(m,"normalMatrix",i.normalMatrix),p.setValue(m,"modelMatrix",i.matrixWorld),d}function Vt(t,e){var n;if(t.opacity.value=e.opacity,e.color&&(t.diffuse.value=e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=_.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n){if(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate){var i=n.offset,r=n.repeat,o=n.rotation,a=n.center;n.matrix.setUvTransform(i.x,i.y,r.x,r.y,o,a.x,a.y)}t.uvTransform.value.copy(n.matrix)}}function Yt(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Wt(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}this.animate=function(t){null!==(kt=t)?Pt||(Bt(),Pt=!0):zt()},this.render=function(t,e,n,i){if(e&&e.isCamera&&!J){it="",et=-1,rt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),Ct.enabled&&(e=Ct.getCamera(e)),(f=R.get(t,e)).init(),t.onBeforeRender(G,t,e,n),wt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),gt.setFromMatrix(wt),At=this.localClippingEnabled,yt=vt.init(this.clippingPlanes,At,e),(u=P.get(t,e)).init(),function t(e,n,i){if(!1!==e.visible){if(e.layers.test(n.layers))if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite)e.frustumCulled&&!gt.intersectsSprite(e)||f.pushSprite(e);else if(e.isImmediateRenderObject)i&&bt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(wt),u.push(e,null,e.material,bt.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||gt.intersectsObject(e))){i&&bt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(wt);var r=O.update(e),o=e.material;if(Array.isArray(o))for(var a=r.groups,s=0,c=a.length;s<c;s++){var l=a[s],h=o[l.materialIndex];h&&h.visible&&u.push(e,r,h,bt.z,l)}else o.visible&&u.push(e,r,o,bt.z,null)}var d=e.children;for(s=0,c=d.length;s<c;s++)t(d[s],n,i)}}(t,e,G.sortObjects),!0===G.sortObjects&&u.sort(),yt&&vt.beginShadows();var r=f.state.shadowsArray;St.render(r,t,e),f.setupLights(e),yt&&vt.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),k.render(u,t,e,i);var o=u.opaque,a=u.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&Ut(o,t,e,s),a.length&&Ut(a,t,e,s)}else o.length&&Ut(o,t,e),a.length&&Ut(a,t,e);var c=f.state.spritesArray;U.render(c,t,e),n&&L.updateRenderTargetMipmap(n),b.buffers.depth.setTest(!0),b.buffers.depth.setMask(!0),b.buffers.color.setMask(!0),b.setPolygonOffset(!1),t.onAfterRender(G,t,e),Ct.enabled&&Ct.submitFrame(),u=null,f=null}},this.allocTextureUnit=function(){var t=lt;return w.maxTextures,lt+=1,t},this.setTexture2D=(jt=!1,function(t,e){t&&t.isWebGLRenderTarget&&(jt||(jt=!0),t=t.texture),L.setTexture2D(t,e)}),this.setTexture=function(){var t=!1;return function(e,n){t||(t=!0),L.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTargetCube&&(t||(t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?L.setTextureCube(e,n):L.setTextureCubeDynamic(e,n)}}(),this.getRenderTarget=function(){return $},this.setRenderTarget=function(t){$=t,t&&void 0===_.get(t).__webglFramebuffer&&L.setupRenderTarget(t);var e=null,n=!1;if(t){var i=_.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(e=i[t.activeCubeFace],n=!0):e=i,at.copy(t.viewport),st.copy(t.scissor),ct=t.scissorTest}else at.copy(pt).multiplyScalar(dt),st.copy(ft).multiplyScalar(dt),ct=mt;if(tt!==e&&(m.bindFramebuffer(m.FRAMEBUFFER,e),tt=e),b.viewport(at),b.scissor(st),b.setScissorTest(ct),n){var r=_.get(t.texture);m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,r.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,n,i,r,o){if(t&&t.isWebGLRenderTarget){var a=_.get(t).__webglFramebuffer;if(a){var s=!1;a!==tt&&(m.bindFramebuffer(m.FRAMEBUFFER,a),s=!0);try{var c=t.texture,l=c.format,u=c.type;if(l!==Rt&&H.convert(l)!==m.getParameter(m.IMPLEMENTATION_COLOR_READ_FORMAT))return;if(!(u===Mt||H.convert(u)===m.getParameter(m.IMPLEMENTATION_COLOR_READ_TYPE)||u===Dt&&(g.get("OES_texture_float")||g.get("WEBGL_color_buffer_float"))||u===_t&&g.get("EXT_color_buffer_half_float")))return;m.checkFramebufferStatus(m.FRAMEBUFFER)===m.FRAMEBUFFER_COMPLETE&&e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&m.readPixels(e,n,i,r,H.convert(l),H.convert(u),o)}finally{s&&m.bindFramebuffer(m.FRAMEBUFFER,tt)}}}},this.copyFramebufferToTexture=function(t,e,n){var i=e.image.width,r=e.image.height,o=H.convert(e.format);this.setTexture2D(e,0),m.copyTexImage2D(m.TEXTURE_2D,n||0,o,t.x,t.y,i,r,0)},this.copyTextureToTexture=function(t,e,n,i){var r=e.image.width,o=e.image.height,a=H.convert(n.format),s=H.convert(n.type),c=e.isDataTexture?e.image.data:e.image;this.setTexture2D(n,0),m.texSubImage2D(m.TEXTURE_2D,i||0,t.x,t.y,r,o,a,s,c)}}function fr(t,e){this.name="",this.color=new Ke(t),this.density=void 0!==e?e:25e-5}function mr(t,e,n){this.name="",this.color=new Ke(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function gr(){ln.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function vr(t){Gn.call(this),this.type="SpriteMaterial",this.color=new Ke(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function yr(t){ln.call(this),this.type="Sprite",this.material=void 0!==t?t:new vr,this.center=new Ce(.5,.5)}function Ar(){ln.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function wr(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Se)}}function br(){ln.call(this),this.type="Bone"}function Mr(t,e){Xn.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Se,this.bindMatrixInverse=new Se;var n=new wr(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function Er(t){Gn.call(this),this.type="LineBasicMaterial",this.color=new Ke(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function xr(t,e,n){if(1===n)return new Tr(t,e);ln.call(this),this.type="Line",this.geometry=void 0!==t?t:new Ln,this.material=void 0!==e?e:new Er({color:16777215*Math.random()})}function Tr(t,e){xr.call(this,t,e),this.type="LineSegments"}function Cr(t,e){xr.call(this,t,e),this.type="LineLoop"}function Sr(t){Gn.call(this),this.type="PointsMaterial",this.color=new Ke(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function Dr(t,e){ln.call(this),this.type="Points",this.geometry=void 0!==t?t:new Ln,this.material=void 0!==e?e:new Sr({color:16777215*Math.random()})}function _r(){ln.call(this),this.type="Group"}function Lr(t,e,n,i,r,o,a,s,c){ze.call(this,t,e,n,i,r,o,a,s,c),this.generateMipmaps=!1}function Nr(t,e,n,i,r,o,a,s,c,l,u,h){ze.call(this,null,o,a,s,c,l,i,r,u,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Ir(t,e,n,i,r,o,a,s,c,l){if((l=void 0!==l?l:Ft)!==Ft&&l!==Ut)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===Ft&&(n=Tt),void 0===n&&l===Ut&&(n=Ot),ze.call(this,null,i,r,o,a,s,l,n,c),this.image={width:t,height:e},this.magFilter=void 0!==a?a:gt,this.minFilter=void 0!==s?s:gt,this.flipY=!1,this.generateMipmaps=!1}function Or(t){Ln.call(this),this.type="WireframeGeometry";var e,n,i,r,o,a,s,c,l,u,h=[],d=[0,0],p={},f=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,i=m.length;e<i;e++){var g=m[e];for(n=0;n<3;n++)s=g[f[n]],c=g[f[(n+1)%3]],d[0]=Math.min(s,c),d[1]=Math.max(s,c),void 0===p[l=d[0]+","+d[1]]&&(p[l]={index1:d[0],index2:d[1]})}for(l in p)a=p[l],u=t.vertices[a.index1],h.push(u.x,u.y,u.z),u=t.vertices[a.index2],h.push(u.x,u.y,u.z)}else if(t&&t.isBufferGeometry){var v,y,A,w,b,M,E;if(u=new _e,null!==t.index){for(v=t.attributes.position,y=t.index,0===(A=t.groups).length&&(A=[{start:0,count:y.count,materialIndex:0}]),r=0,o=A.length;r<o;++r)for(e=b=(w=A[r]).start,i=b+w.count;e<i;e+=3)for(n=0;n<3;n++)s=y.getX(e+n),c=y.getX(e+(n+1)%3),d[0]=Math.min(s,c),d[1]=Math.max(s,c),void 0===p[l=d[0]+","+d[1]]&&(p[l]={index1:d[0],index2:d[1]});for(l in p)a=p[l],u.fromBufferAttribute(v,a.index1),h.push(u.x,u.y,u.z),u.fromBufferAttribute(v,a.index2),h.push(u.x,u.y,u.z)}else for(e=0,i=(v=t.attributes.position).count/3;e<i;e++)for(n=0;n<3;n++)M=3*e+n,u.fromBufferAttribute(v,M),h.push(u.x,u.y,u.z),E=3*e+(n+1)%3,u.fromBufferAttribute(v,E),h.push(u.x,u.y,u.z)}this.addAttribute("position",new Tn(h,3))}function jr(t,e,n){gn.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new Pr(t,e,n)),this.mergeVertices()}function Pr(t,e,n){Ln.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i,r,o=[],a=[],s=[],c=[],l=new _e,u=new _e,h=new _e,d=new _e,p=new _e,f=e+1;for(i=0;i<=n;i++){var m=i/n;for(r=0;r<=e;r++){var g=r/e;t(g,m,u),a.push(u.x,u.y,u.z),g-1e-5>=0?(t(g-1e-5,m,h),d.subVectors(u,h)):(t(g+1e-5,m,h),d.subVectors(h,u)),m-1e-5>=0?(t(g,m-1e-5,h),p.subVectors(u,h)):(t(g,m+1e-5,h),p.subVectors(h,u)),l.crossVectors(d,p).normalize(),s.push(l.x,l.y,l.z),c.push(g,m)}}for(i=0;i<n;i++)for(r=0;r<e;r++){var v=i*f+r,y=i*f+r+1,A=(i+1)*f+r+1,w=(i+1)*f+r;o.push(v,y,w),o.push(y,A,w)}this.setIndex(o),this.addAttribute("position",new Tn(a,3)),this.addAttribute("normal",new Tn(s,3)),this.addAttribute("uv",new Tn(c,2))}function Rr(t,e,n,i){gn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new kr(t,e,n,i)),this.mergeVertices()}function kr(t,e,n,i){Ln.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},n=n||1;var r=[],o=[];function a(t,e,n,i){var r,o,a=Math.pow(2,i),c=[];for(r=0;r<=a;r++){c[r]=[];var l=t.clone().lerp(n,r/a),u=e.clone().lerp(n,r/a),h=a-r;for(o=0;o<=h;o++)c[r][o]=0===o&&r===a?l:l.clone().lerp(u,o/h)}for(r=0;r<a;r++)for(o=0;o<2*(a-r)-1;o++){var d=Math.floor(o/2);o%2==0?(s(c[r][d+1]),s(c[r+1][d]),s(c[r][d])):(s(c[r][d+1]),s(c[r+1][d+1]),s(c[r+1][d]))}}function s(t){r.push(t.x,t.y,t.z)}function c(e,n){var i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function l(t,e,n,i){i<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=i/2/Math.PI+.5)}function u(t){return Math.atan2(t.z,-t.x)}!function(t){for(var n=new _e,i=new _e,r=new _e,o=0;o<e.length;o+=3)c(e[o+0],n),c(e[o+1],i),c(e[o+2],r),a(n,i,r,t)}(i=i||0),function(t){for(var e=new _e,n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}(n),function(){for(var t=new _e,e=0;e<r.length;e+=3){t.x=r[e+0],t.y=r[e+1],t.z=r[e+2];var n=u(t)/2/Math.PI+.5,i=(a=t,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(n,1-i)}var a;(function(){for(var t=new _e,e=new _e,n=new _e,i=new _e,a=new Ce,s=new Ce,c=new Ce,h=0,d=0;h<r.length;h+=9,d+=6){t.set(r[h+0],r[h+1],r[h+2]),e.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),c.set(o[d+4],o[d+5]),i.copy(t).add(e).add(n).divideScalar(3);var p=u(i);l(a,d+0,t,p),l(s,d+2,e,p),l(c,d+4,n,p)}})(),function(){for(var t=0;t<o.length;t+=6){var e=o[t+0],n=o[t+2],i=o[t+4],r=Math.max(e,n,i),a=Math.min(e,n,i);r>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),i<.2&&(o[t+4]+=1))}}()}(),this.addAttribute("position",new Tn(r,3)),this.addAttribute("normal",new Tn(r.slice(),3)),this.addAttribute("uv",new Tn(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function zr(t,e){gn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Br(t,e)),this.mergeVertices()}function Br(t,e){kr.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Fr(t,e){gn.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ur(t,e)),this.mergeVertices()}function Ur(t,e){kr.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Hr(t,e){gn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Gr(t,e)),this.mergeVertices()}function Gr(t,e){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];kr.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Qr(t,e){gn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Vr(t,e)),this.mergeVertices()}function Vr(t,e){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];kr.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Yr(t,e,n,i,r,o){gn.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r};var a=new Wr(t,e,n,i,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Wr(t,e,n,i,r){Ln.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},e=e||64,n=n||1,i=i||8,r=r||!1;var o=t.computeFrenetFrames(e,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,c=new _e,l=new _e,u=new Ce,h=new _e,d=[],p=[],f=[],m=[];function g(r){h=t.getPointAt(r/e,h);var a=o.normals[r],u=o.binormals[r];for(s=0;s<=i;s++){var f=s/i*Math.PI*2,m=Math.sin(f),g=-Math.cos(f);l.x=g*a.x+m*u.x,l.y=g*a.y+m*u.y,l.z=g*a.z+m*u.z,l.normalize(),p.push(l.x,l.y,l.z),c.x=h.x+n*l.x,c.y=h.y+n*l.y,c.z=h.z+n*l.z,d.push(c.x,c.y,c.z)}}!function(){for(a=0;a<e;a++)g(a);g(!1===r?e:0),function(){for(a=0;a<=e;a++)for(s=0;s<=i;s++)u.x=a/e,u.y=s/i,f.push(u.x,u.y)}(),function(){for(s=1;s<=e;s++)for(a=1;a<=i;a++){var t=(i+1)*(s-1)+(a-1),n=(i+1)*s+(a-1),r=(i+1)*s+a,o=(i+1)*(s-1)+a;m.push(t,n,o),m.push(n,r,o)}}()}(),this.setIndex(m),this.addAttribute("position",new Tn(d,3)),this.addAttribute("normal",new Tn(p,3)),this.addAttribute("uv",new Tn(f,2))}function qr(t,e,n,i,r,o,a){gn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},this.fromBufferGeometry(new Xr(t,e,n,i,r,o)),this.mergeVertices()}function Xr(t,e,n,i,r,o){Ln.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},t=t||1,e=e||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,o=o||3;var a,s,c=[],l=[],u=[],h=[],d=new _e,p=new _e,f=new _e,m=new _e,g=new _e,v=new _e,y=new _e;for(a=0;a<=n;++a){var A=a/n*r*Math.PI*2;for(S(A,r,o,t,f),S(A+.01,r,o,t,m),v.subVectors(m,f),y.addVectors(m,f),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),s=0;s<=i;++s){var w=s/i*Math.PI*2,b=-e*Math.cos(w),M=e*Math.sin(w);d.x=f.x+(b*y.x+M*g.x),d.y=f.y+(b*y.y+M*g.y),d.z=f.z+(b*y.z+M*g.z),l.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),u.push(p.x,p.y,p.z),h.push(a/n),h.push(s/i)}}for(s=1;s<=n;s++)for(a=1;a<=i;a++){var E=(i+1)*(s-1)+(a-1),x=(i+1)*s+(a-1),T=(i+1)*s+a,C=(i+1)*(s-1)+a;c.push(E,x,C),c.push(x,T,C)}function S(t,e,n,i,r){var o=Math.cos(t),a=Math.sin(t),s=n/e*t,c=Math.cos(s);r.x=i*(2+c)*.5*o,r.y=i*(2+c)*a*.5,r.z=i*Math.sin(s)*.5}this.setIndex(c),this.addAttribute("position",new Tn(l,3)),this.addAttribute("normal",new Tn(u,3)),this.addAttribute("uv",new Tn(h,2))}function Zr(t,e,n,i,r){gn.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Kr(t,e,n,i,r)),this.mergeVertices()}function Kr(t,e,n,i,r){Ln.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||1,e=e||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var o,a,s=[],c=[],l=[],u=[],h=new _e,d=new _e,p=new _e;for(o=0;o<=n;o++)for(a=0;a<=i;a++){var f=a/i*r,m=o/n*Math.PI*2;d.x=(t+e*Math.cos(m))*Math.cos(f),d.y=(t+e*Math.cos(m))*Math.sin(f),d.z=e*Math.sin(m),c.push(d.x,d.y,d.z),h.x=t*Math.cos(f),h.y=t*Math.sin(f),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),u.push(a/i),u.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=i;a++){var g=(i+1)*o+a-1,v=(i+1)*(o-1)+a-1,y=(i+1)*(o-1)+a,A=(i+1)*o+a;s.push(g,v,A),s.push(v,y,A)}this.setIndex(s),this.addAttribute("position",new Tn(c,3)),this.addAttribute("normal",new Tn(l,3)),this.addAttribute("uv",new Tn(u,2))}function Jr(t,e,n,i,r){var o,a;if(r===function(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}(t,e,n,i)>0)for(o=e;o<n;o+=i)a=vo(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=vo(o,t[o],t[o+1],a);return a&&po(a,a.next)&&(yo(a),a=a.next),a}function $r(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!po(i,i.next)&&0!==ho(i.prev,i,i.next))i=i.next;else{if(yo(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function to(t,e,n,i,r,o,a){if(t){!a&&o&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=so(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,c,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<l&&(s++,i=i.nextZ);e++);for(c=l;s>0||c>0&&i;)0!==s&&(0===c||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,c--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(a>1)}(r)}(t,i,r,o);for(var s,c,l=t;t.prev!==t.next;)if(s=t.prev,c=t.next,o?no(t,i,r,o):eo(t))e.push(s.i/n),e.push(t.i/n),e.push(c.i/n),yo(t),t=c.next,l=c.next;else if((t=c)===l){a?1===a?to(t=io(t,e,n),e,n,i,r,o,2):2===a&&ro(t,e,n,i,r,o):to($r(t),e,n,i,r,o,1);break}}}function eo(t){var e=t.prev,n=t,i=t.next;if(ho(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(lo(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&ho(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function no(t,e,n,i){var r=t.prev,o=t,a=t.next;if(ho(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,c=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,l=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=so(s,c,e,n,i),d=so(l,u,e,n,i),p=t.nextZ;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&lo(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ho(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&lo(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ho(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function io(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!po(r,o)&&fo(r,i,i.next,o)&&mo(r,o)&&mo(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),yo(i),yo(i.next),i=t=o),i=i.next}while(i!==t);return i}function ro(t,e,n,i,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&uo(a,s)){var c=go(a,s);return a=$r(a,a.next),c=$r(c,c.next),to(a,e,n,i,r,o),void to(c,e,n,i,r,o)}s=s.next}a=a.next}while(a!==t)}function oo(t,e){return t.x-e.x}function ao(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n.prev;var c,l=n,u=n.x,h=n.y,d=1/0;for(i=n.next;i!==l;)r>=i.x&&i.x>=u&&r!==i.x&&lo(o<h?r:a,o,u,h,o<h?a:r,o,i.x,i.y)&&((c=Math.abs(o-i.y)/(r-i.x))<d||c===d&&i.x>n.x)&&mo(i,t)&&(n=i,d=c),i=i.next;return n}(t,e)){var n=go(e,t);$r(n,n.next)}}function so(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function co(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function lo(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function uo(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&fo(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&mo(t,e)&&mo(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}function ho(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function po(t,e){return t.x===e.x&&t.y===e.y}function fo(t,e,n,i){return!!(po(t,e)&&po(n,i)||po(t,i)&&po(n,e))||ho(t,e,n)>0!=ho(t,e,i)>0&&ho(n,i,t)>0!=ho(n,i,e)>0}function mo(t,e){return ho(t.prev,t,t.next)<0?ho(t,e,t.next)>=0&&ho(t,t.prev,e)>=0:ho(t,e,t.prev)<0||ho(t,t.next,e)<0}function go(t,e){var n=new Ao(t.i,t.x,t.y),i=new Ao(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function vo(t,e,n,i){var r=new Ao(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function yo(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ao(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}rr.prototype=Object.create(Gn.prototype),rr.prototype.constructor=rr,rr.prototype.isMeshDepthMaterial=!0,rr.prototype.copy=function(t){return Gn.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},or.prototype=Object.create(Gn.prototype),or.prototype.constructor=or,or.prototype.isMeshDistanceMaterial=!0,or.prototype.copy=function(t){return Gn.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},sr.prototype=Object.create(ze.prototype),sr.prototype.constructor=sr,ur.prototype=Object.assign(Object.create(un.prototype),{constructor:ur,isPerspectiveCamera:!0,copy:function(t,e){return un.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Te.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Te.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Te.RAD2DEG*Math.atan(Math.tan(.5*Te.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Te.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;r+=o.offsetX*i/a,e-=o.offsetY*n/s,i*=o.width/a,n*=o.height/s}var c=this.filmOffset;0!==c&&(r+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far)},toJSON:function(t){var e=ln.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),hr.prototype=Object.assign(Object.create(ur.prototype),{constructor:hr,isArrayCamera:!0}),fr.prototype.isFogExp2=!0,fr.prototype.clone=function(){return new fr(this.color.getHex(),this.density)},fr.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},mr.prototype.isFog=!0,mr.prototype.clone=function(){return new mr(this.color.getHex(),this.near,this.far)},mr.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},gr.prototype=Object.assign(Object.create(ln.prototype),{constructor:gr,copy:function(t,e){return ln.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=ln.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}),vr.prototype=Object.create(Gn.prototype),vr.prototype.constructor=vr,vr.prototype.isSpriteMaterial=!0,vr.prototype.copy=function(t){return Gn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},yr.prototype=Object.assign(Object.create(ln.prototype),{constructor:yr,isSprite:!0,raycast:(Xi=new _e,Zi=new _e,Ki=new _e,function(t,e){Zi.setFromMatrixPosition(this.matrixWorld),t.ray.closestPointToPoint(Zi,Xi),Ki.setFromMatrixScale(this.matrixWorld);var n=Ki.x*Ki.y/4;if(!(Zi.distanceToSquared(Xi)>n)){var i=t.ray.origin.distanceTo(Xi);i<t.near||i>t.far||e.push({distance:i,point:Xi.clone(),face:null,object:this})}}),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return ln.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),Ar.prototype=Object.assign(Object.create(ln.prototype),{constructor:Ar,copy:function(t){ln.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++);n.splice(i,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object},raycast:(Ji=new _e,function(t,e){Ji.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(Ji);this.getObjectForDistance(n).raycast(t,e)}),update:function(){var t=new _e,e=new _e;return function(n){var i=this.levels;if(i.length>1){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var r=t.distanceTo(e);i[0].object.visible=!0;for(var o=1,a=i.length;o<a&&r>=i[o].distance;o++)i[o-1].object.visible=!1,i[o].object.visible=!0;for(;o<a;o++)i[o].object.visible=!1}}}(),toJSON:function(t){var e=ln.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var o=n[i];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),Object.assign(wr.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new Se;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:($i=new Se,tr=new Se,function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,o=t.length;r<o;r++){var a=t[r]?t[r].matrixWorld:tr;$i.multiplyMatrices(a,e[r]),$i.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)}),clone:function(){return new wr(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}}}),br.prototype=Object.assign(Object.create(ln.prototype),{constructor:br,isBone:!0}),Mr.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Mr,isSkinnedMesh:!0,initBones:function(){var t,e,n,i,r=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,i=this.geometry.bones.length;n<i;n++)e=this.geometry.bones[n],t=new br,r.push(t),t.name=e.name,t.position.fromArray(e.pos),t.quaternion.fromArray(e.rotq),void 0!==e.scl&&t.scale.fromArray(e.scl);for(n=0,i=this.geometry.bones.length;n<i;n++)-1!==(e=this.geometry.bones[n]).parent&&null!==e.parent&&void 0!==r[e.parent]?r[e.parent].add(r[n]):this.add(r[n])}return this.updateMatrixWorld(!0),r},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var t,e;if(this.geometry&&this.geometry.isGeometry)for(e=0;e<this.geometry.skinWeights.length;e++){var n=this.geometry.skinWeights[e];(t=1/n.manhattanLength())!=1/0?n.multiplyScalar(t):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new Be,r=this.geometry.attributes.skinWeight;for(e=0;e<r.count;e++)i.x=r.getX(e),i.y=r.getY(e),i.z=r.getZ(e),i.w=r.getW(e),(t=1/i.manhattanLength())!=1/0?i.multiplyScalar(t):i.set(1,0,0,0),r.setXYZW(e,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(t){Xn.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode&&this.bindMatrixInverse.getInverse(this.bindMatrix)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Er.prototype=Object.create(Gn.prototype),Er.prototype.constructor=Er,Er.prototype.isLineBasicMaterial=!0,Er.prototype.copy=function(t){return Gn.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},xr.prototype=Object.assign(Object.create(ln.prototype),{constructor:xr,isLine:!0,computeLineDistances:(er=new _e,nr=new _e,function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)er.fromBufferAttribute(e,i-1),nr.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=er.distanceTo(nr);t.addAttribute("lineDistance",new Tn(n,1))}}else if(t.isGeometry){var o=t.vertices;for((n=t.lineDistances)[0]=0,i=1,r=o.length;i<r;i++)n[i]=n[i-1],n[i]+=o[i-1].distanceTo(o[i])}return this}),raycast:function(){var t=new Se,e=new Yn,n=new Qe;return function(i,r){var o=i.linePrecision,a=o*o,s=this.geometry,c=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(c),!1!==i.ray.intersectsSphere(n)){t.getInverse(c),e.copy(i.ray).applyMatrix4(t);var l=new _e,u=new _e,h=new _e,d=new _e,p=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var f=s.index,m=s.attributes.position.array;if(null!==f)for(var g=f.array,v=0,y=g.length-1;v<y;v+=p){var A=g[v],w=g[v+1];l.fromArray(m,3*A),u.fromArray(m,3*w),e.distanceSqToSegment(l,u,d,h)>a||(d.applyMatrix4(this.matrixWorld),(E=i.ray.origin.distanceTo(d))<i.near||E>i.far||r.push({distance:E,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this}))}else for(v=0,y=m.length/3-1;v<y;v+=p)l.fromArray(m,3*v),u.fromArray(m,3*v+3),e.distanceSqToSegment(l,u,d,h)>a||(d.applyMatrix4(this.matrixWorld),(E=i.ray.origin.distanceTo(d))<i.near||E>i.far||r.push({distance:E,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this}))}else if(s.isGeometry){var b=s.vertices,M=b.length;for(v=0;v<M-1;v+=p){var E;e.distanceSqToSegment(b[v],b[v+1],d,h)>a||(d.applyMatrix4(this.matrixWorld),(E=i.ray.origin.distanceTo(d))<i.near||E>i.far||r.push({distance:E,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Tr.prototype=Object.assign(Object.create(xr.prototype),{constructor:Tr,isLineSegments:!0,computeLineDistances:function(){var t=new _e,e=new _e;return function(){var n=this.geometry;if(n.isBufferGeometry){if(null===n.index){for(var i=n.attributes.position,r=[],o=0,a=i.count;o<a;o+=2)t.fromBufferAttribute(i,o),e.fromBufferAttribute(i,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+t.distanceTo(e);n.addAttribute("lineDistance",new Tn(r,1))}}else if(n.isGeometry){var s=n.vertices;for(r=n.lineDistances,o=0,a=s.length;o<a;o+=2)t.copy(s[o]),e.copy(s[o+1]),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+t.distanceTo(e)}return this}}()}),Cr.prototype=Object.assign(Object.create(xr.prototype),{constructor:Cr,isLineLoop:!0}),Sr.prototype=Object.create(Gn.prototype),Sr.prototype.constructor=Sr,Sr.prototype.isPointsMaterial=!0,Sr.prototype.copy=function(t){return Gn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},Dr.prototype=Object.assign(Object.create(ln.prototype),{constructor:Dr,isPoints:!0,raycast:function(){var t=new Se,e=new Yn,n=new Qe;return function(i,r){var o=this,a=this.geometry,s=this.matrixWorld,c=i.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=c,!1!==i.ray.intersectsSphere(n)){t.getInverse(s),e.copy(i.ray).applyMatrix4(t);var l=c/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=new _e,d=new _e;if(a.isBufferGeometry){var p=a.index,f=a.attributes.position.array;if(null!==p)for(var m=p.array,g=0,v=m.length;g<v;g++){var y=m[g];h.fromArray(f,3*y),b(h,y)}else{g=0;for(var A=f.length/3;g<A;g++)h.fromArray(f,3*g),b(h,g)}}else{var w=a.vertices;for(g=0,A=w.length;g<A;g++)b(w[g],g)}}function b(t,n){var a=e.distanceSqToPoint(t);if(a<u){e.closestPointToPoint(t,d),d.applyMatrix4(s);var c=i.ray.origin.distanceTo(d);if(c<i.near||c>i.far)return;r.push({distance:c,distanceToRay:Math.sqrt(a),point:d.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),_r.prototype=Object.assign(Object.create(ln.prototype),{constructor:_r,isGroup:!0}),Lr.prototype=Object.assign(Object.create(ze.prototype),{constructor:Lr,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Nr.prototype=Object.create(ze.prototype),Nr.prototype.constructor=Nr,Nr.prototype.isCompressedTexture=!0,Ir.prototype=Object.create(ze.prototype),Ir.prototype.constructor=Ir,Ir.prototype.isDepthTexture=!0,Or.prototype=Object.create(Ln.prototype),Or.prototype.constructor=Or,jr.prototype=Object.create(gn.prototype),jr.prototype.constructor=jr,Pr.prototype=Object.create(Ln.prototype),Pr.prototype.constructor=Pr,Rr.prototype=Object.create(gn.prototype),Rr.prototype.constructor=Rr,kr.prototype=Object.create(Ln.prototype),kr.prototype.constructor=kr,zr.prototype=Object.create(gn.prototype),zr.prototype.constructor=zr,Br.prototype=Object.create(kr.prototype),Br.prototype.constructor=Br,Fr.prototype=Object.create(gn.prototype),Fr.prototype.constructor=Fr,Ur.prototype=Object.create(kr.prototype),Ur.prototype.constructor=Ur,Hr.prototype=Object.create(gn.prototype),Hr.prototype.constructor=Hr,Gr.prototype=Object.create(kr.prototype),Gr.prototype.constructor=Gr,Qr.prototype=Object.create(gn.prototype),Qr.prototype.constructor=Qr,Vr.prototype=Object.create(kr.prototype),Vr.prototype.constructor=Vr,Yr.prototype=Object.create(gn.prototype),Yr.prototype.constructor=Yr,Wr.prototype=Object.create(Ln.prototype),Wr.prototype.constructor=Wr,qr.prototype=Object.create(gn.prototype),qr.prototype.constructor=qr,Xr.prototype=Object.create(Ln.prototype),Xr.prototype.constructor=Xr,Zr.prototype=Object.create(gn.prototype),Zr.prototype.constructor=Zr,Kr.prototype=Object.create(Ln.prototype),Kr.prototype.constructor=Kr;var wo={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return wo.area(t)<0},triangulateShape:function(t,e){var n=[],i=[],r=[];bo(t),Mo(n,t);var o=t.length;e.forEach(bo);for(var a=0;a<e.length;a++)i.push(o),o+=e[a].length,Mo(n,e[a]);var s=function(t,e,n){n=n||2;var i,r,o,a,s,c,l,u=e&&e.length,h=u?e[0]*n:t.length,d=Jr(t,0,h,n,!0),p=[];if(!d)return p;if(u&&(d=function(t,e,n,i){var r,o,a,s=[];for(r=0,o=e.length;r<o;r++)(a=Jr(t,e[r]*i,r<o-1?e[r+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),s.push(co(a));for(s.sort(oo),r=0;r<s.length;r++)ao(s[r],n),n=$r(n,n.next);return n}(t,e,d,n)),t.length>80*n){i=o=t[0],r=a=t[1];for(var f=n;f<h;f+=n)c=t[f+1],(s=t[f])<i&&(i=s),c<r&&(r=c),s>o&&(o=s),c>a&&(a=c);l=0!==(l=Math.max(o-i,a-r))?1/l:0}return to(d,p,n,i,r,l),p}(n,i);for(a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}};function bo(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Mo(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function Eo(t,e){gn.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new xo(t,e)),this.mergeVertices()}function xo(t,e){void 0!==t&&(Ln.call(this),this.type="ExtrudeBufferGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),this.computeVertexNormals())}function To(t,e){gn.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Co(t,e)),this.mergeVertices()}function Co(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return new gn;var i=n.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),xo.call(this,i,e),this.type="TextBufferGeometry"}function So(t,e,n,i,r,o,a){gn.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Do(t,e,n,i,r,o,a)),this.mergeVertices()}function Do(t,e,n,i,r,o,a){Ln.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var s,c,l=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),u=0,h=[],d=new _e,p=new _e,f=[],m=[],g=[],v=[];for(c=0;c<=n;c++){var y=[],A=c/n;for(s=0;s<=e;s++){var w=s/e;d.x=-t*Math.cos(i+w*r)*Math.sin(o+A*a),d.y=t*Math.cos(o+A*a),d.z=t*Math.sin(i+w*r)*Math.sin(o+A*a),m.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),g.push(p.x,p.y,p.z),v.push(w,1-A),y.push(u++)}h.push(y)}for(c=0;c<n;c++)for(s=0;s<e;s++){var b=h[c][s+1],M=h[c][s],E=h[c+1][s],x=h[c+1][s+1];(0!==c||o>0)&&f.push(b,M,x),(c!==n-1||l<Math.PI)&&f.push(M,E,x)}this.setIndex(f),this.addAttribute("position",new Tn(m,3)),this.addAttribute("normal",new Tn(g,3)),this.addAttribute("uv",new Tn(v,2))}function _o(t,e,n,i,r,o){gn.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new Lo(t,e,n,i,r,o)),this.mergeVertices()}function Lo(t,e,n,i,r,o){Ln.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},t=t||.5,e=e||1,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,c,l=[],u=[],h=[],d=[],p=t,f=(e-t)/(i=void 0!==i?Math.max(1,i):1),m=new _e,g=new Ce;for(s=0;s<=i;s++){for(c=0;c<=n;c++)a=r+c/n*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),u.push(m.x,m.y,m.z),h.push(0,0,1),g.x=(m.x/e+1)/2,g.y=(m.y/e+1)/2,d.push(g.x,g.y);p+=f}for(s=0;s<i;s++){var v=s*(n+1);for(c=0;c<n;c++){var y=a=c+v,A=a+n+1,w=a+n+2,b=a+1;l.push(y,A,b),l.push(A,w,b)}}this.setIndex(l),this.addAttribute("position",new Tn(u,3)),this.addAttribute("normal",new Tn(h,3)),this.addAttribute("uv",new Tn(d,2))}function No(t,e,n,i){gn.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new Io(t,e,n,i)),this.mergeVertices()}function Io(t,e,n,i){Ln.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e)||12,n=n||0,i=i||2*Math.PI,i=Te.clamp(i,0,2*Math.PI);var r,o,a,s=[],c=[],l=[],u=1/e,h=new _e,d=new Ce;for(o=0;o<=e;o++){var p=n+o*u*i,f=Math.sin(p),m=Math.cos(p);for(a=0;a<=t.length-1;a++)h.x=t[a].x*f,h.y=t[a].y,h.z=t[a].x*m,c.push(h.x,h.y,h.z),d.x=o/e,d.y=a/(t.length-1),l.push(d.x,d.y)}for(o=0;o<e;o++)for(a=0;a<t.length-1;a++){var g=r=a+o*t.length,v=r+t.length,y=r+t.length+1,A=r+1;s.push(g,v,A),s.push(v,y,A)}if(this.setIndex(s),this.addAttribute("position",new Tn(c,3)),this.addAttribute("uv",new Tn(l,2)),this.computeVertexNormals(),i===2*Math.PI){var w=this.attributes.normal.array,b=new _e,M=new _e,E=new _e;for(r=e*t.length*3,o=0,a=0;o<t.length;o++,a+=3)b.x=w[a+0],b.y=w[a+1],b.z=w[a+2],M.x=w[r+a+0],M.y=w[r+a+1],M.z=w[r+a+2],E.addVectors(b,M).normalize(),w[a+0]=w[r+a+0]=E.x,w[a+1]=w[r+a+1]=E.y,w[a+2]=w[r+a+2]=E.z}}function Oo(t,e){gn.call(this),this.type="ShapeGeometry","object"==typeof e&&(e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new jo(t,e)),this.mergeVertices()}function jo(t,e){Ln.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],i=[],r=[],o=[],a=0,s=0;if(!1===Array.isArray(t))l(t);else for(var c=0;c<t.length;c++)l(t[c]),this.addGroup(a,s,c),a+=s,s=0;function l(t){var a,c,l,u=i.length/3,h=t.extractPoints(e),d=h.shape,p=h.holes;if(!1===wo.isClockWise(d))for(d=d.reverse(),a=0,c=p.length;a<c;a++)l=p[a],!0===wo.isClockWise(l)&&(p[a]=l.reverse());var f=wo.triangulateShape(d,p);for(a=0,c=p.length;a<c;a++)l=p[a],d=d.concat(l);for(a=0,c=d.length;a<c;a++){var m=d[a];i.push(m.x,m.y,0),r.push(0,0,1),o.push(m.x,m.y)}for(a=0,c=f.length;a<c;a++){var g=f[a],v=g[0]+u,y=g[1]+u,A=g[2]+u;n.push(v,y,A),s+=3}}this.setIndex(n),this.addAttribute("position",new Tn(i,3)),this.addAttribute("normal",new Tn(r,3)),this.addAttribute("uv",new Tn(o,2))}function Po(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}function Ro(t,e){Ln.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,i,r,o,a=[],s=Math.cos(Te.DEG2RAD*e),c=[0,0],l={},u=["a","b","c"];t.isBufferGeometry?(o=new gn).fromBufferGeometry(t):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,d=o.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],g=0;g<3;g++)n=m[u[g]],i=m[u[(g+1)%3]],c[0]=Math.min(n,i),c[1]=Math.max(n,i),void 0===l[r=c[0]+","+c[1]]?l[r]={index1:c[0],index2:c[1],face1:p,face2:void 0}:l[r].face2=p;for(r in l){var v=l[r];if(void 0===v.face2||d[v.face1].normal.dot(d[v.face2].normal)<=s){var y=h[v.index1];a.push(y.x,y.y,y.z),y=h[v.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new Tn(a,3))}function ko(t,e,n,i,r,o,a,s){gn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new zo(t,e,n,i,r,o,a,s)),this.mergeVertices()}function zo(t,e,n,i,r,o,a,s){Ln.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};var c=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var l=[],u=[],h=[],d=[],p=0,f=[],m=n/2,g=0;function v(n){var r,o,f,v=new Ce,y=new _e,A=0,w=!0===n?t:e,b=!0===n?1:-1;for(o=p,r=1;r<=i;r++)u.push(0,m*b,0),h.push(0,b,0),d.push(.5,.5),p++;for(f=p,r=0;r<=i;r++){var M=r/i*s+a,E=Math.cos(M),x=Math.sin(M);y.x=w*x,y.y=m*b,y.z=w*E,u.push(y.x,y.y,y.z),h.push(0,b,0),v.x=.5*E+.5,v.y=.5*x*b+.5,d.push(v.x,v.y),p++}for(r=0;r<i;r++){var T=o+r,C=f+r;!0===n?l.push(C,C+1,T):l.push(C+1,C,T),A+=3}c.addGroup(g,A,!0===n?1:2),g+=A}!function(){var o,v,y=new _e,A=new _e,w=0,b=(e-t)/n;for(v=0;v<=r;v++){var M=[],E=v/r,x=E*(e-t)+t;for(o=0;o<=i;o++){var T=o/i,C=T*s+a,S=Math.sin(C),D=Math.cos(C);A.x=x*S,A.y=-E*n+m,A.z=x*D,u.push(A.x,A.y,A.z),y.set(S,b,D).normalize(),h.push(y.x,y.y,y.z),d.push(T,1-E),M.push(p++)}f.push(M)}for(o=0;o<i;o++)for(v=0;v<r;v++){var _=f[v][o],L=f[v+1][o],N=f[v+1][o+1],I=f[v][o+1];l.push(_,L,I),l.push(L,N,I),w+=6}c.addGroup(g,w,0),g+=w}(),!1===o&&(t>0&&v(!0),e>0&&v(!1)),this.setIndex(l),this.addAttribute("position",new Tn(u,3)),this.addAttribute("normal",new Tn(h,3)),this.addAttribute("uv",new Tn(d,2))}function Bo(t,e,n,i,r,o,a){ko.call(this,0,t,e,n,i,r,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function Fo(t,e,n,i,r,o,a){zo.call(this,0,t,e,n,i,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function Uo(t,e,n,i){gn.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new Ho(t,e,n,i)),this.mergeVertices()}function Ho(t,e,n,i){Ln.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,o,a=[],s=[],c=[],l=[],u=new _e,h=new Ce;for(s.push(0,0,0),c.push(0,0,1),l.push(.5,.5),o=0,r=3;o<=e;o++,r+=3){var d=n+o/e*i;u.x=t*Math.cos(d),u.y=t*Math.sin(d),s.push(u.x,u.y,u.z),c.push(0,0,1),h.x=(s[r]/t+1)/2,h.y=(s[r+1]/t+1)/2,l.push(h.x,h.y)}for(r=1;r<=e;r++)a.push(r,r+1,0);this.setIndex(a),this.addAttribute("position",new Tn(s,3)),this.addAttribute("normal",new Tn(c,3)),this.addAttribute("uv",new Tn(l,2))}Eo.prototype=Object.create(gn.prototype),Eo.prototype.constructor=Eo,xo.prototype=Object.create(Ln.prototype),xo.prototype.constructor=xo,xo.prototype.getArrays=function(){var t=this.getAttribute("position"),e=t?Array.prototype.slice.call(t.array):[],n=this.getAttribute("uv"),i=n?Array.prototype.slice.call(n.array):[],r=this.index;return{position:e,uv:i,index:r?Array.prototype.slice.call(r.array):[]}},xo.prototype.addShapeList=function(t,e){var n=t.length;e.arrays=this.getArrays();for(var i=0;i<n;i++){var r=t[i];this.addShape(r,e)}this.setIndex(e.arrays.index),this.addAttribute("position",new Tn(e.arrays.position,3)),this.addAttribute("uv",new Tn(e.arrays.uv,2))},xo.prototype.addShape=function(t,e){var n,i,r,o,a,s,c,l,u=e.arrays?e.arrays:this.getArrays(),h=u.position,d=u.index,p=u.uv,f=[],m=void 0!==e.amount?e.amount:100,g=void 0!==e.bevelThickness?e.bevelThickness:6,v=void 0!==e.bevelSize?e.bevelSize:g-2,y=void 0!==e.bevelSegments?e.bevelSegments:3,A=void 0===e.bevelEnabled||e.bevelEnabled,w=void 0!==e.curveSegments?e.curveSegments:12,b=void 0!==e.steps?e.steps:1,M=e.extrudePath,E=!1,x=void 0!==e.UVGenerator?e.UVGenerator:Eo.WorldUVGenerator;M&&(n=M.getSpacedPoints(b),E=!0,A=!1,i=M.computeFrenetFrames(b,!1),r=new _e,o=new _e,a=new _e),A||(y=0,g=0,v=0);var T=this,C=t.extractPoints(w),S=C.shape,D=C.holes;if(!wo.isClockWise(S))for(S=S.reverse(),c=0,l=D.length;c<l;c++)s=D[c],wo.isClockWise(s)&&(D[c]=s.reverse());var _=wo.triangulateShape(S,D),L=S;for(c=0,l=D.length;c<l;c++)s=D[c],S=S.concat(s);function N(t,e,n){return e.clone().multiplyScalar(n).add(t)}var I,O,j,P,R,k,z=S.length,B=_.length;function F(t,e,n){var i,r,o,a=t.x-e.x,s=t.y-e.y,c=n.x-t.x,l=n.y-t.y,u=a*a+s*s,h=a*l-s*c;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(u),p=Math.sqrt(c*c+l*l),f=e.x-s/d,m=e.y+a/d,g=((n.x-l/p-f)*l-(n.y+c/p-m)*c)/(a*l-s*c),v=(i=f+a*g-t.x)*i+(r=m+s*g-t.y)*r;if(v<=2)return new Ce(i,r);o=Math.sqrt(v/2)}else{var y=!1;a>Number.EPSILON?c>Number.EPSILON&&(y=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(i=-s,r=a,o=Math.sqrt(u)):(i=a,r=s,o=Math.sqrt(u/2))}return new Ce(i/o,r/o)}for(var U=[],H=0,G=L.length,Q=G-1,V=H+1;H<G;H++,Q++,V++)Q===G&&(Q=0),V===G&&(V=0),U[H]=F(L[H],L[Q],L[V]);var Y,W,q=[],X=U.concat();for(c=0,l=D.length;c<l;c++){for(s=D[c],Y=[],H=0,Q=(G=s.length)-1,V=H+1;H<G;H++,Q++,V++)Q===G&&(Q=0),V===G&&(V=0),Y[H]=F(s[H],s[Q],s[V]);q.push(Y),X=X.concat(Y)}for(I=0;I<y;I++){for(j=I/y,P=g*Math.cos(j*Math.PI/2),O=v*Math.sin(j*Math.PI/2),H=0,G=L.length;H<G;H++)K((R=N(L[H],U[H],O)).x,R.y,-P);for(c=0,l=D.length;c<l;c++)for(s=D[c],Y=q[c],H=0,G=s.length;H<G;H++)K((R=N(s[H],Y[H],O)).x,R.y,-P)}for(O=v,H=0;H<z;H++)R=A?N(S[H],X[H],O):S[H],E?(o.copy(i.normals[0]).multiplyScalar(R.x),r.copy(i.binormals[0]).multiplyScalar(R.y),a.copy(n[0]).add(o).add(r),K(a.x,a.y,a.z)):K(R.x,R.y,0);for(W=1;W<=b;W++)for(H=0;H<z;H++)R=A?N(S[H],X[H],O):S[H],E?(o.copy(i.normals[W]).multiplyScalar(R.x),r.copy(i.binormals[W]).multiplyScalar(R.y),a.copy(n[W]).add(o).add(r),K(a.x,a.y,a.z)):K(R.x,R.y,m/b*W);for(I=y-1;I>=0;I--){for(j=I/y,P=g*Math.cos(j*Math.PI/2),O=v*Math.sin(j*Math.PI/2),H=0,G=L.length;H<G;H++)K((R=N(L[H],U[H],O)).x,R.y,m+P);for(c=0,l=D.length;c<l;c++)for(s=D[c],Y=q[c],H=0,G=s.length;H<G;H++)R=N(s[H],Y[H],O),E?K(R.x,R.y+n[b-1].y,n[b-1].x+P):K(R.x,R.y,m+P)}function Z(t,e){var n,i;for(H=t.length;--H>=0;){n=H,(i=H-1)<0&&(i=t.length-1);var r=0,o=b+2*y;for(r=0;r<o;r++){var a=z*r,s=z*(r+1);$(e+n+a,e+i+a,e+i+s,e+n+s)}}}function K(t,e,n){f.push(t),f.push(e),f.push(n)}function J(t,e,n){tt(t),tt(e),tt(n);var i=h.length/3,r=x.generateTopUV(T,h,i-3,i-2,i-1);et(r[0]),et(r[1]),et(r[2])}function $(t,e,n,i){tt(t),tt(e),tt(i),tt(e),tt(n),tt(i);var r=h.length/3,o=x.generateSideWallUV(T,h,r-6,r-3,r-2,r-1);et(o[0]),et(o[1]),et(o[3]),et(o[1]),et(o[2]),et(o[3])}function tt(t){d.push(h.length/3),h.push(f[3*t+0]),h.push(f[3*t+1]),h.push(f[3*t+2])}function et(t){p.push(t.x),p.push(t.y)}!function(){var t=h.length/3;if(A){var e=0,n=z*e;for(H=0;H<B;H++)J((k=_[H])[2]+n,k[1]+n,k[0]+n);for(n=z*(e=b+2*y),H=0;H<B;H++)J((k=_[H])[0]+n,k[1]+n,k[2]+n)}else{for(H=0;H<B;H++)J((k=_[H])[2],k[1],k[0]);for(H=0;H<B;H++)J((k=_[H])[0]+z*b,k[1]+z*b,k[2]+z*b)}T.addGroup(t,h.length/3-t,0)}(),function(){var t=h.length/3,e=0;for(Z(L,e),e+=L.length,c=0,l=D.length;c<l;c++)Z(s=D[c],e),e+=s.length;T.addGroup(t,h.length/3-t,1)}(),e.arrays||(this.setIndex(d),this.addAttribute("position",new Tn(h,3)),this.addAttribute("uv",new Tn(p,2)))},Eo.WorldUVGenerator={generateTopUV:function(t,e,n,i,r){var o=e[3*n],a=e[3*n+1],s=e[3*i],c=e[3*i+1],l=e[3*r],u=e[3*r+1];return[new Ce(o,a),new Ce(s,c),new Ce(l,u)]},generateSideWallUV:function(t,e,n,i,r,o){var a=e[3*n],s=e[3*n+1],c=e[3*n+2],l=e[3*i],u=e[3*i+1],h=e[3*i+2],d=e[3*r],p=e[3*r+1],f=e[3*r+2],m=e[3*o],g=e[3*o+1],v=e[3*o+2];return Math.abs(s-u)<.01?[new Ce(a,1-c),new Ce(l,1-h),new Ce(d,1-f),new Ce(m,1-v)]:[new Ce(s,1-c),new Ce(u,1-h),new Ce(p,1-f),new Ce(g,1-v)]}},To.prototype=Object.create(gn.prototype),To.prototype.constructor=To,Co.prototype=Object.create(xo.prototype),Co.prototype.constructor=Co,So.prototype=Object.create(gn.prototype),So.prototype.constructor=So,Do.prototype=Object.create(Ln.prototype),Do.prototype.constructor=Do,_o.prototype=Object.create(gn.prototype),_o.prototype.constructor=_o,Lo.prototype=Object.create(Ln.prototype),Lo.prototype.constructor=Lo,No.prototype=Object.create(gn.prototype),No.prototype.constructor=No,Io.prototype=Object.create(Ln.prototype),Io.prototype.constructor=Io,Oo.prototype=Object.create(gn.prototype),Oo.prototype.constructor=Oo,Oo.prototype.toJSON=function(){var t=gn.prototype.toJSON.call(this);return Po(this.parameters.shapes,t)},jo.prototype=Object.create(Ln.prototype),jo.prototype.constructor=jo,jo.prototype.toJSON=function(){var t=Ln.prototype.toJSON.call(this);return Po(this.parameters.shapes,t)},Ro.prototype=Object.create(Ln.prototype),Ro.prototype.constructor=Ro,ko.prototype=Object.create(gn.prototype),ko.prototype.constructor=ko,zo.prototype=Object.create(Ln.prototype),zo.prototype.constructor=zo,Bo.prototype=Object.create(ko.prototype),Bo.prototype.constructor=Bo,Fo.prototype=Object.create(zo.prototype),Fo.prototype.constructor=Fo,Uo.prototype=Object.create(gn.prototype),Uo.prototype.constructor=Uo,Ho.prototype=Object.create(Ln.prototype),Ho.prototype.constructor=Ho;var Go=Object.freeze({WireframeGeometry:Or,ParametricGeometry:jr,ParametricBufferGeometry:Pr,TetrahedronGeometry:zr,TetrahedronBufferGeometry:Br,OctahedronGeometry:Fr,OctahedronBufferGeometry:Ur,IcosahedronGeometry:Hr,IcosahedronBufferGeometry:Gr,DodecahedronGeometry:Qr,DodecahedronBufferGeometry:Vr,PolyhedronGeometry:Rr,PolyhedronBufferGeometry:kr,TubeGeometry:Yr,TubeBufferGeometry:Wr,TorusKnotGeometry:qr,TorusKnotBufferGeometry:Xr,TorusGeometry:Zr,TorusBufferGeometry:Kr,TextGeometry:To,TextBufferGeometry:Co,SphereGeometry:So,SphereBufferGeometry:Do,RingGeometry:_o,RingBufferGeometry:Lo,PlaneGeometry:On,PlaneBufferGeometry:jn,LatheGeometry:No,LatheBufferGeometry:Io,ShapeGeometry:Oo,ShapeBufferGeometry:jo,ExtrudeGeometry:Eo,ExtrudeBufferGeometry:xo,EdgesGeometry:Ro,ConeGeometry:Bo,ConeBufferGeometry:Fo,CylinderGeometry:ko,CylinderBufferGeometry:zo,CircleGeometry:Uo,CircleBufferGeometry:Ho,BoxGeometry:Nn,BoxBufferGeometry:In});function Qo(t){Gn.call(this),this.type="ShadowMaterial",this.color=new Ke(0),this.transparent=!0,this.setValues(t)}function Vo(t){Vn.call(this,t),this.type="RawShaderMaterial"}function Yo(t){Gn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ke(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Wo(t){Yo.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function qo(t){Gn.call(this),this.type="MeshPhongMaterial",this.color=new Ke(16777215),this.specular=new Ke(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Xo(t){qo.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function Zo(t){Gn.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ko(t){Gn.call(this),this.type="MeshLambertMaterial",this.color=new Ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Jo(t){Er.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}Qo.prototype=Object.create(Gn.prototype),Qo.prototype.constructor=Qo,Qo.prototype.isShadowMaterial=!0,Qo.prototype.copy=function(t){return Gn.prototype.copy.call(this,t),this.color.copy(t.color),this},Vo.prototype=Object.create(Vn.prototype),Vo.prototype.constructor=Vo,Vo.prototype.isRawShaderMaterial=!0,Yo.prototype=Object.create(Gn.prototype),Yo.prototype.constructor=Yo,Yo.prototype.isMeshStandardMaterial=!0,Yo.prototype.copy=function(t){return Gn.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Wo.prototype=Object.create(Yo.prototype),Wo.prototype.constructor=Wo,Wo.prototype.isMeshPhysicalMaterial=!0,Wo.prototype.copy=function(t){return Yo.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},qo.prototype=Object.create(Gn.prototype),qo.prototype.constructor=qo,qo.prototype.isMeshPhongMaterial=!0,qo.prototype.copy=function(t){return Gn.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Xo.prototype=Object.create(qo.prototype),Xo.prototype.constructor=Xo,Xo.prototype.isMeshToonMaterial=!0,Xo.prototype.copy=function(t){return qo.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},Zo.prototype=Object.create(Gn.prototype),Zo.prototype.constructor=Zo,Zo.prototype.isMeshNormalMaterial=!0,Zo.prototype.copy=function(t){return Gn.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ko.prototype=Object.create(Gn.prototype),Ko.prototype.constructor=Ko,Ko.prototype.isMeshLambertMaterial=!0,Ko.prototype.copy=function(t){return Gn.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Jo.prototype=Object.create(Er.prototype),Jo.prototype.constructor=Jo,Jo.prototype.isLineDashedMaterial=!0,Jo.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var $o=Object.freeze({ShadowMaterial:Qo,SpriteMaterial:vr,RawShaderMaterial:Vo,ShaderMaterial:Vn,PointsMaterial:Sr,MeshPhysicalMaterial:Wo,MeshStandardMaterial:Yo,MeshPhongMaterial:qo,MeshToonMaterial:Xo,MeshNormalMaterial:Zo,MeshLambertMaterial:Ko,MeshDepthMaterial:rr,MeshDistanceMaterial:or,MeshBasicMaterial:Qn,LineDashedMaterial:Jo,LineBasicMaterial:Er,Material:Gn}),ta={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function ea(t,e,n){var i=this,r=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===r&&void 0!==i.onStart&&i.onStart(t,o,a),r=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,a),o===a&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}var na=new ea,ia={};function ra(t){this.manager=void 0!==t?t:na}function oa(t){this.manager=void 0!==t?t:na,this._parser=null}function aa(t){this.manager=void 0!==t?t:na,this._parser=null}function sa(t){this.manager=void 0!==t?t:na}function ca(t){this.manager=void 0!==t?t:na}function la(t){this.manager=void 0!==t?t:na}function ua(){this.type="Curve",this.arcLengthDivisions=200}function ha(t,e,n,i,r,o,a,s){ua.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function da(t,e,n,i,r,o){ha.call(this,t,e,n,n,i,r,o),this.type="ArcCurve"}function pa(){var t=0,e=0,n=0,i=0;function r(r,o,a,s){t=r,e=a,n=-3*r+3*o-2*a-s,i=2*r-2*o+a+s}return{initCatmullRom:function(t,e,n,i,o){r(e,n,o*(n-t),o*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,o,a,s){var c=(e-t)/o-(n-t)/(o+a)+(n-e)/a,l=(n-e)/a-(i-e)/(a+s)+(i-n)/s;r(e,n,c*=a,l*=a)},calc:function(r){var o=r*r;return t+e*r+n*o+i*(o*r)}}}Object.assign(ra.prototype,{load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=ta.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;if(void 0===ia[t]){var a=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],c=!!a[2],l=a[3];l=window.decodeURIComponent(l),c&&(l=window.atob(l));try{var u,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(l.length),p=0;p<l.length;p++)d[p]=l.charCodeAt(p);u="blob"===h?new Blob([d.buffer],{type:s}):d.buffer;break;case"document":var f=new DOMParser;u=f.parseFromString(l,s);break;case"json":u=JSON.parse(l);break;default:u=l}window.setTimeout(function(){e&&e(u),r.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){i&&i(e),r.manager.itemEnd(t),r.manager.itemError(t)},0)}}else{ia[t]=[],ia[t].push({onLoad:e,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var g in m.open("GET",t,!0),m.addEventListener("load",function(e){var n=this.response;ta.add(t,n);var i=ia[t];if(delete ia[t],200===this.status){for(var o=0,a=i.length;o<a;o++)(s=i[o]).onLoad&&s.onLoad(n);r.manager.itemEnd(t)}else if(0===this.status){for(o=0,a=i.length;o<a;o++)(s=i[o]).onLoad&&s.onLoad(n);r.manager.itemEnd(t)}else{for(o=0,a=i.length;o<a;o++){var s;(s=i[o]).onError&&s.onError(e)}r.manager.itemEnd(t),r.manager.itemError(t)}},!1),m.addEventListener("progress",function(e){for(var n=ia[t],i=0,r=n.length;i<r;i++){var o=n[i];o.onProgress&&o.onProgress(e)}},!1),m.addEventListener("error",function(e){var n=ia[t];delete ia[t];for(var i=0,o=n.length;i<o;i++){var a=n[i];a.onError&&a.onError(e)}r.manager.itemEnd(t),r.manager.itemError(t)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return r.manager.itemStart(t),m}ia[t].push({onLoad:e,onProgress:n,onError:i})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(oa.prototype,{load:function(t,e,n,i){var r=this,o=[],a=new Nr;a.image=o;var s=new ra(this.manager);function c(c){s.load(t[c],function(t){var n=r._parser(t,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(a.minFilter=At),a.format=n.format,a.needsUpdate=!0,e&&e(a))},n,i)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var l=0,u=0,h=t.length;u<h;++u)c(u);else s.load(t,function(t){var n=r._parser(t,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){o[s]={mipmaps:[]};for(var c=0;c<n.mipmapCount;c++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+c]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=At),a.format=n.format,a.needsUpdate=!0,e&&e(a)},n,i);return a},setPath:function(t){return this.path=t,this}}),Object.assign(aa.prototype,{load:function(t,e,n,i){var r=this,o=new He,a=new ra(this.manager);return a.setResponseType("arraybuffer"),a.load(t,function(t){var n=r._parser(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ft,o.wrapT=void 0!==n.wrapT?n.wrapT:ft,o.magFilter=void 0!==n.magFilter?n.magFilter:At,o.minFilter=void 0!==n.minFilter?n.minFilter:bt,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=At),o.needsUpdate=!0,e&&e(o,n))},n,i),o}}),Object.assign(sa.prototype,{crossOrigin:"Anonymous",load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=ta.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",function(){ta.add(t,this),e&&e(this),r.manager.itemEnd(t)},!1),a.addEventListener("error",function(e){i&&i(e),r.manager.itemEnd(t),r.manager.itemError(t)},!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(ca.prototype,{crossOrigin:"Anonymous",load:function(t,e,n,i){var r=new Kn,o=new sa(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(t[n],function(t){r.images[n]=t,6==++a&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}for(var c=0;c<t.length;++c)s(c);return r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(la.prototype,{crossOrigin:"Anonymous",load:function(t,e,n,i){var r=new ze,o=new sa(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(n){r.image=n;var i=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);r.format=i?Pt:Rt,r.needsUpdate=!0,void 0!==e&&e(r)},n,i),r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(ua.prototype,{getPoint:function(){return null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),o=0;for(i.push(0),n=1;n<=t;n++)o+=(e=this.getPoint(n/t)).distanceTo(r),i.push(o),r=e;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i=this.getLengths(),r=0,o=i.length;n=e||t*i[o-1];for(var a,s=0,c=o-1;s<=c;)if((a=i[r=Math.floor(s+(c-s)/2)]-n)<0)s=r+1;else{if(!(a>0)){c=r;break}c=r-1}if(i[r=c]===n)return r/(o-1);var l=i[r];return(r+(n-l)/(i[r+1]-l))/(o-1)},getTangent:function(t){var e=t-1e-4,n=t+1e-4;e<0&&(e=0),n>1&&(n=1);var i=this.getPoint(e);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,i,r,o=new _e,a=[],s=[],c=[],l=new _e,u=new Se;for(n=0;n<=t;n++)i=n/t,a[n]=this.getTangentAt(i),a[n].normalize();s[0]=new _e,c[0]=new _e;var h=Number.MAX_VALUE,d=Math.abs(a[0].x),p=Math.abs(a[0].y),f=Math.abs(a[0].z);for(d<=h&&(h=d,o.set(1,0,0)),p<=h&&(h=p,o.set(0,1,0)),f<=h&&o.set(0,0,1),l.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],l),c[0].crossVectors(a[0],s[0]),n=1;n<=t;n++)s[n]=s[n-1].clone(),c[n]=c[n-1].clone(),l.crossVectors(a[n-1],a[n]),l.length()>Number.EPSILON&&(l.normalize(),r=Math.acos(Te.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(u.makeRotationAxis(l,r))),c[n].crossVectors(a[n],s[n]);if(!0===e)for(r=Math.acos(Te.clamp(s[0].dot(s[t]),-1,1)),r/=t,a[0].dot(l.crossVectors(s[0],s[t]))>0&&(r=-r),n=1;n<=t;n++)s[n].applyMatrix4(u.makeRotationAxis(a[n],r*n)),c[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),ha.prototype=Object.create(ua.prototype),ha.prototype.constructor=ha,ha.prototype.isEllipseCurve=!0,ha.prototype.getPoint=function(t,e){for(var n=e||new Ce,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);var a=this.aStartAngle+t*r,s=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=s-this.aX,d=c-this.aY;s=h*l-d*u+this.aX,c=h*u+d*l+this.aY}return n.set(s,c)},ha.prototype.copy=function(t){return ua.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},ha.prototype.toJSON=function(){var t=ua.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},ha.prototype.fromJSON=function(t){return ua.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},da.prototype=Object.create(ha.prototype),da.prototype.constructor=da,da.prototype.isArcCurve=!0;var fa=new _e,ma=new pa,ga=new pa,va=new pa;function ya(t,e,n,i){ua.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=i||.5}function Aa(t,e,n,i,r){var o=.5*(i-e),a=.5*(r-n),s=t*t;return(2*n-2*i+o+a)*(t*s)+(-3*n+3*i-2*o-a)*s+o*t+n}function wa(t,e,n,i){return function(t,n){var i=1-t;return i*i*e}(t)+function(t,e){return 2*(1-t)*t*n}(t)+function(t,e){return t*t*i}(t)}function ba(t,e,n,i,r){return function(t,n){var i=1-t;return i*i*i*e}(t)+function(t,e){var i=1-t;return 3*i*i*t*n}(t)+function(t,e){return 3*(1-t)*t*t*i}(t)+function(t,e){return t*t*t*r}(t)}function Ma(t,e,n,i){ua.call(this),this.type="CubicBezierCurve",this.v0=t||new Ce,this.v1=e||new Ce,this.v2=n||new Ce,this.v3=i||new Ce}function Ea(t,e,n,i){ua.call(this),this.type="CubicBezierCurve3",this.v0=t||new _e,this.v1=e||new _e,this.v2=n||new _e,this.v3=i||new _e}function xa(t,e){ua.call(this),this.type="LineCurve",this.v1=t||new Ce,this.v2=e||new Ce}function Ta(t,e){ua.call(this),this.type="LineCurve3",this.v1=t||new _e,this.v2=e||new _e}function Ca(t,e,n){ua.call(this),this.type="QuadraticBezierCurve",this.v0=t||new Ce,this.v1=e||new Ce,this.v2=n||new Ce}function Sa(t,e,n){ua.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new _e,this.v1=e||new _e,this.v2=n||new _e}function Da(t){ua.call(this),this.type="SplineCurve",this.points=t||[]}ya.prototype=Object.create(ua.prototype),ya.prototype.constructor=ya,ya.prototype.isCatmullRomCurve3=!0,ya.prototype.getPoint=function(t,e){var n,i,r,o,a=e||new _e,s=this.points,c=s.length,l=(c-(this.closed?0:1))*t,u=Math.floor(l),h=l-u;if(this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/s.length)+1)*s.length:0===h&&u===c-1&&(u=c-2,h=1),this.closed||u>0?n=s[(u-1)%c]:(fa.subVectors(s[0],s[1]).add(s[0]),n=fa),i=s[u%c],r=s[(u+1)%c],this.closed||u+2<c?o=s[(u+2)%c]:(fa.subVectors(s[c-1],s[c-2]).add(s[c-1]),o=fa),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(i),d),f=Math.pow(i.distanceToSquared(r),d),m=Math.pow(r.distanceToSquared(o),d);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),ma.initNonuniformCatmullRom(n.x,i.x,r.x,o.x,p,f,m),ga.initNonuniformCatmullRom(n.y,i.y,r.y,o.y,p,f,m),va.initNonuniformCatmullRom(n.z,i.z,r.z,o.z,p,f,m)}else"catmullrom"===this.curveType&&(ma.initCatmullRom(n.x,i.x,r.x,o.x,this.tension),ga.initCatmullRom(n.y,i.y,r.y,o.y,this.tension),va.initCatmullRom(n.z,i.z,r.z,o.z,this.tension));return a.set(ma.calc(h),ga.calc(h),va.calc(h)),a},ya.prototype.copy=function(t){ua.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},ya.prototype.toJSON=function(){var t=ua.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},ya.prototype.fromJSON=function(t){ua.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new _e).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Ma.prototype=Object.create(ua.prototype),Ma.prototype.constructor=Ma,Ma.prototype.isCubicBezierCurve=!0,Ma.prototype.getPoint=function(t,e){var n=e||new Ce,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(ba(t,i.x,r.x,o.x,a.x),ba(t,i.y,r.y,o.y,a.y)),n},Ma.prototype.copy=function(t){return ua.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Ma.prototype.toJSON=function(){var t=ua.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Ma.prototype.fromJSON=function(t){return ua.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Ea.prototype=Object.create(ua.prototype),Ea.prototype.constructor=Ea,Ea.prototype.isCubicBezierCurve3=!0,Ea.prototype.getPoint=function(t,e){var n=e||new _e,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(ba(t,i.x,r.x,o.x,a.x),ba(t,i.y,r.y,o.y,a.y),ba(t,i.z,r.z,o.z,a.z)),n},Ea.prototype.copy=function(t){return ua.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Ea.prototype.toJSON=function(){var t=ua.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Ea.prototype.fromJSON=function(t){return ua.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},xa.prototype=Object.create(ua.prototype),xa.prototype.constructor=xa,xa.prototype.isLineCurve=!0,xa.prototype.getPoint=function(t,e){var n=e||new Ce;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},xa.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},xa.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},xa.prototype.copy=function(t){return ua.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},xa.prototype.toJSON=function(){var t=ua.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},xa.prototype.fromJSON=function(t){return ua.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Ta.prototype=Object.create(ua.prototype),Ta.prototype.constructor=Ta,Ta.prototype.isLineCurve3=!0,Ta.prototype.getPoint=function(t,e){var n=e||new _e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Ta.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Ta.prototype.copy=function(t){return ua.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ta.prototype.toJSON=function(){var t=ua.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ta.prototype.fromJSON=function(t){return ua.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Ca.prototype=Object.create(ua.prototype),Ca.prototype.constructor=Ca,Ca.prototype.isQuadraticBezierCurve=!0,Ca.prototype.getPoint=function(t,e){var n=e||new Ce,i=this.v0,r=this.v1,o=this.v2;return n.set(wa(t,i.x,r.x,o.x),wa(t,i.y,r.y,o.y)),n},Ca.prototype.copy=function(t){return ua.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ca.prototype.toJSON=function(){var t=ua.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ca.prototype.fromJSON=function(t){return ua.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Sa.prototype=Object.create(ua.prototype),Sa.prototype.constructor=Sa,Sa.prototype.isQuadraticBezierCurve3=!0,Sa.prototype.getPoint=function(t,e){var n=e||new _e,i=this.v0,r=this.v1,o=this.v2;return n.set(wa(t,i.x,r.x,o.x),wa(t,i.y,r.y,o.y),wa(t,i.z,r.z,o.z)),n},Sa.prototype.copy=function(t){return ua.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Sa.prototype.toJSON=function(){var t=ua.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Sa.prototype.fromJSON=function(t){return ua.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Da.prototype=Object.create(ua.prototype),Da.prototype.constructor=Da,Da.prototype.isSplineCurve=!0,Da.prototype.getPoint=function(t,e){var n=e||new Ce,i=this.points,r=(i.length-1)*t,o=Math.floor(r),a=r-o,s=i[0===o?o:o-1],c=i[o],l=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2];return n.set(Aa(a,s.x,c.x,l.x,u.x),Aa(a,s.y,c.y,l.y,u.y)),n},Da.prototype.copy=function(t){ua.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this},Da.prototype.toJSON=function(){var t=ua.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t},Da.prototype.fromJSON=function(t){ua.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new Ce).fromArray(i))}return this};var _a=Object.freeze({ArcCurve:da,CatmullRomCurve3:ya,CubicBezierCurve:Ma,CubicBezierCurve3:Ea,EllipseCurve:ha,LineCurve:xa,LineCurve3:Ta,QuadraticBezierCurve:Ca,QuadraticBezierCurve3:Sa,SplineCurve:Da});function La(){ua.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Na(t){La.call(this),this.type="Path",this.currentPoint=new Ce,t&&this.setFromPoints(t)}function Ia(t){Na.call(this,t),this.uuid=Te.generateUUID(),this.type="Shape",this.holes=[]}function Oa(t,e){ln.call(this),this.type="Light",this.color=new Ke(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function ja(t,e,n){Oa.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ln.DefaultUp),this.updateMatrix(),this.groundColor=new Ke(e)}function Pa(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new Ce(512,512),this.map=null,this.matrix=new Se}function Ra(){Pa.call(this,new ur(50,1,.5,500))}function ka(t,e,n,i,r,o){Oa.call(this,t,e),this.type="SpotLight",this.position.copy(ln.DefaultUp),this.updateMatrix(),this.target=new ln,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new Ra}function za(t,e,n,i){Oa.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Pa(new ur(90,1,.5,500))}function Ba(){Pa.call(this,new hn(-5,5,5,-5,.5,500))}function Fa(t,e){Oa.call(this,t,e),this.type="DirectionalLight",this.position.copy(ln.DefaultUp),this.updateMatrix(),this.target=new ln,this.shadow=new Ba}function Ua(t,e){Oa.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Ha(t,e,n,i){Oa.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function Ga(t,e,n,i){ts.call(this,t,e,n,i)}function Qa(t,e,n){ts.call(this,t,e,n)}function Va(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Ya(t,e,n,i){Va.call(this,t,e,n,i)}function Wa(t,e,n,i){ts.call(this,t,e,n,i)}function qa(t,e,n,i){ts.call(this,t,e,n,i)}function Xa(t,e,n,i){ts.call(this,t,e,n,i)}function Za(t,e,n,i){Va.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Ka(t,e,n,i){Va.call(this,t,e,n,i)}function Ja(t,e,n,i){Va.call(this,t,e,n,i)}La.prototype=Object.assign(Object.create(ua.prototype),{constructor:La,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new xa(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,o=this.curves[i],a=o.getLength(),s=0===a?0:1-r/a;return o.getPointAt(s)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var o=r[i],a=o&&o.isEllipseCurve?2*t:o&&o.isLineCurve?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),c=0;c<s.length;c++){var l=s[c];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){ua.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=ua.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){ua.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push((new _a[i.type]).fromJSON(i))}return this}}),Na.prototype=Object.assign(Object.create(La.prototype),{constructor:Na,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new xa(this.currentPoint.clone(),new Ce(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,i){var r=new Ca(this.currentPoint.clone(),new Ce(t,e),new Ce(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(t,e,n,i,r,o){var a=new Ma(this.currentPoint.clone(),new Ce(t,e),new Ce(n,i),new Ce(r,o));this.curves.push(a),this.currentPoint.set(r,o)},splineThru:function(t){var e=new Da([this.currentPoint.clone()].concat(t));this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,i,r,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+a,e+s,n,i,r,o)},absarc:function(t,e,n,i,r,o){this.absellipse(t,e,n,n,i,r,o)},ellipse:function(t,e,n,i,r,o,a,s){var c=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(t+c,e+l,n,i,r,o,a,s)},absellipse:function(t,e,n,i,r,o,a,s){var c=new ha(t,e,n,i,r,o,a,s);if(this.curves.length>0){var l=c.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(c);var u=c.getPoint(1);this.currentPoint.copy(u)},copy:function(t){return La.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=La.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return La.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Ia.prototype=Object.assign(Object.create(Na.prototype),{constructor:Ia,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Na.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){var t=Na.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){Na.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push((new Na).fromJSON(i))}return this}}),Oa.prototype=Object.assign(Object.create(ln.prototype),{constructor:Oa,isLight:!0,copy:function(t){return ln.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=ln.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),ja.prototype=Object.assign(Object.create(Oa.prototype),{constructor:ja,isHemisphereLight:!0,copy:function(t){return Oa.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Pa.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Ra.prototype=Object.assign(Object.create(Pa.prototype),{constructor:Ra,isSpotLightShadow:!0,update:function(t){var e=this.camera,n=2*Te.RAD2DEG*t.angle,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix())}}),ka.prototype=Object.assign(Object.create(Oa.prototype),{constructor:ka,isSpotLight:!0,copy:function(t){return Oa.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),za.prototype=Object.assign(Object.create(Oa.prototype),{constructor:za,isPointLight:!0,copy:function(t){return Oa.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Ba.prototype=Object.assign(Object.create(Pa.prototype),{constructor:Ba}),Fa.prototype=Object.assign(Object.create(Oa.prototype),{constructor:Fa,isDirectionalLight:!0,copy:function(t){return Oa.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Ua.prototype=Object.assign(Object.create(Oa.prototype),{constructor:Ua,isAmbientLight:!0}),Ha.prototype=Object.assign(Object.create(Oa.prototype),{constructor:Ha,isRectAreaLight:!0,copy:function(t){return Oa.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Oa.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Ga.prototype=Object.assign(Object.create(ts.prototype),{constructor:Ga,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Qa.prototype=Object.assign(Object.create(ts.prototype),{constructor:Qa,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(Va.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var o;n:{i:if(!(t<i)){for(var a=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===a)break;if(r=i,t<(i=e[++n]))break e}o=e.length;break n}if(t>=r)break t;var s=e[1];for(t<s&&(n=2,r=s),a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===a)break;if(i=r,t>=(r=e[--n-1]))break e}o=n,n=0}for(;n<o;){var c=n+o>>>1;t<e[c]?o=c:n=c+1}if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,o=0;o!==i;++o)e[o]=n[r+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Va.prototype,{beforeStart_:Va.prototype.copySampleValue_,afterEnd_:Va.prototype.copySampleValue_}),Ya.prototype=Object.assign(Object.create(Va.prototype),{constructor:Ya,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,c=(n-e)/(i-e),l=s+a;s!==l;s+=4)De.slerpFlat(r,0,o,s-a,o,s,c);return r}}),Wa.prototype=Object.assign(Object.create(ts.prototype),{constructor:Wa,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new Ya(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),qa.prototype=Object.assign(Object.create(ts.prototype),{constructor:qa,ValueTypeName:"color"}),Xa.prototype=Object.assign(Object.create(ts.prototype),{constructor:Xa,ValueTypeName:"number"}),Za.prototype=Object.assign(Object.create(Va.prototype),{constructor:Za,DefaultSettings_:{endingStart:de,endingEnd:de},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,o=t+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=t,a=2*e-n;break;case 2402:a=e+i[r=i.length-2]-i[r+1];break;default:r=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=t,s=2*n-e;break;case 2402:o=1,s=n+i[1]-i[0];break;default:o=t-1,s=e}var c=.5*(n-e),l=this.valueSize;this._weightPrev=c/(e-a),this._weightNext=c/(s-n),this._offsetPrev=r*l,this._offsetNext=o*l},interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,c=s-a,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(i-e),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,A=d*m-d*f,w=0;w!==a;++w)r[w]=g*o[l+w]+v*o[c+w]+y*o[s+w]+A*o[u+w];return r}}),Ka.prototype=Object.assign(Object.create(Va.prototype),{constructor:Ka,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,c=s-a,l=(n-e)/(i-e),u=1-l,h=0;h!==a;++h)r[h]=o[c+h]*u+o[s+h]*l;return r}}),Ja.prototype=Object.assign(Object.create(Va.prototype),{constructor:Ja,interpolate_:function(t){return this.copySampleValue_(t-1)}});var $a={arraySlice:function(t,e,n){return $a.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),i=0;i!==e;++i)n[i]=i;return n.sort(function(e,n){return t[e]-t[n]}),n},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),o=0,a=0;a!==i;++o)for(var s=n[o]*e,c=0;c!==e;++c)r[a++]=t[s+c];return r},flattenJSON:function(t,e,n,i){for(var r=1,o=t[0];void 0!==o&&void 0===o[i];)o=t[r++];if(void 0!==o){var a=o[i];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[i])&&(e.push(o.time),n.push.apply(n,a)),o=t[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[i])&&(e.push(o.time),a.toArray(n,n.length)),o=t[r++]}while(void 0!==o);else do{void 0!==(a=o[i])&&(e.push(o.time),n.push(a)),o=t[r++]}while(void 0!==o)}}};function ts(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=$a.convertArray(e,this.TimeBufferType),this.values=$a.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function es(t,e,n,i){ts.call(this,t,e,n,i)}function ns(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=Te.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function is(t){this.manager=void 0!==t?t:na,this.textures={}}function rs(t){this.manager=void 0!==t?t:na}Object.assign(ts,{parse:function(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=ts._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var n=[],i=[];$a.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:$a.convertArray(t.times,Array),values:$a.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Xa;case"vector":case"vector2":case"vector3":case"vector4":return es;case"color":return qa;case"quaternion":return Wa;case"bool":case"boolean":return Qa;case"string":return Ga}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}}),Object.assign(ts.prototype,{constructor:ts,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new Ja(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Ka(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Za(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0!==e)this.createInterpolant=e;else{var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,o=i-1;r!==i&&n[r]<t;)++r;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==r||o!==i){r>=o&&(r=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=$a.arraySlice(n,r,o),this.values=$a.arraySlice(this.values,r*a,o*a)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(t=!1);for(var o=null,a=0;a!==r;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){t=!1;break}if(null!==o&&o>s){t=!1;break}o=s}if(void 0!==i&&$a.isTypedArray(i)){a=0;for(var c=i.length;a!==c;++a){var l=i[a];if(isNaN(l)){t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,o=t.length-1,a=1;a<o;++a){var s=!1,c=t[a];if(c!==t[a+1]&&(1!==a||c!==c[0]))if(i)s=!0;else for(var l=a*n,u=l-n,h=l+n,d=0;d!==n;++d){var p=e[l+d];if(p!==e[u+d]||p!==e[h+d]){s=!0;break}}if(s){if(a!==r){t[r]=t[a];var f=a*n,m=r*n;for(d=0;d!==n;++d)e[m+d]=e[f+d]}++r}}if(o>0){for(t[r]=t[o],f=o*n,m=r*n,d=0;d!==n;++d)e[m+d]=e[f+d];++r}return r!==t.length&&(this.times=$a.arraySlice(t,0,r),this.values=$a.arraySlice(e,0,r*n)),this}}),es.prototype=Object.assign(Object.create(ts.prototype),{constructor:es,ValueTypeName:"vector"}),Object.assign(ns,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,o=n.length;r!==o;++r)e.push(ts.parse(n[r]).scale(i));return new ns(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e},r=0,o=n.length;r!==o;++r)e.push(ts.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,o=[],a=0;a<r;a++){var s=[],c=[];s.push((a+r-1)%r,a,(a+1)%r),c.push(0,1,0);var l=$a.getKeyframeOrder(s);s=$a.sortedArray(s,1,l),c=$a.sortedArray(c,1,l),i||0!==s[0]||(s.push(r),c.push(c[0])),o.push(new Xa(".morphTargetInfluences["+e[a].name+"]",s,c).scale(1/n))}return new ns(t,-1,o)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],c=s.name.match(r);if(c&&c.length>1){var l=i[h=c[1]];l||(i[h]=l=[]),l.push(s)}}var u=[];for(var h in i)u.push(ns.CreateFromMorphTargetSequence(h,i[h],e,n));return u},parseAnimation:function(t,e){if(!t)return null;for(var n=function(t,e,n,i,r){if(0!==n.length){var o=[],a=[];$a.flattenJSON(n,o,a,i),0!==o.length&&r.push(new t(e,o,a))}},i=[],r=t.name||"default",o=t.length||-1,a=t.fps||30,s=t.hierarchy||[],c=0;c<s.length;c++){var l=s[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var u={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var d=0;d<l[h].morphTargets.length;d++)u[l[h].morphTargets[d]]=-1;for(var p in u){var f=[],m=[];for(d=0;d!==l[h].morphTargets.length;++d){var g=l[h];f.push(g.time),m.push(g.morphTarget===p?1:0)}i.push(new Xa(".morphTargetInfluence["+p+"]",f,m))}o=u.length*(a||1)}else{var v=".bones["+e[c].name+"]";n(es,v+".position",l,"pos",i),n(Wa,v+".quaternion",l,"rot",i),n(es,v+".scale",l,"scl",i)}}return 0===i.length?null:new ns(r,o,i)}}),Object.assign(ns.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}this.duration=t},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}}),Object.assign(is.prototype,{load:function(t,e,n,i){var r=this;new ra(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},setTextures:function(t){this.textures=t},parse:function(t){var e=this.textures;function n(t){return e[t],e[t]}var i=new $o[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearCoat&&(i.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(i.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(i.uniforms=t.uniforms),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalScale){var r=t.normalScale;!1===Array.isArray(r)&&(r=[r,r]),i.normalScale=(new Ce).fromArray(r)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),i}}),Object.assign(rs.prototype,{load:function(t,e,n,i){var r=this;new ra(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){var e=new Ln,n=t.data.index;if(void 0!==n){var i=new ls[n.type](n.array);e.setIndex(new vn(i,1))}var r=t.data.attributes;for(var o in r){var a=r[o];i=new ls[a.type](a.array),e.addAttribute(o,new vn(i,a.itemSize,a.normalized))}var s=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==s)for(var c=0,l=s.length;c!==l;++c){var u=s[c];e.addGroup(u.start,u.count,u.materialIndex)}var h=t.data.boundingSphere;if(void 0!==h){var d=new _e;void 0!==h.center&&d.fromArray(h.center),e.boundingSphere=new Qe(d,h.radius)}return e}});var os,as,ss,cs,ls={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function us(){}us.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,i=e.length;n<i;n+=2){var r=e[n],o=e[n+1];if(r.test(t))return o}return null}},Object.assign(us.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,n){for(var i=[],r=0;r<t.length;++r)i[r]=this.createMaterial(t[r],e,n);return i},createMaterial:(os={NoBlending:M,NormalBlending:E,AdditiveBlending:x,SubtractiveBlending:T,MultiplyBlending:C,CustomBlending:S},as=new Ke,ss=new la,cs=new is,function(t,e,n){var i={};function r(t,r,o,a,s){var c,l=e+t,u=us.Handlers.get(l);null!==u?c=u.load(l):(ss.setCrossOrigin(n),c=ss.load(l)),void 0!==r&&(c.repeat.fromArray(r),1!==r[0]&&(c.wrapS=pt),1!==r[1]&&(c.wrapT=pt)),void 0!==o&&c.offset.fromArray(o),void 0!==a&&("repeat"===a[0]&&(c.wrapS=pt),"mirror"===a[0]&&(c.wrapS=mt),"repeat"===a[1]&&(c.wrapT=pt),"mirror"===a[1]&&(c.wrapT=mt)),void 0!==s&&(c.anisotropy=s);var h=Te.generateUUID();return i[h]=c,h}var o={uuid:Te.generateUUID(),type:"MeshLambertMaterial"};for(var a in t){var s=t[a];switch(a){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":o.name=s;break;case"blending":o.blending=os[s];break;case"colorAmbient":case"mapAmbient":break;case"colorDiffuse":o.color=as.fromArray(s).getHex();break;case"colorSpecular":o.specular=as.fromArray(s).getHex();break;case"colorEmissive":o.emissive=as.fromArray(s).getHex();break;case"specularCoef":o.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(o.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(o.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(o.type="MeshStandardMaterial");break;case"mapDiffuse":o.map=r(s,t.mapDiffuseRepeat,t.mapDiffuseOffset,t.mapDiffuseWrap,t.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":o.emissiveMap=r(s,t.mapEmissiveRepeat,t.mapEmissiveOffset,t.mapEmissiveWrap,t.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":o.lightMap=r(s,t.mapLightRepeat,t.mapLightOffset,t.mapLightWrap,t.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":o.aoMap=r(s,t.mapAORepeat,t.mapAOOffset,t.mapAOWrap,t.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":o.bumpMap=r(s,t.mapBumpRepeat,t.mapBumpOffset,t.mapBumpWrap,t.mapBumpAnisotropy);break;case"mapBumpScale":o.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":o.normalMap=r(s,t.mapNormalRepeat,t.mapNormalOffset,t.mapNormalWrap,t.mapNormalAnisotropy);break;case"mapNormalFactor":o.normalScale=s;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":o.specularMap=r(s,t.mapSpecularRepeat,t.mapSpecularOffset,t.mapSpecularWrap,t.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":o.metalnessMap=r(s,t.mapMetalnessRepeat,t.mapMetalnessOffset,t.mapMetalnessWrap,t.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":o.roughnessMap=r(s,t.mapRoughnessRepeat,t.mapRoughnessOffset,t.mapRoughnessWrap,t.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":o.alphaMap=r(s,t.mapAlphaRepeat,t.mapAlphaOffset,t.mapAlphaWrap,t.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":o.side=v;break;case"doubleSided":o.side=y;break;case"transparency":o.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":o[a]=s;break;case"vertexColors":!0===s&&(o.vertexColors=b),"face"===s&&(o.vertexColors=w)}}return"MeshBasicMaterial"===o.type&&delete o.emissive,"MeshPhongMaterial"!==o.type&&delete o.specular,o.opacity<1&&(o.transparent=!0),cs.setTextures(i),cs.parse(o)})});var hs={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);return decodeURIComponent(escape(e))},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function ds(t){"boolean"==typeof t&&(t=void 0),this.manager=void 0!==t?t:na,this.withCredentials=!1}function ps(t){this.manager=void 0!==t?t:na,this.texturePath=""}Object.assign(ds.prototype,{load:function(t,e,n,i){var r=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:hs.extractUrlBase(t),a=new ra(this.manager);a.setWithCredentials(this.withCredentials),a.load(t,function(t){var n=JSON.parse(t),i=n.metadata;if(void 0!==i){var a=i.type;if(void 0!==a&&"object"===a.toLowerCase())return}var s=r.parse(n,o);e(s.geometry,s.materials)},n,i)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){void 0!==t.data&&(t=t.data),void 0!==t.scale?t.scale=1/t.scale:t.scale=1;var n=new gn;return function(t,e){function n(t,e){return t&1<<e}var i,r,o,a,s,c,l,u,h,d,p,f,m,g,v,y,A,w,b,M,E,x,T,C,S,D=t.faces,_=t.vertices,L=t.normals,N=t.colors,I=t.scale,O=0;if(void 0!==t.uvs){for(i=0;i<t.uvs.length;i++)t.uvs[i].length&&O++;for(i=0;i<O;i++)e.faceVertexUvs[i]=[]}for(a=0,s=_.length;a<s;)(w=new _e).x=_[a++]*I,w.y=_[a++]*I,w.z=_[a++]*I,e.vertices.push(w);for(a=0,s=D.length;a<s;)if(p=n(d=D[a++],0),f=n(d,1),m=n(d,3),g=n(d,4),v=n(d,5),y=n(d,6),A=n(d,7),p){if((M=new dn).a=D[a],M.b=D[a+1],M.c=D[a+3],(E=new dn).a=D[a+1],E.b=D[a+2],E.c=D[a+3],a+=4,f&&(h=D[a++],M.materialIndex=h,E.materialIndex=h),o=e.faces.length,m)for(i=0;i<O;i++)for(C=t.uvs[i],e.faceVertexUvs[i][o]=[],e.faceVertexUvs[i][o+1]=[],r=0;r<4;r++)S=new Ce(C[2*(u=D[a++])],C[2*u+1]),2!==r&&e.faceVertexUvs[i][o].push(S),0!==r&&e.faceVertexUvs[i][o+1].push(S);if(g&&(l=3*D[a++],M.normal.set(L[l++],L[l++],L[l]),E.normal.copy(M.normal)),v)for(i=0;i<4;i++)l=3*D[a++],T=new _e(L[l++],L[l++],L[l]),2!==i&&M.vertexNormals.push(T),0!==i&&E.vertexNormals.push(T);if(y&&(x=N[c=D[a++]],M.color.setHex(x),E.color.setHex(x)),A)for(i=0;i<4;i++)x=N[c=D[a++]],2!==i&&M.vertexColors.push(new Ke(x)),0!==i&&E.vertexColors.push(new Ke(x));e.faces.push(M),e.faces.push(E)}else{if((b=new dn).a=D[a++],b.b=D[a++],b.c=D[a++],f&&(h=D[a++],b.materialIndex=h),o=e.faces.length,m)for(i=0;i<O;i++)for(C=t.uvs[i],e.faceVertexUvs[i][o]=[],r=0;r<3;r++)S=new Ce(C[2*(u=D[a++])],C[2*u+1]),e.faceVertexUvs[i][o].push(S);if(g&&(l=3*D[a++],b.normal.set(L[l++],L[l++],L[l])),v)for(i=0;i<3;i++)l=3*D[a++],T=new _e(L[l++],L[l++],L[l]),b.vertexNormals.push(T);if(y&&(c=D[a++],b.color.setHex(N[c])),A)for(i=0;i<3;i++)c=D[a++],b.vertexColors.push(new Ke(N[c]));e.faces.push(b)}}(t,n),function(t,e){var n=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var i=0,r=t.skinWeights.length;i<r;i+=n){var o=t.skinWeights[i],a=n>1?t.skinWeights[i+1]:0,s=n>2?t.skinWeights[i+2]:0,c=n>3?t.skinWeights[i+3]:0;e.skinWeights.push(new Be(o,a,s,c))}if(t.skinIndices)for(i=0,r=t.skinIndices.length;i<r;i+=n){var l=t.skinIndices[i],u=n>1?t.skinIndices[i+1]:0,h=n>2?t.skinIndices[i+2]:0,d=n>3?t.skinIndices[i+3]:0;e.skinIndices.push(new Be(l,u,h,d))}e.bones=t.bones,e.bones&&e.bones.length>0&&(e.skinWeights.length!==e.skinIndices.length||(e.skinIndices.length,e.vertices.length))}(t,n),function(t,e){var n=t.scale;if(void 0!==t.morphTargets)for(var i=0,r=t.morphTargets.length;i<r;i++){e.morphTargets[i]={},e.morphTargets[i].name=t.morphTargets[i].name,e.morphTargets[i].vertices=[];for(var o=e.morphTargets[i].vertices,a=t.morphTargets[i].vertices,s=0,c=a.length;s<c;s+=3){var l=new _e;l.x=a[s]*n,l.y=a[s+1]*n,l.z=a[s+2]*n,o.push(l)}}if(void 0!==t.morphColors&&t.morphColors.length>0){var u=e.faces,h=t.morphColors[0].colors;for(i=0,r=u.length;i<r;i++)u[i].color.fromArray(h,3*i)}}(t,n),function(t,e){var n=[],i=[];void 0!==t.animation&&i.push(t.animation),void 0!==t.animations&&(t.animations.length?i=i.concat(t.animations):i.push(t.animations));for(var r=0;r<i.length;r++){var o=ns.parseAnimation(i[r],e.bones);o&&n.push(o)}if(e.morphTargets){var a=ns.CreateClipsFromMorphTargetSequences(e.morphTargets,10);n=n.concat(a)}n.length>0&&(e.animations=n)}(t,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===t.materials||0===t.materials.length?{geometry:n}:{geometry:n,materials:us.prototype.initMaterials(t.materials,e,this.crossOrigin)}}}),Object.assign(ps.prototype,{load:function(t,e,n,i){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var r=this;new ra(r.manager).load(t,function(t){var n=null;try{n=JSON.parse(t)}catch(t){return void(void 0!==i&&i(t))}var o=n.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()&&r.parse(n,e)},n,i)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var n=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,n),r=this.parseImages(t.images,function(){void 0!==e&&e(s)}),o=this.parseTextures(t.textures,r),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,i,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new Ia).fromJSON(t[n]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var i=new ds,r=new rs,o=0,a=t.length;o<a;o++){var s,c=t[o];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Go[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Go[c.type](c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Go[c.type](c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Go[c.type](c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Go[c.type](c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Go[c.type](c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Go[c.type](c.radius,c.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Go[c.type](c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Go[c.type](c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Go[c.type](c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Go[c.type](c.points,c.segments,c.phiStart,c.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Go[c.type](c.vertices,c.indices,c.radius,c.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],u=0,h=c.shapes.length;u<h;u++){var d=e[c.shapes[u]];l.push(d)}s=new Go[c.type](l,c.curveSegments);break;case"BufferGeometry":s=r.parse(c);break;case"Geometry":s=i.parse(c,this.texturePath).geometry;break;default:continue}s.uuid=c.uuid,void 0!==c.name&&(s.name=c.name),n[c.uuid]=s}return n},parseMaterials:function(t,e){var n={};if(void 0!==t){var i=new is;i.setTextures(e);for(var r=0,o=t.length;r<o;r++){var a=t[r];if("MultiMaterial"===a.type){for(var s=[],c=0;c<a.materials.length;c++)s.push(i.parse(a.materials[c]));n[a.uuid]=s}else n[a.uuid]=i.parse(a)}}return n},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=ns.parse(t[n]);e.push(i)}return e},parseImages:function(t,e){var n=this,i={};function r(t){return n.manager.itemStart(t),o.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemEnd(t),n.manager.itemError(t)})}if(void 0!==t&&t.length>0){var o=new sa(new ea(e));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=t.length;a<s;a++){var c=t[a],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.texturePath+c.url;i[c.uuid]=r(l)}}return i},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:e[t]}var i={};if(void 0!==t)for(var r=0,o=t.length;r<o;r++){var a=t[r];a.image,e[a.image];var s=new ze(e[a.image]);s.needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping,ms)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=n(a.wrap[0],gs),s.wrapT=n(a.wrap[1],gs)),void 0!==a.format&&(s.format=a.format),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter,vs)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter,vs)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),i[a.uuid]=s}return i},parseObject:function(t,e,n){var i;function r(t){return e[t],e[t]}function o(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var o=t[i];n[o],e.push(n[o])}return e}return n[t],n[t]}}switch(t.type){case"Scene":i=new gr,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new Ke(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new mr(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new fr(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new ur(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new hn(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new Ua(t.color,t.intensity);break;case"DirectionalLight":i=new Fa(t.color,t.intensity);break;case"PointLight":i=new za(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new Ha(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new ka(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new ja(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":case"Mesh":var a=r(t.geometry),s=o(t.material);i=a.bones&&a.bones.length>0?new Mr(a,s):new Xn(a,s);break;case"LOD":i=new Ar;break;case"Line":i=new xr(r(t.geometry),o(t.material),t.mode);break;case"LineLoop":i=new Cr(r(t.geometry),o(t.material));break;case"LineSegments":i=new Tr(r(t.geometry),o(t.material));break;case"PointCloud":case"Points":i=new Dr(r(t.geometry),o(t.material));break;case"Sprite":i=new yr(o(t.material));break;case"Group":i=new _r;break;default:i=new ln}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(i.matrix.fromArray(t.matrix),i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.frustumCulled&&(i.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(i.renderOrder=t.renderOrder),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.children)for(var c=t.children,l=0;l<c.length;l++)i.add(this.parseObject(c[l],e,n));if("LOD"===t.type)for(var u=t.levels,h=0;h<u.length;h++){var d=u[h],p=i.getObjectByProperty("uuid",d.object);void 0!==p&&i.addLevel(p,d.distance)}return i}});var fs,ms={UVMapping:300,CubeReflectionMapping:at,CubeRefractionMapping:st,EquirectangularReflectionMapping:ct,EquirectangularRefractionMapping:lt,SphericalReflectionMapping:ut,CubeUVReflectionMapping:ht,CubeUVRefractionMapping:dt},gs={RepeatWrapping:pt,ClampToEdgeWrapping:ft,MirroredRepeatWrapping:mt},vs={NearestFilter:gt,NearestMipMapNearestFilter:vt,NearestMipMapLinearFilter:yt,LinearFilter:At,LinearMipMapNearestFilter:wt,LinearMipMapLinearFilter:bt};function ys(t){this.manager=void 0!==t?t:na,this.options=void 0}function As(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function ws(t){this.type="Font",this.data=t}function bs(t,e,n,i,r,o){var a=o.glyphs[t]||o.glyphs["?"];if(a){var s,c,l,u,h,d,p,f,m=new As;if(a.o)for(var g=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,y=g.length;v<y;)switch(g[v++]){case"m":s=g[v++]*n+i,c=g[v++]*n+r,m.moveTo(s,c);break;case"l":s=g[v++]*n+i,c=g[v++]*n+r,m.lineTo(s,c);break;case"q":l=g[v++]*n+i,u=g[v++]*n+r,h=g[v++]*n+i,d=g[v++]*n+r,m.quadraticCurveTo(h,d,l,u);break;case"b":l=g[v++]*n+i,u=g[v++]*n+r,h=g[v++]*n+i,d=g[v++]*n+r,p=g[v++]*n+i,f=g[v++]*n+r,m.bezierCurveTo(h,d,p,f,l,u)}return{offsetX:a.ha*n,path:m}}}function Ms(t){this.manager=void 0!==t?t:na}ys.prototype={constructor:ys,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,o=ta.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;fetch(t).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,r.options)}).then(function(n){ta.add(t,n),e&&e(n),r.manager.itemEnd(t)}).catch(function(e){i&&i(e),r.manager.itemEnd(t),r.manager.itemError(t)})},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(As.prototype,{moveTo:function(t,e){this.currentPath=new Na,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,i){this.currentPath.quadraticCurveTo(t,e,n,i)},bezierCurveTo:function(t,e,n,i,r,o){this.currentPath.bezierCurveTo(t,e,n,i,r,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],o=new Ia;o.curves=r.curves,e.push(o)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,o=0;o<n;r=o++){var a=e[r],s=e[o],c=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=e[o],c=-c,s=e[r],l=-l),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var u=l*(t.x-a.x)-c*(t.y-a.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return i}var r=wo.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);var a,s,c,l=[];if(1===o.length)return s=o[0],(c=new Ia).curves=s.curves,l.push(c),l;var u=!r(o[0].getPoints());u=t?!u:u;var h,d,p=[],f=[],m=[],g=0;f[g]=void 0,m[g]=[];for(var v=0,y=o.length;v<y;v++)a=r(h=(s=o[v]).getPoints()),(a=t?!a:a)?(!u&&f[g]&&g++,f[g]={s:new Ia,p:h},f[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:h[0]});if(!f[0])return n(o);if(f.length>1){for(var A=!1,w=[],b=0,M=f.length;b<M;b++)p[b]=[];for(b=0,M=f.length;b<M;b++)for(var E=m[b],x=0;x<E.length;x++){for(var T=E[x],C=!0,S=0;S<f.length;S++)i(T.p,f[S].p)&&(b!==S&&w.push({froms:b,tos:S,hole:x}),C?(C=!1,p[S].push(T)):A=!0);C&&p[b].push(T)}w.length>0&&(A||(m=p))}v=0;for(var D=f.length;v<D;v++){c=f[v].s,l.push(c);for(var _=0,L=(d=m[v]).length;_<L;_++)c.holes.push(d[_].h)}return l}}),Object.assign(ws.prototype,{isFont:!0,generateShapes:function(t,e,n){void 0===e&&(e=100),void 0===n&&(n=4);for(var i=[],r=function(t,e,n,i){for(var r=String(t).split(""),o=e/i.resolution,a=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*o,s=[],c=0,l=0,u=0;u<r.length;u++){var h=r[u];if("\n"===h)c=0,l-=a;else{var d=bs(h,0,o,c,l,i);c+=d.offsetX,s.push(d.path)}}return s}(t,e,0,this.data),o=0,a=r.length;o<a;o++)Array.prototype.push.apply(i,r[o].toShapes());return i}}),Object.assign(Ms.prototype,{load:function(t,e,n,i){var r=this,o=new ra(this.manager);o.setPath(this.path),o.load(t,function(t){var n;try{n=JSON.parse(t)}catch(e){n=JSON.parse(t.substring(65,t.length-2))}var i=r.parse(n);e&&e(i)},n,i)},parse:function(t){return new ws(t)},setPath:function(t){return this.path=t,this}});var Es,xs,Ts,Cs,Ss,Ds,_s,Ls,Ns,Is,Os,js,Ps,Rs,ks,zs,Bs,Fs,Us,Hs,Gs,Qs,Vs,Ys={getContext:function(){return void 0===fs&&(fs=new(window.AudioContext||window.webkitAudioContext)),fs},setContext:function(t){fs=t}};function Ws(t){this.manager=void 0!==t?t:na}function qs(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ur,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ur,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Xs(t,e,n){ln.call(this),this.type="CubeCamera";var i=new ur(90,1,t,e);i.up.set(0,-1,0),i.lookAt(new _e(1,0,0)),this.add(i);var r=new ur(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new _e(-1,0,0)),this.add(r);var o=new ur(90,1,t,e);o.up.set(0,0,1),o.lookAt(new _e(0,1,0)),this.add(o);var a=new ur(90,1,t,e);a.up.set(0,0,-1),a.lookAt(new _e(0,-1,0)),this.add(a);var s=new ur(90,1,t,e);s.up.set(0,-1,0),s.lookAt(new _e(0,0,1)),this.add(s);var c=new ur(90,1,t,e);c.up.set(0,-1,0),c.lookAt(new _e(0,0,-1)),this.add(c);var l={format:Pt,magFilter:At,minFilter:At};this.renderTarget=new Ue(n,n,l),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,l=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,i,n),n.activeCubeFace=1,t.render(e,r,n),n.activeCubeFace=2,t.render(e,o,n),n.activeCubeFace=3,t.render(e,a,n),n.activeCubeFace=4,t.render(e,s,n),n.texture.generateMipmaps=l,n.activeCubeFace=5,t.render(e,c,n),t.setRenderTarget(null)},this.clear=function(t,e,n,i){for(var r=this.renderTarget,o=0;o<6;o++)r.activeCubeFace=o,t.setRenderTarget(r),t.clear(e,n,i);t.setRenderTarget(null)}}function Zs(){ln.call(this),this.type="AudioListener",this.context=Ys.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Ks(t){ln.call(this),this.type="Audio",this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Js(t){Ks.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function $s(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function tc(t,e,n){this.binding=t,this.valueSize=n;var i,r=Float64Array;switch(e){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function ec(t,e,n){var i=n||nc.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function nc(t,e,n){this.path=e,this.parsedPath=n||nc.parseTrackName(e),this.node=nc.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function ic(){this.uuid=Te.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function rc(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var i=e.tracks,r=i.length,o=new Array(r),a={endingStart:de,endingEnd:de},s=0;s!==r;++s){var c=i[s].createInterpolant(null);o[s]=c,c.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=he,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function oc(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function ac(t){"string"==typeof t&&(t=arguments[1]),this.value=t}function sc(){Ln.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function cc(t,e,n,i){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function lc(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function uc(t,e,n){lc.call(this,t,e),this.meshPerAttribute=n||1}function hc(t,e,n){vn.call(this,t,e),this.meshPerAttribute=n||1}function dc(t,e,n,i){this.ray=new Yn(t,e),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return this.Points}}})}function pc(t,e){return t.distance-e.distance}function fc(t,e,n,i){if(!1!==t.visible&&(t.raycast(e,n),!0===i))for(var r=t.children,o=0,a=r.length;o<a;o++)fc(r[o],e,n,!0)}function mc(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function gc(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function vc(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function yc(t,e){this.min=void 0!==t?t:new Ce(1/0,1/0),this.max=void 0!==e?e:new Ce(-1/0,-1/0)}function Ac(t){ln.call(this),this.material=t,this.render=function(){}}function wc(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16711680,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var c=new Ln,l=new Tn(2*a*3,3);c.addAttribute("position",l),Tr.call(this,c,new Er({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function bc(t,e){ln.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new Ln,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1;r<32;r++,o++){var a=r/32*Math.PI*2,s=o/32*Math.PI*2;i.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new Tn(i,3));var c=new Er({fog:!1});this.cone=new Tr(n,c),this.add(this.cone),this.update()}function Mc(t){for(var e=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(t),n=new Ln,i=[],r=[],o=new Ke(0,0,1),a=new Ke(0,1,0),s=0;s<e.length;s++){var c=e[s];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.addAttribute("position",new Tn(i,3)),n.addAttribute("color",new Tn(r,3));var l=new Er({vertexColors:b,depthTest:!1,depthWrite:!1,transparent:!0});Tr.call(this,n,l),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function Ec(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var i=new Do(e,4,2),r=new Qn({wireframe:!0,fog:!1});Xn.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function xc(t,e){ln.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;var n=new Er({fog:!1}),i=new Ln;i.addAttribute("position",new vn(new Float32Array(15),3)),this.line=new xr(i,n),this.add(this.line),this.update()}function Tc(t,e,n){ln.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new Ur(e);i.rotateY(.5*Math.PI),this.material=new Qn({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=b);var r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.addAttribute("color",new vn(o,3)),this.add(new Xn(i,this.material)),this.update()}function Cc(t,e,n,i){t=t||10,e=e||10,n=new Ke(void 0!==n?n:4473924),i=new Ke(void 0!==i?i:8947848);for(var r=e/2,o=t/e,a=t/2,s=[],c=[],l=0,u=0,h=-a;l<=e;l++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var d=l===r?n:i;d.toArray(c,u),u+=3,d.toArray(c,u),u+=3,d.toArray(c,u),u+=3,d.toArray(c,u),u+=3}var p=new Ln;p.addAttribute("position",new Tn(s,3)),p.addAttribute("color",new Tn(c,3));var f=new Er({vertexColors:b});Tr.call(this,p,f)}function Sc(t,e,n,i,r,o){t=t||10,e=e||16,n=n||8,i=i||64,r=new Ke(void 0!==r?r:4473924),o=new Ke(void 0!==o?o:8947848);var a,s,c,l,u,h,d,p=[],f=[];for(l=0;l<=e;l++)c=l/e*(2*Math.PI),a=Math.sin(c)*t,s=Math.cos(c)*t,p.push(0,0,0),p.push(a,0,s),d=1&l?r:o,f.push(d.r,d.g,d.b),f.push(d.r,d.g,d.b);for(l=0;l<=n;l++)for(d=1&l?r:o,h=t-t/n*l,u=0;u<i;u++)c=u/i*(2*Math.PI),a=Math.sin(c)*h,s=Math.cos(c)*h,p.push(a,0,s),f.push(d.r,d.g,d.b),c=(u+1)/i*(2*Math.PI),a=Math.sin(c)*h,s=Math.cos(c)*h,p.push(a,0,s),f.push(d.r,d.g,d.b);var m=new Ln;m.addAttribute("position",new Tn(p,3)),m.addAttribute("color",new Tn(f,3));var g=new Er({vertexColors:b});Tr.call(this,m,g)}function Dc(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16776960,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry&&(a=s.faces.length);var c=new Ln,l=new Tn(2*a*3,3);c.addAttribute("position",l),Tr.call(this,c,new Er({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function _c(t,e,n){ln.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var i=new Ln;i.addAttribute("position",new Tn([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new Er({fog:!1});this.lightPlane=new xr(i,r),this.add(this.lightPlane),(i=new Ln).addAttribute("position",new Tn([0,0,0,0,0,1],3)),this.targetLine=new xr(i,r),this.add(this.targetLine),this.update()}function Lc(t){var e=new Ln,n=new Er({color:16777215,vertexColors:w}),i=[],r=[],o={},a=new Ke(16755200),s=new Ke(16711680),c=new Ke(43775),l=new Ke(16777215),u=new Ke(3355443);function h(t,e,n){d(t,n),d(e,n)}function d(t,e){i.push(0,0,0),r.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(i.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",l),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),e.addAttribute("position",new Tn(i,3)),e.addAttribute("color",new Tn(r,3)),Tr.call(this,e,n),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Nc(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Ln;r.setIndex(new vn(n,1)),r.addAttribute("position",new vn(i,3)),Tr.call(this,r,new Er({color:e})),this.matrixAutoUpdate=!1,this.update()}function Ic(t,e){this.type="Box3Helper",this.box=t;var n=void 0!==e?e:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Ln;r.setIndex(new vn(i,1)),r.addAttribute("position",new Tn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Tr.call(this,r,new Er({color:n})),this.geometry.computeBoundingSphere()}function Oc(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var i=void 0!==n?n:16776960,r=new Ln;r.addAttribute("position",new Tn([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),xr.call(this,r,new Er({color:i}));var o=new Ln;o.addAttribute("position",new Tn([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Xn(o,new Qn({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function jc(t,e,n,i,r,o){ln.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),void 0===Hs&&((Hs=new Ln).addAttribute("position",new Tn([0,0,0,0,1,0],3)),(Gs=new zo(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new xr(Hs,new Er({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Xn(Gs,new Qn({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,o)}function Pc(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new Ln;n.addAttribute("position",new Tn(e,3)),n.addAttribute("color",new Tn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new Er({vertexColors:b});Tr.call(this,n,i)}function Rc(t){ya.call(this,t),this.type="catmullrom",this.closed=!0}function kc(t){ya.call(this,t),this.type="catmullrom"}function zc(t){ya.call(this,t),this.type="catmullrom"}Object.assign(Ws.prototype,{load:function(t,e,n,i){var r=new ra(this.manager);r.setResponseType("arraybuffer"),r.load(t,function(t){Ys.getContext().decodeAudioData(t,function(t){e(t)})},n,i)}}),Object.assign(qs.prototype,{update:(Ns=new Se,Is=new Se,function(t){if(Es!==this||xs!==t.focus||Ts!==t.fov||Cs!==t.aspect*this.aspect||Ss!==t.near||Ds!==t.far||_s!==t.zoom||Ls!==this.eyeSep){Es=this,xs=t.focus,Ts=t.fov,Cs=t.aspect*this.aspect,Ss=t.near,Ds=t.far,_s=t.zoom;var e,n,i=t.projectionMatrix.clone(),r=(Ls=this.eyeSep/2)*Ss/xs,o=Ss*Math.tan(Te.DEG2RAD*Ts*.5)/_s;Is.elements[12]=-Ls,Ns.elements[12]=Ls,e=-o*Cs+r,n=o*Cs+r,i.elements[0]=2*Ss/(n-e),i.elements[8]=(n+e)/(n-e),this.cameraL.projectionMatrix.copy(i),e=-o*Cs-r,n=o*Cs-r,i.elements[0]=2*Ss/(n-e),i.elements[8]=(n+e)/(n-e),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Is),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Ns)})}),Xs.prototype=Object.create(ln.prototype),Xs.prototype.constructor=Xs,Zs.prototype=Object.assign(Object.create(ln.prototype),{constructor:Zs,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new _e,e=new De,n=new _e,i=new _e;return function(r){ln.prototype.updateMatrixWorld.call(this,r);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(t,e,n),i.set(0,0,-1).applyQuaternion(e),o.positionX?(o.positionX.setValueAtTime(t.x,this.context.currentTime),o.positionY.setValueAtTime(t.y,this.context.currentTime),o.positionZ.setValueAtTime(t.z,this.context.currentTime),o.forwardX.setValueAtTime(i.x,this.context.currentTime),o.forwardY.setValueAtTime(i.y,this.context.currentTime),o.forwardZ.setValueAtTime(i.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(t.x,t.y,t.z),o.setOrientation(i.x,i.y,i.z,a.x,a.y,a.z))}}()}),Ks.prototype=Object.assign(Object.create(ln.prototype),{constructor:Ks,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying&&!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),t.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.connect()}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1!==this.hasPlaybackControl&&this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),Js.prototype=Object.assign(Object.create(Ks.prototype),{constructor:Js,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new _e;return function(e){ln.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign($s.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(tc.prototype,{accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==i;++a)n[r+a]=n[a];o=e}else{var s=e/(o+=e);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,r<1){var a=3*e;this._mixBufferRegion(n,i,a,1-r,e)}for(var s=e,c=e+e;s!==c;++s)if(n[s]!==n[s+e]){o.setValue(n,i);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=3*n;t.getValue(e,i);for(var r=n,o=i;r!==o;++r)e[r]=e[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,i,r){if(i>=.5)for(var o=0;o!==r;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,i){De.slerpFlat(t,e,t,e,t,n,i)},_lerp:function(t,e,n,i,r){for(var o=1-i,a=0;a!==r;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*i}}}),Object.assign(ec.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(nc,{Composite:ec,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new nc.Composite(t,e,n):new nc(t,e,n)},sanitizeNodeName:(Us=new RegExp("[\\[\\]\\.:\\/]","g"),function(t){return t.replace(/\s/g,"_").replace(Us,"")}),parseTrackName:(Os="[^\\[\\]\\.:\\/]",js="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Ps=/((?:WC+[\/:])*)/.source.replace("WC",Os),Rs=/(WCOD+)?/.source.replace("WCOD",js),ks=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Os),zs=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Os),Bs=new RegExp("^"+Ps+Rs+ks+zs+"$"),Fs=["material","materials","bones"],function(t){var e=Bs.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==Fs.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e)return r;var o=i(r.children);if(o)return o}return null},r=i(t.children);if(r)return r}return null}}),Object.assign(nc.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=nc.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return;if(!t.material.materials)return;t=t.material.materials;break;case"bones":if(!t.skeleton)return;t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(void 0===t[n])return;t=t[n]}if(void 0!==o){if(void 0===t[o])return;t=t[o]}}var s=t[i];if(void 0!==s){var c=this.Versioning.None;void 0!==t.needsUpdate?(c=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var l=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return;if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return;for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===r){r=a;break}}else{if(!t.geometry.morphTargets)return;for(a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===r){r=a;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}else e.nodeName}},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(nc.prototype,{_getValue_unbound:nc.prototype.getValue,_setValue_unbound:nc.prototype.setValue}),Object.assign(ic.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,c=0,l=arguments.length;c!==l;++c){var u=arguments[c],h=u.uuid,d=i[h];if(void 0===d){d=e++,i[h]=d,t.push(u);for(var p=0,f=s;p!==f;++p)a[p].push(new nc(u,r[p],o[p]))}else if(d<n){t[d];var m=--n,g=t[m];for(i[g.uuid]=d,t[d]=g,i[h]=m,t[m]=u,p=0,f=s;p!==f;++p){var v=a[p],y=v[m],A=v[d];v[d]=y,void 0===A&&(A=new nc(u,r[p],o[p])),v[m]=A}}else t[d]}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],c=s.uuid,l=n[c];if(void 0!==l&&l>=e){var u=e++,h=t[u];n[h.uuid]=l,t[l]=h,n[c]=u,t[u]=s;for(var d=0,p=r;d!==p;++d){var f=i[d],m=f[u],g=f[l];f[l]=m,f[u]=g}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,o=r.length,a=0,s=arguments.length;a!==s;++a){var c=arguments[a].uuid,l=i[c];if(void 0!==l)if(delete i[c],l<n){var u=--n,h=t[u],d=t[v=--e];i[h.uuid]=l,t[l]=h,i[d.uuid]=u,t[u]=d,t.pop();for(var p=0,f=o;p!==f;++p){var m=(y=r[p])[u],g=y[v];y[l]=m,y[u]=g,y.pop()}}else{var v;for(i[(d=t[v=--e]).uuid]=l,t[l]=d,t.pop(),p=0,f=o;p!==f;++p){var y;(y=r[p])[l]=y[v],y.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var o=this._paths,a=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,u=new Array(c);i=r.length,n[t]=i,o.push(t),a.push(e),r.push(u);for(var h=l,d=s.length;h!==d;++h){var p=s[h];u[h]=new nc(p,t,e)}return u},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}),Object.assign(rc.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,o=r/i,a=i/r;t.warp(1,o,e),this.warp(a,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var i=this._mixer,r=i.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,c=o.sampleValues;return s[0]=r,s[1]=r+n,c[0]=t/a,c[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var o=(t-r)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var c=this._interpolants,l=this._propertyBindings,u=0,h=c.length;u!==h;++u)c[u].evaluate(a),l[u].accumulate(i,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var n=this._clip.duration,i=this.loop,r=this._loopCount;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var o=2202===i;if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||e<0){var a=Math.floor(e/n);e-=n*a,r+=Math.abs(a);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var c=t<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&r))return this.time=e,n-e}return this.time=e,e},_setEndings:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=t?this.zeroSlopeAtStart?2401:de:2402,i.endingEnd=e?this.zeroSlopeAtEnd?2401:de:2402)},_scheduleFading:function(t,e,n){var i=this._mixer,r=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=e,a[1]=r+t,s[1]=n,this}}),oc.prototype=Object.assign(Object.create(e.prototype),{constructor:oc,_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,c=this._bindingsByRootAndName,l=c[s];void 0===l&&(l={},c[s]=l);for(var u=0;u!==r;++u){var h=i[u],d=h.name,p=l[d];if(void 0!==p)o[u]=p;else{if(void 0!==(p=o[u])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}var f=e&&e._propertyBindings[u].binding.parsedPath;++(p=new tc(nc.create(n,d,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,s,d),o[u]=p}a[u].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,o=0,a=r.length;o!==a;++o){var s=r[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=i.length,i.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,c=s[s.length-1],l=t._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=i[e],o=this._bindings;void 0===r&&(r={},i[e]=r),r[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=e[e.length-1],c=t._cacheIndex;s._cacheIndex=c,e[c]=s,e.pop(),delete a[r];t:{for(var l in a)break t;delete o[i]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new Ka(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?ns.findByName(n,t):t,o=null!==r?r.uuid:t,a=this._actionsByClip[o],s=null;if(void 0!==a){var c=a.actionByRoot[i];if(void 0!==c)return c;s=a.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var l=new rc(this,r,e);return this._bindAction(l,s),this._addInactiveAction(l,o,i),l},existingAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?ns.findByName(n,t):t,o=r?r.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a)e[a]._update(i,t,r,o);var s=this._bindings,c=this._nActiveBindings;for(a=0;a!==c;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var o=r.knownActions,a=0,s=o.length;a!==s;++a){var c=o[a];this._deactivateAction(c);var l=c._cacheIndex,u=e[e.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=l,e[l]=u,e.pop(),this._removeInactiveBindingsForAction(c)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var o=this._bindingsByRootAndName[e];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),ac.prototype.clone=function(){return new ac(void 0===this.value.clone?this.value:this.value.clone())},sc.prototype=Object.assign(Object.create(Ln.prototype),{constructor:sc,isInstancedBufferGeometry:!0,copy:function(t){return Ln.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(cc.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(cc.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}}),Object.defineProperty(lc.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(lc.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.stride:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),uc.prototype=Object.assign(Object.create(lc.prototype),{constructor:uc,isInstancedInterleavedBuffer:!0,copy:function(t){return lc.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),hc.prototype=Object.assign(Object.create(vn.prototype),{constructor:hc,isInstancedBufferAttribute:!0,copy:function(t){return vn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(dc.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld))},intersectObject:function(t,e,n){var i=n||[];return fc(t,this,i,e),i.sort(pc),i},intersectObjects:function(t,e,n){var i=n||[];if(!1===Array.isArray(t))return i;for(var r=0,o=t.length;r<o;r++)fc(t[r],this,i,e);return i.sort(pc),i}}),Object.assign(mc.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Object.assign(gc.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(Te.clamp(t.y/this.radius,-1,1))),this}}),Object.assign(vc.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.radius=Math.sqrt(t.x*t.x+t.z*t.z),this.theta=Math.atan2(t.x,t.z),this.y=t.y,this}}),Object.assign(yc.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new Ce;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(t=new Ce),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(t=new Ce),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(e=new Ce),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(e=new Ce),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new Ce;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Ac.prototype=Object.create(ln.prototype),Ac.prototype.constructor=Ac,Ac.prototype.isImmediateRenderObject=!0,wc.prototype=Object.create(Tr.prototype),wc.prototype.constructor=wc,wc.prototype.update=function(){var t=new _e,e=new _e,n=new Le;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,c=a.faces,l=0,u=0,h=c.length;u<h;u++)for(var d=c[u],p=0,f=d.vertexNormals.length;p<f;p++){var m=s[d[i[p]]],g=d.vertexNormals[p];t.copy(m).applyMatrix4(r),e.copy(g).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(l,t.x,t.y,t.z),l+=1,o.setXYZ(l,e.x,e.y,e.z),l+=1}else if(a&&a.isBufferGeometry){var v=a.attributes.position,y=a.attributes.normal;for(l=0,p=0,f=v.count;p<f;p++)t.set(v.getX(p),v.getY(p),v.getZ(p)).applyMatrix4(r),e.set(y.getX(p),y.getY(p),y.getZ(p)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(l,t.x,t.y,t.z),l+=1,o.setXYZ(l,e.x,e.y,e.z),l+=1}o.needsUpdate=!0}}(),bc.prototype=Object.create(ln.prototype),bc.prototype.constructor=bc,bc.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},bc.prototype.update=function(){var t=new _e,e=new _e;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Mc.prototype=Object.create(Tr.prototype),Mc.prototype.constructor=Mc,Mc.prototype.updateMatrixWorld=function(){var t=new _e,e=new Se,n=new Se;return function(i){var r=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,c=0;s<r.length;s++){var l=r[s];l.parent&&l.parent.isBone&&(e.multiplyMatrices(n,l.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(c,t.x,t.y,t.z),e.multiplyMatrices(n,l.parent.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(c+1,t.x,t.y,t.z),c+=2)}o.getAttribute("position").needsUpdate=!0,ln.prototype.updateMatrixWorld.call(this,i)}}(),Ec.prototype=Object.create(Xn.prototype),Ec.prototype.constructor=Ec,Ec.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Ec.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},xc.prototype=Object.create(ln.prototype),xc.prototype.constructor=xc,xc.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},xc.prototype.update=function(){var t=.5*this.light.width,e=.5*this.light.height,n=this.line.geometry.attributes.position,i=n.array;i[0]=t,i[1]=-e,i[2]=0,i[3]=t,i[4]=e,i[5]=0,i[6]=-t,i[7]=e,i[8]=0,i[9]=-t,i[10]=-e,i[11]=0,i[12]=t,i[13]=-e,i[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},Tc.prototype=Object.create(ln.prototype),Tc.prototype.constructor=Tc,Tc.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Tc.prototype.update=function(){var t=new _e,e=new Ke,n=new Ke;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");e.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=r.count;o<a;o++){var s=o<a/2?e:n;r.setXYZ(o,s.r,s.g,s.b)}r.needsUpdate=!0}i.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Cc.prototype=Object.create(Tr.prototype),Cc.prototype.constructor=Cc,Sc.prototype=Object.create(Tr.prototype),Sc.prototype.constructor=Sc,Dc.prototype=Object.create(Tr.prototype),Dc.prototype.constructor=Dc,Dc.prototype.update=function(){var t=new _e,e=new _e,n=new Le;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,c=0,l=0,u=s.length;l<u;l++){var h=s[l],d=h.normal;t.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(i),e.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),r.setXYZ(c,t.x,t.y,t.z),c+=1,r.setXYZ(c,e.x,e.y,e.z),c+=1}r.needsUpdate=!0}}(),_c.prototype=Object.create(ln.prototype),_c.prototype.constructor=_c,_c.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},_c.prototype.update=function(){var t=new _e,e=new _e,n=new _e;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),Lc.prototype=Object.create(Tr.prototype),Lc.prototype.constructor=Lc,Lc.prototype.update=function(){var t,e,n=new _e,i=new un;function r(r,o,a,s){n.set(o,a,s).unproject(i);var c=e[r];if(void 0!==c)for(var l=t.getAttribute("position"),u=0,h=c.length;u<h;u++)l.setXYZ(c[u],n.x,n.y,n.z)}return function(){t=this.geometry,e=this.pointMap,i.projectionMatrix.copy(this.camera.projectionMatrix),r("c",0,0,-1),r("t",0,0,1),r("n1",-1,-1,-1),r("n2",1,-1,-1),r("n3",-1,1,-1),r("n4",1,1,-1),r("f1",-1,-1,1),r("f2",1,-1,1),r("f3",-1,1,1),r("f4",1,1,1),r("u1",.7,1.1,-1),r("u2",-.7,1.1,-1),r("u3",0,2,-1),r("cf1",-1,0,1),r("cf2",1,0,1),r("cf3",0,-1,1),r("cf4",0,1,1),r("cn1",-1,0,-1),r("cn2",1,0,-1),r("cn3",0,-1,-1),r("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),Nc.prototype=Object.create(Tr.prototype),Nc.prototype.constructor=Nc,Nc.prototype.update=function(){var t=new Ge;return function(e){if(void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){var n=t.min,i=t.max,r=this.geometry.attributes.position,o=r.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=n.x,o[4]=i.y,o[5]=i.z,o[6]=n.x,o[7]=n.y,o[8]=i.z,o[9]=i.x,o[10]=n.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=n.z,o[15]=n.x,o[16]=i.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=i.x,o[22]=n.y,o[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Nc.prototype.setFromObject=function(t){return this.object=t,this.update(),this},Ic.prototype=Object.create(Tr.prototype),Ic.prototype.constructor=Ic,Ic.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),ln.prototype.updateMatrixWorld.call(this,t))},Oc.prototype=Object.create(xr.prototype),Oc.prototype.constructor=Oc,Oc.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.lookAt(this.plane.normal),ln.prototype.updateMatrixWorld.call(this,t)},jc.prototype=Object.create(ln.prototype),jc.prototype.constructor=jc,jc.prototype.setDirection=(Vs=new _e,function(t){t.y>.99999?this.quaternion.set(0,0,0,1):t.y<-.99999?this.quaternion.set(1,0,0,0):(Vs.set(t.z,0,-t.x).normalize(),Qs=Math.acos(t.y),this.quaternion.setFromAxisAngle(Vs,Qs))}),jc.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},jc.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},Pc.prototype=Object.create(Tr.prototype),Pc.prototype.constructor=Pc,ua.create=function(t,e){return t.prototype=Object.create(ua.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(La.prototype,{createPointsGeometry:function(t){var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){for(var e=new gn,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new _e(r.x,r.y,r.z||0))}return e}}),Object.assign(Na.prototype,{fromPoints:function(t){this.setFromPoints(t)}}),Rc.prototype=Object.create(ya.prototype),kc.prototype=Object.create(ya.prototype),zc.prototype=Object.create(ya.prototype),Object.assign(zc.prototype,{initFromArray:function(){},getControlPointsArray:function(){},reparametrizeByArcLength:function(){}}),Cc.prototype.setColors=function(){},Mc.prototype.update=function(){},Object.assign(us.prototype,{extractUrlBase:function(t){return hs.extractUrlBase(t)}}),Object.assign(yc.prototype,{center:function(t){return this.getCenter(t)},empty:function(){return this.isEmpty()},isIntersectionBox:function(t){return this.intersectsBox(t)},size:function(t){return this.getSize(t)}}),Object.assign(Ge.prototype,{center:function(t){return this.getCenter(t)},empty:function(){return this.isEmpty()},isIntersectionBox:function(t){return this.intersectsBox(t)},isIntersectionSphere:function(t){return this.intersectsSphere(t)},size:function(t){return this.getSize(t)}}),Wn.prototype.center=function(t){return this.getCenter(t)},Object.assign(Te,{random16:function(){return Math.random()},nearestPowerOfTwo:function(t){return Te.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return Te.ceilPowerOfTwo(t)}}),Object.assign(Le.prototype,{flattenToArrayOffset:function(t,e){return this.toArray(t,e)},multiplyVector3:function(t){return t.applyMatrix3(this)},multiplyVector3Array:function(){},applyToBuffer:function(t){return this.applyToBufferAttribute(t)},applyToVector3Array:function(){}}),Object.assign(Se.prototype,{extractPosition:function(t){return this.copyPosition(t)},flattenToArrayOffset:function(t,e){return this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new _e),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return this.makeRotationFromQuaternion(t)},multiplyToArray:function(){},multiplyVector3:function(t){return t.applyMatrix4(this)},multiplyVector4:function(t){return t.applyMatrix4(this)},multiplyVector3Array:function(){},rotateAxis:function(t){t.transformDirection(this)},crossVector:function(t){return t.applyMatrix4(this)},translate:function(){},rotateX:function(){},rotateY:function(){},rotateZ:function(){},rotateByAxis:function(){},applyToBuffer:function(t){return this.applyToBufferAttribute(t)},applyToVector3Array:function(){},makeFrustum:function(t,e,n,i,r,o){return this.makePerspective(t,e,i,n,r,o)}}),Ve.prototype.isIntersectionLine=function(t){return this.intersectsLine(t)},De.prototype.multiplyVector3=function(t){return t.applyQuaternion(this)},Object.assign(Yn.prototype,{isIntersectionBox:function(t){return this.intersectsBox(t)},isIntersectionPlane:function(t){return this.intersectsPlane(t)},isIntersectionSphere:function(t){return this.intersectsSphere(t)}}),Object.assign(qn.prototype,{area:function(){return this.getArea()},barycoordFromPoint:function(t,e){return this.getBarycoord(t,e)},midpoint:function(t){return this.getMidpoint(t)},normal:function(t){return this.getNormal(t)},plane:function(t){return this.getPlane(t)}}),Object.assign(qn,{barycoordFromPoint:function(t,e,n,i,r){return qn.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return qn.getNormal(t,e,n,i)}}),Object.assign(Ia.prototype,{extractAllPoints:function(t){return this.extractPoints(t)},extrude:function(t){return new Eo(this,t)},makeGeometry:function(t){return new Oo(this,t)}}),Object.assign(Ce.prototype,{fromAttribute:function(t,e,n){return this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return this.manhattanDistanceTo(t)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(_e.prototype,{setEulerFromRotationMatrix:function(){},setEulerFromQuaternion:function(){},getPositionFromMatrix:function(t){return this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return this.setFromMatrixColumn(e,t)},applyProjection:function(t){return this.applyMatrix4(t)},fromAttribute:function(t,e,n){return this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return this.manhattanDistanceTo(t)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(Be.prototype,{fromAttribute:function(t,e,n){return this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(gn.prototype,{computeTangents:function(){},computeLineDistances:function(){}}),Object.assign(ln.prototype,{getChildByName:function(t){return this.getObjectByName(t)},renderDepth:function(){},translate:function(t,e){return this.translateOnAxis(e,t)},getWorldRotation:function(){}}),Object.defineProperties(ln.prototype,{eulerOrder:{get:function(){return this.rotation.order},set:function(t){this.rotation.order=t}},useQuaternion:{get:function(){},set:function(){}}}),Object.defineProperties(Ar.prototype,{objects:{get:function(){return this.levels}}}),Object.defineProperty(wr.prototype,"useVertexTexture",{get:function(){},set:function(){}}),Object.defineProperty(ua.prototype,"__arcLengthDivisions",{get:function(){return this.arcLengthDivisions},set:function(t){this.arcLengthDivisions=t}}),ur.prototype.setLens=function(t,e){void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Oa.prototype,{onlyShadow:{set:function(){}},shadowCameraFov:{set:function(t){this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){}},shadowBias:{set:function(t){this.shadow.bias=t}},shadowDarkness:{set:function(){}},shadowMapWidth:{set:function(t){this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){this.shadow.mapSize.height=t}}}),Object.defineProperties(vn.prototype,{length:{get:function(){return this.array.length}},copyIndicesArray:function(){}}),Object.assign(Ln.prototype,{addIndex:function(t){this.setIndex(t)},addDrawCall:function(t,e,n){this.addGroup(t,e)},clearDrawCalls:function(){this.clearGroups()},computeTangents:function(){},computeOffsets:function(){}}),Object.defineProperties(Ln.prototype,{drawcalls:{get:function(){return this.groups}},offsets:{get:function(){return this.groups}}}),Object.defineProperties(ac.prototype,{dynamic:{set:function(){}},onUpdate:{value:function(){return this}}}),Object.defineProperties(Gn.prototype,{wrapAround:{get:function(){},set:function(){}},wrapRGB:{get:function(){return new Ke}},shading:{get:function(){},set:function(t){this.flatShading=1===t}}}),Object.defineProperties(qo.prototype,{metal:{get:function(){return!1},set:function(){}}}),Object.defineProperties(Vn.prototype,{derivatives:{get:function(){return this.extensions.derivatives},set:function(t){this.extensions.derivatives=t}}}),Object.assign(pr.prototype,{getCurrentRenderTarget:function(){return this.getRenderTarget()},getMaxAnisotropy:function(){return this.capabilities.getMaxAnisotropy()},getPrecision:function(){return this.capabilities.precision},resetGLState:function(){return this.state.reset()},supportsFloatTextures:function(){return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){this.setScissorTest(t)},initMaterial:function(){},addPrePlugin:function(){},addPostPlugin:function(){},updateShadowMap:function(){},setFaceCulling:function(){}}),Object.defineProperties(pr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){this.shadowMap.type=t}},shadowMapCullFace:{get:function(){},set:function(){}}}),Object.defineProperties(ar.prototype,{cullFace:{get:function(){},set:function(){}},renderReverseSided:{get:function(){},set:function(){}},renderSingleSided:{get:function(){},set:function(){}}}),Object.defineProperties(Fe.prototype,{wrapS:{get:function(){return this.texture.wrapS},set:function(t){this.texture.wrapS=t}},wrapT:{get:function(){return this.texture.wrapT},set:function(t){this.texture.wrapT=t}},magFilter:{get:function(){return this.texture.magFilter},set:function(t){this.texture.magFilter=t}},minFilter:{get:function(){return this.texture.minFilter},set:function(t){this.texture.minFilter=t}},anisotropy:{get:function(){return this.texture.anisotropy},set:function(t){this.texture.anisotropy=t}},offset:{get:function(){return this.texture.offset},set:function(t){this.texture.offset=t}},repeat:{get:function(){return this.texture.repeat},set:function(t){this.texture.repeat=t}},format:{get:function(){return this.texture.format},set:function(t){this.texture.format=t}},type:{get:function(){return this.texture.type},set:function(t){this.texture.type=t}},generateMipmaps:{get:function(){return this.texture.generateMipmaps},set:function(t){this.texture.generateMipmaps=t}}}),Object.defineProperties(dr.prototype,{standing:{set:function(){}}}),Ks.prototype.load=function(t){var e=this;return(new Ws).load(t,function(t){e.setBuffer(t)}),this},$s.prototype.getData=function(){return this.getFrequencyData()},Xs.prototype.updateCubeMap=function(t,e){return this.update(t,e)};var Bc={crossOrigin:void 0,loadTexture:function(t,e,n,i){var r=new la;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},loadTextureCube:function(t,e,n,i){var r=new ca;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},loadCompressedTexture:function(){},loadCompressedTextureCube:function(){}};t.WebGLRenderTargetCube=Ue,t.WebGLRenderTarget=Fe,t.WebGLRenderer=pr,t.ShaderLib=tn,t.UniformsLib=$e,t.UniformsUtils=Xe,t.ShaderChunk=qe,t.FogExp2=fr,t.Fog=mr,t.Scene=gr,t.Sprite=yr,t.LOD=Ar,t.SkinnedMesh=Mr,t.Skeleton=wr,t.Bone=br,t.Mesh=Xn,t.LineSegments=Tr,t.LineLoop=Cr,t.Line=xr,t.Points=Dr,t.Group=_r,t.VideoTexture=Lr,t.DataTexture=He,t.CompressedTexture=Nr,t.CubeTexture=Kn,t.CanvasTexture=sr,t.DepthTexture=Ir,t.Texture=ze,t.CompressedTextureLoader=oa,t.DataTextureLoader=aa,t.CubeTextureLoader=ca,t.TextureLoader=la,t.ObjectLoader=ps,t.MaterialLoader=is,t.BufferGeometryLoader=rs,t.DefaultLoadingManager=na,t.LoadingManager=ea,t.JSONLoader=ds,t.ImageLoader=sa,t.ImageBitmapLoader=ys,t.FontLoader=Ms,t.FileLoader=ra,t.Loader=us,t.LoaderUtils=hs,t.Cache=ta,t.AudioLoader=Ws,t.SpotLightShadow=Ra,t.SpotLight=ka,t.PointLight=za,t.RectAreaLight=Ha,t.HemisphereLight=ja,t.DirectionalLightShadow=Ba,t.DirectionalLight=Fa,t.AmbientLight=Ua,t.LightShadow=Pa,t.Light=Oa,t.StereoCamera=qs,t.PerspectiveCamera=ur,t.OrthographicCamera=hn,t.CubeCamera=Xs,t.ArrayCamera=hr,t.Camera=un,t.AudioListener=Zs,t.PositionalAudio=Js,t.AudioContext=Ys,t.AudioAnalyser=$s,t.Audio=Ks,t.VectorKeyframeTrack=es,t.StringKeyframeTrack=Ga,t.QuaternionKeyframeTrack=Wa,t.NumberKeyframeTrack=Xa,t.ColorKeyframeTrack=qa,t.BooleanKeyframeTrack=Qa,t.PropertyMixer=tc,t.PropertyBinding=nc,t.KeyframeTrack=ts,t.AnimationUtils=$a,t.AnimationObjectGroup=ic,t.AnimationMixer=oc,t.AnimationClip=ns,t.Uniform=ac,t.InstancedBufferGeometry=sc,t.BufferGeometry=Ln,t.Geometry=gn,t.InterleavedBufferAttribute=cc,t.InstancedInterleavedBuffer=uc,t.InterleavedBuffer=lc,t.InstancedBufferAttribute=hc,t.Face3=dn,t.Object3D=ln,t.Raycaster=dc,t.Layers=nn,t.EventDispatcher=e,t.Clock=mc,t.QuaternionLinearInterpolant=Ya,t.LinearInterpolant=Ka,t.DiscreteInterpolant=Ja,t.CubicInterpolant=Za,t.Interpolant=Va,t.Triangle=qn,t.Math=Te,t.Spherical=gc,t.Cylindrical=vc,t.Plane=Ve,t.Frustum=Ye,t.Sphere=Qe,t.Ray=Yn,t.Matrix4=Se,t.Matrix3=Le,t.Box3=Ge,t.Box2=yc,t.Line3=Wn,t.Euler=en,t.Vector4=Be,t.Vector3=_e,t.Vector2=Ce,t.Quaternion=De,t.Color=Ke,t.ImmediateRenderObject=Ac,t.VertexNormalsHelper=wc,t.SpotLightHelper=bc,t.SkeletonHelper=Mc,t.PointLightHelper=Ec,t.RectAreaLightHelper=xc,t.HemisphereLightHelper=Tc,t.GridHelper=Cc,t.PolarGridHelper=Sc,t.FaceNormalsHelper=Dc,t.DirectionalLightHelper=_c,t.CameraHelper=Lc,t.BoxHelper=Nc,t.Box3Helper=Ic,t.PlaneHelper=Oc,t.ArrowHelper=jc,t.AxesHelper=Pc,t.Shape=Ia,t.Path=Na,t.ShapePath=As,t.Font=ws,t.CurvePath=La,t.Curve=ua,t.ShapeUtils=wo,t.WebGLUtils=lr,t.WireframeGeometry=Or,t.ParametricGeometry=jr,t.ParametricBufferGeometry=Pr,t.TetrahedronGeometry=zr,t.TetrahedronBufferGeometry=Br,t.OctahedronGeometry=Fr,t.OctahedronBufferGeometry=Ur,t.IcosahedronGeometry=Hr,t.IcosahedronBufferGeometry=Gr,t.DodecahedronGeometry=Qr,t.DodecahedronBufferGeometry=Vr,t.PolyhedronGeometry=Rr,t.PolyhedronBufferGeometry=kr,t.TubeGeometry=Yr,t.TubeBufferGeometry=Wr,t.TorusKnotGeometry=qr,t.TorusKnotBufferGeometry=Xr,t.TorusGeometry=Zr,t.TorusBufferGeometry=Kr,t.TextGeometry=To,t.TextBufferGeometry=Co,t.SphereGeometry=So,t.SphereBufferGeometry=Do,t.RingGeometry=_o,t.RingBufferGeometry=Lo,t.PlaneGeometry=On,t.PlaneBufferGeometry=jn,t.LatheGeometry=No,t.LatheBufferGeometry=Io,t.ShapeGeometry=Oo,t.ShapeBufferGeometry=jo,t.ExtrudeGeometry=Eo,t.ExtrudeBufferGeometry=xo,t.EdgesGeometry=Ro,t.ConeGeometry=Bo,t.ConeBufferGeometry=Fo,t.CylinderGeometry=ko,t.CylinderBufferGeometry=zo,t.CircleGeometry=Uo,t.CircleBufferGeometry=Ho,t.BoxGeometry=Nn,t.BoxBufferGeometry=In,t.ShadowMaterial=Qo,t.SpriteMaterial=vr,t.RawShaderMaterial=Vo,t.ShaderMaterial=Vn,t.PointsMaterial=Sr,t.MeshPhysicalMaterial=Wo,t.MeshStandardMaterial=Yo,t.MeshPhongMaterial=qo,t.MeshToonMaterial=Xo,t.MeshNormalMaterial=Zo,t.MeshLambertMaterial=Ko,t.MeshDepthMaterial=rr,t.MeshDistanceMaterial=or,t.MeshBasicMaterial=Qn,t.LineDashedMaterial=Jo,t.LineBasicMaterial=Er,t.Material=Gn,t.Float64BufferAttribute=Cn,t.Float32BufferAttribute=Tn,t.Uint32BufferAttribute=xn,t.Int32BufferAttribute=En,t.Uint16BufferAttribute=Mn,t.Int16BufferAttribute=bn,t.Uint8ClampedBufferAttribute=wn,t.Uint8BufferAttribute=An,t.Int8BufferAttribute=yn,t.BufferAttribute=vn,t.ArcCurve=da,t.CatmullRomCurve3=ya,t.CubicBezierCurve=Ma,t.CubicBezierCurve3=Ea,t.EllipseCurve=ha,t.LineCurve=xa,t.LineCurve3=Ta,t.QuadraticBezierCurve=Ca,t.QuadraticBezierCurve3=Sa,t.SplineCurve=Da,t.REVISION="92dev",t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},t.CullFaceNone=h,t.CullFaceBack=d,t.CullFaceFront=p,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=0,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=f,t.PCFSoftShadowMap=m,t.FrontSide=g,t.BackSide=v,t.DoubleSide=y,t.FlatShading=1,t.SmoothShading=2,t.NoColors=A,t.FaceColors=w,t.VertexColors=b,t.NoBlending=M,t.NormalBlending=E,t.AdditiveBlending=x,t.SubtractiveBlending=T,t.MultiplyBlending=C,t.CustomBlending=S,t.AddEquation=D,t.SubtractEquation=_,t.ReverseSubtractEquation=L,t.MinEquation=N,t.MaxEquation=I,t.ZeroFactor=O,t.OneFactor=j,t.SrcColorFactor=P,t.OneMinusSrcColorFactor=R,t.SrcAlphaFactor=k,t.OneMinusSrcAlphaFactor=z,t.DstAlphaFactor=B,t.OneMinusDstAlphaFactor=F,t.DstColorFactor=U,t.OneMinusDstColorFactor=H,t.SrcAlphaSaturateFactor=G,t.NeverDepth=Q,t.AlwaysDepth=V,t.LessDepth=Y,t.LessEqualDepth=W,t.EqualDepth=q,t.GreaterEqualDepth=X,t.GreaterDepth=Z,t.NotEqualDepth=K,t.MultiplyOperation=J,t.MixOperation=$,t.AddOperation=tt,t.NoToneMapping=et,t.LinearToneMapping=nt,t.ReinhardToneMapping=it,t.Uncharted2ToneMapping=rt,t.CineonToneMapping=ot,t.UVMapping=300,t.CubeReflectionMapping=at,t.CubeRefractionMapping=st,t.EquirectangularReflectionMapping=ct,t.EquirectangularRefractionMapping=lt,t.SphericalReflectionMapping=ut,t.CubeUVReflectionMapping=ht,t.CubeUVRefractionMapping=dt,t.RepeatWrapping=pt,t.ClampToEdgeWrapping=ft,t.MirroredRepeatWrapping=mt,t.NearestFilter=gt,t.NearestMipMapNearestFilter=vt,t.NearestMipMapLinearFilter=yt,t.LinearFilter=At,t.LinearMipMapNearestFilter=wt,t.LinearMipMapLinearFilter=bt,t.UnsignedByteType=Mt,t.ByteType=Et,t.ShortType=xt,t.UnsignedShortType=Tt,t.IntType=Ct,t.UnsignedIntType=St,t.FloatType=Dt,t.HalfFloatType=_t,t.UnsignedShort4444Type=Lt,t.UnsignedShort5551Type=Nt,t.UnsignedShort565Type=It,t.UnsignedInt248Type=Ot,t.AlphaFormat=jt,t.RGBFormat=Pt,t.RGBAFormat=Rt,t.LuminanceFormat=kt,t.LuminanceAlphaFormat=zt,t.RGBEFormat=Bt,t.DepthFormat=Ft,t.DepthStencilFormat=Ut,t.RGB_S3TC_DXT1_Format=Ht,t.RGBA_S3TC_DXT1_Format=Gt,t.RGBA_S3TC_DXT3_Format=Qt,t.RGBA_S3TC_DXT5_Format=Vt,t.RGB_PVRTC_4BPPV1_Format=Yt,t.RGB_PVRTC_2BPPV1_Format=Wt,t.RGBA_PVRTC_4BPPV1_Format=qt,t.RGBA_PVRTC_2BPPV1_Format=Xt,t.RGB_ETC1_Format=Zt,t.RGBA_ASTC_4x4_Format=Kt,t.RGBA_ASTC_5x4_Format=Jt,t.RGBA_ASTC_5x5_Format=$t,t.RGBA_ASTC_6x5_Format=te,t.RGBA_ASTC_6x6_Format=ee,t.RGBA_ASTC_8x5_Format=ne,t.RGBA_ASTC_8x6_Format=ie,t.RGBA_ASTC_8x8_Format=re,t.RGBA_ASTC_10x5_Format=oe,t.RGBA_ASTC_10x6_Format=ae,t.RGBA_ASTC_10x8_Format=se,t.RGBA_ASTC_10x10_Format=ce,t.RGBA_ASTC_12x10_Format=le,t.RGBA_ASTC_12x12_Format=ue,t.LoopOnce=2200,t.LoopRepeat=he,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=de,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=pe,t.TriangleStripDrawMode=fe,t.TriangleFanDrawMode=me,t.LinearEncoding=ge,t.sRGBEncoding=ve,t.GammaEncoding=ye,t.RGBEEncoding=Ae,t.LogLuvEncoding=3003,t.RGBM7Encoding=we,t.RGBM16Encoding=be,t.RGBDEncoding=Me,t.BasicDepthPacking=Ee,t.RGBADepthPacking=xe,t.CubeGeometry=Nn,t.Face4=function(t,e,n,i,r,o,a){return new dn(t,e,n,r,o,a)},t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=function(t){return t},t.MultiMaterial=function(t){return void 0===t&&(t=[]),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},t.PointCloud=function(t,e){return new Dr(t,e)},t.Particle=function(t){return new yr(t)},t.ParticleSystem=function(t,e){return new Dr(t,e)},t.PointCloudMaterial=function(t){return new Sr(t)},t.ParticleBasicMaterial=function(t){return new Sr(t)},t.ParticleSystemMaterial=function(t){return new Sr(t)},t.Vertex=function(t,e,n){return new _e(t,e,n)},t.DynamicBufferAttribute=function(t,e){return new vn(t,e).setDynamic(!0)},t.Int8Attribute=function(t,e){return new yn(t,e)},t.Uint8Attribute=function(t,e){return new An(t,e)},t.Uint8ClampedAttribute=function(t,e){return new wn(t,e)},t.Int16Attribute=function(t,e){return new bn(t,e)},t.Uint16Attribute=function(t,e){return new Mn(t,e)},t.Int32Attribute=function(t,e){return new En(t,e)},t.Uint32Attribute=function(t,e){return new xn(t,e)},t.Float32Attribute=function(t,e){return new Tn(t,e)},t.Float64Attribute=function(t,e){return new Cn(t,e)},t.ClosedSplineCurve3=Rc,t.SplineCurve3=kc,t.Spline=zc,t.AxisHelper=function(t){return new Pc(t)},t.BoundingBoxHelper=function(t,e){return new Nc(t,e)},t.EdgesHelper=function(t,e){return new Tr(new Ro(t.geometry),new Er({color:void 0!==e?e:16777215}))},t.WireframeHelper=function(t,e){return new Tr(new Or(t.geometry),new Er({color:void 0!==e?e:16777215}))},t.XHRLoader=function(t){return new ra(t)},t.BinaryTextureLoader=function(t){return new aa(t)},t.GeometryUtils={merge:function(t,e,n){var i;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return t.center()}},t.ImageUtils=Bc,t.Projector=function(){this.projectVector=function(t,e){t.project(e)},this.unprojectVector=function(t,e){t.unproject(e)},this.pickingRay=function(){}},t.CanvasRenderer=function(){this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},t.SceneUtils={createMultiMaterialObject:function(){},detach:function(){},attach:function(){}},t.LensFlare=function(){},Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&void 0!==e?n:this.THREE={})},{}],41:[function(t,e,n){THREE.ColladaLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.ColladaLoader.prototype={constructor:THREE.ColladaLoader,crossOrigin:"Anonymous",load:function(t,e,n,i){var r=this,o=void 0===r.path?THREE.LoaderUtils.extractUrlBase(t):r.path;new THREE.FileLoader(r.manager).load(t,function(t){e(r.parse(t,o))},n,i)},setPath:function(t){this.path=t},options:{set convertUpAxis(t){}},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){function n(t,e){for(var n=[],i=t.childNodes,r=0,o=i.length;r<o;r++){var a=i[r];a.nodeName===e&&n.push(a)}return n}function i(t){if(0===t.length)return[];for(var e=t.trim().split(/\s+/),n=new Array(e.length),i=0,r=e.length;i<r;i++)n[i]=e[i];return n}function r(t){if(0===t.length)return[];for(var e=t.trim().split(/\s+/),n=new Array(e.length),i=0,r=e.length;i<r;i++)n[i]=parseFloat(e[i]);return n}function o(t){if(0===t.length)return[];for(var e=t.trim().split(/\s+/),n=new Array(e.length),i=0,r=e.length;i<r;i++)n[i]=parseInt(e[i]);return n}function a(t){return t.substring(1)}function s(t){return 0===Object.keys(t).length}function c(t,e,i,r){var o=n(t,e)[0];if(void 0!==o)for(var a=n(o,i),s=0;s<a.length;s++)r(a[s])}function l(t,e){for(var n in t)t[n].build=e(t[n])}function u(t,e){return void 0!==t.build?t.build:(t.build=e(t),t.build)}function h(t){for(var e={inputs:{}},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"input":var o=a(r.getAttribute("source")),s=r.getAttribute("semantic");e.inputs[s]=o}}return e}function d(t){var e={},n=t.getAttribute("target").split("/"),i=n.shift(),r=n.shift(),o=-1!==r.indexOf("("),s=-1!==r.indexOf(".");if(s)r=(n=r.split(".")).shift(),e.member=n.shift();else if(o){var c=r.split("(");r=c.shift();for(var l=0;l<c.length;l++)c[l]=parseInt(c[l].replace(/\)/,""));e.indices=c}return e.id=i,e.sid=r,e.arraySyntax=o,e.memberSyntax=s,e.sampler=a(t.getAttribute("source")),e}function p(t){var e=[],n=t.channels,i=t.samplers,r=t.sources;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o],s=i[a.sampler],c=s.inputs.INPUT,l=s.inputs.OUTPUT;A(m(a,r[c],r[l]),e)}return e}function f(t){return u(zt.animations[t],p)}function m(t,e,n){var i,r,o,a,s,c,l=zt.nodes[t.id],u=St(l.id),h=l.transforms[t.sid],d=l.matrix.clone().transpose(),p={};switch(h){case"matrix":for(o=0,a=e.array.length;o<a;o++)if(i=e.array[o],r=o*n.stride,void 0===p[i]&&(p[i]={}),!0===t.arraySyntax){var f=n.array[r],m=t.indices[0]+4*t.indices[1];p[i][m]=f}else for(s=0,c=n.stride;s<c;s++)p[i][s]=n.array[r+s]}var g=function(t,e){var n=[];for(var i in t)n.push({time:parseFloat(i),value:t[i]});n.sort(function(t,e){return t.time-e.time});for(var r=0;r<16;r++)w(n,r,e.elements[r]);return n}(p,d);return{name:u.uuid,keyframes:g}}var g=new THREE.Vector3,v=new THREE.Vector3,y=new THREE.Quaternion;function A(t,e){for(var n=t.keyframes,i=t.name,r=[],o=[],a=[],s=[],c=0,l=n.length;c<l;c++){var u=n[c],h=u.time,d=u.value;yt.fromArray(d).transpose(),yt.decompose(g,y,v),r.push(h),o.push(g.x,g.y,g.z),a.push(y.x,y.y,y.z,y.w),s.push(v.x,v.y,v.z)}return o.length>0&&e.push(new THREE.VectorKeyframeTrack(i+".position",r,o)),a.length>0&&e.push(new THREE.QuaternionKeyframeTrack(i+".quaternion",r,a)),s.length>0&&e.push(new THREE.VectorKeyframeTrack(i+".scale",r,s)),e}function w(t,e,n){var i,r,o,a=!0;for(r=0,o=t.length;r<o;r++)void 0===(i=t[r]).value[e]?i.value[e]=null:a=!1;if(!0===a)for(r=0,o=t.length;r<o;r++)(i=t[r]).value[e]=n;else!function(t,e){for(var n,i,r=0,o=t.length;r<o;r++){var a=t[r];if(null===a.value[e]){if(n=b(t,r,e),i=M(t,r,e),null===n){a.value[e]=i.value[e];continue}if(null===i){a.value[e]=n.value[e];continue}E(a,n,i,e)}}}(t,e)}function b(t,e,n){for(;e>=0;){var i=t[e];if(null!==i.value[n])return i;e--}return null}function M(t,e,n){for(;e<t.length;){var i=t[e];if(null!==i.value[n])return i;e++}return null}function E(t,e,n,i){n.time-e.time!=0?t.value[i]=(t.time-e.time)*(n.value[i]-e.value[i])/(n.time-e.time)+e.value[i]:t.value[i]=e.value[i]}function x(t){for(var e=[],n=t.name,i=t.end-t.start||-1,r=t.animations,o=0,a=r.length;o<a;o++)for(var s=f(r[o]),c=0,l=s.length;c<l;c++)e.push(s[c]);return new THREE.AnimationClip(n,i,e)}function T(t){return u(zt.clips[t],x)}function C(t){for(var e={sources:{}},n=0,i=t.childNodes.length;n<i;n++){var o=t.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"bind_shape_matrix":e.bindShapeMatrix=r(o.textContent);break;case"source":var a=o.getAttribute("id");e.sources[a]=et(o);break;case"joints":e.joints=S(o);break;case"vertex_weights":e.vertexWeights=D(o)}}return e}function S(t){for(var e={inputs:{}},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"input":var o=r.getAttribute("semantic"),s=a(r.getAttribute("source"));e.inputs[o]=s}}return e}function D(t){for(var e={inputs:{}},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"input":var s=r.getAttribute("semantic"),c=a(r.getAttribute("source")),l=parseInt(r.getAttribute("offset"));e.inputs[s]={id:c,offset:l};break;case"vcount":e.vcount=o(r.textContent);break;case"v":e.v=o(r.textContent)}}return e}function _(t){var e={id:t.id},n=zt.geometries[e.id];return void 0!==t.skin&&(e.skin=function(t){var e,n,i,r={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},o=t.sources,a=t.vertexWeights,s=a.vcount,c=a.v,l=a.inputs.JOINT.offset,u=a.inputs.WEIGHT.offset,h=t.sources[t.joints.inputs.JOINT],d=t.sources[t.joints.inputs.INV_BIND_MATRIX],p=o[a.inputs.WEIGHT.id].array,f=0;for(e=0,i=s.length;e<i;e++){var m=s[e],g=[];for(n=0;n<m;n++){var v=c[f+l],y=p[c[f+u]];g.push({index:v,weight:y}),f+=2}for(g.sort(M),n=0;n<4;n++){var A=g[n];void 0!==A?(r.indices.array.push(A.index),r.weights.array.push(A.weight)):(r.indices.array.push(0),r.weights.array.push(0))}}for(r.bindMatrix=(new THREE.Matrix4).fromArray(t.bindShapeMatrix).transpose(),e=0,i=h.array.length;e<i;e++){var w=h.array[e],b=(new THREE.Matrix4).fromArray(d.array,e*d.stride).transpose();r.joints.push({name:w,boneInverse:b})}return r;function M(t,e){return e.weight-t.weight}}(t.skin),n.sources.skinIndices=e.skin.indices,n.sources.skinWeights=e.skin.weights),e}function L(t){return void 0!==t.build?t.build:t.init_from}function N(t){for(var e={surfaces:{},samplers:{}},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"newparam":I(r,e);break;case"technique":e.technique=P(r);break;case"extra":e.extra=U(r)}}return e}function I(t,e){for(var n=t.getAttribute("sid"),i=0,r=t.childNodes.length;i<r;i++){var o=t.childNodes[i];if(1===o.nodeType)switch(o.nodeName){case"surface":e.surfaces[n]=O(o);break;case"sampler2D":e.samplers[n]=j(o)}}}function O(t){for(var e={},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"init_from":e.init_from=r.textContent}}return e}function j(t){for(var e={},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"source":e.source=r.textContent}}return e}function P(t){for(var e={},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"constant":case"lambert":case"blinn":case"phong":e.type=r.nodeName,e.parameters=R(r)}}return e}function R(t){for(var e={},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"emission":case"diffuse":case"specular":case"shininess":case"transparency":e[r.nodeName]=k(r);break;case"transparent":e[r.nodeName]={opaque:r.getAttribute("opaque"),data:k(r)}}}return e}function k(t){for(var e={},n=0,i=t.childNodes.length;n<i;n++){var o=t.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"color":e[o.nodeName]=r(o.textContent);break;case"float":e[o.nodeName]=parseFloat(o.textContent);break;case"texture":e[o.nodeName]={id:o.getAttribute("texture"),extra:z(o)}}}return e}function z(t){for(var e={technique:{}},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"extra":B(r,e)}}return e}function B(t,e){for(var n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"technique":F(r,e)}}}function F(t,e){for(var n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":e.technique[r.nodeName]=parseFloat(r.textContent);break;case"wrapU":case"wrapV":"TRUE"===r.textContent.toUpperCase()?e.technique[r.nodeName]=1:"FALSE"===r.textContent.toUpperCase()?e.technique[r.nodeName]=0:e.technique[r.nodeName]=parseInt(r.textContent)}}}function U(t){for(var e={},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"technique":e.technique=H(r)}}return e}function H(t){for(var e={},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"double_sided":e[r.nodeName]=parseInt(r.textContent)}}return e}function G(t){return t}function Q(t){var e,n,i=(e=t.url,u(zt.effects[e],G)),r=i.profile.technique,o=i.profile.extra;switch(r.type){case"phong":case"blinn":n=new THREE.MeshPhongMaterial;break;case"lambert":n=new THREE.MeshLambertMaterial;break;default:n=new THREE.MeshBasicMaterial}function a(t){var e,n=i.profile.samplers[t.id];if(void 0!==(e=function(t){return u(zt.images[t],L)}(void 0!==n?i.profile.surfaces[n.source].init_from:t.id))){var r=jt.load(e),o=t.extra;if(void 0!==o&&void 0!==o.technique&&!1===s(o.technique)){var a=o.technique;r.wrapS=a.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,r.wrapT=a.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,r.offset.set(a.offsetU||0,a.offsetV||0),r.repeat.set(a.repeatU||1,a.repeatV||1)}else r.wrapS=THREE.RepeatWrapping,r.wrapT=THREE.RepeatWrapping;return r}return null}n.name=t.name;var c=r.parameters;for(var l in c){var h=c[l];switch(l){case"diffuse":h.color&&n.color.fromArray(h.color),h.texture&&(n.map=a(h.texture));break;case"specular":h.color&&n.specular&&n.specular.fromArray(h.color),h.texture&&(n.specularMap=a(h.texture));break;case"shininess":h.float&&n.shininess&&(n.shininess=h.float);break;case"emission":h.color&&n.emissive&&n.emissive.fromArray(h.color)}}var d=c.transparent,p=c.transparency;if(void 0===p&&d&&(p={float:1}),void 0===d&&p&&(d={opaque:"A_ONE",data:{color:[1,1,1,1]}}),d&&p)if(d.data.texture)n.alphaMap=a(d.data.texture),n.transparent=!0;else{var f=d.data.color;switch(d.opaque){case"A_ONE":n.opacity=f[3]*p.float;break;case"RGB_ZERO":n.opacity=1-f[0]*p.float;break;case"A_ZERO":n.opacity=1-f[3]*p.float;break;case"RGB_ONE":n.opacity=f[0]*p.float}n.opacity<1&&(n.transparent=!0)}return void 0!==o&&void 0!==o.technique&&1===o.technique.double_sided&&(n.side=THREE.DoubleSide),n}function V(t){return u(zt.materials[t],Q)}function Y(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];switch(n.nodeName){case"technique_common":return W(n)}}return{}}function W(t){for(var e={},n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];switch(i.nodeName){case"perspective":case"orthographic":e.technique=i.nodeName,e.parameters=q(i)}}return e}function q(t){for(var e={},n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];switch(i.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":e[i.nodeName]=parseFloat(i.textContent)}}return e}function X(t){var e;switch(t.optics.technique){case"perspective":e=new THREE.PerspectiveCamera(t.optics.parameters.yfov,t.optics.parameters.aspect_ratio,t.optics.parameters.znear,t.optics.parameters.zfar);break;case"orthographic":var n=t.optics.parameters.ymag,i=t.optics.parameters.xmag,r=t.optics.parameters.aspect_ratio;i=void 0===i?n*r:i,n=void 0===n?i/r:n,i*=.5,n*=.5,e=new THREE.OrthographicCamera(-i,i,n,-n,t.optics.parameters.znear,t.optics.parameters.zfar);break;default:e=new THREE.PerspectiveCamera}return e.name=t.name,e}function Z(t){var e=zt.cameras[t];return void 0!==e?u(e,X):null}function K(t){for(var e={},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"directional":case"point":case"spot":case"ambient":e.technique=r.nodeName,e.parameters=J(r)}}return e}function J(t){for(var e={},n=0,i=t.childNodes.length;n<i;n++){var o=t.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"color":var a=r(o.textContent);e.color=(new THREE.Color).fromArray(a);break;case"falloff_angle":e.falloffAngle=parseFloat(o.textContent);break;case"quadratic_attenuation":var s=parseFloat(o.textContent);e.distance=s?Math.sqrt(1/s):0}}return e}function $(t){var e;switch(t.technique){case"directional":e=new THREE.DirectionalLight;break;case"point":e=new THREE.PointLight;break;case"spot":e=new THREE.SpotLight;break;case"ambient":e=new THREE.AmbientLight}return t.parameters.color&&e.color.copy(t.parameters.color),t.parameters.distance&&(e.distance=t.parameters.distance),e}function tt(t){var e=zt.lights[t];return void 0!==e?u(e,$):null}function et(t){for(var e={array:[],stride:3},o=0;o<t.childNodes.length;o++){var a=t.childNodes[o];if(1===a.nodeType)switch(a.nodeName){case"float_array":e.array=r(a.textContent);break;case"Name_array":e.array=i(a.textContent);break;case"technique_common":var s=n(a,"accessor")[0];void 0!==s&&(e.stride=parseInt(s.getAttribute("stride")))}}return e}function nt(t){for(var e={},n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];1===i.nodeType&&(e[i.getAttribute("semantic")]=a(i.getAttribute("source")))}return e}function it(t){for(var e={type:t.nodeName,material:t.getAttribute("material"),count:parseInt(t.getAttribute("count")),inputs:{},stride:0,hasUV:!1},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"input":var s=a(r.getAttribute("source")),c=r.getAttribute("semantic"),l=parseInt(r.getAttribute("offset"));e.inputs[c]={id:s,offset:l},e.stride=Math.max(e.stride,l+1),"TEXCOORD"===c&&(e.hasUV=!0);break;case"vcount":e.vcount=o(r.textContent);break;case"p":e.p=o(r.textContent)}}return e}function rt(t){for(var e=0,n=0,i=t.length;n<i;n++)!0===t[n].hasUV&&e++;e>0&&e<t.length&&(t.uvsNeedsFix=!0)}function ot(t){var e={},n=t.sources,i=t.vertices,r=t.primitives;if(0===r.length)return{};var o=function(t){for(var e={},n=0;n<t.length;n++){var i=t[n];void 0===e[i.type]&&(e[i.type]=[]),e[i.type].push(i)}return e}(r);for(var a in o){var s=o[a];rt(s),e[a]=at(s,n,i)}return e}function at(t,e,n){for(var i={},r={array:[],stride:0},o={array:[],stride:0},a={array:[],stride:0},s={array:[],stride:0},c=[],l=[],u=new THREE.BufferGeometry,h=[],d=0,p=0;p<t.length;p++){var f=t[p],m=f.inputs,g=0;switch(f.type){case"lines":case"linestrips":g=2*f.count;break;case"triangles":g=3*f.count;break;case"polylist":for(var v=0;v<f.count;v++){var y=f.vcount[v];switch(y){case 3:g+=3;break;case 4:g+=6;break;default:g+=3*(y-2)}}}for(var A in u.addGroup(d,g,p),d+=g,f.material&&h.push(f.material),m){var w=m[A];switch(A){case"VERTEX":for(var b in n){var M=n[b];switch(b){case"POSITION":var E=r.array.length;if(st(f,e[M],w.offset,r.array),r.stride=e[M].stride,e.skinWeights&&e.skinIndices&&(st(f,e.skinIndices,w.offset,c),st(f,e.skinWeights,w.offset,l)),!1===f.hasUV&&!0===t.uvsNeedsFix){g=(r.array.length-E)/r.stride;for(var x=0;x<g;x++)a.array.push(0,0)}break;case"NORMAL":st(f,e[M],w.offset,o.array),o.stride=e[M].stride;break;case"COLOR":st(f,e[M],w.offset,s.array),s.stride=e[M].stride;break;case"TEXCOORD":st(f,e[M],w.offset,a.array),a.stride=e[M].stride}}break;case"NORMAL":st(f,e[w.id],w.offset,o.array),o.stride=e[w.id].stride;break;case"COLOR":st(f,e[w.id],w.offset,s.array),s.stride=e[w.id].stride;break;case"TEXCOORD":st(f,e[w.id],w.offset,a.array),a.stride=e[w.id].stride}}}return r.array.length>0&&u.addAttribute("position",new THREE.Float32BufferAttribute(r.array,r.stride)),o.array.length>0&&u.addAttribute("normal",new THREE.Float32BufferAttribute(o.array,o.stride)),s.array.length>0&&u.addAttribute("color",new THREE.Float32BufferAttribute(s.array,s.stride)),a.array.length>0&&u.addAttribute("uv",new THREE.Float32BufferAttribute(a.array,a.stride)),c.length>0&&u.addAttribute("skinIndex",new THREE.Float32BufferAttribute(c,4)),l.length>0&&u.addAttribute("skinWeight",new THREE.Float32BufferAttribute(l,4)),i.data=u,i.type=t[0].type,i.materialKeys=h,i}function st(t,e,n,i){var r=t.p,o=t.stride,a=t.vcount;function s(t){for(var e=r[t+n]*l,o=e+l;e<o;e++)i.push(c[e])}var c=e.array,l=e.stride;if(void 0!==t.vcount)for(var u=0,h=0,d=a.length;h<d;h++){var p=a[h];if(4===p){var f=u+1*o,m=u+2*o,g=u+3*o;s(u+0*o),s(f),s(g),s(f),s(m),s(g)}else if(3===p)f=u+1*o,m=u+2*o,s(u+0*o),s(f),s(m);else if(p>4)for(var v=1,y=p-2;v<=y;v++)f=u+o*v,m=u+o*(v+1),s(u+0*o),s(f),s(m);u+=o*p}else for(h=0,d=r.length;h<d;h+=o)s(h)}function ct(t){return u(zt.geometries[t],ot)}function lt(t){return void 0!==t.build?t.build:t}function ut(t,e){for(var n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"joint":e.joints[i.getAttribute("sid")]=ht(i);break;case"link":e.links.push(pt(i))}}}function ht(t){for(var e,n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"prismatic":case"revolute":e=dt(i)}}return e}function dt(t,e){e={sid:t.getAttribute("sid"),name:t.getAttribute("name")||"",axis:new THREE.Vector3,limits:{min:0,max:0},type:t.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(var n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"axis":var o=r(i.textContent);e.axis.fromArray(o);break;case"limits":var a=i.getElementsByTagName("max")[0],s=i.getElementsByTagName("min")[0];e.limits.max=parseFloat(a.textContent),e.limits.min=parseFloat(s.textContent)}}return e.limits.min>=e.limits.max&&(e.static=!0),e.middlePosition=(e.limits.min+e.limits.max)/2,e}function pt(t){for(var e={sid:t.getAttribute("sid"),name:t.getAttribute("name")||"",attachments:[],transforms:[]},n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"attachment_full":e.attachments.push(ft(i));break;case"matrix":case"translate":case"rotate":e.transforms.push(mt(i))}}return e}function ft(t){for(var e={joint:t.getAttribute("joint").split("/").pop(),transforms:[],links:[]},n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"link":e.links.push(pt(i));break;case"matrix":case"translate":case"rotate":e.transforms.push(mt(i))}}return e}function mt(t){var e={type:t.nodeName},n=r(t.textContent);switch(e.type){case"matrix":e.obj=new THREE.Matrix4,e.obj.fromArray(n).transpose();break;case"translate":e.obj=new THREE.Vector3,e.obj.fromArray(n);break;case"rotate":e.obj=new THREE.Vector3,e.obj.fromArray(n),e.angle=THREE.Math.degToRad(n[3])}return e}function gt(t){for(var e={target:t.getAttribute("target").split("/").pop()},n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"axis":var r=i.getElementsByTagName("param")[0];e.axis=r.textContent;var o=e.axis.split("inst_").pop().split("axis")[0];e.jointIndex=o.substr(0,o.length-1)}}return e}function vt(t){return void 0!==t.build?t.build:t}var yt=new THREE.Matrix4,At=new THREE.Vector3;function wt(t){for(var e={name:t.getAttribute("name")||"",type:t.getAttribute("type"),id:t.getAttribute("id"),sid:t.getAttribute("sid"),matrix:new THREE.Matrix4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"node":e.nodes.push(i.getAttribute("id")),wt(i);break;case"instance_camera":e.instanceCameras.push(a(i.getAttribute("url")));break;case"instance_controller":e.instanceControllers.push(bt(i));break;case"instance_light":e.instanceLights.push(a(i.getAttribute("url")));break;case"instance_geometry":e.instanceGeometries.push(bt(i));break;case"instance_node":e.instanceNodes.push(a(i.getAttribute("url")));break;case"matrix":var o=r(i.textContent);e.matrix.multiply(yt.fromArray(o).transpose()),e.transforms[i.getAttribute("sid")]=i.nodeName;break;case"translate":o=r(i.textContent),At.fromArray(o),e.matrix.multiply(yt.makeTranslation(At.x,At.y,At.z)),e.transforms[i.getAttribute("sid")]=i.nodeName;break;case"rotate":o=r(i.textContent);var s=THREE.Math.degToRad(o[3]);e.matrix.multiply(yt.makeRotationAxis(At.fromArray(o),s)),e.transforms[i.getAttribute("sid")]=i.nodeName;break;case"scale":o=r(i.textContent),e.matrix.scale(At.fromArray(o)),e.transforms[i.getAttribute("sid")]=i.nodeName}}return zt.nodes[e.id]=e,e}function bt(t){for(var e={id:a(t.getAttribute("url")),materials:{},skeletons:[]},n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];switch(i.nodeName){case"bind_material":for(var r=i.getElementsByTagName("instance_material"),o=0;o<r.length;o++){var s=r[o],c=s.getAttribute("symbol"),l=s.getAttribute("target");e.materials[c]=a(l)}break;case"skeleton":e.skeletons.push(a(i.textContent))}}return e}function Mt(t,e){var n,i,r,o=[],a=[];for(n=0;n<t.length;n++){var s=t[n];if(r=s,void 0!==zt.nodes[r])Et(St(s),e,o);else if(_t(s))for(var c=zt.visualScenes[s].children,l=0;l<c.length;l++){var u=c[l];"JOINT"===u.type&&Et(St(u.id),e,o)}}for(n=0;n<e.length;n++)for(l=0;l<o.length;l++)if((i=o[l]).bone.name===e[n].name){a[n]=i,i.processed=!0;break}for(n=0;n<o.length;n++)!1===(i=o[n]).processed&&(a.push(i),i.processed=!0);var h=[],d=[];for(n=0;n<a.length;n++)i=a[n],h.push(i.bone),d.push(i.boneInverse);return new THREE.Skeleton(h,d)}function Et(t,e,n){t.traverse(function(t){if(!0===t.isBone){for(var i,r=0;r<e.length;r++){var o=e[r];if(o.name===t.name){i=o.boneInverse;break}}void 0===i&&(i=new THREE.Matrix4),n.push({bone:t,boneInverse:i,processed:!1})}})}function xt(t){for(var e,n=[],i=t.matrix,r=t.nodes,o=t.type,a=t.instanceCameras,s=t.instanceControllers,c=t.instanceLights,l=t.instanceGeometries,h=t.instanceNodes,d=0,p=r.length;d<p;d++)n.push(St(r[d]));for(d=0,p=a.length;d<p;d++){var f=Z(a[d]);null!==f&&n.push(f.clone())}for(d=0,p=s.length;d<p;d++)for(var m=s[d],g=(e=m.id,u(zt.controllers[e],_)),v=Ct(ct(g.id),m.materials),y=Mt(m.skeletons,g.skin.joints),A=0,w=v.length;A<w;A++){var b;(b=v[A]).isSkinnedMesh&&(b.bind(y,g.skin.bindMatrix),b.normalizeSkinWeights()),n.push(b)}for(d=0,p=c.length;d<p;d++){var M=tt(c[d]);null!==M&&n.push(M.clone())}for(d=0,p=l.length;d<p;d++)for(A=0,w=(v=Ct(ct((m=l[d]).id),m.materials)).length;A<w;A++)n.push(v[A]);for(d=0,p=h.length;d<p;d++)n.push(St(h[d]).clone());if(0===r.length&&1===n.length)b=n[0];else for(b="JOINT"===o?new THREE.Bone:new THREE.Group,d=0;d<n.length;d++)b.add(n[d]);return""===b.name&&(b.name="JOINT"===o?t.sid:t.name),b.matrix.copy(i),b.matrix.decompose(b.position,b.quaternion,b.scale),b}function Tt(t,e){for(var n=[],i=0,r=t.length;i<r;i++){var o=e[t[i]];n.push(V(o))}return n}function Ct(t,e){var n=[];for(var i in t){var r=t[i],o=Tt(r.materialKeys,e);0===o.length&&("lines"===i||"linestrips"===i?o.push(new THREE.LineBasicMaterial):o.push(new THREE.MeshPhongMaterial));var a=void 0!==r.data.attributes.skinIndex;if(a)for(var s=0,c=o.length;s<c;s++)o[s].skinning=!0;var l,u=1===o.length?o[0]:o;switch(i){case"lines":l=new THREE.LineSegments(r.data,u);break;case"linestrips":l=new THREE.Line(r.data,u);break;case"triangles":case"polylist":l=a?new THREE.SkinnedMesh(r.data,u):new THREE.Mesh(r.data,u)}n.push(l)}return n}function St(t){return u(zt.nodes[t],xt)}function Dt(t){var e=new THREE.Group;e.name=t.name;for(var n=t.children,i=0;i<n.length;i++){var r=n[i];e.add(St(r.id))}return e}function _t(t){return void 0!==zt.visualScenes[t]}function Lt(t){return u(zt.visualScenes[t],Dt)}if(0===t.length)return{scene:new THREE.Scene};var Nt,It=n((new DOMParser).parseFromString(t,"application/xml"),"COLLADA")[0],Ot=(It.getAttribute("version"),{unit:function(t){return void 0!==t&&!0===t.hasAttribute("meter")?parseFloat(t.getAttribute("meter")):1}(n(Nt=n(It,"asset")[0],"unit")[0]),upAxis:function(t){return void 0!==t?t.textContent:"Y_UP"}(n(Nt,"up_axis")[0])}),jt=new THREE.TextureLoader(this.manager);jt.setPath(e).setCrossOrigin(this.crossOrigin);var Pt=[],Rt={},kt=0,zt={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},kinematicsScenes:{}};c(It,"library_animations","animation",function(t){for(var e={sources:{},samplers:{},channels:{}},n=0,i=t.childNodes.length;n<i;n++){var r,o=t.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"source":r=o.getAttribute("id"),e.sources[r]=et(o);break;case"sampler":r=o.getAttribute("id"),e.samplers[r]=h(o);break;case"channel":r=o.getAttribute("target"),e.channels[r]=d(o)}}zt.animations[t.getAttribute("id")]=e}),c(It,"library_animation_clips","animation_clip",function(t){for(var e={name:t.getAttribute("id")||"default",start:parseFloat(t.getAttribute("start")||0),end:parseFloat(t.getAttribute("end")||0),animations:[]},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"instance_animation":e.animations.push(a(r.getAttribute("url")))}}zt.clips[t.getAttribute("id")]=e}),c(It,"library_controllers","controller",function(t){for(var e={},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"skin":e.id=a(r.getAttribute("source")),e.skin=C(r);break;case"morph":e.id=a(r.getAttribute("source"))}}zt.controllers[t.getAttribute("id")]=e}),c(It,"library_images","image",function(t){var e={init_from:n(t,"init_from")[0].textContent};zt.images[t.getAttribute("id")]=e}),c(It,"library_effects","effect",function(t){for(var e={},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"profile_COMMON":e.profile=N(r)}}zt.effects[t.getAttribute("id")]=e}),c(It,"library_materials","material",function(t){for(var e={name:t.getAttribute("name")},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"instance_effect":e.url=a(r.getAttribute("url"))}}zt.materials[t.getAttribute("id")]=e}),c(It,"library_cameras","camera",function(t){for(var e={name:t.getAttribute("name")},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"optics":e.optics=Y(r)}}zt.cameras[t.getAttribute("id")]=e}),c(It,"library_lights","light",function(t){for(var e={},n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"technique_common":e=K(r)}}zt.lights[t.getAttribute("id")]=e}),c(It,"library_geometries","geometry",function(t){var e={name:t.getAttribute("name"),sources:{},vertices:{},primitives:[]},i=n(t,"mesh")[0];if(void 0!==i){for(var r=0;r<i.childNodes.length;r++){var o=i.childNodes[r];if(1===o.nodeType){var a=o.getAttribute("id");switch(o.nodeName){case"source":e.sources[a]=et(o);break;case"vertices":e.vertices=nt(o);break;case"polygons":break;case"lines":case"linestrips":case"polylist":case"triangles":e.primitives.push(it(o))}}}zt.geometries[t.getAttribute("id")]=e}}),c(It,"library_nodes","node",wt),c(It,"library_visual_scenes","visual_scene",function(t){var e={name:t.getAttribute("name"),children:[]};!function(t){for(var e=t.getElementsByTagName("node"),n=0;n<e.length;n++){var i=e[n];!1===i.hasAttribute("id")&&i.setAttribute("id","three_default_"+kt++)}}(t);for(var i=n(t,"node"),r=0;r<i.length;r++)e.children.push(wt(i[r]));zt.visualScenes[t.getAttribute("id")]=e}),c(It,"library_kinematics_models","kinematics_model",function(t){for(var e={name:t.getAttribute("name")||"",joints:{},links:[]},n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"technique_common":ut(i,e)}}zt.kinematicsModels[t.getAttribute("id")]=e}),c(It,"scene","instance_kinematics_scene",function(t){for(var e={bindJointAxis:[]},n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"bind_joint_axis":e.bindJointAxis.push(gt(i))}}zt.kinematicsScenes[a(t.getAttribute("url"))]=e}),l(zt.animations,p),l(zt.clips,x),l(zt.controllers,_),l(zt.images,L),l(zt.effects,G),l(zt.materials,Q),l(zt.cameras,X),l(zt.lights,$),l(zt.geometries,ot),l(zt.visualScenes,Dt),function(){var t=zt.clips;if(!0===s(t)){if(!1===s(zt.animations)){var e=[];for(var n in zt.animations)for(var i=f(n),r=0,o=i.length;r<o;r++)e.push(i[r]);Pt.push(new THREE.AnimationClip("default",-1,e))}}else for(var n in t)Pt.push(T(n))}(),function(){var t=Object.keys(zt.kinematicsModels)[0],e=Object.keys(zt.kinematicsScenes)[0],n=Object.keys(zt.visualScenes)[0];if(void 0!==t&&void 0!==e){for(var i,o=(i=t,u(zt.kinematicsModels[i],lt)),a=function(t){return u(zt.kinematicsScenes[t],vt)}(e),s=Lt(n),c=a.bindJointAxis,l={},h=0,d=c.length;h<d;h++){var p=c[h],f=It.querySelector('[sid="'+p.target+'"]');if(f){var m=f.parentElement;v(p.jointIndex,m)}}var g=new THREE.Matrix4;Rt={joints:o&&o.joints,getJointValue:function(t){var e=l[t];if(e)return e.position},setJointValue:function(t,e){var n=l[t];if(n){var i=n.joint;if(e>i.limits.max||e<i.limits.min);else if(i.static);else{var r=n.object,o=i.axis,a=n.transforms;yt.identity();for(var s=0;s<a.length;s++){var c=a[s];if(c.sid&&-1!==c.sid.indexOf(t))switch(i.type){case"revolute":yt.multiply(g.makeRotationAxis(o,THREE.Math.degToRad(e)));break;case"prismatic":yt.multiply(g.makeTranslation(o.x*e,o.y*e,o.z*e))}else switch(c.type){case"matrix":yt.multiply(c.obj);break;case"translate":yt.multiply(g.makeTranslation(c.obj.x,c.obj.y,c.obj.z));break;case"scale":yt.scale(c.obj);break;case"rotate":yt.multiply(g.makeRotationAxis(c.obj,c.angle))}}r.matrix.copy(yt),r.matrix.decompose(r.position,r.quaternion,r.scale),l[t].position=e}}}}}function v(t,e){var n=e.getAttribute("name"),i=o.joints[t];s.traverse(function(o){o.name===n&&(l[t]={object:o,transforms:function(t){for(var e=[],n=It.querySelector('[id="'+t.id+'"]'),i=0;i<n.childNodes.length;i++){var o=n.childNodes[i];if(1===o.nodeType)switch(o.nodeName){case"matrix":var a=r(o.textContent),s=(new THREE.Matrix4).fromArray(a).transpose();e.push({sid:o.getAttribute("sid"),type:o.nodeName,obj:s});break;case"translate":case"scale":a=r(o.textContent);var c=(new THREE.Vector3).fromArray(a);e.push({sid:o.getAttribute("sid"),type:o.nodeName,obj:c});break;case"rotate":a=r(o.textContent),c=(new THREE.Vector3).fromArray(a);var l=THREE.Math.degToRad(a[3]);e.push({sid:o.getAttribute("sid"),type:o.nodeName,obj:c,angle:l})}}return e}(e),joint:i,position:i.zeroPosition})})}}();var Bt=Lt(a(n(n(It,"scene")[0],"instance_visual_scene")[0].getAttribute("url")));return"Z_UP"===Ot.upAxis&&Bt.quaternion.setFromEuler(new THREE.Euler(-Math.PI/2,0,0)),Bt.scale.multiplyScalar(Ot.unit),{animations:Pt,kinematics:Rt,library:zt,scene:Bt}}}},{}],42:[function(t,e,n){THREE.GLTFLoader=function(){function t(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager,this.dracoLoader=null}t.prototype={constructor:t,crossOrigin:"Anonymous",load:function(t,e,n,i){var r=this,o=void 0!==this.path?this.path:THREE.LoaderUtils.extractUrlBase(t),a=new THREE.FileLoader(r.manager);a.setResponseType("arraybuffer"),a.load(t,function(t){try{r.parse(t,o,e,i)}catch(t){if(void 0===i)throw t;i(t)}},n,i)},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setDRACOLoader:function(t){return this.dracoLoader=t,this},parse:function(t,s,c,l){var u,h={};if("string"==typeof t)u=t;else if(THREE.LoaderUtils.decodeText(new Uint8Array(t,0,4))===i){try{h[e.KHR_BINARY_GLTF]=new function(t){this.name=e.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,r);if(this.header={magic:THREE.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==i)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var a=new DataView(t,r),s=0;s<a.byteLength;){var c=a.getUint32(s,!0);s+=4;var l=a.getUint32(s,!0);if(s+=4,l===o.JSON){var u=new Uint8Array(t,r+s,c);this.content=THREE.LoaderUtils.decodeText(u)}else if(l===o.BIN){var h=r+s;this.body=t.slice(h,h+c)}s+=c}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}(t)}catch(t){return void(l&&l(t))}u=h[e.KHR_BINARY_GLTF].content}else u=THREE.LoaderUtils.decodeText(new Uint8Array(t));var d=JSON.parse(u);void 0===d.asset||d.asset.version[0]<2?l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.")):(d.extensionsUsed&&(d.extensionsUsed.indexOf(e.KHR_LIGHTS)>=0&&(h[e.KHR_LIGHTS]=new function(t){this.name=e.KHR_LIGHTS,this.lights={};var n=(t.extensions&&t.extensions[e.KHR_LIGHTS]||{}).lights||{};for(var i in n){var r,o=n[i],a=(new THREE.Color).fromArray(o.color);switch(o.type){case"directional":(r=new THREE.DirectionalLight(a)).position.set(0,0,1);break;case"point":r=new THREE.PointLight(a);break;case"spot":(r=new THREE.SpotLight(a)).position.set(0,0,1);break;case"ambient":r=new THREE.AmbientLight(a)}r&&(void 0!==o.constantAttenuation&&(r.intensity=o.constantAttenuation),void 0!==o.linearAttenuation&&(r.distance=1/o.linearAttenuation),void 0!==o.quadraticAttenuation&&(r.decay=o.quadraticAttenuation),void 0!==o.fallOffAngle&&(r.angle=o.fallOffAngle),o.fallOffExponent,r.name=o.name||"light_"+i,this.lights[i]=r)}}(d)),d.extensionsUsed.indexOf(e.KHR_MATERIALS_UNLIT)>=0&&(h[e.KHR_MATERIALS_UNLIT]=new n(d)),d.extensionsUsed.indexOf(e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS)>=0&&(h[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]=new function(){return{name:e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return THREE.ShaderMaterial},extendParams:function(t,e,n){var i=e.extensions[this.name],r=THREE.ShaderLib.standard,o=THREE.UniformsUtils.clone(r.uniforms),a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),s=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),c=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),l=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),u=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),h=r.fragmentShader.replace("#include <specularmap_fragment>","").replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",s).replace("#include <roughnessmap_fragment>",c).replace("#include <metalnessmap_fragment>",l).replace("#include <lights_physical_fragment>",u);delete o.roughness,delete o.metalness,delete o.roughnessMap,delete o.metalnessMap,o.specular={value:(new THREE.Color).setHex(1118481)},o.glossiness={value:.5},o.specularMap={value:null},o.glossinessMap={value:null},t.vertexShader=r.vertexShader,t.fragmentShader=h,t.uniforms=o,t.defines={STANDARD:""},t.color=new THREE.Color(1,1,1),t.opacity=1;var d=[];if(Array.isArray(i.diffuseFactor)){var p=i.diffuseFactor;t.color.fromArray(p),t.opacity=p[3]}if(void 0!==i.diffuseTexture&&d.push(n.assignTexture(t,"map",i.diffuseTexture.index)),t.emissive=new THREE.Color(0,0,0),t.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,t.specular=new THREE.Color(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var f=i.specularGlossinessTexture.index;d.push(n.assignTexture(t,"glossinessMap",f)),d.push(n.assignTexture(t,"specularMap",f))}return Promise.all(d)},createMaterial:function(t){var e=new THREE.ShaderMaterial({defines:t.defines,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,fog:!0,lights:!0,opacity:t.opacity,transparent:t.transparent});return e.isGLTFSpecularGlossinessMaterial=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e.extensions.derivatives=!0,e},cloneMaterial:function(t){var e=t.clone();e.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,i=0,r=n.length;i<r;i++)e[n[i]]=t[n[i]];return e},refreshUniforms:function(t,e,n,i,r,o){if(!0===r.isGLTFSpecularGlossinessMaterial){var a,s,c,l=r.uniforms,u=r.defines;if(l.opacity.value=r.opacity,l.diffuse.value.copy(r.color),l.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),l.map.value=r.map,l.specularMap.value=r.specularMap,l.alphaMap.value=r.alphaMap,l.lightMap.value=r.lightMap,l.lightMapIntensity.value=r.lightMapIntensity,l.aoMap.value=r.aoMap,l.aoMapIntensity.value=r.aoMapIntensity,r.map?a=r.map:r.specularMap?a=r.specularMap:r.displacementMap?a=r.displacementMap:r.normalMap?a=r.normalMap:r.bumpMap?a=r.bumpMap:r.glossinessMap?a=r.glossinessMap:r.alphaMap?a=r.alphaMap:r.emissiveMap&&(a=r.emissiveMap),void 0!==a)if(a.isWebGLRenderTarget&&(a=a.texture),void 0!==a.matrix){if(!0===a.matrixAutoUpdate){s=a.offset,c=a.repeat;var h=a.rotation,d=a.center;a.matrix.setUvTransform(s.x,s.y,c.x,c.y,h,d.x,d.y)}l.uvTransform.value.copy(a.matrix)}else s=a.offset,c=a.repeat,l.offsetRepeat.value.set(s.x,s.y,c.x,c.y);l.envMap.value=r.envMap,l.envMapIntensity.value=r.envMapIntensity,l.flipEnvMap.value=r.envMap&&r.envMap.isCubeTexture?-1:1,l.refractionRatio.value=r.refractionRatio,l.specular.value.copy(r.specular),l.glossiness.value=r.glossiness,l.glossinessMap.value=r.glossinessMap,l.emissiveMap.value=r.emissiveMap,l.bumpMap.value=r.bumpMap,l.normalMap.value=r.normalMap,l.displacementMap.value=r.displacementMap,l.displacementScale.value=r.displacementScale,l.displacementBias.value=r.displacementBias,null!==l.glossinessMap.value&&void 0===u.USE_GLOSSINESSMAP&&(u.USE_GLOSSINESSMAP="",u.USE_ROUGHNESSMAP=""),null===l.glossinessMap.value&&void 0!==u.USE_GLOSSINESSMAP&&(delete u.USE_GLOSSINESSMAP,delete u.USE_ROUGHNESSMAP)}}}}),d.extensionsUsed.indexOf(e.KHR_DRACO_MESH_COMPRESSION)>=0&&(h[e.KHR_DRACO_MESH_COMPRESSION]=new a(this.dracoLoader))),new M(d,h,{path:s||this.path||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(function(t,e,n,i,r){c({scene:t,scenes:e,cameras:n,animations:i,asset:r})},l))}};var e={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS:"KHR_lights",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit"};function n(t){this.name=e.KHR_MATERIALS_UNLIT}n.prototype.getMaterialType=function(t){return THREE.MeshBasicMaterial},n.prototype.extendParams=function(t,e,n){var i=[];t.color=new THREE.Color(1,1,1),t.opacity=1;var r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){var o=r.baseColorFactor;t.color.fromArray(o),t.opacity=o[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(t,"map",r.baseColorTexture.index))}return Promise.all(i)};var i="glTF",r=12,o={JSON:1313821514,BIN:5130562};function a(t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=e.KHR_DRACO_MESH_COMPRESSION,this.dracoLoader=t}function s(t,e,n,i){THREE.Interpolant.call(this,t,e,n,i)}a.prototype.decodePrimitive=function(t,e){var n=this.dracoLoader,i=t.extensions[this.name].bufferView,r=t.extensions[this.name].attributes,o={};for(var a in r)a in f&&(o[f[a]]=r[a]);return e.getDependency("bufferView",i).then(function(t){return new Promise(function(e){n.decodeDracoFile(t,e,o)})})},s.prototype=Object.create(THREE.Interpolant.prototype),s.prototype.constructor=s,s.prototype.interpolate_=function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,c=3*a,l=i-e,u=(n-e)/l,h=u*u,d=h*u,p=t*c,f=p-c,m=2*d-3*h+1,g=d-2*h+u,v=-2*d+3*h,y=d-h,A=0;A!==a;A++){var w=o[f+A+a],b=o[f+A+s]*l,M=o[p+A+a],E=o[p+A]*l;r[A]=m*w+g*b+v*M+y*E}return r};var c=(Number,THREE.Matrix3,THREE.Matrix4,THREE.Vector2,THREE.Vector3,THREE.Vector4,THREE.Texture,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),l={9728:THREE.NearestFilter,9729:THREE.LinearFilter,9984:THREE.NearestMipMapNearestFilter,9985:THREE.LinearMipMapNearestFilter,9986:THREE.NearestMipMapLinearFilter,9987:THREE.LinearMipMapLinearFilter},u={33071:THREE.ClampToEdgeWrapping,33648:THREE.MirroredRepeatWrapping,10497:THREE.RepeatWrapping},h={6406:THREE.AlphaFormat,6407:THREE.RGBFormat,6408:THREE.RGBAFormat,6409:THREE.LuminanceFormat,6410:THREE.LuminanceAlphaFormat},d={5121:THREE.UnsignedByteType,32819:THREE.UnsignedShort4444Type,32820:THREE.UnsignedShort5551Type,33635:THREE.UnsignedShort565Type},p=(THREE.BackSide,THREE.FrontSide,THREE.NeverDepth,THREE.LessDepth,THREE.EqualDepth,THREE.LessEqualDepth,THREE.GreaterEqualDepth,THREE.NotEqualDepth,THREE.GreaterEqualDepth,THREE.AlwaysDepth,THREE.AddEquation,THREE.SubtractEquation,THREE.ReverseSubtractEquation,THREE.ZeroFactor,THREE.OneFactor,THREE.SrcColorFactor,THREE.OneMinusSrcColorFactor,THREE.SrcAlphaFactor,THREE.OneMinusSrcAlphaFactor,THREE.DstAlphaFactor,THREE.OneMinusDstAlphaFactor,THREE.DstColorFactor,THREE.OneMinusDstColorFactor,THREE.SrcAlphaSaturateFactor,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),f={POSITION:"position",NORMAL:"normal",TEXCOORD_0:"uv",TEXCOORD0:"uv",TEXCOORD:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",COLOR0:"color",COLOR:"color",WEIGHTS_0:"skinWeight",WEIGHT:"skinWeight",JOINTS_0:"skinIndex",JOINT:"skinIndex"},m={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},g={CUBICSPLINE:THREE.InterpolateSmooth,LINEAR:THREE.InterpolateLinear,STEP:THREE.InterpolateDiscrete};function v(t,e){return"string"!=typeof t||""===t?"":/^(https?:)?\/\//i.test(t)?t:/^data:.*,.*$/i.test(t)?t:/^blob:.*$/i.test(t)?t:e+t}function y(t,e,n,i){var r=t.geometry,o=t.material,a=n.targets,s=r.morphAttributes;s.position=[],s.normal=[],o.morphTargets=!0;for(var c=0,l=a.length;c<l;c++){var u,h,d=a[c],p="morphTarget"+c;if(void 0!==d.POSITION){u=b(i[d.POSITION]);for(var f=r.attributes.position,m=0,g=u.count;m<g;m++)u.setXYZ(m,u.getX(m)+f.getX(m),u.getY(m)+f.getY(m),u.getZ(m)+f.getZ(m))}else r.attributes.position&&(u=b(r.attributes.position));if(void 0!==u&&(u.name=p,s.position.push(u)),void 0!==d.NORMAL){o.morphNormals=!0,h=b(i[d.NORMAL]);var v=r.attributes.normal;for(m=0,g=h.count;m<g;m++)h.setXYZ(m,h.getX(m)+v.getX(m),h.getY(m)+v.getY(m),h.getZ(m)+v.getZ(m))}else void 0!==r.attributes.normal&&(h=b(r.attributes.normal));void 0!==h&&(h.name=p,s.normal.push(h))}if(t.updateMorphTargets(),void 0!==e.weights)for(c=0,l=e.weights.length;c<l;c++)t.morphTargetInfluences[c]=e.weights[c];if(e.extras&&Array.isArray(e.extras.targetNames))for(c=0,l=e.extras.targetNames.length;c<l;c++)t.morphTargetDictionary[e.extras.targetNames[c]]=c}function A(t,e){if(t.indices!==e.indices)return!1;var n=t.attributes||{},i=e.attributes||{},r=Object.keys(n),o=Object.keys(i);if(r.length!==o.length)return!1;for(var a=0,s=r.length;a<s;a++){var c=r[a];if(n[c]!==i[c])return!1}return!0}function w(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n];if(A(r.primitive,e))return r.promise}return null}function b(t){if(t.isInterleavedBufferAttribute){for(var e=t.count,n=t.itemSize,i=t.array.slice(0,e*n),r=0;r<e;++r)i[r]=t.getX(r),n>=2&&(i[r+1]=t.getY(r)),n>=3&&(i[r+2]=t.getZ(r)),n>=4&&(i[r+3]=t.getW(r));return new THREE.BufferAttribute(i,n,t.normalized)}return t.clone()}function M(t,e,n){this.json=t||{},this.extensions=e||{},this.options=n||{},this.cache=new function(){var t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}},this.primitiveCache=[],this.textureLoader=new THREE.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new THREE.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function E(t,e,n){var i=e.attributes;for(var r in i){var o=f[r],a=n[i[r]];o&&(o in t.attributes||t.addAttribute(o,a))}void 0===e.indices||t.index||t.setIndex(n[e.indices])}return M.prototype.parse=function(t,e){var n=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then(function(e){var i=e.scenes||[],r=i[n.scene||0],o=e.animations||[],a=n.asset,s=e.cameras||[];t(r,i,s,o,a)}).catch(e)},M.prototype.markDefs=function(){for(var t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[],i={},r={},o=0,a=e.length;o<a;o++)for(var s=e[o].joints,c=0,l=s.length;c<l;c++)t[s[c]].isBone=!0;for(var u=0,h=t.length;u<h;u++){var d=t[u];void 0!==d.mesh&&(void 0===i[d.mesh]&&(i[d.mesh]=r[d.mesh]=0),i[d.mesh]++,void 0!==d.skin&&(n[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=i,this.json.meshUses=r},M.prototype.getDependency=function(t,e){var n=t+":"+e,i=this.cache.get(n);return i||(i=this["load"+t.charAt(0).toUpperCase()+t.slice(1)](e),this.cache.add(n,i)),i},M.prototype.getDependencies=function(t){var e=this.cache.get(t);if(!e){var n=this,i=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(i.map(function(e,i){return n.getDependency(t,i)})),this.cache.add(t,e)}return e},M.prototype.getMultiDependencies=function(t){for(var e={},n=[],i=0,r=t.length;i<r;i++){var o=t[i],a=this.getDependencies(o);a=a.then(function(t,n){e[t]=n}.bind(this,o+("mesh"===o?"es":"s"))),n.push(a)}return Promise.all(n).then(function(){return e})},M.prototype.loadBuffer=function(t){var n=this.json.buffers[t],i=this.fileLoader;if(n.type&&"arraybuffer"!==n.type)throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(void 0===n.uri&&0===t)return Promise.resolve(this.extensions[e.KHR_BINARY_GLTF].body);var r=this.options;return new Promise(function(t,e){i.load(v(n.uri,r.path),t,void 0,function(){e(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})},M.prototype.loadBufferView=function(t){var e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(t){var n=e.byteLength||0,i=e.byteOffset||0;return t.slice(i,i+n)})},M.prototype.loadAccessor=function(t){var e=this,n=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse)return null;var r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then(function(t){var r,o,a=t[0],s=p[i.type],l=c[i.componentType],u=l.BYTES_PER_ELEMENT,h=u*s,d=i.byteOffset||0,f=n.bufferViews[i.bufferView].byteStride,m=!0===i.normalized;if(f&&f!==h){var g="InterleavedBuffer:"+i.bufferView+":"+i.componentType,v=e.cache.get(g);v||(r=new l(a),v=new THREE.InterleavedBuffer(r,f/u),e.cache.add(g,v)),o=new THREE.InterleavedBufferAttribute(v,s,d/u,m)}else r=null===a?new l(i.count*s):new l(a,d,i.count*s),o=new THREE.BufferAttribute(r,s,m);if(void 0!==i.sparse){var y=p.SCALAR,A=c[i.sparse.indices.componentType],w=i.sparse.indices.byteOffset||0,b=i.sparse.values.byteOffset||0,M=new A(t[1],w,i.sparse.count*y),E=new l(t[2],b,i.sparse.count*s);null!==a&&o.setArray(o.array.slice());for(var x=0,T=M.length;x<T;x++){var C=M[x];if(o.setX(C,E[x*s]),s>=2&&o.setY(C,E[x*s+1]),s>=3&&o.setZ(C,E[x*s+2]),s>=4&&o.setW(C,E[x*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o})},M.prototype.loadTexture=function(t){var e=this.json,n=this.options,i=this.textureLoader,r=window.URL||window.webkitURL,o=e.textures[t],a=e.images[o.source],s=a.uri,c=!1;return void 0!==a.bufferView&&(s=this.getDependency("bufferView",a.bufferView).then(function(t){c=!0;var e=new Blob([t],{type:a.mimeType});return s=r.createObjectURL(e)})),Promise.resolve(s).then(function(t){var e=THREE.Loader.Handlers.get(t)||i;return new Promise(function(i,r){e.load(v(t,n.path),i,void 0,r)})}).then(function(t){!0===c&&r.revokeObjectURL(s),t.flipY=!1,void 0!==o.name&&(t.name=o.name),t.format=void 0!==o.format?h[o.format]:THREE.RGBAFormat,void 0!==o.internalFormat&&(t.format,o.internalFormat),t.type=void 0!==o.type?d[o.type]:THREE.UnsignedByteType;var n=(e.samplers||{})[o.sampler]||{};return t.magFilter=l[n.magFilter]||THREE.LinearFilter,t.minFilter=l[n.minFilter]||THREE.LinearMipMapLinearFilter,t.wrapS=u[n.wrapS]||THREE.RepeatWrapping,t.wrapT=u[n.wrapT]||THREE.RepeatWrapping,t})},M.prototype.assignTexture=function(t,e,n){return this.getDependency("texture",n).then(function(n){t[e]=n})},M.prototype.loadMaterial=function(t){this.json;var n,i=this.extensions,r=this.json.materials[t],o={},a=r.extensions||{},s=[];if(a[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var c=i[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];n=c.getMaterialType(r),s.push(c.extendParams(o,r,this))}else if(a[e.KHR_MATERIALS_UNLIT]){var l=i[e.KHR_MATERIALS_UNLIT];n=l.getMaterialType(r),s.push(l.extendParams(o,r,this))}else{n=THREE.MeshStandardMaterial;var u=r.pbrMetallicRoughness||{};if(o.color=new THREE.Color(1,1,1),o.opacity=1,Array.isArray(u.baseColorFactor)){var h=u.baseColorFactor;o.color.fromArray(h),o.opacity=h[3]}if(void 0!==u.baseColorTexture&&s.push(this.assignTexture(o,"map",u.baseColorTexture.index)),o.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,o.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture){var d=u.metallicRoughnessTexture.index;s.push(this.assignTexture(o,"metalnessMap",d)),s.push(this.assignTexture(o,"roughnessMap",d))}}!0===r.doubleSided&&(o.side=THREE.DoubleSide);var p=r.alphaMode||"OPAQUE";return"BLEND"===p?o.transparent=!0:(o.transparent=!1,"MASK"===p&&(o.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&n!==THREE.MeshBasicMaterial&&(s.push(this.assignTexture(o,"normalMap",r.normalTexture.index)),o.normalScale=new THREE.Vector2(1,1),void 0!==r.normalTexture.scale&&o.normalScale.set(r.normalTexture.scale,r.normalTexture.scale)),void 0!==r.occlusionTexture&&n!==THREE.MeshBasicMaterial&&(s.push(this.assignTexture(o,"aoMap",r.occlusionTexture.index)),void 0!==r.occlusionTexture.strength&&(o.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&n!==THREE.MeshBasicMaterial&&(o.emissive=(new THREE.Color).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&n!==THREE.MeshBasicMaterial&&s.push(this.assignTexture(o,"emissiveMap",r.emissiveTexture.index)),Promise.all(s).then(function(){var t;return t=n===THREE.ShaderMaterial?i[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new n(o),void 0!==r.name&&(t.name=r.name),t.normalScale&&(t.normalScale.x=-t.normalScale.x),t.map&&(t.map.encoding=THREE.sRGBEncoding),t.emissiveMap&&(t.emissiveMap.encoding=THREE.sRGBEncoding),r.extras&&(t.userData=r.extras),t})},M.prototype.loadGeometries=function(t){var n=this,i=this.extensions,r=this.primitiveCache;return this.getDependencies("accessor").then(function(o){for(var a=[],s=0,c=t.length;s<c;s++){var l=t[s],u=w(r,l);if(u)a.push(u);else if(l.extensions&&l.extensions[e.KHR_DRACO_MESH_COMPRESSION]){var h=i[e.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,n).then(function(t){return E(t,l,o),t});r.push({primitive:l,promise:h}),a.push(h)}else{var d=new THREE.BufferGeometry;E(d,l,o),h=Promise.resolve(d),r.push({primitive:l,promise:h}),a.push(h)}}return Promise.all(a)})},M.prototype.loadMesh=function(t){var n=this,i=(this.json,this.extensions),r=this.json.meshes[t];return this.getMultiDependencies(["accessor","material"]).then(function(o){var a=new THREE.Group,s=r.primitives;return n.loadGeometries(s).then(function(c){for(var l=0,u=s.length;l<u;l++){var h=s[l],d=c[l],p=void 0===h.material?new THREE.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:THREE.FrontSide}):o.materials[h.material];p.aoMap&&void 0===d.attributes.uv2&&void 0!==d.attributes.uv&&d.addAttribute("uv2",new THREE.BufferAttribute(d.attributes.uv.array,2));var f,m=void 0!==d.attributes.color,g=void 0===d.attributes.normal,v=!0===r.isSkinnedMesh,A=void 0!==h.targets;if((m||g||v||A)&&(p=p.isGLTFSpecularGlossinessMaterial?i[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(p):p.clone()),m&&(p.vertexColors=THREE.VertexColors,p.needsUpdate=!0),g&&(p.flatShading=!0),4===h.mode||5===h.mode||6===h.mode||void 0===h.mode)v?(f=new THREE.SkinnedMesh(d,p),p.skinning=!0):f=new THREE.Mesh(d,p),5===h.mode?f.drawMode=THREE.TriangleStripDrawMode:6===h.mode&&(f.drawMode=THREE.TriangleFanDrawMode);else if(1===h.mode||3===h.mode||2===h.mode){var w="LineBasicMaterial:"+p.uuid,b=n.cache.get(w);b||(b=new THREE.LineBasicMaterial,THREE.Material.prototype.copy.call(b,p),b.color.copy(p.color),b.lights=!1,n.cache.add(w,b)),p=b,f=1===h.mode?new THREE.LineSegments(d,p):3===h.mode?new THREE.Line(d,p):new THREE.LineLoop(d,p)}else{if(0!==h.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);w="PointsMaterial:"+p.uuid;var M=n.cache.get(w);M||(M=new THREE.PointsMaterial,THREE.Material.prototype.copy.call(M,p),M.color.copy(p.color),M.map=p.map,M.lights=!1,n.cache.add(w,M)),p=M,f=new THREE.Points(d,p)}if(f.name=r.name||"mesh_"+t,A&&y(f,r,h,o.accessors),void 0!==r.extras&&(f.userData=r.extras),void 0!==h.extras&&(f.geometry.userData=h.extras),!0===p.isGLTFSpecularGlossinessMaterial&&(f.onBeforeRender=i[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),!(s.length>1))return f;f.name+="_"+l,a.add(f)}return a})})},M.prototype.loadCamera=function(t){var e,n=this.json.cameras[t],i=n[n.type];if(i)return"perspective"===n.type?e=new THREE.PerspectiveCamera(THREE.Math.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(e=new THREE.OrthographicCamera(i.xmag/-2,i.xmag/2,i.ymag/2,i.ymag/-2,i.znear,i.zfar)),void 0!==n.name&&(e.name=n.name),n.extras&&(e.userData=n.extras),Promise.resolve(e)},M.prototype.loadSkin=function(t){var e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then(function(t){return n.inverseBindMatrices=t,n})},M.prototype.loadAnimation=function(t){this.json;var e=this.json.animations[t];return this.getMultiDependencies(["accessor","node"]).then(function(n){for(var i=[],r=0,o=e.channels.length;r<o;r++){var a=e.channels[r],c=e.samplers[a.sampler];if(c){var l=a.target,u=void 0!==l.node?l.node:l.id,h=void 0!==e.parameters?e.parameters[c.input]:c.input,d=void 0!==e.parameters?e.parameters[c.output]:c.output,p=n.accessors[h],f=n.accessors[d],v=n.nodes[u];if(v){var y;switch(v.updateMatrix(),v.matrixAutoUpdate=!0,m[l.path]){case m.weights:y=THREE.NumberKeyframeTrack;break;case m.rotation:y=THREE.QuaternionKeyframeTrack;break;case m.position:case m.scale:default:y=THREE.VectorKeyframeTrack}var A=v.name?v.name:v.uuid,w=void 0!==c.interpolation?g[c.interpolation]:THREE.InterpolateLinear,b=[];m[l.path]===m.weights?v.traverse(function(t){!0===t.isMesh&&!0===t.material.morphTargets&&b.push(t.name?t.name:t.uuid)}):b.push(A);for(var M=0,E=b.length;M<E;M++){var x=new y(b[M]+"."+m[l.path],THREE.AnimationUtils.arraySlice(p.array,0),THREE.AnimationUtils.arraySlice(f.array,0),w);"CUBICSPLINE"===c.interpolation&&(x.createInterpolant=function(t){return new s(this.times,this.values,this.getValueSize()/3,t)},x.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),i.push(x)}}}}return u=void 0!==e.name?e.name:"animation_"+t,new THREE.AnimationClip(u,void 0,i)})},M.prototype.loadNode=function(t){this.json;var n=this.extensions,i=this.json.meshReferences,r=this.json.meshUses,o=this.json.nodes[t];return this.getMultiDependencies(["mesh","skin","camera"]).then(function(t){var a;if(!0===o.isBone)a=new THREE.Bone;else if(void 0!==o.mesh){var s=t.meshes[o.mesh];if(a=s.clone(),!0===s.isGroup)for(var c=0,l=s.children.length;c<l;c++){var u=s.children[c];u.material&&!0===u.material.isGLTFSpecularGlossinessMaterial&&(a.children[c].onBeforeRender=u.onBeforeRender)}else s.material&&!0===s.material.isGLTFSpecularGlossinessMaterial&&(a.onBeforeRender=s.onBeforeRender);i[o.mesh]>1&&(a.name+="_instance_"+r[o.mesh]++)}else a=void 0!==o.camera?t.cameras[o.camera]:o.extensions&&o.extensions[e.KHR_LIGHTS]&&void 0!==o.extensions[e.KHR_LIGHTS].light?n[e.KHR_LIGHTS].lights[o.extensions[e.KHR_LIGHTS].light]:new THREE.Object3D;if(void 0!==o.name&&(a.name=THREE.PropertyBinding.sanitizeNodeName(o.name)),o.extras&&(a.userData=o.extras),void 0!==o.matrix){var h=new THREE.Matrix4;h.fromArray(o.matrix),a.applyMatrix(h)}else void 0!==o.translation&&a.position.fromArray(o.translation),void 0!==o.rotation&&a.quaternion.fromArray(o.rotation),void 0!==o.scale&&a.scale.fromArray(o.scale);return a})},M.prototype.loadScene=function(){function t(e,n,i,r,o){var a=r[e],s=i.nodes[e];if(void 0!==s.skin)for(var c=!0===a.isGroup?a.children:[a],l=0,u=c.length;l<u;l++){for(var h=c[l],d=o[s.skin],p=[],f=[],m=0,g=d.joints.length;m<g;m++){var v=r[d.joints[m]];if(v){p.push(v);var y=new THREE.Matrix4;void 0!==d.inverseBindMatrices&&y.fromArray(d.inverseBindMatrices.array,16*m),f.push(y)}}h.bind(new THREE.Skeleton(p,f),h.matrixWorld)}if(n.add(a),s.children){var A=s.children;for(l=0,u=A.length;l<u;l++)t(A[l],a,i,r,o)}}return function(n){var i=this.json,r=this.extensions,o=this.json.scenes[n];return this.getMultiDependencies(["node","skin"]).then(function(n){var a=new THREE.Scene;void 0!==o.name&&(a.name=o.name),o.extras&&(a.userData=o.extras);for(var s=o.nodes||[],c=0,l=s.length;c<l;c++)t(s[c],a,i,n.nodes,n.skins);if(o.extensions&&o.extensions[e.KHR_LIGHTS]&&void 0!==o.extensions[e.KHR_LIGHTS].light){var u=r[e.KHR_LIGHTS].lights;a.add(u[o.extensions[e.KHR_LIGHTS].light])}return a})}}(),t}()},{}],43:[function(t,e,n){THREE.MTLLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(t,e,n,i){var r=this,o=new THREE.FileLoader(this.manager);o.setPath(this.path),o.load(t,function(t){e(r.parse(t))},n,i)},setPath:function(t){this.path=t},setTexturePath:function(t){this.texturePath=t},setBaseUrl:function(t){this.setTexturePath(t)},setCrossOrigin:function(t){this.crossOrigin=t},setMaterialOptions:function(t){this.materialOptions=t},parse:function(t){for(var e=t.split("\n"),n={},i=/\s+/,r={},o=0;o<e.length;o++){var a=e[o];if(0!==(a=a.trim()).length&&"#"!==a.charAt(0)){var s=a.indexOf(" "),c=s>=0?a.substring(0,s):a;c=c.toLowerCase();var l=s>=0?a.substring(s+1):"";if(l=l.trim(),"newmtl"===c)n={name:l},r[l]=n;else if(n)if("ka"===c||"kd"===c||"ks"===c){var u=l.split(i,3);n[c]=[parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2])]}else n[c]=l}}var h=new THREE.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return h.setCrossOrigin(this.crossOrigin),h.setManager(this.manager),h.setMaterials(r),h}},THREE.MTLLoader.MaterialCreator=function(t,e){this.baseUrl=t||"",this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"Anonymous",setCrossOrigin:function(t){this.crossOrigin=t},setManager:function(t){this.manager=t},setMaterials:function(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(t){if(!this.options)return t;var e={};for(var n in t){var i=t[n],r={};for(var o in e[n]=r,i){var a=!0,s=i[o],c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(a=!1)}a&&(r[c]=s)}}return e},preload:function(){for(var t in this.materialsInfo)this.create(t)},getIndex:function(t){return this.nameLookup[t]},getAsArray:function(){var t=0;for(var e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray},create:function(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]},createMaterial_:function(t){var e=this,n=this.materialsInfo[t],i={name:t,side:this.side};function r(t,n){if(!i[t]){var r,o,a=e.getTextureParams(n,i),s=e.loadTexture((r=e.baseUrl,"string"!=typeof(o=a.url)||""===o?"":/^https?:\/\//i.test(o)?o:r+o));s.repeat.copy(a.scale),s.offset.copy(a.offset),s.wrapS=e.wrap,s.wrapT=e.wrap,i[t]=s}}for(var o in n){var a,s=n[o];if(""!==s)switch(o.toLowerCase()){case"kd":i.color=(new THREE.Color).fromArray(s);break;case"ks":i.specular=(new THREE.Color).fromArray(s);break;case"map_kd":r("map",s);break;case"map_ks":r("specularMap",s);break;case"norm":r("normalMap",s);break;case"map_bump":case"bump":r("bumpMap",s);break;case"ns":i.shininess=parseFloat(s);break;case"d":(a=parseFloat(s))<1&&(i.opacity=a,i.transparent=!0);break;case"tr":a=parseFloat(s),this.options&&this.options.invertTrProperty&&(a=1-a),a>0&&(i.opacity=1-a,i.transparent=!0)}}return this.materials[t]=new THREE.MeshPhongMaterial(i),this.materials[t]},getTextureParams:function(t,e){var n,i={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},r=t.split(/\s+/);return(n=r.indexOf("-bm"))>=0&&(e.bumpScale=parseFloat(r[n+1]),r.splice(n,2)),(n=r.indexOf("-s"))>=0&&(i.scale.set(parseFloat(r[n+1]),parseFloat(r[n+2])),r.splice(n,4)),(n=r.indexOf("-o"))>=0&&(i.offset.set(parseFloat(r[n+1]),parseFloat(r[n+2])),r.splice(n,4)),i.url=r.join(" ").trim(),i},loadTexture:function(t,e,n,i,r){var o,a=THREE.Loader.Handlers.get(t),s=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager;return null===a&&(a=new THREE.TextureLoader(s)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin),o=a.load(t,n,i,r),void 0!==e&&(o.mapping=e),o}}},{}],44:[function(t,e,n){THREE.OBJLoader=function(){var t=/^[og]\s*(.+)?/,e=/^mtllib /,n=/^usemtl /;function i(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager,this.materials=null}return i.prototype={constructor:i,load:function(t,e,n,i){var r=this,o=new THREE.FileLoader(r.manager);o.setPath(this.path),o.load(t,function(t){e(r.parse(t))},n,i)},setPath:function(t){this.path=t},setMaterials:function(t){return this.materials=t,this},parse:function(i){var r=new function(){var t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(t,e){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var i={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){var e={index:"number"==typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}};return this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){var e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}},n&&n.name&&"function"==typeof n.clone){var i=n.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseNormalIndex:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseUVIndex:function(t,e){var n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)},addVertex:function(t,e,n){var i=this.vertices,r=this.object.geometry.vertices;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addVertexPoint:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,n){var i=this.normals,r=this.object.geometry.normals;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addColor:function(t,e,n){var i=this.colors,r=this.object.geometry.colors;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addUV:function(t,e,n){var i=this.uvs,r=this.object.geometry.uvs;r.push(i[t+0],i[t+1]),r.push(i[e+0],i[e+1]),r.push(i[n+0],i[n+1])},addUVLine:function(t){var e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,n,i,r,o,a,s,c){var l=this.vertices.length,u=this.parseVertexIndex(t,l),h=this.parseVertexIndex(e,l),d=this.parseVertexIndex(n,l);if(this.addVertex(u,h,d),void 0!==i&&""!==i){var p=this.uvs.length;u=this.parseUVIndex(i,p),h=this.parseUVIndex(r,p),d=this.parseUVIndex(o,p),this.addUV(u,h,d)}if(void 0!==a&&""!==a){var f=this.normals.length;u=this.parseNormalIndex(a,f),h=a===s?u:this.parseNormalIndex(s,f),d=a===c?u:this.parseNormalIndex(c,f),this.addNormal(u,h,d)}this.colors.length>0&&this.addColor(u,h,d)},addPointGeometry:function(t){this.object.geometry.type="Points";for(var e=this.vertices.length,n=0,i=t.length;n<i;n++)this.addVertexPoint(this.parseVertexIndex(t[n],e))},addLineGeometry:function(t,e){this.object.geometry.type="Line";for(var n=this.vertices.length,i=this.uvs.length,r=0,o=t.length;r<o;r++)this.addVertexLine(this.parseVertexIndex(t[r],n));var a=0;for(o=e.length;a<o;a++)this.addUVLine(this.parseUVIndex(e[a],i))}};return t.startObject("",!1),t};-1!==i.indexOf("\r\n")&&(i=i.replace(/\r\n/g,"\n")),-1!==i.indexOf("\\\n")&&(i=i.replace(/\\\n/g,""));for(var o=i.split("\n"),a="",s="",c=[],l="function"==typeof"".trimLeft,u=0,h=o.length;u<h;u++)if(a=o[u],0!==(a=l?a.trimLeft():a.trim()).length&&"#"!==(s=a.charAt(0)))if("v"===s){var d=a.split(/\s+/);switch(d[0]){case"v":r.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),8===d.length&&r.colors.push(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6]));break;case"vn":r.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":r.uvs.push(parseFloat(d[1]),parseFloat(d[2]))}}else if("f"===s){for(var p=a.substr(1).trim().split(/\s+/),f=[],m=0,g=p.length;m<g;m++){var v=p[m];if(v.length>0){var y=v.split("/");f.push(y)}}var A=f[0];for(m=1,g=f.length-1;m<g;m++){var w=f[m],b=f[m+1];r.addFace(A[0],w[0],b[0],A[1],w[1],b[1],A[2],w[2],b[2])}}else if("l"===s){var M=a.substring(1).trim().split(" "),E=[],x=[];if(-1===a.indexOf("/"))E=M;else for(var T=0,C=M.length;T<C;T++){var S=M[T].split("/");""!==S[0]&&E.push(S[0]),""!==S[1]&&x.push(S[1])}r.addLineGeometry(E,x)}else if("p"===s){var D=a.substr(1).trim().split(" ");r.addPointGeometry(D)}else if(null!==(c=t.exec(a))){var _=(" "+c[0].substr(1).trim()).substr(1);r.startObject(_)}else if(n.test(a))r.object.startMaterial(a.substring(7).trim(),r.materialLibraries);else if(e.test(a))r.materialLibraries.push(a.substring(7).trim());else{if("s"!==s){if("\0"===a)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+a+'"')}if((c=a.split(" ")).length>1){var L=c[1].trim().toLowerCase();r.object.smooth="0"!==L&&"off"!==L}else r.object.smooth=!0;(Q=r.object.currentMaterial())&&(Q.smooth=r.object.smooth)}r.finalize();var N=new THREE.Group;for(N.materialLibraries=[].concat(r.materialLibraries),u=0,h=r.objects.length;u<h;u++){var I=r.objects[u],O=I.geometry,j=I.materials,P="Line"===O.type,R="Points"===O.type,k=!1;if(0!==O.vertices.length){var z=new THREE.BufferGeometry;z.addAttribute("position",new THREE.Float32BufferAttribute(O.vertices,3)),O.normals.length>0?z.addAttribute("normal",new THREE.Float32BufferAttribute(O.normals,3)):z.computeVertexNormals(),O.colors.length>0&&(k=!0,z.addAttribute("color",new THREE.Float32BufferAttribute(O.colors,3))),O.uvs.length>0&&z.addAttribute("uv",new THREE.Float32BufferAttribute(O.uvs,2));for(var B,F=[],U=0,H=j.length;U<H;U++){var G=j[U],Q=void 0;if(null!==this.materials)if(Q=this.materials.create(G.name),!P||!Q||Q instanceof THREE.LineBasicMaterial){if(R&&Q&&!(Q instanceof THREE.PointsMaterial)){var V=new THREE.PointsMaterial({size:10,sizeAttenuation:!1});Y.copy(Q),Q=V}}else{var Y=new THREE.LineBasicMaterial;Y.copy(Q),Y.lights=!1,Q=Y}Q||((Q=P?new THREE.LineBasicMaterial:R?new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):new THREE.MeshPhongMaterial).name=G.name),Q.flatShading=!G.smooth,Q.vertexColors=k?THREE.VertexColors:THREE.NoColors,F.push(Q)}if(F.length>1){for(U=0,H=j.length;U<H;U++)G=j[U],z.addGroup(G.groupStart,G.groupCount,U);B=P?new THREE.LineSegments(z,F):R?new THREE.Points(z,F):new THREE.Mesh(z,F)}else B=P?new THREE.LineSegments(z,F[0]):R?new THREE.Points(z,F[0]):new THREE.Mesh(z,F[0]);B.name=I.name,N.add(B)}}return N}},i}()},{}],45:[function(t,e,n){(n=e.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},n.right=function(t){return t.replace(/\s*$/,"")}},{}],46:[function(t,e,i){(function(t){!function(t,n){"object"==typeof i&&void 0!==e?e.exports=n():t.WebVRPolyfill=n()}(this,function(){"use strict";var e,n,i="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},r=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},o=function(t,e){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]},a=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},s=(function(t,e){t.exports=function(){var t,e,n,r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t,e,n){return t+(e-t)*n},s=function(){var t=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return t}}(),c=function(){var t=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return t}}(),l=(/^((?!chrome|android).)*safari/i.test(navigator.userAgent),function(){var t=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return t}}()),u=(e=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),n=e?parseInt(e[1],10):null,function(){return n}),h=function(){var t=!1;if(65===u()){var e=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(e){var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),4!==n.length);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e[1].split(".")),i=(n[0],n[1],n[2]),r=n[3];t=3325===parseInt(i,10)&&parseInt(r,10)<148}}return function(){return t}}(),d=function(){var t=-1!==navigator.userAgent.indexOf("R7 Build");return function(){return t}}(),p=function(){var t=90==window.orientation||-90==window.orientation;return d()?!t:t},f=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},m=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},g=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},v=function(t,e,n,i){var r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,e),t.compileShader(r);var o=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(o,n),t.compileShader(o);var a=t.createProgram();for(var s in t.attachShader(a,r),t.attachShader(a,o),i)t.bindAttribLocation(a,i[s],s);return t.linkProgram(a),t.deleteShader(r),t.deleteShader(o),a},y=function(t,e){for(var n={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r="",o=0;o<i;o++)n[r=t.getActiveUniform(e,o).name.replace("[0]","")]=t.getUniformLocation(e,r);return n},A=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},w=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},b=function(t){if(s()){var e=t.style.width,n=t.style.height;t.style.width=parseInt(e)+1+"px",t.style.height=parseInt(n)+"px",setTimeout(function(){t.style.width=e,t.style.height=n},100)}window.canvas=t},M=function(){var t=Math.PI/180,e=.25*Math.PI,n=new Float32Array([0,0,0,1]),i=new Float32Array([0,0,0]);function r(r,o,a,s,c,l){!function(n,i,r,o){var a=Math.tan(i?i.upDegrees*t:e),s=Math.tan(i?i.downDegrees*t:e),c=Math.tan(i?i.leftDegrees*t:e),l=Math.tan(i?i.rightDegrees*t:e),u=2/(c+l),h=2/(a+s);n[0]=u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=h,n[6]=0,n[7]=0,n[8]=-(c-l)*u*.5,n[9]=(a-s)*h*.5,n[10]=o/(r-o),n[11]=-1,n[12]=0,n[13]=0,n[14]=o*r/(r-o),n[15]=0}(r,s||null,l.depthNear,l.depthFar);var u,h,d,p,f,m,g,v,y,A,w,b,M,E,x,T,C,S,D,_=a.orientation||n;u=o,d=a.position||i,p=(h=_)[0],f=h[1],m=h[2],g=h[3],w=p*(v=p+p),b=p*(y=f+f),M=p*(A=m+m),E=f*y,x=f*A,T=m*A,C=g*v,S=g*y,D=g*A,u[0]=1-(E+T),u[1]=b+D,u[2]=M-S,u[3]=0,u[4]=b-D,u[5]=1-(w+T),u[6]=x+C,u[7]=0,u[8]=M+S,u[9]=x-C,u[10]=1-(w+E),u[11]=0,u[12]=d[0],u[13]=d[1],u[14]=d[2],u[15]=1,c&&function(t,e,n){var i,r,o,a,s,c,l,u,h,d,p,f,m=n[0],g=n[1],v=n[2];e===t?(t[12]=e[0]*m+e[4]*g+e[8]*v+e[12],t[13]=e[1]*m+e[5]*g+e[9]*v+e[13],t[14]=e[2]*m+e[6]*g+e[10]*v+e[14],t[15]=e[3]*m+e[7]*g+e[11]*v+e[15]):(i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=c,t[6]=l,t[7]=u,t[8]=h,t[9]=d,t[10]=p,t[11]=f,t[12]=i*m+s*g+h*v+e[12],t[13]=r*m+c*g+d*v+e[13],t[14]=o*m+l*g+p*v+e[14],t[15]=a*m+u*g+f*v+e[15])}(o,o,c),function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],v=e[15],y=n*s-i*a,A=n*c-r*a,w=n*l-o*a,b=i*c-r*s,M=i*l-o*s,E=r*l-o*c,x=u*m-h*f,T=u*g-d*f,C=u*v-p*f,S=h*g-d*m,D=h*v-p*m,_=d*v-p*g,L=y*_-A*D+w*S+b*C-M*T+E*x;if(!L)return null;L=1/L,t[0]=(s*_-c*D+l*S)*L,t[1]=(r*D-i*_-o*S)*L,t[2]=(m*E-g*M+v*b)*L,t[3]=(d*M-h*E-p*b)*L,t[4]=(c*C-a*_-l*T)*L,t[5]=(n*_-r*C+o*T)*L,t[6]=(g*w-f*E-v*A)*L,t[7]=(u*E-d*w+p*A)*L,t[8]=(a*D-s*C+l*x)*L,t[9]=(i*C-n*D-o*x)*L,t[10]=(f*M-m*w+v*y)*L,t[11]=(h*w-u*M-p*y)*L,t[12]=(s*T-a*S-c*x)*L,t[13]=(n*S-i*T+r*x)*L,t[14]=(m*A-f*b-g*y)*L,t[15]=(u*b-h*A+d*y)*L}(o,o)}return function(t,e,n){return!(!t||!e||(t.pose=e,t.timestamp=e.timestamp,r(t.leftProjectionMatrix,t.leftViewMatrix,e,n._getFieldOfView("left"),n._getEyeOffset("left"),n),r(t.rightProjectionMatrix,t.rightViewMatrix,e,n._getFieldOfView("right"),n._getEyeOffset("right"),n),0))}}(),E=function(t){var e,n=t.indexOf("://");e=-1!==n?n+3:0;var i=t.indexOf("/",e);return-1===i&&(i=t.length),t.substring(0,i)},x=(t={},function(e,n){void 0===t[e]&&(t[e]=!0)}),T=function(t,e){x(t,t+" has been deprecated. This may not work on native WebVR displays. "+(e?"Please use "+e+" instead.":""))},C=function(t,e,n){if(e){for(var i=[],r=null,o=0;o<e.length;++o)switch(a=e[o]){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:if((c=e[++o])<t.TEXTURE0||c>t.TEXTURE31){i.push(null,null);break}r||(r=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(c),i.push(t.getParameter(a),null);break;case t.ACTIVE_TEXTURE:r=t.getParameter(t.ACTIVE_TEXTURE),i.push(null);break;default:i.push(t.getParameter(a))}for(n(t),o=0;o<e.length;++o){var a=e[o],s=i[o];switch(a){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,s);break;case t.COLOR_CLEAR_VALUE:t.clearColor(s[0],s[1],s[2],s[3]);break;case t.COLOR_WRITEMASK:t.colorMask(s[0],s[1],s[2],s[3]);break;case t.CURRENT_PROGRAM:t.useProgram(s);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,s);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,s);break;case t.TEXTURE_BINDING_2D:if((c=e[++o])<t.TEXTURE0||c>t.TEXTURE31)break;t.activeTexture(c),t.bindTexture(t.TEXTURE_2D,s);break;case t.TEXTURE_BINDING_CUBE_MAP:var c;if((c=e[++o])<t.TEXTURE0||c>t.TEXTURE31)break;t.activeTexture(c),t.bindTexture(t.TEXTURE_CUBE_MAP,s);break;case t.VIEWPORT:t.viewport(s[0],s[1],s[2],s[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:s?t.enable(a):t.disable(a)}r&&t.activeTexture(r)}}else n(t)},S=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),D=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function _(t,e,n,i){this.gl=t,this.cardboardUI=e,this.bufferScale=n,this.dirtySubmitFrameBindings=i,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,s()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=v(t,S,D,this.attribs),this.uniforms=y(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize()}_.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},_.prototype.onResize=function(){var t=this.gl,e=this,n=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];C(t,n,function(t){e.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),e.scissorTest&&e.realDisable.call(t,t.SCISSOR_TEST),e.realColorMask.call(t,!0,!0,!0,!0),e.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.framebuffer),t.bindTexture(t.TEXTURE_2D,e.renderTarget),t.texImage2D(t.TEXTURE_2D,0,e.ctxAttribs.alpha?t.RGBA:t.RGB,e.bufferWidth,e.bufferHeight,0,e.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.renderTarget,0),e.ctxAttribs.depth&&e.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,e.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e.depthStencilBuffer)):e.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,e.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e.depthBuffer)):e.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,e.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,e.stencilBuffer)),t.checkFramebufferStatus(t.FRAMEBUFFER),t.FRAMEBUFFER_COMPLETE,e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.lastBoundFramebuffer),e.scissorTest&&e.realEnable.call(t,t.SCISSOR_TEST),e.realColorMask.apply(t,e.colorMask),e.realViewport.apply(t,e.viewport),e.realClearColor.apply(t,e.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},_.prototype.patch=function(){if(!this.isPatched){var t=this,e=this.gl.canvas,n=this.gl;s()||(e.width=f()*this.bufferScale,e.height=m()*this.bufferScale,Object.defineProperty(e,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(n){t.bufferWidth=n,t.realCanvasWidth.set.call(e,n),t.onResize()}}),Object.defineProperty(e,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(n){t.bufferHeight=n,t.realCanvasHeight.set.call(e,n),t.onResize()}})),this.lastBoundFramebuffer=n.getParameter(n.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(e,i){t.lastBoundFramebuffer=i||t.framebuffer,t.realBindFramebuffer.call(n,e,t.lastBoundFramebuffer)},this.cullFace=n.getParameter(n.CULL_FACE),this.depthTest=n.getParameter(n.DEPTH_TEST),this.blend=n.getParameter(n.BLEND),this.scissorTest=n.getParameter(n.SCISSOR_TEST),this.stencilTest=n.getParameter(n.STENCIL_TEST),n.enable=function(e){switch(e){case n.CULL_FACE:t.cullFace=!0;break;case n.DEPTH_TEST:t.depthTest=!0;break;case n.BLEND:t.blend=!0;break;case n.SCISSOR_TEST:t.scissorTest=!0;break;case n.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(n,e)},n.disable=function(e){switch(e){case n.CULL_FACE:t.cullFace=!1;break;case n.DEPTH_TEST:t.depthTest=!1;break;case n.BLEND:t.blend=!1;break;case n.SCISSOR_TEST:t.scissorTest=!1;break;case n.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(n,e)},this.colorMask=n.getParameter(n.COLOR_WRITEMASK),n.colorMask=function(e,i,r,o){t.colorMask[0]=e,t.colorMask[1]=i,t.colorMask[2]=r,t.colorMask[3]=o,t.realColorMask.call(n,e,i,r,o)},this.clearColor=n.getParameter(n.COLOR_CLEAR_VALUE),n.clearColor=function(e,i,r,o){t.clearColor[0]=e,t.clearColor[1]=i,t.clearColor[2]=r,t.clearColor[3]=o,t.realClearColor.call(n,e,i,r,o)},this.viewport=n.getParameter(n.VIEWPORT),n.viewport=function(e,i,r,o){t.viewport[0]=e,t.viewport[1]=i,t.viewport[2]=r,t.viewport[3]=o,t.realViewport.call(n,e,i,r,o)},this.isPatched=!0,b(e)}},_.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,e=this.gl.canvas;s()||(Object.defineProperty(e,"width",this.realCanvasWidth),Object.defineProperty(e,"height",this.realCanvasHeight)),e.width=this.bufferWidth,e.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){b(e)},1)}},_.prototype.setTextureBounds=function(t,e){t||(t=[0,0,.5,1]),e||(e=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=e[0],this.viewportOffsetScale[5]=e[1],this.viewportOffsetScale[6]=e[2],this.viewportOffsetScale[7]=e[3]},_.prototype.submitFrame=function(){var t=this.gl,e=this,n=[];if(this.dirtySubmitFrameBindings||n.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),C(t,n,function(t){e.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),e.cullFace&&e.realDisable.call(t,t.CULL_FACE),e.depthTest&&e.realDisable.call(t,t.DEPTH_TEST),e.blend&&e.realDisable.call(t,t.BLEND),e.scissorTest&&e.realDisable.call(t,t.SCISSOR_TEST),e.stencilTest&&e.realDisable.call(t,t.STENCIL_TEST),e.realColorMask.call(t,!0,!0,!0,!0),e.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(e.ctxAttribs.alpha||s())&&(e.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(e.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffer),t.enableVertexAttribArray(e.attribs.position),t.enableVertexAttribArray(e.attribs.texCoord),t.vertexAttribPointer(e.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(e.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(e.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,e.renderTarget),t.uniform4fv(e.uniforms.viewportOffsetScale,e.viewportOffsetScale),t.drawElements(t.TRIANGLES,e.indexCount,t.UNSIGNED_SHORT,0),e.cardboardUI&&e.cardboardUI.renderNoState(),e.realBindFramebuffer.call(e.gl,t.FRAMEBUFFER,e.framebuffer),e.ctxAttribs.preserveDrawingBuffer||(e.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),e.dirtySubmitFrameBindings||e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.lastBoundFramebuffer),e.cullFace&&e.realEnable.call(t,t.CULL_FACE),e.depthTest&&e.realEnable.call(t,t.DEPTH_TEST),e.blend&&e.realEnable.call(t,t.BLEND),e.scissorTest&&e.realEnable.call(t,t.SCISSOR_TEST),e.stencilTest&&e.realEnable.call(t,t.STENCIL_TEST),e.realColorMask.apply(t,e.colorMask),e.realViewport.apply(t,e.viewport),!e.ctxAttribs.alpha&&e.ctxAttribs.preserveDrawingBuffer||e.realClearColor.apply(t,e.clearColor)}),s()){var i=t.canvas;i.width==e.bufferWidth&&i.height==e.bufferHeight||(e.bufferWidth=i.width,e.bufferHeight=i.height,e.onResize())}},_.prototype.updateDeviceInfo=function(t){var e=this.gl,n=this,i=[e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING];C(e,i,function(e){var i=n.computeMeshVertices_(n.meshWidth,n.meshHeight,t);if(e.bindBuffer(e.ARRAY_BUFFER,n.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),!n.indexCount){var r=n.computeMeshIndices_(n.meshWidth,n.meshHeight);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW),n.indexCount=r.length}})},_.prototype.computeMeshVertices_=function(t,e,n){for(var i=new Float32Array(2*t*e*5),r=n.getLeftEyeVisibleTanAngles(),o=n.getLeftEyeNoLensTanAngles(),s=n.getLeftEyeVisibleScreenRect(o),c=0,l=0;l<2;l++){for(var u=0;u<e;u++)for(var h=0;h<t;h++,c++){var d=h/(t-1),p=u/(e-1),f=d,m=p,g=a(r[0],r[2],d),v=a(r[3],r[1],p),y=Math.sqrt(g*g+v*v),A=n.distortion.distortInverse(y),w=v*A/y;d=(g*A/y-o[0])/(o[2]-o[0]),p=(w-o[3])/(o[1]-o[3]),d=2*(s.x+d*s.width-.5),p=2*(s.y+p*s.height-.5),i[5*c+0]=d,i[5*c+1]=p,i[5*c+2]=f,i[5*c+3]=m,i[5*c+4]=l}var b=r[2]-r[0];r[0]=-(b+r[0]),r[2]=b-r[2],b=o[2]-o[0],o[0]=-(b+o[0]),o[2]=b-o[2],s.x=1-(s.x+s.width)}return i},_.prototype.computeMeshIndices_=function(t,e){for(var n=new Uint16Array(2*(t-1)*(e-1)*6),i=t/2,r=e/2,o=0,a=0,s=0;s<2;s++)for(var c=0;c<e;c++)for(var l=0;l<t;l++,o++)0!=l&&0!=c&&(l<=i==c<=r?(n[a++]=o,n[a++]=o-t-1,n[a++]=o-t,n[a++]=o-t-1,n[a++]=o,n[a++]=o-1):(n[a++]=o-1,n[a++]=o-t,n[a++]=o,n[a++]=o-t,n[a++]=o-1,n[a++]=o-t-1));return n},_.prototype.getOwnPropertyDescriptor_=function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return void 0!==n.get&&void 0!==n.set||(n.configurable=!0,n.enumerable=!0,n.get=function(){return this.getAttribute(e)},n.set=function(t){this.setAttribute(e,t)}),n};var L=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),N=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),I=Math.PI/180,O=.3125;function j(t){this.gl=t,this.attribs={position:0},this.program=v(t,L,N,this.attribs),this.uniforms=y(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function P(t){this.coefficients=t}j.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},j.prototype.listen=function(t,e){var n=this.gl.canvas;this.listener=function(i){var r=n.clientWidth/2;i.clientX>r-42&&i.clientX<r+42&&i.clientY>n.clientHeight-42?t(i):i.clientX<42&&i.clientY<42&&e(i)},n.addEventListener("click",this.listener,!1)},j.prototype.onResize=function(){var t=this.gl,e=this,n=[t.ARRAY_BUFFER_BINDING];C(t,n,function(t){var n=[],i=t.drawingBufferWidth/2,r=Math.max(screen.width,screen.height)*window.devicePixelRatio,o=t.drawingBufferWidth/r*window.devicePixelRatio,a=4*o/2,s=42*o,c=28*o/2,l=14*o;function u(t,e){var r=(90-t)*I,o=Math.cos(r),a=Math.sin(r);n.push(O*o*c+i,O*a*c+c),n.push(e*o*c+i,e*a*c+c)}n.push(i-a,s),n.push(i-a,t.drawingBufferHeight),n.push(i+a,s),n.push(i+a,t.drawingBufferHeight),e.gearOffset=n.length/2;for(var h=0;h<=6;h++){var d=60*h;u(d,1),u(d+12,1),u(d+20,.75),u(d+40,.75),u(d+48,1)}function p(e,i){n.push(l+e,t.drawingBufferHeight-l-i)}e.gearVertexCount=n.length/2-e.gearOffset,e.arrowOffset=n.length/2;var f=a/Math.sin(45*I);p(0,c),p(c,0),p(c+f,f),p(f,c+f),p(f,c-f),p(0,c),p(c,2*c),p(c+f,2*c-f),p(f,c-f),p(0,c),p(f,c-a),p(28*o,c-a),p(f,c+a),p(28*o,c+a),e.arrowVertexCount=n.length/2-e.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW)})},j.prototype.render=function(){var t=this.gl,e=this,n=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];C(t,n,function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.renderNoState()})},j.prototype.renderNoState=function(){var t,e,n,i,r,o,a=this.gl;a.useProgram(this.program),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.enableVertexAttribArray(this.attribs.position),a.vertexAttribPointer(this.attribs.position,2,a.FLOAT,!1,8,0),a.uniform4f(this.uniforms.color,1,1,1,1),t=this.projMat,i=1/(0-(e=a.drawingBufferWidth)),r=1/(0-(n=a.drawingBufferHeight)),o=1/-1023.9,t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*o,t[11]=0,t[12]=(0+e)*i,t[13]=(n+0)*r,t[14]=1024.1*o,t[15]=1,a.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),a.drawArrays(a.TRIANGLE_STRIP,0,4),a.drawArrays(a.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),a.drawArrays(a.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},P.prototype.distortInverse=function(t){for(var e=0,n=1,i=t-this.distort(e);Math.abs(n-e)>1e-4;){var r=t-this.distort(n),o=n-r*((n-e)/(r-i));e=n,n=o,i=r}return n},P.prototype.distort=function(t){for(var e=t*t,n=0,i=0;i<this.coefficients.length;i++)n=e*(n+this.coefficients[i]);return(n+1)*t};var R=Math.PI/180,k=180/Math.PI,z=function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0};z.prototype={constructor:z,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){var e=1/t;this.multiplyScalar(e)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,a=t.z,s=t.w,c=s*e+o*i-a*n,l=s*n+a*e-r*i,u=s*i+r*n-o*e,h=-r*e-o*n-a*i;return this.x=c*s+h*-r+l*-a-u*-o,this.y=l*s+h*-o+u*-r-c*-a,this.z=u*s+h*-a+c*-o-l*-r,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this}};var B,F,U=function(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1};function H(t){this.width=t.width||f(),this.height=t.height||m(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}U.prototype={constructor:U,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,e,n){var i=Math.cos(t/2),r=Math.cos(e/2),o=Math.cos(n/2),a=Math.sin(t/2),s=Math.sin(e/2),c=Math.sin(n/2);return this.x=a*r*o+i*s*c,this.y=i*s*o-a*r*c,this.z=i*r*c+a*s*o,this.w=i*r*o-a*s*c,this},setFromEulerYXZ:function(t,e,n){var i=Math.cos(t/2),r=Math.cos(e/2),o=Math.cos(n/2),a=Math.sin(t/2),s=Math.sin(e/2),c=Math.sin(n/2);return this.x=a*r*o+i*s*c,this.y=i*s*o-a*r*c,this.z=i*r*c-a*s*o,this.w=i*r*o+a*s*c,this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this.x=t.x*i,this.y=t.y*i,this.z=t.z*i,this.w=Math.cos(n),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var n=t.x,i=t.y,r=t.z,o=t.w,a=e.x,s=e.y,c=e.z,l=e.w;return this.x=n*l+o*a+i*c-r*s,this.y=i*l+o*s+r*a-n*c,this.z=r*l+o*c+n*s-i*a,this.w=o*l-n*a-i*s-r*c,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this.x,i=this.y,r=this.z,o=this.w,a=o*t.w+n*t.x+i*t.y+r*t.z;if(a<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,a=-a):this.copy(t),a>=1)return this.w=o,this.x=n,this.y=i,this.z=r,this;var s=Math.acos(a),c=Math.sqrt(1-a*a);if(Math.abs(c)<.001)return this.w=.5*(o+this.w),this.x=.5*(n+this.x),this.y=.5*(i+this.y),this.z=.5*(r+this.z),this;var l=Math.sin((1-e)*s)/c,u=Math.sin(e*s)/c;return this.w=o*l+this.w*u,this.x=n*l+this.x*u,this.y=i*l+this.y*u,this.z=r*l+this.z*u,this},setFromUnitVectors:function(t,e){return void 0===B&&(B=new z),(F=t.dot(e)+1)<1e-6?(F=0,Math.abs(t.x)>Math.abs(t.z)?B.set(-t.y,t.x,0):B.set(0,-t.z,t.y)):B.crossVectors(t,e),this.x=B.x,this.y=B.y,this.z=B.z,this.w=F,this.normalize(),this}};var G=new H({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),Q=new H({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),V={CardboardV1:new W({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new W({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function Y(t){this.viewer=V.CardboardV2,this.updateDeviceParams(t),this.distortion=new P(this.viewer.distortionCoefficients)}function W(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}Y.prototype.updateDeviceParams=function(t){this.device=this.determineDevice_(t)||this.device},Y.prototype.getDevice=function(){return this.device},Y.prototype.setViewer=function(t){this.viewer=t,this.distortion=new P(this.viewer.distortionCoefficients)},Y.prototype.determineDevice_=function(t){if(!t)return s()?Q:G;var e=.0254/t.xdpi,n=.0254/t.ydpi;return new H({widthMeters:e*f(),heightMeters:n*m(),bevelMeters:.001*t.bevelMm})},Y.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,e=this.device,n=this.distortion,i=t.screenLensDistance,r=(e.widthMeters-t.interLensDistance)/2,o=t.interLensDistance/2,a=t.baselineLensDistance-e.bevelMeters,s=e.heightMeters-a,c=k*Math.atan(n.distort(r/i)),l=k*Math.atan(n.distort(o/i)),u=k*Math.atan(n.distort(a/i)),h=k*Math.atan(n.distort(s/i));return{leftDegrees:Math.min(c,t.fov),rightDegrees:Math.min(l,t.fov),downDegrees:Math.min(u,t.fov),upDegrees:Math.min(h,t.fov)}},Y.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,e=this.device,n=this.distortion,i=Math.tan(-R*t.fov),r=Math.tan(R*t.fov),o=Math.tan(R*t.fov),a=Math.tan(-R*t.fov),s=e.widthMeters/4,c=e.heightMeters/2,l=t.baselineLensDistance-e.bevelMeters-c,u=t.interLensDistance/2-s,h=-l,d=t.screenLensDistance,p=n.distort((u-s)/d),f=n.distort((h+c)/d),m=n.distort((u+s)/d),g=n.distort((h-c)/d),v=new Float32Array(4);return v[0]=Math.max(i,p),v[1]=Math.min(r,f),v[2]=Math.min(o,m),v[3]=Math.max(a,g),v},Y.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,e=this.device,n=this.distortion,i=new Float32Array(4),r=n.distortInverse(Math.tan(-R*t.fov)),o=n.distortInverse(Math.tan(R*t.fov)),a=n.distortInverse(Math.tan(R*t.fov)),s=n.distortInverse(Math.tan(-R*t.fov)),c=e.widthMeters/4,l=e.heightMeters/2,u=t.baselineLensDistance-e.bevelMeters-l,h=t.interLensDistance/2-c,d=-u,p=t.screenLensDistance,f=(h-c)/p,m=(d+l)/p,g=(h+c)/p,v=(d-l)/p;return i[0]=Math.max(r,f),i[1]=Math.min(o,m),i[2]=Math.min(a,g),i[3]=Math.max(s,v),i},Y.prototype.getLeftEyeVisibleScreenRect=function(t){var e=this.viewer,n=this.device,i=e.screenLensDistance,r=(n.widthMeters-e.interLensDistance)/2,o=e.baselineLensDistance-n.bevelMeters,a=(t[0]*i+r)/n.widthMeters,s=(t[1]*i+o)/n.heightMeters,c=(t[2]*i+r)/n.widthMeters,l=(t[3]*i+o)/n.heightMeters;return{x:a,y:l,width:c-a,height:s-l}},Y.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},Y.prototype.getFieldOfViewRightEye=function(t){var e=this.getFieldOfViewLeftEye(t);return{leftDegrees:e.rightDegrees,rightDegrees:e.leftDegrees,upDegrees:e.upDegrees,downDegrees:e.downDegrees}},Y.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.getUndistortedParams_();return{leftDegrees:k*Math.atan(t.outerDist),rightDegrees:k*Math.atan(t.innerDist),downDegrees:k*Math.atan(t.bottomDist),upDegrees:k*Math.atan(t.topDist)}},Y.prototype.getUndistortedViewportLeftEye=function(){var t=this.getUndistortedParams_(),e=this.viewer,n=this.device,i=e.screenLensDistance,r=n.widthMeters/i,o=n.heightMeters/i,a=n.width/r,s=n.height/o,c=Math.round((t.eyePosX-t.outerDist)*a),l=Math.round((t.eyePosY-t.bottomDist)*s);return{x:c,y:l,width:Math.round((t.eyePosX+t.innerDist)*a)-c,height:Math.round((t.eyePosY+t.topDist)*s)-l}},Y.prototype.getUndistortedParams_=function(){var t=this.viewer,e=this.device,n=this.distortion,i=t.screenLensDistance,r=t.interLensDistance/2/i,o=e.widthMeters/i,a=e.heightMeters/i,s=o/2-r,c=(t.baselineLensDistance-e.bevelMeters)/i,l=t.fov,u=n.distortInverse(Math.tan(R*l)),h=Math.min(s,u),d=Math.min(r,u),p=Math.min(c,u);return{outerDist:h,innerDist:d,topDist:Math.min(a-c,u),bottomDist:p,eyePosX:s,eyePosY:c}},Y.Viewers=V;var q={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function X(t,e){if(this.dpdb=q,this.recalculateDeviceParams_(),t){this.onDeviceParamsUpdated=e;var n=new XMLHttpRequest,i=this;n.open("GET",t,!0),n.addEventListener("load",function(){i.loading=!1,n.status>=200&&n.status<=299&&(i.dpdb=JSON.parse(n.response),i.recalculateDeviceParams_())}),n.send()}}function Z(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}function K(t,e){this.set(t,e)}function J(t,e){this.kFilter=t,this.isDebug=e,this.currentAccelMeasurement=new K,this.currentGyroMeasurement=new K,this.previousGyroMeasurement=new K,s()?this.filterQ=new U(-1,0,0,1):this.filterQ=new U(1,0,0,1),this.previousFilterQ=new U,this.previousFilterQ.copy(this.filterQ),this.accelQ=new U,this.isOrientationInitialized=!1,this.estimatedGravity=new z,this.measuredGravity=new z,this.gyroIntegralQ=new U}function $(t,e){this.predictionTimeS=t,this.isDebug=e,this.previousQ=new U,this.previousTimestampS=null,this.deltaQ=new U,this.outQ=new U}function tt(t,e,n,i){this.yawOnly=n,this.accelerometer=new z,this.gyroscope=new z,this.filter=new J(t,i),this.posePredictor=new $(e,i),this.isFirefoxAndroid=l(),this.isIOS=s();var r=u();this.isDeviceMotionInRadians=!this.isIOS&&r&&r<66,this.isWithoutDeviceMotion=h(),this.filterToWorldQ=new U,s()?this.filterToWorldQ.setFromAxisAngle(new z(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new z(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new U,this.worldToScreenQ=new U,this.originalPoseAdjustQ=new U,this.originalPoseAdjustQ.setFromAxisAngle(new z(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),p()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new U,this.orientationOut_=new Float32Array(4),this.start()}X.prototype.getDeviceParams=function(){return this.deviceParams},X.prototype.recalculateDeviceParams_=function(){var t=this.calcDeviceParams_();t&&(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams))},X.prototype.calcDeviceParams_=function(){var t=this.dpdb;if(!t)return null;if(1!=t.format)return null;if(!t.devices||!t.devices.length)return null;var e=navigator.userAgent||navigator.vendor||window.opera,n=f(),i=m();if(!t.devices)return null;for(var r=0;r<t.devices.length;r++){var o=t.devices[r];if(o.rules&&("ios"==o.type||"android"==o.type)&&s()==("ios"==o.type)){for(var a=!1,c=0;c<o.rules.length;c++){var l=o.rules[c];if(this.matchRule_(l,e,n,i)){a=!0;break}}if(a)return new Z({xdpi:o.dpi[0]||o.dpi,ydpi:o.dpi[1]||o.dpi,bevelMm:o.bw})}}return null},X.prototype.matchRule_=function(t,e,n,i){if(!t.ua&&!t.res)return!1;if(t.ua&&e.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var r=t.res[0],o=t.res[1];if(Math.min(n,i)!=Math.min(r,o)||Math.max(n,i)!=Math.max(r,o))return!1}return!0},K.prototype.set=function(t,e){this.sample=t,this.timestampS=e},K.prototype.copy=function(t){this.set(t.sample,t.timestampS)},J.prototype.addAccelMeasurement=function(t,e){this.currentAccelMeasurement.set(t,e)},J.prototype.addGyroMeasurement=function(t,e){var n;this.currentGyroMeasurement.set(t,e),n=e-this.previousGyroMeasurement.timestampS,!(isNaN(n)||n<=.001||n>1)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},J.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,e=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(e),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(e);var n=new U;n.copy(this.filterQ),n.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(n),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var i=new U;i.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),i.inverse(),this.isDebug;var r=new U;r.copy(this.filterQ),r.multiply(i),this.filterQ.slerp(r,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},J.prototype.getOrientation=function(){return this.filterQ},J.prototype.accelToQuaternion_=function(t){var e=new z;e.copy(t),e.normalize();var n=new U;return n.setFromUnitVectors(new z(0,0,-1),e),n.inverse(),n},J.prototype.gyroToQuaternionDelta_=function(t,e){var n=new U,i=new z;return i.copy(t),i.normalize(),n.setFromAxisAngle(i,t.length()*e),n},$.prototype.getPrediction=function(t,e,n){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=n,t;var i=new z;i.copy(e),i.normalize();var r=e.length();if(r<20*R)return this.isDebug,this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var o=r*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(i,o),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=n,this.outQ},tt.prototype.getPosition=function(){return null},tt.prototype.getOrientation=function(){var t=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(n=(new U).setFromAxisAngle(new z(0,0,-1),0),i=new U,-90===window.orientation?i.setFromAxisAngle(new z(0,1,0),Math.PI/-2):i.setFromAxisAngle(new z(0,1,0),Math.PI/2),n.multiply(i)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((e=new U).setFromAxisAngle(new z(1,0,0),-Math.PI/2),e),t=this._deviceOrientationQ,(r=new U).copy(t),r.multiply(this.deviceOrientationFilterToWorldQ),r.multiply(this.resetQ),r.multiply(this.worldToScreenQ),r.multiplyQuaternions(this.deviceOrientationFixQ,r),this.yawOnly&&(r.x=0,r.z=0,r.normalize()),this.orientationOut_[0]=r.x,this.orientationOut_[1]=r.y,this.orientationOut_[2]=r.z,this.orientationOut_[3]=r.w,this.orientationOut_;var e,n,i,r,o=this.filter.getOrientation();return t=this.posePredictor.getPrediction(o,this.gyroscope,this.previousTimestampS),(r=new U).copy(this.filterToWorldQ),r.multiply(this.resetQ),r.multiply(t),r.multiply(this.worldToScreenQ),this.yawOnly&&(r.x=0,r.z=0,r.normalize()),this.orientationOut_[0]=r.x,this.orientationOut_[1]=r.y,this.orientationOut_[2]=r.z,this.orientationOut_[3]=r.w,this.orientationOut_},tt.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),p()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},tt.prototype.onDeviceOrientation_=function(t){this._deviceOrientationQ=this._deviceOrientationQ||new U;var e=t.alpha,n=t.beta,i=t.gamma;e=(e||0)*Math.PI/180,n=(n||0)*Math.PI/180,i=(i||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(n,e,-i)},tt.prototype.onDeviceMotion_=function(t){this.updateDeviceMotion_(t)},tt.prototype.updateDeviceMotion_=function(t){var e=t.accelerationIncludingGravity,n=t.rotationRate,i=t.timeStamp/1e3,r=i-this.previousTimestampS;return r<0?(x("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=i)):r<=.001||r>1?(x("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=i)):(this.accelerometer.set(-e.x,-e.y,-e.z),d()?this.gyroscope.set(-n.beta,n.alpha,n.gamma):this.gyroscope.set(n.alpha,n.beta,n.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,i),this.filter.addGyroMeasurement(this.gyroscope,i),void(this.previousTimestampS=i))},tt.prototype.onOrientationChange_=function(t){this.setScreenTransform_()},tt.prototype.onMessage_=function(t){var e=t.data;e&&e.type&&"devicemotion"===e.type.toLowerCase()&&this.updateDeviceMotion_(e.deviceMotionEvent)},tt.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new z(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new z(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},tt.prototype.start=function(){var t,e,n;this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),s()&&(t=window.self!==window.top,e=E(document.referrer),n=E(window.location.href),t&&e!==n)&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},tt.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var et=new z(1,0,0),nt=new z(0,0,1),it={};screen.orientation?it=screen.orientation:screen.msOrientation?it=screen.msOrientation:Object.defineProperty(it,"angle",{get:function(){return window.orientation||0}});var rt=new U;rt.setFromAxisAngle(et,-Math.PI/2),rt.multiply((new U).setFromAxisAngle(nt,Math.PI/2));var ot=function(){function t(e){r(this,t),this.config=e,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new U,this._worldToScreenQ=new U,this._outQ=new U,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onOrientationChange(),this.init()}return o(t,[{key:"init",value:function(){var t=null;try{(t=new RelativeOrientationSensor({frequency:60})).addEventListener("error",this._onSensorError)}catch(t){this.errors.push(t),"SecurityError"===t.name?this.useDeviceMotion():"ReferenceError"===t.name&&this.useDeviceMotion()}t&&(this.api="sensor",this.sensor=t,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start()),window.addEventListener("orientationchange",this._onOrientationChange)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new tt(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var t=this.sensor.quaternion;this._sensorQ.set(t[0],t[1],t[2],t[3]);var e=this._outQ;return e.copy(rt),e.multiply(this._sensorQ),e.multiply(this._worldToScreenQ),this.config.YAW_ONLY&&(e.x=e.z=0,e.normalize()),this._out[0]=e.x,this._out[1]=e.y,this._out[2]=e.z,this._out[3]=e.w,this._out}},{key:"_onSensorError",value:function(t){this.errors.push(t.error),"NotAllowedError"===t.error.name||t.error.name}},{key:"_onSensorRead",value:function(){}},{key:"_onOrientationChange",value:function(){var t=-it.angle*Math.PI/180;this._worldToScreenQ.setFromAxisAngle(nt,t)}}]),t}();function at(){this.loadIcon_();var t=document.createElement("div");(o=t.style).position="fixed",o.top=0,o.right=0,o.bottom=0,o.left=0,o.backgroundColor="gray",o.fontFamily="sans-serif",o.zIndex=1e6;var e=document.createElement("img");e.src=this.icon,(o=e.style).marginLeft="25%",o.marginTop="25%",o.width="50%",t.appendChild(e);var n=document.createElement("div");(o=n.style).textAlign="center",o.fontSize="16px",o.lineHeight="24px",o.margin="24px 25%",o.width="50%",n.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(n);var i=document.createElement("div");(o=i.style).backgroundColor="#CFD8DC",o.position="fixed",o.bottom=0,o.width="100%",o.height="48px",o.padding="14px 24px",o.boxSizing="border-box",o.color="#656A6B",t.appendChild(i);var r=document.createElement("div");r.style.float="left",r.innerHTML="No Cardboard viewer?";var o,a=document.createElement("a");a.href="https://www.google.com/get/cardboard/get-cardboard/",a.innerHTML="get one",a.target="_blank",(o=a.style).float="right",o.fontWeight=600,o.textTransform="uppercase",o.borderLeft="1px solid gray",o.paddingLeft="24px",o.textDecoration="none",o.color="#656A6B",i.appendChild(r),i.appendChild(a),this.overlay=t,this.text=n,this.hide()}at.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var e=this.overlay.querySelector("img").style;p()?(e.width="20%",e.marginLeft="40%",e.marginTop="3%"):(e.width="50%",e.marginLeft="25%",e.marginTop="25%")},at.prototype.hide=function(){this.overlay.style.display="none"},at.prototype.showTemporarily=function(t,e){this.show(e),this.timer=setTimeout(this.hide.bind(this),t)},at.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},at.prototype.update=function(){this.disableShowTemporarily(),!p()&&A()?this.show():this.hide()},at.prototype.loadIcon_=function(){this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"};var st="CardboardV1",ct="WEBVR_CARDBOARD_VIEWER";function lt(){try{this.selectedKey=localStorage.getItem(ct)}catch(t){}this.selectedKey||(this.selectedKey=st),this.dialog=this.createDialog_(Y.Viewers),this.root=null,this.onChangeCallbacks_=[]}lt.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},lt.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},lt.prototype.getCurrentViewer=function(){return Y.Viewers[this.selectedKey]},lt.prototype.getSelectedKey_=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},lt.prototype.onChange=function(t){this.onChangeCallbacks_.push(t)},lt.prototype.fireOnChange_=function(t){for(var e=0;e<this.onChangeCallbacks_.length;e++)this.onChangeCallbacks_[e](t)},lt.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&Y.Viewers[this.selectedKey]){this.fireOnChange_(Y.Viewers[this.selectedKey]);try{localStorage.setItem(ct,this.selectedKey)}catch(t){}this.hide()}},lt.prototype.createDialog_=function(t){var e=document.createElement("div");e.classList.add("webvr-polyfill-viewer-selector"),e.style.display="none";var n=document.createElement("div");(r=n.style).position="fixed",r.left=0,r.top=0,r.width="100%",r.height="100%",r.background="rgba(0, 0, 0, 0.3)",n.addEventListener("click",this.hide.bind(this));var i=document.createElement("div"),r=i.style;for(var o in r.boxSizing="border-box",r.position="fixed",r.top="24px",r.left="50%",r.marginLeft="-140px",r.width="280px",r.padding="24px",r.overflow="hidden",r.background="#fafafa",r.fontFamily="'Roboto', sans-serif",r.boxShadow="0px 5px 20px #666",i.appendChild(this.createH1_("Select your viewer")),t)i.appendChild(this.createChoice_(o,t[o].label));return i.appendChild(this.createButton_("Save",this.onSave_.bind(this))),e.appendChild(n),e.appendChild(i),e},lt.prototype.createH1_=function(t){var e=document.createElement("h1"),n=e.style;return n.color="black",n.fontSize="20px",n.fontWeight="bold",n.marginTop=0,n.marginBottom="24px",e.innerHTML=t,e},lt.prototype.createChoice_=function(t,e){var n=document.createElement("div");n.style.marginTop="8px",n.style.color="black";var i=document.createElement("input");i.style.fontSize="30px",i.setAttribute("id",t),i.setAttribute("type","radio"),i.setAttribute("value",t),i.setAttribute("name","field");var r=document.createElement("label");return r.style.marginLeft="4px",r.setAttribute("for",t),r.innerHTML=e,n.appendChild(i),n.appendChild(r),n},lt.prototype.createButton_=function(t,e){var n=document.createElement("button");n.innerHTML=t;var i=n.style;return i.float="right",i.textTransform="uppercase",i.color="#1094f7",i.fontSize="14px",i.letterSpacing=0,i.border=0,i.background="none",i.marginTop="16px",n.addEventListener("click",e),n},"undefined"!=typeof window?window:void 0!==i||"undefined"!=typeof self&&self;var ut,ht,dt=((ht={exports:{}}).exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),o="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,a=function(){function t(){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),o?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",r),this.noSleepVideo.addEventListener("timeupdate",function(t){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return i(t,[{key:"enable",value:function(){o?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){o?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),t}();t.exports=a},function(t,e,n){t.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}]),(ut=ht.exports)&&ut.__esModule?ut.default:ut),pt=1e3,ft=[0,0,.5,1],mt=[.5,0,.5,1],gt=window.requestAnimationFrame,vt=window.cancelAnimationFrame;function yt(t){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:t.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:t.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:t.canPresent},maxLayers:{writable:!1,enumerable:!0,value:t.maxLayers},hasOrientation:{enumerable:!0,get:function(){return T("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),t.hasOrientation}}})}function At(t){var e=!("wakelock"in(t=t||{}))||t.wakelock;this.isPolyfilled=!0,this.displayId=pt++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return T("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new yt({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,e&&A()&&(this.wakelock_=new dt)}At.prototype.getFrameData=function(t){return M(t,this._getPose(),this)},At.prototype.getPose=function(){return T("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},At.prototype.resetPose=function(){return T("VRDisplay.prototype.resetPose"),this._resetPose()},At.prototype.getImmediatePose=function(){return T("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},At.prototype.requestAnimationFrame=function(t){return gt(t)},At.prototype.cancelAnimationFrame=function(t){return vt(t)},At.prototype.wrapForFullscreen=function(t){if(s())return t;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var e=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",e.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==t)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=t,this.originalParent_=t.parentElement,this.originalParent_||document.body.appendChild(t),!this.fullscreenWrapper_.parentElement){var n=this.fullscreenElement_.parentElement;n.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),n.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var i=this;return function(){if(i.fullscreenElement_){var t=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];i.fullscreenElement_.setAttribute("style",t.join("; ")+";")}}(),this.fullscreenWrapper_},At.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var t=this.fullscreenElement_;this.fullscreenElementCachedStyle_?t.setAttribute("style",this.fullscreenElementCachedStyle_):t.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var e=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(t),this.originalParent_===e?e.insertBefore(t,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(t),e.removeChild(this.fullscreenWrapper_),t}},At.prototype.requestPresent=function(t){var e=this.isPresenting,n=this;return t instanceof Array||(T("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),t=[t]),new Promise(function(i,r){if(n.capabilities.canPresent)if(0==t.length||t.length>n.capabilities.maxLayers)r(new Error("Invalid number of layers."));else{var o=t[0];if(o.source){var a=o.leftBounds||ft,l=o.rightBounds||mt;if(e){var u=n.layer_;u.source!==o.source&&(u.source=o.source);for(var h=0;h<4;h++)u.leftBounds[h]=a[h],u.rightBounds[h]=l[h];return n.wrapForFullscreen(n.layer_.source),n.updatePresent_(),void i()}if(n.layer_={predistorted:o.predistorted,source:o.source,leftBounds:a.slice(0),rightBounds:l.slice(0)},n.waitingForPresent_=!1,n.layer_&&n.layer_.source){var d=n.wrapForFullscreen(n.layer_.source);n.addFullscreenListeners_(d,function(){var t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;n.isPresenting=d===t,n.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(t){}),n.waitingForPresent_=!1,n.beginPresent_(),i()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),n.removeFullscreenWrapper(),n.disableWakeLock(),n.endPresent_(),n.removeFullscreenListeners_()),n.fireVRDisplayPresentChange_()},function(){n.waitingForPresent_&&(n.removeFullscreenWrapper(),n.removeFullscreenListeners_(),n.disableWakeLock(),n.waitingForPresent_=!1,n.isPresenting=!1,r(new Error("Unable to present.")))}),function(t){if(c())return!1;if(t.requestFullscreen)t.requestFullscreen();else if(t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0}(d)?(n.enableWakeLock(),n.waitingForPresent_=!0):(s()||c())&&(n.enableWakeLock(),n.isPresenting=!0,n.beginPresent_(),n.fireVRDisplayPresentChange_(),i())}n.waitingForPresent_||s()||(g(),r(new Error("Unable to present.")))}else i()}else r(new Error("VRDisplay is not capable of presenting."))})},At.prototype.exitPresent=function(){var t=this.isPresenting,e=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(n,i){t?(!g()&&s()&&(e.endPresent_(),e.fireVRDisplayPresentChange_()),c()&&(e.removeFullscreenWrapper(),e.removeFullscreenListeners_(),e.endPresent_(),e.fireVRDisplayPresentChange_()),n()):i(new Error("Was not presenting to VRDisplay."))})},At.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},At.prototype.fireVRDisplayPresentChange_=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(t)},At.prototype.fireVRDisplayConnect_=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(t)},At.prototype.addFullscreenListeners_=function(t,e,n){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=t,this.fullscreenChangeHandler_=e,this.fullscreenErrorHandler_=n,e&&(document.fullscreenEnabled?t.addEventListener("fullscreenchange",e,!1):document.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",e,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",e,!1):document.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",e,!1)),n&&(document.fullscreenEnabled?t.addEventListener("fullscreenerror",n,!1):document.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",n,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",n,!1):document.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",n,!1))},At.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var t=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var e=this.fullscreenChangeHandler_;t.removeEventListener("fullscreenchange",e,!1),t.removeEventListener("webkitfullscreenchange",e,!1),document.removeEventListener("mozfullscreenchange",e,!1),t.removeEventListener("msfullscreenchange",e,!1)}if(this.fullscreenErrorHandler_){var n=this.fullscreenErrorHandler_;t.removeEventListener("fullscreenerror",n,!1),t.removeEventListener("webkitfullscreenerror",n,!1),document.removeEventListener("mozfullscreenerror",n,!1),t.removeEventListener("msfullscreenerror",n,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},At.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},At.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},At.prototype.beginPresent_=function(){},At.prototype.endPresent_=function(){},At.prototype.submitFrame=function(t){},At.prototype.getEyeParameters=function(t){return null};var wt={MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function bt(t){var e=w({},wt);t=w(e,t||{}),At.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new yt({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new ot(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new X(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new Y(this.dpdb_.getDeviceParams()),this.viewerSelector_=new lt,this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new at),s()&&window.addEventListener("resize",this.onResize_.bind(this))}return bt.prototype=Object.create(At.prototype),bt.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},bt.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},bt.prototype._getFieldOfView=function(t){var e;if("left"==t)e=this.deviceInfo_.getFieldOfViewLeftEye();else{if("right"!=t)return null;e=this.deviceInfo_.getFieldOfViewRightEye()}return e},bt.prototype._getEyeOffset=function(t){var e;if("left"==t)e=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if("right"!=t)return null;e=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return e},bt.prototype.getEyeParameters=function(t){var e=this._getEyeOffset(t),n=this._getFieldOfView(t),i={offset:e,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(i,"fieldOfView",{enumerable:!0,get:function(){return T("VRFieldOfView","VRFrameData's projection matrices"),n}}),i},bt.prototype.onDeviceParamsUpdated_=function(t){this.config.DEBUG,this.deviceInfo_.updateDeviceParams(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},bt.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},bt.prototype.beginPresent_=function(){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2")),t&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=f()*this.bufferScale_,t.canvas.height=m()*this.bufferScale_,this.cardboardUI_=new j(t)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new j(t)),this.distorter_=new _(t,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(t){this.viewerSelector_.show(this.layer_.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.rotateInstructions_&&(p()&&A()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},bt.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},bt.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},bt.prototype.submitFrame=function(t){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var e=this.layer_.source.getContext("webgl").canvas;e.width==this.lastWidth&&e.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=e.width,this.lastHeight=e.height,this.cardboardUI_.render()}},bt.prototype.onOrientationChange_=function(t){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},bt.prototype.onResize_=function(t){if(this.layer_){var e=this.layer_.source.getContext("webgl");e.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),b(e.canvas)}},bt.prototype.onViewerChanged_=function(t){this.deviceInfo_.setViewer(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},bt.prototype.fireVRDisplayDeviceParamsChange_=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(t)},bt.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},bt.VRDisplay=At,bt}()}(e={exports:{}}),e.exports),c=(n=s)&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,l={PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function u(t){this.config=a(a({},l),t),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&r())&&(this.enable(),this.getVRDisplays().then(function(t){t&&t[0]&&t[0].fireVRDisplayConnect_&&t[0].fireVRDisplayConnect_()}))}u.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(r()){var t=new c({MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(t)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},u.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var t=this.native.VRFrameData,e=new this.native.VRFrameData,n=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(i){i instanceof t?n.call(this,i):(n.call(this,e),i.pose=e.pose,o(e.leftProjectionMatrix,i.leftProjectionMatrix),o(e.rightProjectionMatrix,i.rightProjectionMatrix),o(e.leftViewMatrix,i.leftViewMatrix),o(e.rightViewMatrix,i.rightViewMatrix))}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=c.VRDisplay,window.VRFrameData=c.VRFrameData},u.prototype.getVRDisplays=function(){var t,e=this,n=this.config;if(!this.hasNative)return Promise.resolve(this.getPolyfillDisplays());var i,r=this.native.getVRDisplays.call(navigator),o=new Promise(function(e){t=setTimeout(function(){e([])},n.GET_VR_DISPLAYS_TIMEOUT)});return(i=[r,o],Promise.race?Promise.race(i):new Promise(function(t,e){for(var n=0;n<i.length;n++)i[n].then(t,e)})).then(function(n){return clearTimeout(t),n.length>0?n:e.getPolyfillDisplays()})},u.version="0.10.5",u.VRFrameData=c.VRFrameData,u.VRDisplay=c.VRDisplay;var h=Object.freeze({default:u}),d=h&&u||h;return void 0!==i&&i.window&&(i.document||(i.document=i.window.document),i.navigator||(i.navigator=i.window.navigator)),d})}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(t,e,n){var i=/\n/,r=/\s/;function o(t,e,n,i){var r=t.indexOf(e,n);return-1===r||r>i?i:r}function a(t){return r.test(t)}function s(t,e,n,i){return{start:e,end:e+Math.min(i,n-e)}}e.exports=function(t,n){return e.exports.lines(t,n).map(function(e){return t.substring(e.start,e.end)}).join("\n")},e.exports.lines=function(t,e){if(0===(e=e||{}).width&&"nowrap"!==e.mode)return[];t=t||"";var n="number"==typeof e.width?e.width:Number.MAX_VALUE,r=Math.max(0,e.start||0),c="number"==typeof e.end?e.end:t.length,l=e.mode,u=e.measure||s;return"pre"===l?function(t,e,n,r,o){for(var a=[],s=n,c=n;c<r&&c<e.length;c++){var l=e.charAt(c),u=i.test(l);if(u||c===r-1){var h=t(e,s,u?c:c+1,o);a.push(h),s=c+1}}return a}(u,t,r,c,n):function(t,e,n,i,r,s){var c=[],l=r;for("nowrap"===s&&(l=Number.MAX_VALUE);n<i&&n<e.length;){for(var u=o(e,"\n",n,i);n<u&&a(e.charAt(n));)n++;var h=t(e,n,u,l),d=n+(h.end-h.start),p=d+"\n".length;if(d<u){for(;d>n&&!a(e.charAt(d));)d--;if(d===n)p>n+"\n".length&&p--,d=p;else for(p=d;d>n&&a(e.charAt(d-"\n".length));)d--}if(d>=n){var f=t(e,n,d,l);c.push(f)}n=p}return c}(u,t,r,c,n,l)}},{}],48:[function(t,e,n){"use strict";var i=t("global/window"),r=t("is-function"),o=t("parse-headers"),a=t("xtend");function s(t,e,n){var i=t;return r(e)?(n=e,"string"==typeof t&&(i={uri:t})):i=a(e,{uri:t}),i.callback=n,i}function c(t,e,n){return l(e=s(t,e,n))}function l(t){if(void 0===t.callback)throw new Error("callback argument missing");var e=!1,n=function(n,i,r){e||(e=!0,t.callback(n,i,r))};function i(t){return clearTimeout(u),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,n(t,v)}function r(){if(!s){var e;clearTimeout(u),e=t.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var i=v,r=null;return 0!==e?(i={body:function(){var t=void 0;if(t=l.response?l.response:l.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!e)return t.responseXML}catch(t){}return null}(l),g)try{t=JSON.parse(t)}catch(t){}return t}(),statusCode:e,method:d,headers:{},url:h,rawRequest:l},l.getAllResponseHeaders&&(i.headers=o(l.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),n(r,i,i.body)}}var a,s,l=t.xhr||null;l||(l=t.cors||t.useXDR?new c.XDomainRequest:new c.XMLHttpRequest);var u,h=l.url=t.uri||t.url,d=l.method=t.method||"GET",p=t.body||t.data,f=l.headers=t.headers||{},m=!!t.sync,g=!1,v={body:void 0,headers:{},statusCode:0,method:d,url:h,rawRequest:l};if("json"in t&&!1!==t.json&&(g=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),p=JSON.stringify(!0===t.json?p:t.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(r,0)},l.onload=r,l.onerror=i,l.onprogress=function(){},l.onabort=function(){s=!0},l.ontimeout=i,l.open(d,h,!m,t.username,t.password),m||(l.withCredentials=!!t.withCredentials),!m&&t.timeout>0&&(u=setTimeout(function(){if(!s){s=!0,l.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",i(t)}},t.timeout)),l.setRequestHeader)for(a in f)f.hasOwnProperty(a)&&l.setRequestHeader(a,f[a]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(l.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(l),l.send(p||null),l}e.exports=c,c.XMLHttpRequest=i.XMLHttpRequest||function(){},c.XDomainRequest="withCredentials"in new c.XMLHttpRequest?c.XMLHttpRequest:i.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],function(t){c["delete"===t?"del":t]=function(e,n,i){return(n=s(e,n,i)).method=t.toUpperCase(),l(n)}})},{"global/window":16,"is-function":20,"parse-headers":30,xtend:50}],49:[function(t,e,n){e.exports=void 0!==self.DOMParser?function(t){return(new self.DOMParser).parseFromString(t,"application/xml")}:void 0!==self.ActiveXObject&&new self.ActiveXObject("Microsoft.XMLDOM")?function(t){var e=new self.ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e}:function(t){var e=document.createElement("div");return e.innerHTML=t,e}},{}],50:[function(t,e,n){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)i.call(n,r)&&(t[r]=n[r])}return t};var i=Object.prototype.hasOwnProperty},{}],51:[function(t,e,n){e.exports={name:"aframe",version:"0.8.1",description:"A web framework for building virtual reality experiences.",homepage:"https://aframe.io/",main:"dist/aframe-master.js",scripts:{browserify:"browserify src/index.js -s 'AFRAME' -p browserify-derequire",build:"shx mkdir -p build/ && npm run browserify -- --debug -t [envify --INSPECTOR_VERSION dev] -o build/aframe.js",codecov:"codecov",dev:"npm run build && cross-env INSPECTOR_VERSION=dev node ./scripts/budo -t envify",dist:"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"npm run browserify -s -- --debug | exorcist dist/aframe-master.js.map > dist/aframe-master.js","dist:min":"npm run browserify -s -- --debug -p [minifyify --map aframe-master.min.js.map --output dist/aframe-master.min.js.map] -o dist/aframe-master.min.js",docs:"markserv --dir docs --port 9001",preghpages:"node ./scripts/preghpages.js",ghpages:"ghpages -p gh-pages/",lint:"semistandard -v | snazzy","lint:fix":"semistandard --fix",precommit:"npm run lint",prepush:"node scripts/testOnlyCheck.js",prerelease:"node scripts/release.js 0.7.1 0.8.0",start:"npm run dev",test:"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:node":"mocha --ui tdd tests/node"},repository:"aframevr/aframe",license:"MIT",dependencies:{"@tweenjs/tween.js":"^16.8.0","browserify-css":"^0.8.2",debug:"ngokevin/debug#noTimestamp","deep-assign":"^2.0.0","document-register-element":"dmarcos/document-register-element#8ccc532b7",envify:"^3.4.1","load-bmfont":"^1.2.3","object-assign":"^4.0.1",present:"0.0.6","promise-polyfill":"^3.1.0","style-attr":"^1.0.2",three:"https://github.com/mrdoob/three.js.git","three-bmfont-text":"^2.1.0","webvr-polyfill":"^0.10.5"},devDependencies:{browserify:"^13.1.0","browserify-derequire":"^0.9.4","browserify-istanbul":"^2.0.0",budo:"^9.2.0",chai:"^3.5.0","chai-shallow-deep-equal":"^1.4.0",chalk:"^1.1.3",codecov:"^1.0.1","cross-env":"^5.0.1",exorcist:"^0.4.0",ghpages:"0.0.8","git-rev":"^0.2.1",glob:"^7.1.1",husky:"^0.11.7",istanbul:"^0.4.5",jsdom:"^9.11.0",karma:"1.4.1","karma-browserify":"^5.1.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^1.0.0","karma-mocha":"^1.1.1","karma-mocha-reporter":"^2.1.0","karma-sinon-chai":"1.2.4",lolex:"^1.5.1",markserv:"github:sukima/markserv#feature/fix-broken-websoketio-link",minifyify:"^7.3.3",mocha:"^3.0.2","mozilla-download":"^1.1.1","replace-in-file":"^2.5.3",semistandard:"^9.0.0",shelljs:"^0.7.7",shx:"^0.2.2",sinon:"^1.17.5","sinon-chai":"2.8.0",snazzy:"^5.0.0","too-wordy":"ngokevin/too-wordy",uglifyjs:"^2.4.10","write-good":"^0.9.1"},link:!0,browserify:{transform:["browserify-css","envify"]},semistandard:{ignore:["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},keywords:["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","web-components","webvr"],"browserify-css":{minify:!0},engines:{node:">= 4.6.0",npm:"^2.15.9"}}},{}],52:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../lib/three");e.exports.Component=i("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var t,e=this.el;t=this.camera=new r.PerspectiveCamera,e.setObject3D("camera",t)},update:function(t){var e=this.data,n=this.camera;n.aspect=e.aspect||window.innerWidth/window.innerHeight,n.far=e.far,n.fov=e.fov,n.near=e.near,n.zoom=e.zoom,n.updateProjectionMatrix(),this.updateActiveCamera(t),this.updateSpectatorCamera(t)},updateActiveCamera:function(t){var e=this.data,n=this.el,i=this.system;t&&t.active===e.active||e.spectator||(e.active&&i.activeCameraEl!==n?i.setActiveCamera(n):e.active||i.activeCameraEl!==n||i.disableActiveCamera())},updateSpectatorCamera:function(t){var e=this.data,n=this.el,i=this.system;t&&t.spectator===e.spectator||(e.spectator&&i.spectatorCameraEl!==n?i.setSpectatorCamera(n):e.spectator||i.spectatorCameraEl!==n||i.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}})},{"../core/component":101,"../lib/three":149}],53:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../lib/three");e.exports.Component=i("collada-model",{schema:{type:"asset"},init:function(){this.model=null,this.loader=new r.ColladaLoader,this.loader.options.convertUpAxis=!0},update:function(){var t=this,e=this.el,n=this.data;n&&(this.remove(),this.loader.load(n,function(n){t.model=n.scene,e.setObject3D("mesh",t.model),e.emit("model-loaded",{format:"collada",model:t.model})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../core/component":101,"../lib/three":149}],54:[function(t,e,n){var i,r,o,a,s=t("../core/component").registerComponent,c=t("../utils/"),l=c.bind,u={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]};e.exports.Component=s("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:c.device.isMobile()},fuseTimeout:{default:1500,min:0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity"]}},init:function(){var t=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.updateCanvasBounds=c.debounce(function(){t.canvasBounds=t.el.sceneEl.canvas.getBoundingClientRect()},1e3),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=l(this.onCursorDown,this),this.onCursorUp=l(this.onCursorUp,this),this.onIntersection=l(this.onIntersection,this),this.onIntersectionCleared=l(this.onIntersectionCleared,this),this.onMouseMove=l(this.onMouseMove,this)},update:function(t){this.data.rayOrigin!==t.rayOrigin&&this.updateMouseEventListeners()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var t=this.el;t.removeState("cursor-hovering"),t.removeState("cursor-fusing"),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState("cursor-hovered"),this.removeEventListeners()},addEventListeners:function(){var t,e=this.data,n=this.el,i=this;function r(){t=n.sceneEl.canvas,e.downEvents.length||e.upEvents.length||(u.DOWN.forEach(function(e){t.addEventListener(e,i.onCursorDown)}),u.UP.forEach(function(e){t.addEventListener(e,i.onCursorUp)}))}(t=n.sceneEl.canvas)?r():n.sceneEl.addEventListener("render-target-loaded",r),e.downEvents.forEach(function(t){n.addEventListener(t,i.onCursorDown)}),e.upEvents.forEach(function(t){n.addEventListener(t,i.onCursorUp)}),n.addEventListener("raycaster-intersection",this.onIntersection),n.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),window.addEventListener("resize",this.updateCanvasBounds)},removeEventListeners:function(){var t,e=this.data,n=this.el,i=this;!(t=n.sceneEl.canvas)||e.downEvents.length||e.upEvents.length||(u.DOWN.forEach(function(e){t.removeEventListener(e,i.onCursorDown)}),u.UP.forEach(function(e){t.removeEventListener(e,i.onCursorUp)})),e.downEvents.forEach(function(t){n.removeEventListener(t,i.onCursorDown)}),e.upEvents.forEach(function(t){n.removeEventListener(t,i.onCursorUp)}),n.removeEventListener("raycaster-intersection",this.onIntersection),n.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("touchstart",this.onMouseMove),t.removeEventListener("touchmove",this.onMouseMove),t.removeEventListener("resize",this.updateCanvasBounds)},updateMouseEventListeners:function(){var t,e=this.el;(t=e.sceneEl.canvas).removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("touchmove",this.onMouseMove),e.setAttribute("raycaster","useWorldCoordinates",!1),"mouse"===this.data.rayOrigin&&(t.addEventListener("mousemove",this.onMouseMove,!1),t.addEventListener("touchmove",this.onMouseMove,!1),e.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:(i=new THREE.Vector3,r=new THREE.Vector2,o=new THREE.Vector3,a={origin:o,direction:i},function(t){var e,n,s,c=this.canvasBounds,l=this.el.sceneEl.camera;l.parent.updateMatrixWorld(),e=(n="touchmove"===t.type||"touchstart"===t.type?t.touches.item(0):t).clientX-c.left,s=n.clientY-c.top,r.x=e/c.width*2-1,r.y=-s/c.height*2+1,o.setFromMatrixPosition(l.matrixWorld),i.set(r.x,r.y,.5).unproject(l).sub(o).normalize(),this.el.setAttribute("raycaster",a),"touchmove"===t.type&&t.preventDefault()}),onCursorDown:function(t){"mouse"===this.data.rayOrigin&&"touchstart"===t.type&&(this.onMouseMove(t),this.el.components.raycaster.checkIntersections(),t.preventDefault()),this.twoWayEmit("mousedown"),this.cursorDownEl=this.intersectedEl},onCursorUp:function(t){this.twoWayEmit("mouseup"),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit("mouseup",this.intersectedEventDetail)),!this.data.fuse&&this.intersectedEl&&this.cursorDownEl===this.intersectedEl&&this.twoWayEmit("click"),this.cursorDownEl=null,"touchend"===t.type&&t.preventDefault()},onIntersection:function(t){var e,n,i,r=this.el;e=t.detail.els[0]===r?1:0,i=t.detail.intersections[e],(n=t.detail.els[e])&&this.intersectedEl!==n&&(this.intersectedEl&&this.el.components.raycaster.getIntersection(this.intersectedEl).distance<=i.distance||(this.clearCurrentIntersection(!0),this.setIntersection(n,i)))},onIntersectionCleared:function(t){-1!==t.detail.clearedEls.indexOf(this.intersectedEl)&&this.clearCurrentIntersection()},setIntersection:function(t,e){var n=this.el,i=this.data,r=this;this.intersectedEl!==t&&(this.intersectedEl=t,n.addState("cursor-hovering"),t.addState("cursor-hovered"),this.twoWayEmit("mouseenter"),0!==i.fuseTimeout&&i.fuse&&(n.addState("cursor-fusing"),this.twoWayEmit("fusing"),this.fuseTimeout=setTimeout(function(){n.removeState("cursor-fusing"),r.twoWayEmit("click")},i.fuseTimeout)))},clearCurrentIntersection:function(t){var e,n,i=this.el;this.intersectedEl&&(this.intersectedEl.removeState("cursor-hovered"),i.removeState("cursor-hovering"),i.removeState("cursor-fusing"),this.twoWayEmit("mouseleave"),this.intersectedEl=null,clearTimeout(this.fuseTimeout),!0!==t&&0!==(n=this.el.components.raycaster.intersections).length&&(e=n[n[0].object.el===i?1:0])&&this.setIntersection(e.object.el,e))},twoWayEmit:function(t){var e,n=this.el,i=this.intersectedEl;e=this.el.components.raycaster.getIntersection(i),this.eventDetail.intersectedEl=i,this.eventDetail.intersection=e,n.emit(t,this.eventDetail),i&&(this.intersectedEventDetail.intersection=e,i.emit(t,this.intersectedEventDetail))}})},{"../core/component":101,"../utils/":171}],55:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/bind"),o=t("../utils/tracked-controls").checkControllerPresentAndSetup,a=t("../utils/tracked-controls"),s=a.emitIfAxesChanged,c=a.onButtonEvent;e.exports.Component=i("daydream-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},rotationOffset:{default:0},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","menu","system"]},bindMethods:function(){this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=r(this.removeControllersUpdateListener,this),this.onAxisMoved=r(this.onAxisMoved,this)},init:function(){var t=this;this.animationActive="pointing",this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){c(e.detail.id,"down",t)},this.onButtonUp=function(e){c(e.detail.id,"up",t)},this.onButtonTouchStart=function(e){c(e.detail.id,"touchstart",t)},this.onButtonTouchEnd=function(e){c(e.detail.id,"touchend",t)},this.onAxisMoved=r(this.onAxisMoved,this),this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods(),this.checkControllerPresentAndSetup=o,this.emitIfAxesChanged=s},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,"Daydream Controller",{hand:this.data.hand})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var t=this.el,e=this.data;t.setAttribute("tracked-controls",{armModel:e.armModel,hand:e.hand,idPrefix:"Daydream Controller",rotationOffset:e.rotationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/google/vr_controller_daydream.obj",mtl:"https://cdn.aframe.io/controllers/google/vr_controller_daydream.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(t){var e,n=t.detail.model;this.data.model&&((e=this.buttonMeshes={}).menu=n.getObjectByName("AppButton_AppButton_Cylinder.004"),e.system=n.getObjectByName("HomeButton_HomeButton_Cylinder.005"),e.trackpad=n.getObjectByName("TouchPad_TouchPad_Cylinder.003"),n.position.set(0,0,-.04))},onAxisMoved:function(t){this.emitIfAxesChanged(this,this.mapping.axes,t)},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id];e&&this.el.emit(e+"changed",t.detail.state)},updateModel:function(t,e){this.data.model&&this.updateButtonModel(t,e)},updateButtonModel:function(t,e){var n=this.buttonMeshes;if(n&&n[t]){var i;switch(e){case"down":i=this.data.buttonHighlightColor;break;case"touchstart":i=this.data.buttonTouchedColor;break;default:i=this.data.buttonColor}n[t].material.color.set(i)}}})},{"../core/component":101,"../utils/bind":165,"../utils/tracked-controls":177}],56:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/bind"),o=t("../utils/tracked-controls"),a=o.checkControllerPresentAndSetup,s=o.emitIfAxesChanged,c=o.onButtonEvent;e.exports.Component=i("gearvr-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},rotationOffset:{default:0},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=r(this.removeControllersUpdateListener,this),this.onAxisMoved=r(this.onAxisMoved,this)},init:function(){var t=this;this.animationActive="pointing",this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){c(e.detail.id,"down",t)},this.onButtonUp=function(e){c(e.detail.id,"up",t)},this.onButtonTouchStart=function(e){c(e.detail.id,"touchstart",t)},this.onButtonTouchEnd=function(e){c(e.detail.id,"touchend",t)},this.onAxisMoved=r(this.onAxisMoved,this),this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods(),this.checkControllerPresentAndSetup=a,this.emitIfAxesChanged=s},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,"Gear VR|GearVR|Oculus Go",this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var t=this.el,e=this.data;t.setAttribute("tracked-controls",{armModel:e.armModel,idPrefix:"Gear VR|GearVR|Oculus Go",rotationOffset:e.rotationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/samsung/gear_vr_controller.obj",mtl:"https://cdn.aframe.io/controllers/samsung/gear_vr_controller.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(t){var e,n=t.detail.model;this.data.model&&((e=this.buttonMeshes={}).trigger=n.children[2],e.trackpad=n.children[1])},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id];e&&this.el.emit(e+"changed",t.detail.state)},onAxisMoved:function(t){this.emitIfAxesChanged(this,this.mapping.axes,t)},updateModel:function(t,e){this.data.model&&this.updateButtonModel(t,e)},updateButtonModel:function(t,e){var n=this.buttonMeshes;if(n&&n[t]){var i;switch(e){case"down":i=this.data.buttonHighlightColor;break;case"touchstart":i=this.data.buttonTouchedColor;break;default:i=this.data.buttonColor}n[t].material.color.set(i)}}})},{"../core/component":101,"../utils/bind":165,"../utils/tracked-controls":177}],57:[function(t,e,n){var i=t("../core/geometry").geometries,r=t("../core/geometry").geometryNames,o=t("../core/component").registerComponent,a=t("../lib/three"),s=new a.Geometry;e.exports.Component=o("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:r},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(t){var e,n=this.data,i=this.el,r=this.system;this.geometry&&(r.unuseGeometry(t),this.geometry=null),this.geometry=r.getOrCreateGeometry(n),(e=i.getObject3D("mesh"))?e.geometry=this.geometry:((e=new a.Mesh).geometry=this.geometry,i.setObject3D("mesh",e))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=s,this.geometry=null},updateSchema:function(t){var e=t.primitive,n=this.data&&this.data.primitive,r=i[e]&&i[e].schema;if(!r)throw new Error("Unknown geometry schema `"+e+"`");n&&n===e||this.extendSchema(r)}})},{"../core/component":101,"../core/geometry":102,"../lib/three":149}],58:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../lib/three"),o=t("../utils/").debug("components:gltf-model:warn");e.exports.Component=i("gltf-model",{schema:{type:"model"},init:function(){this.model=null,this.loader=new r.GLTFLoader},update:function(){var t=this,e=this.el,n=this.data;n&&(this.remove(),this.loader.load(n,function(n){t.model=n.scene||n.scenes[0],t.model.animations=n.animations,e.setObject3D("mesh",t.model),e.emit("model-loaded",{format:"gltf",model:t.model})},void 0,function(t){var i=t&&t.message?t.message:"Failed to load glTF model";o(i),e.emit("model-error",{format:"gltf",src:n})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../core/component":101,"../lib/three":149,"../utils/":171}],59:[function(t,e,n){var i=t("../core/component").registerComponent,r={left:"https://cdn.aframe.io/controllers/oculus-hands/v2/leftHand.json",right:"https://cdn.aframe.io/controllers/oculus-hands/v2/rightHand.json"},o={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},a={};function s(t,e){var n;if(t)return"grip"===(n=a[t])?n+(e?"close":"open"):"point"===n||"thumb"===n?n+(e?"up":"down"):"pointing"===n||"pistol"===n?n+(e?"start":"end"):void 0}a[o.fist]="grip",a[o.thumbUp]="pistol",a[o.point]="pointing",a[o.thumb]="thumb",e.exports.Component=i("hand-controls",{schema:{default:"left"},init:function(){var t=this,e=this.el;this.gesture=o.open,this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.ObjectLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){t.handleButton("grip","down")},this.onGripUp=function(){t.handleButton("grip","up")},this.onTrackpadDown=function(){t.handleButton("trackpad","down")},this.onTrackpadUp=function(){t.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){t.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){t.handleButton("trackpad","touchend")},this.onTriggerDown=function(){t.handleButton("trigger","down")},this.onTriggerUp=function(){t.handleButton("trigger","up")},this.onTriggerTouchStart=function(){t.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){t.handleButton("trigger","touchend")},this.onGripTouchStart=function(){t.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){t.handleButton("grip","touchend")},this.onThumbstickDown=function(){t.handleButton("thumbstick","down")},this.onThumbstickUp=function(){t.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){t.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){t.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){t.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){t.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){t.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){t.handleButton("surface","touchend")},this.onControllerConnected=function(){t.setModelVisibility(!0)},this.onControllerDisconnected=function(){t.setModelVisibility(!1)},e.addEventListener("controllerconnected",this.onControllerConnected),e.addEventListener("controllerdisconnected",this.onControllerDisconnected)},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(t,e){var n=this.el.getObject3D("mesh");n&&n.mixer&&n.mixer.update(e/1e3)},addEventListeners:function(){var t=this.el;t.addEventListener("gripdown",this.onGripDown),t.addEventListener("gripup",this.onGripUp),t.addEventListener("trackpaddown",this.onTrackpadDown),t.addEventListener("trackpadup",this.onTrackpadUp),t.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),t.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),t.addEventListener("triggerdown",this.onTriggerDown),t.addEventListener("triggerup",this.onTriggerUp),t.addEventListener("triggertouchstart",this.onTriggerTouchStart),t.addEventListener("triggertouchend",this.onTriggerTouchEnd),t.addEventListener("griptouchstart",this.onGripTouchStart),t.addEventListener("griptouchend",this.onGripTouchEnd),t.addEventListener("thumbstickdown",this.onThumbstickDown),t.addEventListener("thumbstickup",this.onThumbstickUp),t.addEventListener("abuttontouchstart",this.onAorXTouchStart),t.addEventListener("abuttontouchend",this.onAorXTouchEnd),t.addEventListener("bbuttontouchstart",this.onBorYTouchStart),t.addEventListener("bbuttontouchend",this.onBorYTouchEnd),t.addEventListener("xbuttontouchstart",this.onAorXTouchStart),t.addEventListener("xbuttontouchend",this.onAorXTouchEnd),t.addEventListener("ybuttontouchstart",this.onBorYTouchStart),t.addEventListener("ybuttontouchend",this.onBorYTouchEnd),t.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),t.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var t=this.el;t.removeEventListener("gripdown",this.onGripDown),t.removeEventListener("gripup",this.onGripUp),t.removeEventListener("trackpaddown",this.onTrackpadDown),t.removeEventListener("trackpadup",this.onTrackpadUp),t.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),t.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),t.removeEventListener("triggerdown",this.onTriggerDown),t.removeEventListener("triggerup",this.onTriggerUp),t.removeEventListener("triggertouchstart",this.onTriggerTouchStart),t.removeEventListener("triggertouchend",this.onTriggerTouchEnd),t.removeEventListener("griptouchstart",this.onGripTouchStart),t.removeEventListener("griptouchend",this.onGripTouchEnd),t.removeEventListener("thumbstickdown",this.onThumbstickDown),t.removeEventListener("thumbstickup",this.onThumbstickUp),t.removeEventListener("abuttontouchstart",this.onAorXTouchStart),t.removeEventListener("abuttontouchend",this.onAorXTouchEnd),t.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),t.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),t.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),t.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),t.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),t.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),t.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),t.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(t){var e,n=this.el,i=this.data;e={hand:i,model:!1,rotationOffset:"left"===i?90:-90},i!==t&&this.loader.load(r[i],function(t){var i=t.getObjectByName("Hand");i.material.skinning=!0,i.mixer=new THREE.AnimationMixer(i),n.setObject3D("mesh",i),i.position.set(0,0,0),i.rotation.set(0,0,0),i.visible=!1,n.setAttribute("vive-controls",e),n.setAttribute("oculus-touch-controls",e),n.setAttribute("windows-motion-controls",e)})},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(t,e){var n,i="down"===e,r="touchstart"===e;if(0===e.indexOf("touch")){if(r===this.touchedButtons[t])return;this.touchedButtons[t]=r}else{if(i===this.pressedButtons[t])return;this.pressedButtons[t]=i}n=this.gesture,this.gesture=this.determineGesture(),this.gesture!==n&&(this.animateGesture(this.gesture,n),this.emitGestureEvents(this.gesture,n))},determineGesture:function(){var t,e,n,i=this.pressedButtons.grip,r=this.pressedButtons.surface||this.touchedButtons.surface,a=this.pressedButtons.trackpad||this.touchedButtons.trackpad,s=this.pressedButtons.trigger||this.touchedButtons.trigger,c=this.touchedButtons.AorX||this.touchedButtons.BorY,l=(n=(e=this.el.components["tracked-controls"])&&e.controller&&e.controller.id)&&0===n.indexOf("OpenVR ");return i?t=l?o.fist:r||c||a?s?o.fist:o.point:s?o.thumbUp:o.pointThumb:s?t=l?o.fist:o.hold:l&&a&&(t=o.point),t},animateGesture:function(t,e){t?this.playAnimation(t||o.open,e,!1):this.playAnimation(e,e,!0)},emitGestureEvents:function(t,e){var n,i=this.el;e!==t&&((n=s(e,!1))&&i.emit(n),(n=s(t,!0))&&i.emit(n))},playAnimation:function(t,e,n){var i,r,o=this.el.getObject3D("mesh");if(o){if((r=o.mixer.clipAction(t)).clampWhenFinished=!0,r.loop=THREE.LoopRepeat,r.repetitions=0,r.timeScale=n?-1:1,r.weight=1,!e||t===e)return o.mixer.stopAllAction(),void r.play();i=o.mixer.clipAction(e),o.mixer.stopAllAction(),i.weight=.15,i.play(),r.play(),i.crossFadeTo(r,.15,!0)}},setModelVisibility:function(t){var e=this.el.getObject3D("mesh");e&&(e.visible=t)}})},{"../core/component":101}],60:[function(t,e,n){t("./camera"),t("./collada-model"),t("./cursor"),t("./daydream-controls"),t("./gearvr-controls"),t("./geometry"),t("./gltf-model"),t("./hand-controls"),t("./laser-controls"),t("./light"),t("./line"),t("./link"),t("./look-controls"),t("./material"),t("./obj-model"),t("./oculus-touch-controls"),t("./position"),t("./raycaster"),t("./rotation"),t("./scale"),t("./shadow"),t("./sound"),t("./text"),t("./tracked-controls"),t("./visible"),t("./vive-controls"),t("./wasd-controls"),t("./windows-motion-controls"),t("./scene/background"),t("./scene/debug"),t("./scene/embedded"),t("./scene/inspector"),t("./scene/fog"),t("./scene/keyboard-shortcuts"),t("./scene/pool"),t("./scene/screenshot"),t("./scene/stats"),t("./scene/vr-mode-ui")},{"./camera":52,"./collada-model":53,"./cursor":54,"./daydream-controls":55,"./gearvr-controls":56,"./geometry":57,"./gltf-model":58,"./hand-controls":59,"./laser-controls":61,"./light":62,"./line":63,"./link":64,"./look-controls":65,"./material":66,"./obj-model":67,"./oculus-touch-controls":68,"./position":69,"./raycaster":70,"./rotation":71,"./scale":72,"./scene/background":73,"./scene/debug":74,"./scene/embedded":75,"./scene/fog":76,"./scene/inspector":77,"./scene/keyboard-shortcuts":78,"./scene/pool":79,"./scene/screenshot":80,"./scene/stats":81,"./scene/vr-mode-ui":82,"./shadow":83,"./sound":84,"./text":85,"./tracked-controls":86,"./visible":87,"./vive-controls":88,"./wasd-controls":89,"./windows-motion-controls":90}],61:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/");i("laser-controls",{schema:{hand:{default:"right"}},init:function(){var t=this.config,e=this.data,n=this.el,i=this;function o(e){var o=t[e.detail.name];if(o){var a=r.extend({showLine:!0},o.raycaster||{});e.detail.rayOrigin&&(a.origin=e.detail.rayOrigin.origin,a.direction=e.detail.rayOrigin.direction,a.showLine=!0),e.detail.rayOrigin||!i.modelReady?n.setAttribute("raycaster",a):n.setAttribute("raycaster","showLine",!0),n.setAttribute("cursor",r.extend({fuse:!1},o.cursor))}}n.setAttribute("daydream-controls",{hand:e.hand}),n.setAttribute("gearvr-controls",{hand:e.hand}),n.setAttribute("oculus-touch-controls",{hand:e.hand}),n.setAttribute("vive-controls",{hand:e.hand}),n.setAttribute("windows-motion-controls",{hand:e.hand}),n.addEventListener("controllerconnected",o),n.addEventListener("controllerdisconnected",function(){n.setAttribute("raycaster","showLine",!1)}),n.addEventListener("controllermodelready",function(t){o(t),i.modelReady=!0})},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown"],upEvents:["trackpadup"]}},"gearvr-controls":{cursor:{downEvents:["trackpaddown"],upEvents:["trackpadup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:.001,y:0,z:.065},direction:{x:0,y:-.8,z:-1}}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}})},{"../core/component":101,"../utils/":171}],62:[function(t,e,n){var i=t("../utils/bind"),r=t("../utils").diff,o=t("../utils/debug"),a=t("../core/component").registerComponent,s=t("../lib/three"),c=s.Math.degToRad,l=o("components:light:warn");e.exports.Component=a("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color"},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot"]},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}}},init:function(){var t=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(t)},update:function(t){var e=this.data,n=r(e,t),o=this.light,a=this;if(!o||"type"in n)this.setLight(this.data),this.updateShadow();else{var s=!1;Object.keys(n).forEach(function(t){var n=e[t];switch(t){case"color":o.color.set(n);break;case"groundColor":o.groundColor.set(n);break;case"angle":o.angle=c(n);break;case"target":null===n?"spot"!==e.type&&"directional"!==e.type||(o.target=a.defaultTarget):n.hasLoaded?a.onSetTarget(n,o):n.addEventListener("loaded",i(a.onSetTarget,a,n,o));break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":s||(a.updateShadow(),s=!0);break;default:o[t]=n}})}},setLight:function(t){var e=this.el,n=this.getLight(t);n&&(this.light&&e.removeObject3D("light"),this.light=n,this.light.el=e,e.setObject3D("light",this.light),"spot"!==t.type&&"directional"!==t.type&&"hemisphere"!==t.type||e.getObject3D("light").translateY(-1),"spot"===t.type&&(e.setObject3D("light-target",this.defaultTarget),e.getObject3D("light-target").position.set(0,0,-1)))},updateShadow:function(){var t=this.el,e=this.data,n=this.light;n.castShadow=e.castShadow;var i=t.getObject3D("cameraHelper");if(e.shadowCameraVisible&&!i?t.setObject3D("cameraHelper",new s.CameraHelper(n.shadow.camera)):!e.shadowCameraVisible&&i&&t.removeObject3D("cameraHelper"),!e.castShadow)return n;n.shadow.bias=e.shadowBias,n.shadow.mapSize.height=e.shadowMapHeight,n.shadow.mapSize.width=e.shadowMapWidth,n.shadow.camera.near=e.shadowCameraNear,n.shadow.camera.far=e.shadowCameraFar,n.shadow.camera instanceof s.OrthographicCamera?(n.shadow.camera.top=e.shadowCameraTop,n.shadow.camera.right=e.shadowCameraRight,n.shadow.camera.bottom=e.shadowCameraBottom,n.shadow.camera.left=e.shadowCameraLeft):n.shadow.camera.fov=e.shadowCameraFov,n.shadow.camera.updateProjectionMatrix(),i&&i.update()},getLight:function(t){var e=t.angle,n=new s.Color(t.color).getHex(),r=t.decay,o=t.distance,a=new s.Color(t.groundColor).getHex(),u=t.intensity,h=t.type,d=t.target,p=null;switch(h.toLowerCase()){case"ambient":return new s.AmbientLight(n,u);case"directional":return p=new s.DirectionalLight(n,u),this.defaultTarget=p.target,d&&(d.hasLoaded?this.onSetTarget(d,p):d.addEventListener("loaded",i(this.onSetTarget,this,d,p))),p;case"hemisphere":return new s.HemisphereLight(n,a,u);case"point":return new s.PointLight(n,u,o,r);case"spot":return p=new s.SpotLight(n,u,o,c(e),t.penumbra,r),this.defaultTarget=p.target,d&&(d.hasLoaded?this.onSetTarget(d,p):d.addEventListener("loaded",i(this.onSetTarget,this,d,p))),p;default:l("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",h)}},onSetTarget:function(t,e){e.target=t.object3D},remove:function(){var t=this.el;t.removeObject3D("light"),t.getObject3D("cameraHelper")&&t.removeObject3D("cameraHelper")}})},{"../core/component":101,"../lib/three":149,"../utils":171,"../utils/bind":165,"../utils/debug":167}],63:[function(t,e,n){var i=t("../core/component").registerComponent;function r(t,e){return!(!t||!e)&&t.x===e.x&&t.y===e.y&&t.z===e.z}e.exports.Component=i("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var t,e,n=this.data;e=this.material=new THREE.LineBasicMaterial({color:n.color,opacity:n.opacity,transparent:n.opacity<1,visible:n.visible}),(t=this.geometry=new THREE.BufferGeometry).addAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.line=new THREE.Line(t,e),this.el.setObject3D(this.attrName,this.line)},update:function(t){var e=this.data,n=this.geometry,i=!1,o=this.material,a=n.attributes.position.array;r(e.start,t.start)||(a[0]=e.start.x,a[1]=e.start.y,a[2]=e.start.z,i=!0),r(e.end,t.end)||(a[3]=e.end.x,a[4]=e.end.y,a[5]=e.end.z,i=!0),i&&(n.attributes.position.needsUpdate=!0,n.computeBoundingSphere()),o.color.setStyle(e.color),o.opacity=e.opacity,o.transparent=e.opacity<1,o.visible=e.visible},remove:function(){this.el.removeObject3D("line",this.line)}})},{"../core/component":101}],64:[function(t,e,n){var i,r,o,a,s,c,l,u,h=t("../core/component").registerComponent,d=t("../core/shader").registerShader,p=t("../lib/three");e.exports.Component=h("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!0}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new p.Quaternion,this.hiddenEls=[],this.initVisualAspect()},update:function(t){var e,n,i=this.data,r=this.el;e=i.highlighted?i.highlightedColor:i.backgroundColor,n=i.highlighted?i.highlightedColor:i.borderColor,r.setAttribute("material","backgroundColor",e),r.setAttribute("material","strokeColor",n),i.on!==t.on&&this.updateEventListener(),i.visualAspectEnabled&&void 0!==t.peekMode&&i.peekMode!==t.peekMode&&this.updatePeekMode(),i.image&&t.image!==i.image&&r.setAttribute("material","pano","string"==typeof i.image?i.image:i.image.src)},updatePeekMode:function(){var t=this.el,e=this.sphereEl;this.data.peekMode?(this.hideAll(),t.getObject3D("mesh").visible=!1,e.setAttribute("visible",!0)):(this.showAll(),t.getObject3D("mesh").visible=!0,e.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var t=this.el;t.isPlaying&&(this.removeEventListener(),t.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var t=this.data.on;t&&this.el.removeEventListener(t,this.navigate)},initVisualAspect:function(){var t,e,n,i=this.el;this.data.visualAspectEnabled&&(n=this.textEl=this.textEl||document.createElement("a-entity"),e=this.sphereEl=this.sphereEl||document.createElement("a-entity"),t=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),i.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),i.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),n.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),n.setAttribute("position","0 1.5 0"),i.appendChild(n),t.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),t.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),t.setAttribute("rotation","0 180 0"),t.setAttribute("position","0 0 0"),t.setAttribute("visible",!1),i.appendChild(t),e.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),e.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),e.setAttribute("visible",!1),i.appendChild(e))},navigate:function(){window.location=this.data.href},tick:(s=new p.Vector3,c=new p.Vector3,l=new p.Quaternion,u=new p.Vector3,function(){var t,e,n=this.el,i=n.object3D,r=n.sceneEl.camera,o=this.textEl;if(this.data.visualAspectEnabled)if(i.updateMatrixWorld(),r.parent.updateMatrixWorld(),r.updateMatrixWorld(),i.matrix.decompose(c,l,u),c.setFromMatrixPosition(i.matrixWorld),s.setFromMatrixPosition(r.matrixWorld),(e=c.distanceTo(s))>20)this.previousQuaternion||(this.quaternionClone.copy(l),this.previousQuaternion=this.quaternionClone),i.lookAt(s);else{if(t=this.calculateCameraPortalOrientation(),e<.5){if(!0===this.semiSphereEl.getAttribute("visible"))return;o.setAttribute("text","width",1.5),t<=0?(o.setAttribute("position","0 0 0.75"),o.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(o.setAttribute("position","0 0 -0.75"),o.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),n.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=t}else t<=0?o.setAttribute("rotation","0 180 0"):o.setAttribute("rotation","0 0 0"),o.setAttribute("text","width",5),o.setAttribute("position","0 1.5 0"),n.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(i.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}),hideAll:function(){var t=this.el,e=this.hiddenEls,n=this;e.length>0||t.sceneEl.object3D.traverse(function(i){i&&i.el&&i.el.hasAttribute("link-controls")||i.el&&i!==t.sceneEl.object3D&&i.el!==t&&i.el!==n.sphereEl&&i.el!==t.sceneEl.cameraEl&&!1!==i.el.getAttribute("visible")&&i.el!==n.textEl&&i.el!==n.semiSphereEl&&(i.el.setAttribute("visible",!1),e.push(i.el))})},showAll:function(){this.hiddenEls.forEach(function(t){t.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:(i=new p.Matrix4,r=new p.Vector3,o=new p.Vector3(0,0,1),a=new p.Vector3(0,0,0),function(){var t=this.el,e=t.sceneEl.camera;return r.set(0,0,0),o.set(0,0,1),a.set(0,0,0),t.object3D.matrixWorld.extractRotation(i),o.applyMatrix4(i),t.object3D.updateMatrixWorld(),t.object3D.localToWorld(a),e.parent.parent.updateMatrixWorld(),e.parent.updateMatrixWorld(),e.updateMatrixWorld(),e.localToWorld(r),r.sub(a).normalize(),o.normalize(),Math.sign(o.dot(r))}),remove:function(){this.removeEventListener()}}),d("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = saturate(direction.y * 0.5  + 0.5);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));","}","}"].join("\n")})},{"../core/component":101,"../core/shader":110,"../lib/three":149}],65:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../lib/three"),o=t("../utils/"),a=o.bind,s=t("../utils").device.PolyfillControls,c=Math.PI/2,l=o.device.checkHasPositionalTracking;e.exports.Component=i("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},hmdEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},touchEnabled:{default:!0}},init:function(){this.previousHMDPosition=new r.Vector3,this.hmdQuaternion=new r.Quaternion,this.hmdEuler=new r.Euler,this.position=new r.Vector3,this.savedRotation=new r.Vector3,this.savedPosition=new r.Vector3,this.polyfillObject=new r.Object3D,this.polyfillControls=new s(this.polyfillObject),this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.savedPose={position:new r.Vector3,rotation:new r.Euler},this.el.sceneEl.is("vr-mode")&&this.onEnterVR()},update:function(t){var e=this.data;e.enabled!==t.enabled&&this.updateGrabCursor(e.enabled),!t||e.hmdEnabled||t.hmdEnabled||(this.pitchObject.rotation.set(0,0,0),this.yawObject.rotation.set(0,0,0)),t&&!e.pointerLockEnabled!==t.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&document.exitPointerLock())},tick:function(t){this.data.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.removeEventListeners()},bindMethods:function(){this.onMouseDown=a(this.onMouseDown,this),this.onMouseMove=a(this.onMouseMove,this),this.onMouseUp=a(this.onMouseUp,this),this.onTouchStart=a(this.onTouchStart,this),this.onTouchMove=a(this.onTouchMove,this),this.onTouchEnd=a(this.onTouchEnd,this),this.onEnterVR=a(this.onEnterVR,this),this.onExitVR=a(this.onExitVR,this),this.onPointerLockChange=a(this.onPointerLockChange,this),this.onPointerLockError=a(this.onPointerLockError,this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new r.Object3D,this.yawObject=new r.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var t=this.el.sceneEl,e=t.canvas;e?(e.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),e.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),t.addEventListener("enter-vr",this.onEnterVR),t.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))):t.addEventListener("render-target-loaded",a(this.addEventListeners,this))},removeEventListeners:function(){var t=this.el.sceneEl,e=t&&t.canvas;e&&(e.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("enter-vr",this.onEnterVR),t.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var t=this.el,e=this.hmdEuler,n=this.pitchObject,i=this.yawObject,r=this.el.sceneEl;r.is("vr-mode")&&r.checkHeadsetConnected()||(this.polyfillControls.update(),e.setFromQuaternion(this.polyfillObject.quaternion,"YXZ"),t.object3D.rotation.x=e.x+n.rotation.x,t.object3D.rotation.y=e.y+i.rotation.y,t.object3D.rotation.z=0)},onMouseMove:function(t){var e,n,i,r=this.pitchObject,o=this.previousMouseEvent,a=this.yawObject;this.data.enabled&&(this.mouseDown||this.pointerLocked)&&(this.pointerLocked?(n=t.movementX||t.mozMovementX||0,i=t.movementY||t.mozMovementY||0):(n=t.screenX-o.screenX,i=t.screenY-o.screenY),this.previousMouseEvent=t,e=this.data.reverseMouseDrag?1:-1,a.rotation.y+=.002*n*e,r.rotation.x+=.002*i*e,r.rotation.x=Math.max(-c,Math.min(c,r.rotation.x)))},onMouseDown:function(t){if(this.data.enabled&&0===t.button){var e=this.el.sceneEl,n=e&&e.canvas;this.mouseDown=!0,this.previousMouseEvent=t,document.body.classList.add("a-grabbing"),this.data.pointerLockEnabled&&!this.pointerLocked&&(n.requestPointerLock?n.requestPointerLock():n.mozRequestPointerLock&&n.mozRequestPointerLock())}},onMouseUp:function(){this.mouseDown=!1,document.body.classList.remove("a-grabbing")},onTouchStart:function(t){1===t.touches.length&&this.data.touchEnabled&&(this.touchStart={x:t.touches[0].pageX,y:t.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(t){var e,n=this.el.sceneEl.canvas,i=this.yawObject;this.touchStarted&&this.data.touchEnabled&&(e=2*Math.PI*(t.touches[0].pageX-this.touchStart.x)/n.clientWidth,i.rotation.y-=.5*e,this.touchStart={x:t.touches[0].pageX,y:t.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){this.saveCameraPose()},onExitVR:function(){this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0)},onPointerLockChange:function(){this.pointerLocked=!(!document.pointerLockElement&&!document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},updateGrabCursor:function(t){var e=this.el.sceneEl;function n(){e.canvas.classList.add("a-grab-cursor")}function i(){e.canvas.classList.remove("a-grab-cursor")}e.canvas?t?n():i():t?e.addEventListener("render-target-loaded",n):e.addEventListener("render-target-loaded",i)},saveCameraPose:function(){var t=this.el,e=void 0!==this.hasPositionalTracking?this.hasPositionalTracking:l();!this.hasSavedPose&&e&&(this.savedPose.position.copy(t.object3D.position),this.savedPose.rotation.copy(t.object3D.rotation),this.hasSavedPose=!0)},restoreCameraPose:function(){var t=this.el,e=this.savedPose,n=void 0!==this.hasPositionalTracking?this.hasPositionalTracking:l();this.hasSavedPose&&n&&(t.object3D.position.copy(e.position),t.object3D.rotation.copy(e.rotation),this.hasSavedPose=!1)}})},{"../core/component":101,"../lib/three":149,"../utils":171,"../utils/":171}],66:[function(t,e,n){var i=t("../utils/"),r=t("../core/component"),o=t("../lib/three"),a=t("../core/shader"),s=i.debug("components:material:error"),c=r.registerComponent,l=a.shaders,u=a.shaderNames;function h(t,e){t.dispose(),e.unregisterMaterial(t)}e.exports.Component=c("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:u},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColors:{type:"string",default:"none",oneOf:["face","vertex"]},visible:{default:!0}},init:function(){this.material=null},update:function(t){var e=this.data;this.shader&&e.shader===t.shader||this.updateShader(e.shader),this.shader.update(this.data),this.updateMaterial(t)},updateSchema:function(t){var e=t.shader,n=this.data&&this.data.shader,i=e||n,r=l[i]&&l[i].schema;r||s("Unknown shader schema "+i),n&&e===n||(this.extendSchema(r),this.updateBehavior())},updateBehavior:function(){var t=this.schema,e=this,n=this.el.sceneEl,i={},r=function(t,n){Object.keys(i).forEach(function(e){i[e]=t}),e.shader.update(i)};this.tick=void 0,Object.keys(t).forEach(function(n){"time"===t[n].type&&(e.tick=r,i[n]=!0)}),n&&(this.tick?n.addBehavior(this):n.removeBehavior(this))},updateShader:function(t){var e,n=this.data,i=l[t]&&l[t].Shader;if(!i)throw new Error("Unknown shader "+t);(e=this.shader=new i).el=this.el,e.init(n),this.setMaterial(e.material),this.updateSchema(n)},updateMaterial:function(t){var e=this.data,n=this.material;n.alphaTest=e.alphaTest,n.depthTest=!1!==e.depthTest,n.depthWrite=!1!==e.depthWrite,n.opacity=e.opacity,n.flatShading=e.flatShading,n.side=function(t){switch(e.side){case"back":return o.BackSide;case"double":return o.DoubleSide;default:return o.FrontSide}}(),n.transparent=!1!==e.transparent||e.opacity<1,n.vertexColors=function(t){switch(e.vertexColors){case"face":return o.FaceColors;case"vertex":return o.VertexColors;default:return o.NoColors}}(),n.visible=e.visible,!Object.keys(t).length||t.alphaTest===e.alphaTest&&t.side===e.side&&t.vertexColors===e.vertexColors||(n.needsUpdate=!0)},remove:function(){var t=new o.MeshBasicMaterial,e=this.material,n=this.el.getObject3D("mesh");n&&(n.material=t),h(e,this.system)},setMaterial:function(t){var e,n=this.el,i=this.system;this.material&&h(this.material,i),this.material=t,i.registerMaterial(t),(e=n.getObject3D("mesh"))?e.material=t:n.addEventListener("object3dset",function e(i){"mesh"===i.detail.type&&i.target===n&&(n.getObject3D("mesh").material=t,n.removeEventListener("object3dset",e))})}})},{"../core/component":101,"../core/shader":110,"../lib/three":149,"../utils/":171}],67:[function(t,e,n){var i=t("../utils/debug"),r=t("../core/component").registerComponent,o=t("../lib/three"),a=i("components:obj-model:warn");e.exports.Component=r("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){this.model=null,this.objLoader=new o.OBJLoader,this.mtlLoader=new o.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin=""},update:function(){var t=this.data;t.obj&&(this.remove(),this.loadObj(t.obj,t.mtl))},remove:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(t,e){var n=this,i=this.el,r=this.mtlLoader,s=this.objLoader;if(e)return i.hasAttribute("material")&&a("Material component properties are ignored when a .MTL is provided"),r.setTexturePath(e.substr(0,e.lastIndexOf("/")+1)),void r.load(e,function(e){e.preload(),s.setMaterials(e),s.load(t,function(t){n.model=t,i.setObject3D("mesh",t),i.emit("model-loaded",{format:"obj",model:t})})});s.load(t,function(t){var e=i.components.material;e&&t.traverse(function(t){t instanceof o.Mesh&&(t.material=e.material)}),n.model=t,i.setObject3D("mesh",t),i.emit("model-loaded",{format:"obj",model:t})})}})},{"../core/component":101,"../lib/three":149,"../utils/debug":167}],68:[function(t,e,n){var i=t("../utils/bind"),r=t("../core/component").registerComponent,o=t("../utils/tracked-controls"),a=o.onButtonEvent,s={x:0,y:-.015,z:.04};e.exports.Component=r("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},rotationOffset:{default:0}},mapping:{left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},bindMethods:function(){this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.onAxisMoved=i(this.onAxisMoved,this)},init:function(){var t=this;this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(e){a(e.detail.id,"down",t,t.data.hand)},this.onButtonUp=function(e){a(e.detail.id,"up",t,t.data.hand)},this.onButtonTouchStart=function(e){a(e.detail.id,"touchstart",t,t.data.hand)},this.onButtonTouchEnd=function(e){a(e.detail.id,"touchend",t,t.data.hand)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.emitIfAxesChanged=o.emitIfAxesChanged,this.checkControllerPresentAndSetup=o.checkControllerPresentAndSetup},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("axismove",this.onAxisMoved),t.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("axismove",this.onAxisMoved),t.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,"Oculus Touch",{hand:this.data.hand})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){var t,e;this.data.model&&("right"===this.data.hand?(t="url(https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-right.obj)",e="url(https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-right.mtl)"):(t="url(https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-left.obj)",e="url(https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-left.mtl)"),this.el.setAttribute("obj-model",{obj:t,mtl:e}))},injectTrackedControls:function(){var t=this.data,e="right"===t.hand?-90:90;this.el.setAttribute("tracked-controls",{id:"right"===t.hand?"Oculus Touch (Right)":"Oculus Touch (Left)",controller:0,rotationOffset:-999!==t.rotationOffset?t.rotationOffset:e}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(t){var e,n=this.mapping[this.data.hand].buttons[t.detail.id],i=this.buttonMeshes;n&&("trigger"!==n&&"grip"!==n||(e=t.detail.state.value),i&&("trigger"===n&&i.trigger&&(i.trigger.rotation.x=-e*(Math.PI/24)),"grip"===n&&i.grip&&(i.grip.rotation.y=("left"===this.data.hand?-1:1)*e*(Math.PI/60))),this.el.emit(n+"changed",t.detail.state))},onModelLoaded:function(t){var e,n=t.detail.model;if(this.data.model){var i="left"===this.data.hand;(e=this.buttonMeshes={}).grip=n.getObjectByName(i?"buttonHand_oculus-touch-controller-left.004":"buttonHand_oculus-touch-controller-right.005"),e.thumbstick=n.getObjectByName(i?"stick_oculus-touch-controller-left.007":"stick_oculus-touch-controller-right.004"),e.trigger=n.getObjectByName(i?"buttonTrigger_oculus-touch-controller-left.005":"buttonTrigger_oculus-touch-controller-right.006"),e.xbutton=n.getObjectByName("buttonX_oculus-touch-controller-left.002"),e.abutton=n.getObjectByName("buttonA_oculus-touch-controller-right.002"),e.ybutton=n.getObjectByName("buttonY_oculus-touch-controller-left.001"),e.bbutton=n.getObjectByName("buttonB_oculus-touch-controller-right.003"),n.position=s}},onAxisMoved:function(t){this.emitIfAxesChanged(this,this.mapping[this.data.hand].axes,t)},updateModel:function(t,e){this.data.model&&this.updateButtonModel(t,e)},updateButtonModel:function(t,e){var n="up"===e||"touchend"===e?this.data.buttonColor:"touchstart"===e?this.data.buttonTouchColor:this.data.buttonHighlightColor,i=this.buttonMeshes;this.data.model&&i&&i[t]&&i[t].material.color.set(n)}})},{"../core/component":101,"../utils/bind":165,"../utils/tracked-controls":177}],69:[function(t,e,n){var i=t("../core/component").registerComponent;e.exports.Component=i("position",{schema:{type:"vec3"},update:function(){var t=this.el.object3D,e=this.data;t.position.set(e.x,e.y,e.z)}})},{"../core/component":101}],70:[function(t,e,n){var i,r,o,a=t("../core/component").registerComponent,s=t("../lib/three"),c=t("../utils/").debug("components:raycaster:warn"),l=/^[\w\s-.,[\]#]*$/,u={childList:!0,attributes:!0,subtree:!0};e.exports.Component=a("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},recursive:{default:!0},showLine:{default:!1},useWorldCoordinates:{default:!1}},init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new s.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new s.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new s.Vector3,this.otherLineEndVec3=new s.Vector3,this.lineData={end:this.lineEndVec3},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(t){var e=this.data,n=this.el,i=this.raycaster;i.far=e.far,i.near=e.near,!e.showLine||e.far===t.far&&e.origin===t.origin&&e.direction===t.direction&&t.showLine||(this.unitLineEndVec3.copy(e.origin).add(e.direction).normalize(),this.drawLine()),!e.showLine&&t.showLine&&n.removeAttribute("line"),e.objects===t.objects||l.test(e.objects)||c('Selector "'+e.objects+'" may not update automatically with DOM changes.'),e.autoRefresh!==t.autoRefresh&&n.isPlaying&&(e.autoRefresh?this.addEventListeners():this.removeEventListeners()),this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line")},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,u),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var t,e=this.data;t=e.objects?this.el.sceneEl.querySelectorAll(e.objects):this.el.sceneEl.children,this.objects=this.flattenChildrenShallow(t),this.dirty=!1},tick:function(t){var e=this.data,n=this.prevCheckTime;n&&t-n<e.interval||(this.prevCheckTime=t,this.checkIntersections())},checkIntersections:function(){var t,e,n,i=this.clearedIntersectedEls,r=this.el,o=this.data,a=this.intersectedEls,s=this.intersections,c=this.newIntersectedEls,l=this.newIntersections,u=this.prevIntersectedEls,h=this.rawIntersections,d=this;if(this.data.enabled){for(this.dirty&&this.refreshObjects(),function(t,e){var n;for(t.length=e.length,n=0;n<e.length;n++)t[n]=e[n]}(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),h.length=0,this.raycaster.intersectObjects(this.objects,o.recursive,h),s.length=0,a.length=0,t=0;t<h.length;t++)e=h[t],o.showLine&&e.object===r.getObject3D("line")||e.object.el&&(s.push(e),a.push(e.object.el));for(l.length=0,c.length=0,t=0;t<s.length;t++)-1===u.indexOf(s[t].object.el)&&(l.push(s[t]),c.push(s[t].object.el));for(i.length=0,t=0;t<u.length;t++)-1===a.indexOf(u[t])&&(u[t].emit("raycaster-intersected-cleared",this.intersectedClearedDetail),i.push(u[t]));for(i.length&&r.emit("raycaster-intersection-cleared",this.intersectionClearedDetail),t=0;t<c.length;t++)c[t].emit("raycaster-intersected",{el:r,intersection:l[t]});l.length&&(this.intersectionDetail.els=c,this.intersectionDetail.intersections=l,r.emit("raycaster-intersection",this.intersectionDetail)),setTimeout(function(){d.data.showLine&&(s.length&&(n=s[0].object.el===r&&s[1]?s[1].distance:s[0].distance),d.drawLine(n))})}},getIntersection:function(t){var e,n;for(e=0;e<this.intersections.length;e++)if((n=this.intersections[e]).object.el===t)return n;return null},updateOriginDirection:(r=new s.Vector3,o=new s.Vector3,function(){var t=this.el,e=this.data;e.useWorldCoordinates?this.raycaster.set(e.origin,e.direction):(t.object3D.updateMatrixWorld(),t.object3D.getWorldPosition(o),0===e.origin.x&&0===e.origin.y&&0===e.origin.z||(o=t.object3D.localToWorld(o.copy(e.origin))),r.copy(e.direction).transformDirection(t.object3D.matrixWorld).normalize(),this.raycaster.set(o,r))}),drawLine:function(t){var e,n=this.data,i=this.el;e=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,void 0===t&&(t=n.far===1/0?1e3:n.far),this.lineData.start=n.origin,this.lineData.end=e.copy(this.unitLineEndVec3).multiplyScalar(t),i.setAttribute("line",this.lineData)},flattenChildrenShallow:(i=[],function(t){var e,n,r=this.objects;for(i.length=0,n=0;n<t.length;n++)t[n].object3D&&i.push(t[n].object3D);for(r.length=0,n=0;n<i.length;n++)(e=i[n].children)&&e.length&&r.push.apply(r,e);return r})})},{"../core/component":101,"../lib/three":149,"../utils/":171}],71:[function(t,e,n){var i=t("../lib/three").Math.degToRad,r=t("../core/component").registerComponent;e.exports.Component=r("rotation",{schema:{type:"vec3"},update:function(){var t=this.data,e=this.el.object3D;e.rotation.set(i(t.x),i(t.y),i(t.z)),e.rotation.order="YXZ"}})},{"../core/component":101,"../lib/three":149}],72:[function(t,e,n){var i=t("../core/component").registerComponent;e.exports.Component=i("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var t=this.data,e=this.el.object3D,n=0===t.x?1e-5:t.x,i=0===t.y?1e-5:t.y,r=0===t.z?1e-5:t.z;e.scale.set(n,i,r)}})},{"../core/component":101}],73:[function(t,e,n){var i=t("../../core/component").registerComponent;e.exports.Component=i("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},update:function(){var t=this.data,e=this.el.object3D;t.transparent?e.background=null:e.background=new THREE.Color(t.color)}})},{"../../core/component":101}],74:[function(t,e,n){var i=t("../../core/component").registerComponent;e.exports.Component=i("debug",{schema:{default:!0}})},{"../../core/component":101}],75:[function(t,e,n){var i=t("../../core/component").registerComponent;e.exports.Component=i("embedded",{dependencies:["vr-mode-ui"],schema:{default:!0},update:function(){var t=this.el,e=t.querySelector(".a-enter-vr");!0===this.data?(e&&e.classList.add("embedded"),t.removeFullScreenStyles()):(e&&e.classList.remove("embedded"),t.addFullScreenStyles())}})},{"../../core/component":101}],76:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../lib/three"),o=t("../../utils/debug")("components:fog:warn");e.exports.Component=i("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},update:function(){var t=this.data,e=this.el,n=this.el.object3D.fog;if(e.isScene)return n&&t.type===n.name?void Object.keys(this.schema).forEach(function(e){var i=t[e];"color"===e&&(i=new r.Color(i)),n[e]=i}):(e.object3D.fog=function(t){var e;return(e="exponential"===t.type?new r.FogExp2(t.color,t.density):new r.Fog(t.color,t.near,t.far)).name=t.type,e}(t),void e.systems.material.updateMaterials());o("Fog component can only be applied to <a-scene>")},remove:function(){var t=this.el.object3D.fog;t&&(t.far=0,t.near=.1)}})},{"../../core/component":101,"../../lib/three":149,"../../utils/debug":167}],77:[function(t,e,n){(function(n){var i,r=t("../../constants").AFRAME_INJECTED,o=t("../../utils/bind"),a=t("../../../package"),s=t("../../core/component").registerComponent,c="https://unpkg.com/aframe-inspector@"+((i=a.version.split("."))[2]="x",i.join("."))+"/dist/aframe-inspector.min.js",l="dev"===n.env.INSPECTOR_VERSION?"https://aframe.io/aframe-inspector/dist/aframe-inspector.js":c;e.exports.Component=s("inspector",{schema:{url:{default:l}},init:function(){this.onKeydown=o(this.onKeydown,this),this.onMessage=o(this.onMessage,this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},initOverlay:function(){this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML='Loading Inspector<span class="dots"><span>.</span><span>.</span><span>.</span></span>'},remove:function(){this.removeEventListeners()},onKeydown:function(t){var e=73===t.keyCode&&t.ctrlKey&&t.altKey;this.data&&e&&this.injectInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(t){"INJECT_AFRAME_INSPECTOR"===t.data&&this.injectInspector()},injectInspector:function(){var t,e=this;AFRAME.INSPECTOR||AFRAME.inspectorInjected||(this.showLoader(),(t=document.createElement("script")).src=this.data.url,t.setAttribute("data-name","aframe-inspector"),t.setAttribute(r,""),t.onload=function(){AFRAME.INSPECTOR.open(),e.hideLoader(),e.removeEventListeners()},t.onerror=function(){e.loadingMessageEl.innerHTML="Error loading Inspector"},document.head.appendChild(t),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})}).call(this,t("_process"))},{"../../../package":51,"../../constants":92,"../../core/component":101,"../../utils/bind":165,_process:32}],78:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../utils/").shouldCaptureKeyEvent;e.exports.Component=i("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},init:function(){this.onKeyup=this.onKeyup.bind(this)},update:function(t){var e=this.data;this.enterVREnabled=e.enterVR},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(t){var e=this.el;r(t)&&(this.enterVREnabled&&70===t.keyCode&&e.enterVR(),this.enterVREnabled&&27===t.keyCode&&e.exitVR())}})},{"../../core/component":101,"../../utils/":171}],79:[function(t,e,n){var i=t("../../utils/debug"),r=t("../../core/component").registerComponent,o=i("components:pool:warn");e.exports.Component=r("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},multiple:!0,initPool:function(){var t;for(this.availableEls=[],this.usedEls=[],this.data.mixin||o("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||o("Container "+this.data.container+" not found.")),this.container=this.container||this.el,t=0;t<this.data.size;++t)this.createEntity()},update:function(t){var e=this.data;t.mixin===e.mixin&&t.size===e.size||this.initPool()},createEntity:function(){var t;(t=document.createElement("a-entity")).play=this.wrapPlay(t.play),t.setAttribute("mixin",this.data.mixin),t.object3D.visible=!1,t.pause(),this.container.appendChild(t),this.availableEls.push(t)},wrapPlay:function(t){var e=this.usedEls;return function(){-1!==e.indexOf(this)&&t.call(this)}},requestEntity:function(){var t;if(0===this.availableEls.length){if(!1===this.data.dynamic)return void o("Requested entity from empty pool: "+this.name);o("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.name),this.createEntity()}return t=this.availableEls.shift(),this.usedEls.push(t),t.object3D.visible=!0,t},returnEntity:function(t){var e=this.usedEls.indexOf(t);if(-1!==e)return this.usedEls.splice(e,1),this.availableEls.push(t),t.object3D.visible=!1,t.pause(),t;o("The returned entity was not previously pooled from "+this.name)}})},{"../../core/component":101,"../../utils/debug":167}],80:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../lib/three"),o=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),a=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join("\n");e.exports.Component=i("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},init:function(){var t=this.el,e=this;function n(){var n=t.renderer.getContext();n&&(e.cubeMapSize=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),e.material=new r.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:o,fragmentShader:a,side:r.DoubleSide}),e.quad=new r.Mesh(new r.PlaneBufferGeometry(1,1),e.material),e.quad.visible=!1,e.camera=new r.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),e.canvas=document.createElement("canvas"),e.ctx=e.canvas.getContext("2d"),t.camera&&t.camera.add(e.quad),e.onKeyDown=e.onKeyDown.bind(e),e.onCameraActive=e.onCameraActive.bind(e),t.addEventListener("camera-set-active",e.onCameraActive))}t.renderer?n():t.addEventListener("render-target-loaded",n)},getRenderTarget:function(t,e){return new r.WebGLRenderTarget(t,e,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,wrapS:r.ClampToEdgeWrapping,wrapT:r.ClampToEdgeWrapping,format:r.RGBAFormat,type:r.UnsignedByteType})},resize:function(t,e){this.quad.scale.set(t,e,1),this.camera.left=-1*t/2,this.camera.right=t/2,this.camera.top=e/2,this.camera.bottom=-1*e/2,this.camera.updateProjectionMatrix(),this.canvas.width=t,this.canvas.height=e},play:function(){window.addEventListener("keydown",this.onKeyDown)},onCameraActive:function(t){var e=this.quad.parent;e&&e.remove(this.quad),t.detail.cameraEl.getObject3D("camera").add(this.quad)},onKeyDown:function(t){var e=83===t.keyCode&&t.ctrlKey&&t.altKey;if(this.data&&e){var n=t.shiftKey?"equirectangular":"perspective";this.capture(n)}},setCapture:function(t){var e,n,i,o=this.el;return"perspective"===t?(this.quad.visible=!1,n=this.data.camera&&this.data.camera.components.camera.camera||o.camera,e={width:this.data.width,height:this.data.height}):((n=this.camera).position.copy(o.camera.getWorldPosition()),n.rotation.copy(o.camera.getWorldRotation()),(i=new r.CubeCamera(o.camera.near,o.camera.far,Math.min(this.cubeMapSize,2048))).position.copy(o.camera.getWorldPosition()),i.rotation.copy(o.camera.getWorldRotation()),i.updateCubeMap(o.renderer,o.object3D),this.quad.material.uniforms.map.value=i.renderTarget.texture,e={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:n,size:e,projection:t}},capture:function(t){var e=this.setCapture(t);this.renderCapture(e.camera,e.size,e.projection),this.saveCapture()},getCanvas:function(t){var e=this.setCapture(t);return this.renderCapture(e.camera,e.size,e.projection),this.canvas},renderCapture:function(t,e,n){var i,r,o,a=this.el.renderer.autoClear,s=this.el,c=this.el.renderer;r=this.getRenderTarget(e.width,e.height),o=new Uint8Array(4*e.width*e.height),this.resize(e.width,e.height),c.autoClear=!0,c.render(s.object3D,t,r,!0),c.autoClear=a,c.readRenderTargetPixels(r,0,0,e.width,e.height,o),"perspective"===n&&(o=this.flipPixelsVertically(o,e.width,e.height)),i=new ImageData(new Uint8ClampedArray(o),e.width,e.height),this.quad.visible=!1,this.ctx.putImageData(i,0,0)},flipPixelsVertically:function(t,e,n){for(var i=t.slice(0),r=0;r<e;++r)for(var o=0;o<n;++o)i[4*r+o*e*4]=t[4*r+(n-o)*e*4],i[4*r+1+o*e*4]=t[4*r+1+(n-o)*e*4],i[4*r+2+o*e*4]=t[4*r+2+(n-o)*e*4],i[4*r+3+o*e*4]=t[4*r+3+(n-o)*e*4];return i},saveCapture:function(){this.canvas.toBlob(function(t){var e="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",n=document.createElement("a"),i=URL.createObjectURL(t);n.href=i,n.setAttribute("download",e),n.innerHTML="downloading...",n.style.display="none",document.body.appendChild(n),setTimeout(function(){n.click(),document.body.removeChild(n)},1)},"image/png")}})},{"../../core/component":101,"../../lib/three":149}],81:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../../vendor/rStats"),o=t("../../utils");t("../../../vendor/rStats.extras"),t("../../lib/rStatsAframe");var a=window.aframeStats,s=o.bind,c=window.threeStats;e.exports.Component=i("stats",{schema:{default:!0},init:function(){var t=this.el;"false"!==o.getUrlParameter("stats")&&(this.stats=function(t){var e=new c(t.renderer),n=new a(t),i=t.isMobile?[]:[e,n];return new r({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:i})}(t),this.statsEl=document.querySelector(".rs-base"),this.hideBound=s(this.hide,this),this.showBound=s(this.show,this),t.addEventListener("enter-vr",this.hideBound),t.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var t=this.stats;t&&(t("rAF").tick(),t("FPS").frame(),t().update())},hide:function(){this.statsEl.classList.add("a-hidden")},show:function(){this.statsEl.classList.remove("a-hidden")}})},{"../../../vendor/rStats":179,"../../../vendor/rStats.extras":178,"../../core/component":101,"../../lib/rStatsAframe":148,"../../utils":171}],82:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../constants/"),o=t("../../utils/"),a=o.bind;e.exports.Component=i("vr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0}},init:function(){var t=this,e=this.el;"false"!==o.getUrlParameter("ui")&&(this.insideLoader=!1,this.enterVREl=null,this.orientationModalEl=null,this.bindMethods(),e.addEventListener("enter-vr",this.updateEnterVRInterface),e.addEventListener("exit-vr",this.updateEnterVRInterface),window.addEventListener("message",function(e){"loaderReady"===e.data.type&&(t.insideLoader=!0,t.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=a(this.onEnterVRButtonClick,this),this.onModalClick=a(this.onModalClick,this),this.toggleOrientationModalIfNeeded=a(this.toggleOrientationModalIfNeeded,this),this.updateEnterVRInterface=a(this.updateEnterVRInterface,this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},update:function(){var t,e,n,i=this.el;if(!this.data.enabled||this.insideLoader||"false"===o.getUrlParameter("ui"))return this.remove();this.enterVREl||this.orientationModalEl||(this.enterVREl=(t=this.onEnterVRButtonClick,(n=document.createElement("div")).classList.add("a-enter-vr"),n.setAttribute(r.AFRAME_INJECTED,""),(e=document.createElement("button")).className="a-enter-vr-button",e.setAttribute("title","Enter VR mode with a headset or fullscreen mode on a desktop. Visit https://webvr.rocks or https://webvr.info for more information."),e.setAttribute(r.AFRAME_INJECTED,""),n.appendChild(e),e.addEventListener("click",function(e){t()}),n),i.appendChild(this.enterVREl),this.orientationModalEl=function(t){var e=document.createElement("div");e.className="a-orientation-modal",e.classList.add("a-hidden"),e.setAttribute(r.AFRAME_INJECTED,"");var n=document.createElement("button");return n.setAttribute(r.AFRAME_INJECTED,""),n.innerHTML="Exit VR",n.addEventListener("click",t),e.appendChild(n),e}(this.onModalClick),i.appendChild(this.orientationModalEl),this.updateEnterVRInterface())},remove:function(){[this.enterVREl,this.orientationModalEl].forEach(function(t){t&&t.parentNode.removeChild(t)})},updateEnterVRInterface:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var t=this.el;this.enterVREl&&(t.is("vr-mode")?this.enterVREl.classList.add("a-hidden"):this.enterVREl.classList.remove("a-hidden"))},toggleOrientationModalIfNeeded:function(){var t=this.el,e=this.orientationModalEl;e&&t.isMobile&&(!o.device.isLandscape()&&t.is("vr-mode")?e.classList.remove("a-hidden"):e.classList.add("a-hidden"))}})},{"../../constants/":92,"../../core/component":101,"../../utils/":171}],83:[function(t,e,n){var i=t("../core/component"),r=t("../lib/three"),o=t("../utils/bind"),a=i.registerComponent;e.exports.Component=a("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=o(this.update,this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var t=this.data;this.updateDescendants(t.cast,t.receive)},remove:function(){this.el.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(t,e){var n=this.el.sceneEl;this.el.object3D.traverse(function(i){if(i instanceof r.Mesh&&(i.castShadow=t,i.receiveShadow=e,n.hasLoaded&&i.material))for(var o=Array.isArray(i.material)?i.material:[i.material],a=0;a<o.length;a++)o[a].needsUpdate=!0})}})},{"../core/component":101,"../lib/three":149,"../utils/bind":165}],84:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/debug"),o=t("../utils/bind"),a=t("../lib/three"),s=r("components:sound:warn");e.exports.Component=i("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){this.listener=null,this.audioLoader=new a.AudioLoader,this.pool=new a.Group,this.loaded=!1,this.mustPlay=!1,this.playSound=o(this.playSound,this)},update:function(t){var e=this.data,n=e.src!==t.src;if(n){if(!e.src)return void s("Audio source was not specified with `src`");this.setupSound()}if(this.pool.children.forEach(function(t){e.positional&&(t.setDistanceModel(e.distanceModel),t.setMaxDistance(e.maxDistance),t.setRefDistance(e.refDistance),t.setRolloffFactor(e.rolloffFactor)),t.setLoop(e.loop),t.setVolume(e.volume),t.isPaused=!1}),e.on!==t.on&&this.updateEventListener(t.on),n){var i=this;this.loaded=!1,this.audioLoader.load(e.src,function(t){i.pool.children.forEach(function(e){e.setBuffer(t)}),i.loaded=!0,a.Cache.remove(e.src),(i.data.autoplay||i.mustPlay)&&i.playSound(),i.el.emit("sound-loaded")})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){this.removeEventListener(),this.el.removeObject3D(this.attrName);try{this.pool.children.forEach(function(t){t.disconnect()})}catch(t){s("Audio source not properly disconnected")}},updateEventListener:function(t){var e=this.el;t&&e.removeEventListener(t,this.playSound),e.addEventListener(this.data.on,this.playSound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSound)},setupSound:function(){var t=this.el,e=t.sceneEl;this.pool.children.length>0&&(this.stopSound(),t.removeObject3D("sound"));var n=this.listener=e.audioListener||new a.AudioListener;e.audioListener=n,e.camera&&e.camera.add(n),e.addEventListener("camera-set-active",function(t){t.detail.cameraEl.getObject3D("camera").add(n)}),this.pool=new a.Group;for(var i=0;i<this.data.poolSize;i++){var r=this.data.positional?new a.PositionalAudio(n):new a.Audio(n);this.pool.add(r)}t.setObject3D(this.attrName,this.pool),this.pool.children.forEach(function(e){e.onEnded=function(){e.isPlaying=!1,t.emit("sound-ended",{index:i})}})},pauseSound:function(){this.isPlaying=!1,this.pool.children.forEach(function(t){t.source&&t.source.buffer&&t.isPlaying&&!t.isPaused&&(t.isPaused=!0,t.pause())})},playSound:function(){if(!this.loaded)return s("Sound not loaded yet. It will be played once it finished loading"),void(this.mustPlay=!0);var t=!1;this.isPlaying=!0,this.pool.children.forEach(function(e){if(!e.isPlaying&&e.buffer&&!t)return e.play(),e.isPaused=!1,void(t=!0)}),t?this.mustPlay=!1:s("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el)},stopSound:function(){this.isPlaying=!1,this.pool.children.forEach(function(t){t.source&&t.source.buffer&&t.stop()})}})},{"../core/component":101,"../lib/three":149,"../utils/bind":165,"../utils/debug":167}],85:[function(t,e,n){var i=t("three-bmfont-text"),r=t("load-bmfont"),o=t("../core/component").registerComponent,a=t("../core/shader"),s=t("../lib/three"),c=t("../utils/"),l=c.debug("components:text:error"),u=a.shaders,h=c.debug("components:text:warn"),d="https://cdn.aframe.io/fonts/",p={aileronsemibold:d+"Aileron-Semibold.fnt",dejavu:d+"DejaVu-sdf.fnt",exo2bold:d+"Exo2Bold.fnt",exo2semibold:d+"Exo2SemiBold.fnt",kelsonsans:d+"KelsonSans.fnt",monoid:d+"Monoid.fnt",mozillavr:d+"mozillavr.fnt",roboto:d+"Roboto-msdf.json",sourcecodepro:d+"SourceCodePro.fnt"},f=["roboto"];e.exports.FONTS=p;var m=new function(){var t=this.cache={};this.get=function(e,n){return e in t?t[e]:(t[e]=n(),t[e])}},g={},v={};function y(t){return void 0!==(t=c.clone(t)).lineHeight&&(t.lineHeight=parseFloat(t.lineHeight),isFinite(t.lineHeight)||(t.lineHeight=void 0)),void 0!==t.width&&(t.width=parseFloat(t.width),isFinite(t.width)||(t.width=void 0)),t}function A(t,e,n){return t||(.5+e)*n}e.exports.Component=o("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:"roboto"},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:u},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=i(),this.createOrUpdateMaterial(),this.mesh=new s.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh)},update:function(t){var e=y(this.data),n=this.currentFont,i=this.getFontImageSrc();v[i]?this.texture=v[i]:(this.texture=v[i]=new s.Texture,this.texture.anisotropy=16),this.createOrUpdateMaterial(),t.font===e.font?n&&(this.updateGeometry(this.geometry,e,n),this.updateLayout(e)):this.updateFont()},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var t,e,n,i=this.data,r=this.material,o=this.shaderData;if(n=i.shader,-1!==f.indexOf(i.font)||i.font.indexOf("-msdf.")>=0?n="msdf":i.font in p&&-1===f.indexOf(i.font)&&(n="sdf"),t=(this.shaderObject&&this.shaderObject.name)!==n,o.alphaTest=i.alphaTest,o.color=i.color,o.map=this.texture,o.opacity=i.opacity,o.side=function(t){switch(i.side){case"back":return s.FrontSide;case"double":return s.DoubleSide;default:return s.BackSide}}(),o.transparent=i.transparent,o.negate=i.negate,!t)return this.shaderObject.update(o),r.transparent=o.transparent,void(r.side=o.side);e=function(t,e,n){var i,r;return(r=new u[e].Shader).el=t,r.init(n),r.update(n),(i=r.material).transparent=n.transparent,{material:i,shader:r}}(this.el,n,o),this.material=e.material,this.shaderObject=e.shader,this.material.side=o.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var t,e=this.data,n=this.el,i=this.geometry,o=this;e.font||h("No font specified. Using the default font."),this.mesh.visible=!1,t=this.lookupFont(e.font||"roboto")||e.font,m.get(t,function(){return n=t,i=e.yOffset,new Promise(function(t,e){r(n,function(r,o){if(r)return l("Error loading font",n),void e(r);n.indexOf("/Roboto-msdf.json")>=0&&(i=30),i&&o.chars.map(function(t){t.yoffset+=i}),t(o)})});var n,i}).then(function(r){var a,c;if(1!==r.pages.length)throw new Error("Currently only single-page bitmap fonts are supported.");g[t]||(r.widthFactor=g[r]=function(t){var e=0,n=0,i=0;return t.chars.map(function(t){e+=t.xadvance,t.id>=48&&t.id<=57&&(i++,n+=t.xadvance)}),i?n/i:e/t.chars.length}(r)),a=y(e),o.updateGeometry(i,o.data,r),o.currentFont=r,o.updateLayout(a),c=o.getFontImageSrc(),m.get(c,function(){return t=c,new Promise(function(e,n){(new s.ImageLoader).load(t,function(t){e(t)},void 0,function(){l("Error loading font image",t),n(null)})});var t}).then(function(t){var i=o.texture;i.image=t,i.needsUpdate=!0,v[c]=i,o.texture=i,o.mesh.visible=!0,n.emit("textfontset",{font:e.font,fontObj:r})}).catch(function(t){throw l(t),t})}).catch(function(t){throw l(t),t})},getFontImageSrc:function(){var t=this.lookupFont(this.data.font||"roboto")||this.data.font;return this.data.fontImage||t.replace(/(\.fnt)|(\.json)/,".png")},updateLayout:function(t){var e,n,i,r,o,a,s,c=this.el,l=this.geometry,u=c.getAttribute("geometry"),h=l.layout,d=this.mesh;if(u=c.getAttribute("geometry"),i=(r=(o=t.width||u&&u.width||1)/A(t.wrapPixels,t.wrapCount,this.currentFont.widthFactor))*(h.height+h.descender),u&&(u.width||c.setAttribute("geometry","width",o),u.height||c.setAttribute("geometry","height",i)),"left"===(e="align"===t.anchor?t.align:t.anchor))a=0;else if("right"===e)a=-1*h.width;else{if("center"!==e)throw new TypeError("Invalid text.anchor property value",e);a=-1*h.width/2}if("bottom"===(n=t.baseline))s=0;else if("top"===n)s=-1*h.height+h.ascender;else{if("center"!==n)throw new TypeError("Invalid text.baseline property value",n);s=-1*h.height/2}d.position.x=a*r+t.xOffset,d.position.y=s*r,d.position.z=t.zOffset,d.scale.set(r,-1*r,r),this.geometry.computeBoundingSphere()},lookupFont:function(t){return p[t]},updateGeometry:function(t,e,n){t.update(c.extend({},e,{font:n,width:A(e.wrapPixels,e.wrapCount,n.widthFactor),text:e.value.toString().replace(/\\n/g,"\n").replace(/\\t/g,"\t"),lineHeight:e.lineHeight||n.common.lineHeight}))}})},{"../core/component":101,"../core/shader":110,"../lib/three":149,"../utils/":171,"load-bmfont":23,"three-bmfont-text":36}],86:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/tracked-controls"),o=t("../constants").DEFAULT_CAMERA_HEIGHT,a=t("../lib/three"),s=t("../constants").DEFAULT_HANDEDNESS;e.exports.Component=i("tracked-controls",{schema:{controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},rotationOffset:{default:0},armModel:{default:!0},headElement:{type:"selector"}},init:function(){this.axis=[0,0,0],this.buttonStates={},this.changedAxes=[],this.targetControllerNumber=this.data.controller,this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.deltaControllerPosition=new a.Vector3,this.controllerQuaternion=new a.Quaternion,this.controllerEuler=new a.Euler,this.updateGamepad(),this.el.object3D.matrixAutoUpdate=!1},tick:function(t,e){var n=this.el.getObject3D("mesh");n&&n.update&&n.update(e/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return o},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var t=this.data,e=r.findMatchingController(this.system.controllers,t.id,t.idPrefix,t.hand,t.controller);this.controller=e},applyArmModel:function(t){var e,n,i,r,o=this.controller,a=this.controllerEuler,c=this.controllerQuaternion,l=this.deltaControllerPosition;n=this.getHeadElement().object3D,r=this.defaultUserHeight(),i=o.pose,e=(o?o.hand:void 0)||s,t.copy(n.position),l.set(.175*("left"===e?-1:"right"===e?1:0),-.3,-.03),l.multiplyScalar(r),l.applyAxisAngle(n.up,n.rotation.y),t.add(l),l.set(0,0,-.175),l.multiplyScalar(r),i.orientation?c.fromArray(i.orientation):c.copy(n.quaternion),a.setFromQuaternion(c),a.set(a.x,a.y,0),l.applyEuler(a),t.add(l)},updatePose:function(){var t,e,n=this.controller,i=this.el.object3D,r=this.system.vrDisplay;n&&((t=n.pose).position?i.position.fromArray(t.position):this.data.armModel&&this.applyArmModel(i.position),t.orientation&&i.quaternion.fromArray(t.orientation),r&&t.position&&(e=this.el.sceneEl.renderer.vr.getStandingMatrix(),i.matrixAutoUpdate=!1,i.matrix.compose(i.position,i.quaternion,i.scale),i.matrix.multiplyMatrices(e,i.matrix),i.matrix.decompose(i.position,i.quaternion,i.scale)),i.rotateZ(this.data.rotationOffset*a.Math.DEG2RAD),i.updateMatrix(),i.matrixWorldNeedsUpdate=!0)},updateButtons:function(){var t,e,n=this.controller;if(n){for(e=0;e<n.buttons.length;++e)this.buttonStates[e]||(this.buttonStates[e]={pressed:!1,touched:!1,value:0}),t=n.buttons[e],this.handleButton(e,t);this.handleAxes()}},handleButton:function(t,e){return!!(this.handlePress(t,e)|this.handleTouch(t,e)|this.handleValue(t,e))&&(this.el.emit("buttonchanged",{id:t,state:e}),!0)},handleAxes:function(){var t,e=!1,n=this.controller.axes,i=this.axis,r=this.changedAxes;for(this.changedAxes.length=0,t=0;t<n.length;++t)r.push(i[t]!==n[t]),r[t]&&(e=!0);if(!e)return!1;for(this.axis.length=0,t=0;t<n.length;t++)this.axis.push(n[t]);return this.el.emit("axismove",this.axisMoveEventDetail),!0},handlePress:function(t,e){var n,i=this.buttonStates[t];return e.pressed!==i.pressed&&(n=e.pressed?"down":"up",this.el.emit("button"+n,{id:t,state:e}),i.pressed=e.pressed,!0)},handleTouch:function(t,e){var n,i=this.buttonStates[t];return e.touched!==i.touched&&(n=e.touched?"start":"end",this.el.emit("touch"+n,{id:t,state:e},!0,{touches:[]}),i.touched=e.touched,!0)},handleValue:function(t,e){var n=this.buttonStates[t];return e.value!==n.value&&(n.value=e.value,!0)}})},{"../constants":92,"../core/component":101,"../lib/three":149,"../utils/tracked-controls":177}],87:[function(t,e,n){var i=t("../core/component").registerComponent;e.exports.Component=i("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},{"../core/component":101}],88:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/").bind,o=t("../utils/tracked-controls"),a=o.checkControllerPresentAndSetup,s=o.emitIfAxesChanged,c=o.onButtonEvent;e.exports.Component=i("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},rotationOffset:{default:0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},init:function(){var t=this;this.animationActive="pointing",this.checkControllerPresentAndSetup=a,this.controllerPresent=!1,this.emitIfAxesChanged=s,this.lastControllerCheck=0,this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){c(e.detail.id,"down",t)},this.onButtonUp=function(e){c(e.detail.id,"up",t)},this.onButtonTouchEnd=function(e){c(e.detail.id,"touchend",t)},this.onButtonTouchStart=function(e){c(e.detail.id,"touchstart",t)},this.onAxisMoved=r(this.onAxisMoved,this),this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=r(this.removeControllersUpdateListener,this),this.onAxisMoved=r(this.onAxisMoved,this)},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var t=this.data,e="right"===t.hand?0:"left"===t.hand?1:2;this.checkControllerPresentAndSetup(this,"OpenVR ",{index:e})},injectTrackedControls:function(){var t=this.el,e=this.data;t.setAttribute("tracked-controls",{idPrefix:"OpenVR ",controller:"right"===e.hand?0:"left"===e.hand?1:2,rotationOffset:e.rotationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.obj",mtl:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(t){var e,n=this.mapping.buttons[t.detail.id],i=this.buttonMeshes;n&&("trigger"===n&&(e=t.detail.state.value,i&&i.trigger&&(i.trigger.rotation.x=-e*(Math.PI/12))),this.el.emit(n+"changed",t.detail.state))},onModelLoaded:function(t){var e,n=t.detail.model,i=this;this.data.model&&((e=this.buttonMeshes={}).grip={left:n.getObjectByName("leftgrip"),right:n.getObjectByName("rightgrip")},e.menu=n.getObjectByName("menubutton"),e.system=n.getObjectByName("systembutton"),e.trackpad=n.getObjectByName("touchpad"),e.trigger=n.getObjectByName("trigger"),Object.keys(e).forEach(function(t){i.setButtonColor(t,i.data.buttonColor)}),n.position.set(0,-.015,.04))},onAxisMoved:function(t){this.emitIfAxesChanged(this,this.mapping.axes,t)},updateModel:function(t,e){var n;this.data.model&&(-1!==e.indexOf("touch")||(n="up"===e?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(t,n)))},setButtonColor:function(t,e){var n=this.buttonMeshes;if(n)return"grip"===t?(n.grip.left.material.color.set(e),void n.grip.right.material.color.set(e)):void n[t].material.color.set(e)}})},{"../core/component":101,"../utils/":171,"../utils/tracked-controls":177}],89:[function(t,e,n){var i,r,o=t("../constants").keyboardevent.KEYCODE_TO_CODE,a=t("../core/component").registerComponent,s=t("../lib/three"),c=t("../utils/"),l=c.bind,u=c.shouldCaptureKeyEvent,h=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];e.exports.Component=a("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},easing:{default:20},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},init:function(){this.keys={},this.position={},this.velocity=new s.Vector3,this.onBlur=l(this.onBlur,this),this.onFocus=l(this.onFocus,this),this.onKeyDown=l(this.onKeyDown,this),this.onKeyUp=l(this.onKeyUp,this),this.onVisibilityChange=l(this.onVisibilityChange,this),this.attachVisibilityEventListeners()},tick:function(t,e){var n,i,r=this.data,o=this.el,a=this.position,s=this.velocity;(s[r.adAxis]||s[r.wsAxis]||!function(t){var e;for(e in t)return!1;return!0}(this.keys))&&(e/=1e3,this.updateVelocity(e),(s[r.adAxis]||s[r.wsAxis])&&(n=o.getAttribute("position"),i=this.getMovementVector(e),a.x=n.x+i.x,a.y=n.y+i.y,a.z=n.z+i.z,o.setAttribute("position",a)))},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(t){var e,n,i,r,o,a=this.data,s=this.keys,c=this.velocity;if(n=a.adAxis,r=a.wsAxis,t>.2)return c[n]=0,void(c[r]=0);0!==c[n]&&(c[n]-=c[n]*a.easing*t),0!==c[r]&&(c[r]-=c[r]*a.easing*t),Math.abs(c[n])<1e-5&&(c[n]=0),Math.abs(c[r])<1e-5&&(c[r]=0),a.enabled&&(e=a.acceleration,a.adEnabled&&(i=a.adInverted?-1:1,(s.KeyA||s.ArrowLeft)&&(c[n]-=i*e*t),(s.KeyD||s.ArrowRight)&&(c[n]+=i*e*t)),a.wsEnabled&&(o=a.wsInverted?-1:1,(s.KeyW||s.ArrowUp)&&(c[r]-=o*e*t),(s.KeyS||s.ArrowDown)&&(c[r]+=o*e*t)))},getMovementVector:(i=new s.Vector3(0,0,0),r=new s.Euler(0,0,0,"YXZ"),function(t){var e,n=this.el.getAttribute("rotation"),o=this.velocity;return i.copy(o),i.multiplyScalar(t),n?(e=this.data.fly?n.x:0,r.set(s.Math.degToRad(e),s.Math.degToRad(n.y),0),i.applyEuler(r),i):i}),attachVisibilityEventListeners:function(){window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(t){var e;u(t)&&(e=t.code||o[t.keyCode],-1!==h.indexOf(e)&&(this.keys[e]=!0))},onKeyUp:function(t){var e;e=t.code||o[t.keyCode],delete this.keys[e]}})},{"../constants":92,"../core/component":101,"../lib/three":149,"../utils/":171}],90:[function(t,e,n){var i,r=t("../utils/bind"),o=t("../core/component").registerComponent,a=t("../utils/tracked-controls"),s=a.onButtonEvent,c=t("../utils/"),l=c.debug("components:windows-motion-controls:debug"),u=c.debug("components:windows-motion-controls:warn"),h=t("../constants").DEFAULT_HANDEDNESS,d={left:"left.glb",right:"right.glb",default:"universal.glb"},p=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/;e.exports.Component=o("windows-motion-controls",{schema:{hand:{default:h},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},mapping:{axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},bindMethods:function(){this.onModelError=r(this.onModelError,this),this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.onAxisMoved=r(this.onAxisMoved,this)},init:function(){var t=this,e=this.el;this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){s(e.detail.id,"down",t)},this.onButtonUp=function(e){s(e.detail.id,"up",t)},this.onButtonTouchStart=function(e){s(e.detail.id,"touchstart",t)},this.onButtonTouchEnd=function(e){s(e.detail.id,"touchend",t)},this.onControllerConnected=function(){t.setModelVisibility(!0)},this.onControllerDisconnected=function(){t.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},this.emitIfAxesChanged=a.emitIfAxesChanged,this.checkControllerPresentAndSetup=a.checkControllerPresentAndSetup,e.addEventListener("controllerconnected",this.onControllerConnected),e.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("axismove",this.onAxisMoved),t.addEventListener("model-error",this.onModelError),t.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("axismove",this.onAxisMoved),t.removeEventListener("model-error",this.onModelError),t.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,"Spatial Controller (Spatial Interaction Source) ",{hand:this.data.hand,index:this.data.pair})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(this.data.model&&!this.rayOrigin.createdFromMesh){var t=this.createControllerModelUrl();this.loadModel(t)}else this.modelReady()},createControllerModelUrl:function(t){var e=this.el.components["tracked-controls"],n=e?e.controller:null,i="default",r=this.data.hand;if(n&&(r=n.hand,!t)){var o=n.id.match(p);i=o&&o[0]||i}return"https://cdn.aframe.io/controllers/microsoft/"+i+"/"+(d[r]||d.default)},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{idPrefix:"Spatial Controller (Spatial Interaction Source) ",controller:t.pair,hand:t.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(t){var e=this.createControllerModelUrl(!0);t.detail.src!==e?(u("Failed to load controller model for device, attempting to load default."),this.loadModel(e)):u("Failed to load default controller model.")},loadModel:function(t){this.el.setAttribute("gltf-model","url("+t+")")},onModelLoaded:function(t){var e,n,i,r,o=this.controllerModel=t.detail.model,a=this.loadedMeshInfo;if(l("Processing model"),a.buttonMeshes={},a.axisMeshes={},o){for(e=0;e<this.mapping.buttons.length;e++)(n=this.mapping.buttonMeshNames[this.mapping.buttons[e]])?(i=o.getObjectByName(n))?(r={index:e,value:s(i,"VALUE"),pressed:s(i,"PRESSED"),unpressed:s(i,"UNPRESSED")}).value&&r.pressed&&r.unpressed?a.buttonMeshes[this.mapping.buttons[e]]=r:u("Missing button submesh under mesh with name: "+n+"(VALUE: "+!!r.value+", PRESSED: "+!!r.pressed+", UNPRESSED:"+!!r.unpressed+")"):u("Missing button mesh with name: "+n):l("Skipping unknown button at index: "+e+" with mapped name: "+this.mapping.buttons[e]);for(e=0;e<this.mapping.axisMeshNames.length;e++)(n=this.mapping.axisMeshNames[e])?(i=o.getObjectByName(n))?(r={index:e,value:s(i,"VALUE"),min:s(i,"MIN"),max:s(i,"MAX")}).value&&r.min&&r.max?a.axisMeshes[e]=r:u("Missing axis submesh under mesh with name: "+n+"(VALUE: "+!!r.value+", MIN: "+!!r.min+", MAX:"+!!r.max+")"):u("Missing axis mesh with name: "+n):l("Skipping unknown axis at index: "+e);this.calculateRayOriginFromMesh(o),this.setModelVisibility()}function s(t,e){for(var n=0,i=t.children.length;n<i;n++){var r=t.children[n];if(r&&r.name===e)return r}}l("Model load complete.")},calculateRayOriginFromMesh:(i=new THREE.Quaternion,function(t){var e;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,e=t.getObjectByName(this.mapping.pointingPoseMeshName)){var n=t.parent;n&&(t.parent=null,t.updateMatrixWorld(!0),t.parent=n),e.getWorldPosition(this.rayOrigin.origin),e.getWorldQuaternion(i),this.rayOrigin.direction.applyQuaternion(i),n&&t.updateMatrixWorld(!0)}else l("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}),lerpAxisTransform:function(){var t=new THREE.Quaternion;return function(e,n){var i=this.loadedMeshInfo.axisMeshes[e];if(i){var r=i.min,o=i.max,a=i.value,s=.5*n+.5;a.setRotationFromQuaternion(t.copy(r.quaternion).slerp(o.quaternion,s)),a.position.lerpVectors(r.position,o.position,s)}}}(),lerpButtonTransform:function(){var t=new THREE.Quaternion;return function(e,n){var i=this.loadedMeshInfo.buttonMeshes[e];if(i){var r=i.unpressed,o=i.pressed,a=i.value;a.setRotationFromQuaternion(t.copy(r.quaternion).slerp(o.quaternion,n)),a.position.lerpVectors(r.position,o.position,n)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id];e&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(e,t.detail.state.value),this.el.emit(e+"changed",t.detail.state))},onAxisMoved:function(t){var e=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var n=0;n<e;n++)this.lerpAxisTransform(n,t.detail.axis[n]||0);this.emitIfAxesChanged(this,this.mapping.axes,t)},setModelVisibility:function(t){var e=this.el.getObject3D("mesh");t=void 0!==t?t:this.modelVisible,this.modelVisible=t,e&&(e.visible=t)}})},{"../constants":92,"../core/component":101,"../utils/":171,"../utils/bind":165,"../utils/tracked-controls":177}],91:[function(t,e,n){var i=t("@tweenjs/tween.js"),r={alternate:"alternate",alternateReverse:"alternate-reverse",normal:"normal",reverse:"reverse"},o={linear:i.Easing.Linear.None,ease:i.Easing.Cubic.InOut,"ease-in":i.Easing.Cubic.In,"ease-out":i.Easing.Cubic.Out,"ease-in-out":i.Easing.Cubic.InOut,"ease-cubic":i.Easing.Cubic.In,"ease-in-cubic":i.Easing.Cubic.In,"ease-out-cubic":i.Easing.Cubic.Out,"ease-in-out-cubic":i.Easing.Cubic.InOut,"ease-quad":i.Easing.Quadratic.InOut,"ease-in-quad":i.Easing.Quadratic.In,"ease-out-quad":i.Easing.Quadratic.Out,"ease-in-out-quad":i.Easing.Quadratic.InOut,"ease-quart":i.Easing.Quartic.InOut,"ease-in-quart":i.Easing.Quartic.In,"ease-out-quart":i.Easing.Quartic.Out,"ease-in-out-quart":i.Easing.Quartic.InOut,"ease-quint":i.Easing.Quintic.InOut,"ease-in-quint":i.Easing.Quintic.In,"ease-out-quint":i.Easing.Quintic.Out,"ease-in-out-quint":i.Easing.Quintic.InOut,"ease-sine":i.Easing.Sinusoidal.InOut,"ease-in-sine":i.Easing.Sinusoidal.In,"ease-out-sine":i.Easing.Sinusoidal.Out,"ease-in-out-sine":i.Easing.Sinusoidal.InOut,"ease-expo":i.Easing.Exponential.InOut,"ease-in-expo":i.Easing.Exponential.In,"ease-out-expo":i.Easing.Exponential.Out,"ease-in-out-expo":i.Easing.Exponential.InOut,"ease-circ":i.Easing.Circular.InOut,"ease-in-circ":i.Easing.Circular.In,"ease-out-circ":i.Easing.Circular.Out,"ease-in-out-circ":i.Easing.Circular.InOut,"ease-elastic":i.Easing.Elastic.InOut,"ease-in-elastic":i.Easing.Elastic.In,"ease-out-elastic":i.Easing.Elastic.Out,"ease-in-out-elastic":i.Easing.Elastic.InOut,"ease-back":i.Easing.Back.InOut,"ease-in-back":i.Easing.Back.In,"ease-out-back":i.Easing.Back.Out,"ease-in-out-back":i.Easing.Back.InOut,"ease-bounce":i.Easing.Bounce.InOut,"ease-in-bounce":i.Easing.Bounce.In,"ease-out-bounce":i.Easing.Bounce.Out,"ease-in-out-bounce":i.Easing.Bounce.InOut},a={backwards:"backwards",both:"both",forwards:"forwards",none:"none"},s={attribute:"rotation",begin:"",end:"",delay:0,dur:1e3,easing:"ease",direction:r.normal,fill:a.forwards,from:void 0,repeat:0,to:void 0};e.exports.defaults=s,e.exports.directions=r,e.exports.easingFunctions=o,e.exports.fills=a,e.exports.repeats={indefinite:"indefinite"}},{"@tweenjs/tween.js":1}],92:[function(t,e,n){e.exports={AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",animation:t("./animation"),keyboardevent:t("./keyboardevent")}},{"./animation":91,"./keyboardevent":93}],93:[function(t,e,n){e.exports={KEYCODE_TO_CODE:{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}}},{}],94:[function(t,e,n){var i=t("./a-node"),r=t("../constants/animation"),o=t("../utils/").coordinates,a=t("./schema").parseProperty,s=t("./a-register-element").registerElement,c=t("@tweenjs/tween.js"),l=t("../lib/three"),u=t("../utils/"),h=u.bind,d=u.entity.getComponentProperty,p=r.defaults,f=r.directions,m=r.easingFunctions,g=r.fills,v=r.repeats,y=o.isCoordinates;function A(t){return u.extend({},t)}function w(t,e,n,i,r){var s,c,u,h,p,f=e.split("."),m={},g={};return 2===f.length?function(){var e=f[0],n=f[1],i=t.components[e],r=i&&i.schema;return r&&r[n]&&"color"===r[n].type}()?v():(h=f[0],u=f[1],(c=t.components[h])||(t.setAttribute(h,""),c=t.components[h]),s=c.schema,m[e]=void 0===n?d(t,e):n,m[e]=a(m[e],s[u]),g[e]=a(i,s[u]),p=function(n){e in n&&t.setAttribute(h,u,n[e])}):i&&y(i)?(m=n?o.parse(n):r,g=o.parse(i),p=function(n){t.setAttribute(e,n)}):-1!==["true","false"].indexOf(i)?(m[e]=void 0!==n&&b(n),m[e]=M(m[e]),g[e]=M(b(i)),p=function(n){t.setAttribute(e,!!n[e])}):isNaN(i)?v():(m[e]=void 0===n?parseFloat(t.getAttribute(e)):parseFloat(n),g[e]=parseFloat(i),p=function(n){t.setAttribute(e,n[e])}),{from:m,partialSetAttribute:p,to:g};function v(){m=new l.Color(n||t.getAttribute(e)),g=new l.Color(i),p=function(n){f.length>1&&t.setAttribute(f[0],f[1],E(n)),t.setAttribute(e,E(n))}}}function b(t){return"true"===t}function M(t){return t?1:0}function E(t){return"#"+["r","g","b"].map(function(e){return function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}(function(t){return Math.floor(255*Math.min(Math.abs(t),1))}(t[e]))}).join("")}e.exports.AAnimation=s("a-animation",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.bindMethods(),this.isRunning=!1,this.partialSetAttribute=function(){},this.tween=null}},attachedCallback:{value:function(){this.el=this.parentNode,this.handleMixinUpdate(),this.update(),this.load()}},attributeChangedCallback:{value:function(t,e,n){this.hasLoaded&&this.isRunning&&(this.stop(),this.handleMixinUpdate(),this.update())}},detachedCallback:{value:function(){this.isRunning&&this.stop()}},getTween:{value:function(){var t,e,n,i,r=this,o=r.data,a=r.el,s=o.attribute,l=parseInt(o.delay,10),u=d(a,s),p=r.getDirection(o.direction),y=m[o.easing],b=o.fill,M=o.repeat===v.indefinite?1/0:0,E=!1;return e=(t=w(a,s,o.from||r.initialValue,o.to,u)).from,n=t.to,r.partialSetAttribute=t.partialSetAttribute,void 0===r.count&&(r.count=M===1/0?0:parseInt(o.repeat,10)),isNaN(l)&&(l=0),r.initialValue=r.initialValue||A(u),M===1/0&&b===g.forwards&&-1!==[f.alternate,f.alternateReverse].indexOf(o.direction)&&(E=!0),p===f.reverse&&(i=n,n=A(e),e=A(i)),-1!==[g.backwards,g.both].indexOf(b)&&r.partialSetAttribute(e),new c.Tween(A(e)).to(n,o.dur).delay(l).easing(y).repeat(M).yoyo(E).onUpdate(function(){r.partialSetAttribute(this)}).onComplete(h(r.onCompleted,r))}},update:{value:function(){var t=this.data;t.repeat,""===t.begin||isNaN(t.begin)||(t.delay=t.begin,t.begin="");var e=t.begin,n=t.end;this.evt&&this.removeEventListeners(this.evt),this.evt={begin:e,end:n},this.addEventListeners(this.evt),""===e&&(this.stop(),this.start())},writable:window.debug},onCompleted:{value:function(){var t=this.data;if(this.isRunning=!1,-1!==[g.backwards,g.none].indexOf(t.fill)&&this.partialSetAttribute(this.initialValue),0===this.count)return this.count=void 0,void this.emit("animationend");this.isRunning=!1,this.count--,this.start()}},start:{value:function(){var t=this;this.el.hasLoaded?!this.isRunning&&this.el.isPlaying&&(this.tween=this.getTween(),this.isRunning=!0,this.tween.start(),this.emit("animationstart")):this.el.addEventListener("loaded",function(){t.start()})},writable:!0},stop:{value:function(){var t=this.tween;t&&(t.stop(),this.isRunning=!1,-1!==[g.backwards,g.none].indexOf(this.data.fill)&&this.partialSetAttribute(this.initialValue),this.emit("animationstop"))},writable:!0},getDirection:{value:function(t){return t===f.alternate?(this.prevDirection=this.prevDirection===f.normal?f.reverse:f.normal,this.prevDirection):t===f.alternateReverse?(this.prevDirection=this.prevDirection===f.reverse?f.normal:f.reverse,this.prevDirection):t}},bindMethods:{value:function(){this.start=h(this.start,this),this.stop=h(this.stop,this),this.onStateAdded=h(this.onStateAdded,this),this.onStateRemoved=h(this.onStateRemoved,this)}},addEventListeners:{value:function(t){var e=this.el,n=this;u.splitString(t.begin).forEach(function(t){e.addEventListener(t,n.start)}),u.splitString(t.end).forEach(function(t){e.addEventListener(t,n.stop)}),""===t.begin&&e.addEventListener("play",this.start),e.addEventListener("pause",this.stop),e.addEventListener("stateadded",this.onStateAdded),e.addEventListener("stateremoved",this.onStateRemoved)}},removeEventListeners:{value:function(t){var e=this.el,n=this.start,i=this.stop;u.splitString(t.begin).forEach(function(t){e.removeEventListener(t,n)}),u.splitString(t.end).forEach(function(t){e.removeEventListener(t,i)}),e.removeEventListener("stateadded",this.onStateAdded),e.removeEventListener("stateremoved",this.onStateRemoved)}},onStateAdded:{value:function(t){t.detail===this.data.begin&&this.start()},writable:!0},onStateRemoved:{value:function(t){t.detail===this.data.begin&&this.stop()},writable:!0},handleMixinUpdate:{value:function(){var t,e,n,i={};e=(n=document.querySelector("#"+this.getAttribute("mixin")))?u.getElData(n,p):{},t=u.getElData(this,p),u.extend(i,p,e,t),this.data=i}}})}),e.exports.getAnimationValues=w},{"../constants/animation":91,"../lib/three":149,"../utils/":171,"./a-node":99,"./a-register-element":100,"./schema":109,"@tweenjs/tween.js":1}],95:[function(t,e,n){var i=t("./a-node"),r=t("../utils/bind"),o=t("../utils/debug"),a=t("./a-register-element").registerElement,s=t("../lib/three"),c=new s.FileLoader,l=o("core:a-assets:warn");function u(t){if(t.hasAttribute("autoplay")||"auto"===t.getAttribute("preload"))return new Promise(function(e,n){if(4===t.readyState)return e();if(t.error)return n();function i(){for(var n=0,i=0;i<t.buffered.length;i++)n+=t.buffered.end(i)-t.buffered.start(i);n>=t.duration&&(s.Cache.files[t.getAttribute("src")]=t,e())}t.addEventListener("loadeddata",i,!1),t.addEventListener("progress",i,!1),t.addEventListener("error",n,!1)})}function h(t){var e=function(t){var e,n,i;if(t.hasAttribute("crossorigin"))return t;if(null!==(e=t.getAttribute("src"))){if(-1===e.indexOf("://"))return t;if((i=(n=e).indexOf("://")>-1?n.split("/")[2]:n.split("/")[0]).substring(0,i.indexOf(":"))===window.location.host)return t}return l('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',e),t.crossOrigin="anonymous",t.cloneNode(!0)}(t);return e.tagName&&"video"===e.tagName.toLowerCase()&&(e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline","")),e!==t&&(t.parentNode.appendChild(e),t.parentNode.removeChild(t)),e}function d(t){var e=t.lastIndexOf(".");if(e>=0){var n=t.slice(e,t.length);if(".gltf"===n||".glb"===n)return"arraybuffer"}return"text"}e.exports=a("a-assets",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.isAssets=!0,this.fileLoader=c,this.timeout=null}},attachedCallback:{value:function(){var t,e,n,i,o,a,c=this,d=[];if(!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(o=this.querySelectorAll("img"),t=0;t<o.length;t++)i=h(o[t]),d.push(new Promise(function(e,n){s.Cache.files[o[t].getAttribute("src")]=i,i.onload=e,i.onerror=n}));for(n=this.querySelectorAll("audio, video"),t=0;t<n.length;t++)(e=h(n[t])).src||e.srcObject||l("Audio/video asset has neither `src` nor `srcObject` attributes."),d.push(u(e));Promise.all(d).then(r(this.load,this)),a=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){c.hasLoaded||(l("Asset loading timed out in ",a,"ms"),c.emit("timeout"),c.load())},a)}},detachedCallback:{value:function(){this.timeout&&clearTimeout(this.timeout)}},load:{value:function(){i.prototype.load.call(this,null,function(t){return t.isAssetItem&&t.hasAttribute("src")})}}})}),a("a-asset-item",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.data=null,this.isAssetItem=!0}},attachedCallback:{value:function(){var t=this,e=this.getAttribute("src");c.setResponseType(this.getAttribute("response-type")||d(e)),c.load(e,function(e){t.data=e,setTimeout(function(){i.prototype.load.call(t)})},function(e){t.emit("progress",{loadedBytes:e.loaded,totalBytes:e.total,xhr:e})},function(e){t.emit("error",{xhr:e})})}}})}),e.exports.inferResponseType=d},{"../lib/three":149,"../utils/bind":165,"../utils/debug":167,"./a-node":99,"./a-register-element":100}],96:[function(t,e,n){var i=t("../utils/debug"),r=t("./a-register-element").registerElement,o=i("core:cubemap:warn");e.exports=r("a-cubemap",{prototype:Object.create(window.HTMLElement.prototype,{attachedCallback:{value:function(){this.srcs=this.validate()},writable:window.debug},validate:{value:function(){var t,e=this.querySelectorAll("[src]"),n=[];if(6===e.length){for(t=0;t<e.length;t++)n.push(e[t].getAttribute("src"));return n}o("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")},writable:window.debug}})})},{"../utils/debug":167,"./a-register-element":100}],97:[function(t,e,n){var i,r=t("./a-node"),o=t("./component").components,a=t("./a-register-element").registerElement,s=t("../lib/three"),c=t("../utils/"),l=c.debug("core:a-entity:debug"),u=c.debug("core:a-entity:warn"),h="__",d=Object.create(r.prototype,{defaultComponents:{value:{position:"",rotation:"",scale:"",visible:""}},createdCallback:{value:function(){this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new s.Group,this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}},attributeChangedCallback:{value:function(t,e,n){var i=this.components[t];i&&i.justInitialized&&""===n?delete i.justInitialized:(i||null!==n)&&this.setEntityAttribute(t,e,n)}},attachedCallback:{value:function(){var t,e=this.sceneEl,n=this;this.addToParent(),this.isScene||(e?!(t=e.querySelector("a-assets"))||t.hasLoaded?this.load():t.addEventListener("loaded",function(){n.load()}):this.load())}},detachedCallback:{value:function(){var t;if(this.parentEl){for(t in this.components)this.removeComponent(t);this.isScene||(this.removeFromParent(),r.prototype.detachedCallback.call(this),this.object3D.el=null)}}},handleMixinUpdate:{value:function(t){t?this.updateComponent(t,this.getDOMAttribute(t)):this.updateComponents()}},getObject3D:{value:function(t){return this.object3DMap[t]}},setObject3D:{value:function(t,e){var n,i=this;if(!(e instanceof s.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");(n=this.getObject3D(t))&&this.object3D.remove(n),e.el=this,e.children.length&&e.traverse(function(t){t.el=i}),this.object3D.add(e),this.object3DMap[t]=e,this.emit("object3dset",{object:e,type:t})}},removeObject3D:{value:function(t){var e=this.getObject3D(t);e?(this.object3D.remove(e),delete this.object3DMap[t],this.emit("object3dremove",{type:t})):u("Tried to remove `Object3D` of type:",t,"which was not defined.")}},getOrCreateObject3D:{value:function(t,e){var n=this.getObject3D(t);return!n&&e&&(n=new e,this.setObject3D(t,n)),u("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),n}},add:{value:function(t){if(!t.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(t.object3D),this.emit("child-attached",{el:t})}},addToParent:{value:function(){var t=this.parentEl=this.parentNode;t&&t.add&&!this.attachedToParent&&(t.add(this),this.attachedToParent=!0)}},removeFromParent:{value:function(){var t=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=this.parentNode=null,t.emit("child-detached",{el:this})}},load:{value:function(){var t=this;!this.hasLoaded&&this.parentEl&&r.prototype.load.call(this,function(){t.parentEl&&(t.updateComponents(),(t.isScene||t.parentEl.isPlaying)&&t.play())})},writable:window.debug},remove:{value:function(t){this.object3D.remove(t.object3D)}},getChildEntities:{value:function(){for(var t=this.children,e=[],n=0;n<t.length;n++){var r=t[n];r instanceof i&&e.push(r)}return e}},initComponent:{value:function(t,e,n){var i,r,a,s,u,d;if(r=(a=c.split(t,h))[1],s=a[0],o[s]&&(d=t,void 0!==(u=this).defaultComponents[d]||u.components[d]&&u.components[d].attrValue||function(t,e){var n,i=!1;for(n=0;n<e.length&&!(i=e[n].hasAttribute(t));++n);return i}(d,u.mixinEls)||void 0!==e||n)&&!(t in this.components)){if(this.initComponentDependencies(s),r&&!o[s].multiple)throw new Error("Trying to initialize multiple components of type `"+s+"`. There can only be one component of this type per entity.");i=new o[s].Component(this,e,r),this.isPlaying&&i.play(),this.hasAttribute(t)||(i.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,t,"")),l("Component initialized: %s",t)}},writable:window.debug},initComponentDependencies:{value:function(t){var e,n;if(o[t]&&(e=o[t].dependencies))for(n=0;n<e.length;n++)this.initComponent(e[n],window.HTMLElement.prototype.getAttribute.call(this,e[n])||void 0,!0)}},removeComponent:{value:function(t){var e;t in this.defaultComponents||(e=this.components[t])&&(e.initialized?(e.pause(),e.remove(),delete this.components[t],this.emit("componentremoved",e.evtDetail)):this.addEventListener("componentinitialized",function e(n){n.detail.name===t&&(this.removeComponent(t),this.removeEventListener("componentinitialized",e))}))},writable:window.debug},updateComponents:{value:function(){var t,e,n,i,r=this.componentsToUpdate;if(this.hasLoaded){for(n=0;n<this.mixinEls.length;n++)for(i in this.mixinEls[n].componentCache)f(i)&&(r[i]=!0);if(this.getExtraComponents)for(i in e=this.getExtraComponents())f(i)&&(r[i]=!0);for(n=0;n<this.attributes.length;++n)f(i=this.attributes[n].name)&&(r[i]=!0);for(i in this.defaultComponents)t=p(this.getDOMAttribute(i),e&&e[i]),this.updateComponent(i,t),delete r[i];for(i in r)t=p(this.getDOMAttribute(i),e&&e[i]),this.updateComponent(i,t),delete r[i]}},writable:window.debug},updateComponent:{value:function(t,e,n){var i=this.components[t],r=t in this.defaultComponents;if(i)return null!==e||r?void i.updateProperties(e,n):void this.removeComponent(t);this.initComponent(t,e,!1)}},removeAttribute:{value:function(t,e){var n=this.components[t];n&&void 0===e&&(this.removeComponent(t),this.components[t])||(n&&void 0!==e?n.resetProperty(e):("mixin"===t&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,t)))}},play:{value:function(){var t,e,n;if(!this.isPlaying&&this.hasLoaded){for(n in this.isPlaying=!0,this.components)this.components[n].play();for(t=this.getChildEntities(),e=0;e<t.length;e++)t[e].play();this.emit("play")}},writable:!0},pause:{value:function(){var t,e,n;if(this.isPlaying){for(n in this.isPlaying=!1,this.components)this.components[n].pause();for(t=this.getChildEntities(),e=0;e<t.length;e++)t[e].pause();this.emit("pause")}},writable:!0},setEntityAttribute:{value:function(t,e,n){if(o[t]||this.components[t])this.updateComponent(t,n);else if("mixin"===t){if(n===this.computedMixinStr)return;this.mixinUpdate(n,e)}}},mixinUpdate:{value:function(t,e){e=e||this.getAttribute("mixin"),this.updateMixins(t,e),this.updateComponents()}},setAttribute:{value:function(t,e,n){var i,a,s,l;if(s=(l=t.indexOf(h))>0?t.substring(0,l):t,!o[s])return"mixin"===t&&this.mixinUpdate(e),void r.prototype.setAttribute.call(this,t,e);!this.components[t]&&this.hasAttribute(t)&&this.updateComponent(t,window.HTMLElement.prototype.getAttribute.call(this,t)),void 0!==n&&"string"==typeof e&&e.length>0&&"string"==typeof c.styleParser.parse(e)?((i={})[e]=n,a=!1):(i=e,a=!0===n),this.updateComponent(t,i,a),this.sceneEl&&this.sceneEl.getAttribute("debug")&&this.components[t].flushToDOM()},writable:window.debug},flushToDOM:{value:function(t){var e,n,i,r=this.components,o=this.defaultComponents,a=this.children;for(i in r)r[i].flushToDOM(i in o);if(t)for(n=0;n<a.length;++n)(e=a[n]).flushToDOM&&e.flushToDOM(t)}},getAttribute:{value:function(t){var e,n,i,r,o;return"position"===t?this.object3D.position:"rotation"===t?(n=this,i=s.Math.radToDeg,r=n.object3D.rotation,(o=n.rotationObj).x=i(r.x),o.y=i(r.y),o.z=i(r.z),o):"scale"===t?this.object3D.scale:"visible"===t?this.object3D.visible:(e=this.components[t])?e.data:window.HTMLElement.prototype.getAttribute.call(this,t)},writable:window.debug},getComputedAttribute:{value:function(t){return u("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(t)}},getDOMAttribute:{value:function(t){var e=this.components[t];return e?e.attrValue:window.HTMLElement.prototype.getAttribute.call(this,t)},writable:window.debug},addState:{value:function(t){this.is(t)||(this.states.push(t),this.emit("stateadded",t))}},removeState:{value:function(t){var e=this.states.indexOf(t);-1!==e&&(this.states.splice(e,1),this.emit("stateremoved",t))}},is:{value:function(t){return-1!==this.states.indexOf(t)}}});function p(t,e){return e?e.constructor===Object?c.extend(e,c.styleParser.parse(t||{})):t||e:t}function f(t){return-1!==t.indexOf(h)&&(t=c.split(t,h)[0]),!!o[t]}i=a("a-entity",{prototype:d}),e.exports=i},{"../lib/three":149,"../utils/":171,"./a-node":99,"./a-register-element":100,"./component":101}],98:[function(t,e,n){var i=t("./a-node"),r=t("./a-register-element").registerElement,o=t("./component").components,a=t("../utils");e.exports=r("a-mixin",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.componentCache={},this.id=this.getAttribute("id"),this.isMixin=!0}},attributeChangedCallback:{value:function(t,e,n){this.cacheAttribute(t,n)}},attachedCallback:{value:function(){this.sceneEl=this.closestScene(),this.cacheAttributes(),this.updateEntities(),this.load()}},setAttribute:{value:function(t,e){window.HTMLElement.prototype.setAttribute.call(this,t,e),this.cacheAttribute(t,e)}},cacheAttribute:{value:function(t,e){var n,i;i=a.split(t,"__")[0],(n=o[i])&&(void 0===e&&(e=window.HTMLElement.prototype.getAttribute.call(this,t)),this.componentCache[t]=n.parseAttrValueForCache(e))}},getAttribute:{value:function(t){return this.componentCache[t]||window.HTMLElement.prototype.getAttribute.call(this,t)}},cacheAttributes:{value:function(){var t,e,n=this.attributes;for(e=0;e<n.length;e++)t=n[e].name,this.cacheAttribute(t)}},updateEntities:{value:function(){var t,e,n;if(this.sceneEl)for(e=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),n=0;n<e.length;n++)(t=e[n]).hasLoaded&&!t.isMixin&&t.mixinUpdate(this.id)}}})})},{"../utils":171,"./a-node":99,"./a-register-element":100,"./component":101}],99:[function(t,e,n){var i,r,o,a=t("./a-register-element").registerElement,s=t("./a-register-element").isNode,c=t("../utils/"),l=c.debug("core:a-node:warn"),u={attributes:!0};e.exports=a("a-node",{prototype:Object.create(window.HTMLElement.prototype,{createdCallback:{value:function(){this.computedMixinStr="",this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[],this.mixinObservers={}},writable:window.debug},attachedCallback:{value:function(){var t;this.sceneEl=this.closestScene(),this.sceneEl||l("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(t=this.getAttribute("mixin"))&&this.updateMixins(t)},writable:window.debug},attributeChangedCallback:{value:function(t,e,n){n!==this.computedMixinStr&&("mixin"!==t||this.isMixin||this.updateMixins(n,e))}},closestScene:{value:function(){for(var t=this;t&&!t.isScene;)t=t.parentElement;return t}},closest:{value:function(t){for(var e=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,n=this;n&&!e.call(n,t);)n=n.parentElement;return n}},detachedCallback:{value:function(){this.hasLoaded=!1}},load:{value:function(t,e){var n,i=this;this.hasLoaded||(e=e||s,n=this.getChildren().filter(e).map(function(t){return new Promise(function(e){if(t.hasLoaded)return e();t.addEventListener("loaded",e)})}),Promise.all(n).then(function(){i.hasLoaded=!0,t&&t(),i.emit("loaded",void 0,!1)}))},writable:!0},getChildren:{value:function(){return Array.prototype.slice.call(this.children,0)}},updateMixins:{value:(r=[],o=[],function(t,e){var n,i,a;for(r.length=0,o.length=0,i=t?c.split(t.trim(),/\s+/):r,a=e?c.split(e.trim(),/\s+/):o,n=0;n<a.length;n++)-1===i.indexOf(a[n])&&this.unregisterMixin(a[n]);for(this.computedMixinStr="",this.mixinEls.length=0,n=0;n<i.length;n++)this.registerMixin(document.getElementById(i[n]));this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr))})},registerMixin:{value:function(t){var e,n,i;if(t){if(i=t.getAttribute("mixin"))for(e=c.split(i.trim(),/\s+/),n=0;n<e.length;n++)this.registerMixin(document.getElementById(e[n]));this.computedMixinStr=this.computedMixinStr+" "+t.id,this.mixinEls.push(t),this.attachMixinListener(t)}}},setAttribute:{value:function(t,e){"mixin"===t&&this.updateMixins(e),window.HTMLElement.prototype.setAttribute.call(this,t,e)}},unregisterMixin:{value:function(t){var e,n=this.mixinEls;for(e=0;e<n.length;++e)if(t===n[e].id){n.splice(e,1);break}this.removeMixinListener(t)}},removeMixinListener:{value:function(t){var e=this.mixinObservers[t];e&&(e.disconnect(),this.mixinObservers[t]=null)}},attachMixinListener:{value:function(t){var e,n,i=this;t&&(e=t.id,this.mixinObservers[e]||((n=new MutationObserver(function(t){i.handleMixinUpdate(t[0].attributeName)})).observe(t,u),this.mixinObservers[e]=n))}},handleMixinUpdate:{value:function(){}},emit:{value:(i={},function(t,e,n,r){void 0===n&&(n=!0),i.bubbles=!!n,i.detail=e,r&&(i=c.extend({},r,i)),this.dispatchEvent(new CustomEvent(t,i))}),writable:window.debug}})})},{"../utils/":171,"./a-register-element":100}],100:[function(t,e,n){var i,r;t("document-register-element");var o=e.exports.knownTags={};function a(t,e,n,i){e.forEach(function(e){!function(t,e,n,i){var r=n[e],o=i[e];r&&o&&r!==o&&(t[e]={value:function(){return o.apply(this,arguments),r.apply(this,arguments)},writable:window.debug})}(t,e,n,i)})}function s(t,e){Object.getOwnPropertyNames(t).forEach(function(n){var i;e[n]||(i=Object.getOwnPropertyDescriptor(t,n),e[n]={value:t[n],writable:i.writable})})}e.exports.isNode=function(t){return t.tagName.toLowerCase()in o||t.isNode},e.exports.registerElement=function(t,e){var n=Object.getPrototypeOf(e.prototype),c=e,l=i&&n===i.prototype,u=r&&n===r.prototype;for(var h of((l||u)&&function(t){o[t.toLowerCase()]=!0}(t),l&&(c=function(t){var e={};return a(e,["attachedCallback","attributeChangedCallback","createdCallback"],t,i.prototype),s(t,e),e}(e.prototype),c={prototype:Object.create(n,c)}),u&&(c=function(t){var e={};return a(e,["attachedCallback","attributeChangedCallback","createdCallback"],t,i.prototype),a(e,["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"],t,r.prototype),s(t,e),e}(e.prototype),c={prototype:Object.create(n,c)}),Object.getOwnPropertyNames(c.prototype))){var d=c.prototype[h];"function"==typeof d&&(d.displayName=h)}return document.registerElement(t,c)},e.exports.wrapMethods=a,i=t("./a-node"),r=t("./a-entity")},{"./a-entity":97,"./a-node":99,"document-register-element":12}],101:[function(t,e,n){var i=t("./schema"),r=t("./scene/scenes"),o=t("./system"),a=t("../utils/"),s=e.exports.components={},c=i.parseProperties,l=i.parseProperty,u=i.process,h=i.isSingleProperty,d=i.stringifyProperties,p=i.stringifyProperty,f=a.styleParser,m=a.debug("core:component:warn"),g=document.currentScript,v=new RegExp("[A-Z]+"),y=e.exports.Component=function(t,e,n){var i=this;this.el=t,this.id=n,this.attrName=this.name+(n?"__"+n:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.oldData=void 0,this.previousAttrValue=void 0,this.throttledEmitComponentChanged=a.throttle(function(){t.emit("componentchanged",i.evtDetail,!1)},200),this.updateProperties(e)};if(y.prototype={schema:{},init:function(){},update:function(t){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},parse:function(t,e){var n=this.schema;return h(n)?l(t,n):c(f.parse(t),n,!0,this.name,e)},stringify:function(t){var e=this.schema;return"string"==typeof t?t:h(e)?p(t,e):(t=d(t,e),f.stringify(t))},updateCachedAttrValue:function(t,e){var n,i=this.parseAttrValueForCache(t),r=h(this.schema);if(void 0!==t)if(r||e)this.attrValue=i;else for(n in this.attrValue=this.attrValue?w(this.attrValue):{},i)this.attrValue[n]=i[n]},parseAttrValueForCache:function(t){var e;return"string"!=typeof t?t:(h(this.schema)?"string"==typeof(e=this.schema.parse(t))&&(e=t):e=f.parse(t),e)},flushToDOM:function(t){var e=t?this.data:this.attrValue;e&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(e))},updateProperties:function(t,e){var n,i,r,o=this.el,s=this.oldData;if(o.hasLoaded){if(n=h(this.schema),r=null!==t&&"object"==typeof this.previousAttrValue&&t===this.previousAttrValue){for(i in this.attrValue)if(!(i in t)){r=!1;break}for(i in t)if(!(i in this.attrValue)){r=!1;break}}if(this.previousAttrValue=t,t=this.parseAttrValueForCache(t),this.updateCachedAttrValue(t,e),this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!1,!0)),this.data=this.buildData(this.attrValue,e,!1,r),this.initialized){if(a.deepEqual(this.oldData,this.data))return;this.oldData=b({},this.data,n),this.update(s),this.throttledEmitComponentChanged()}else{if(o.initializingComponents[this.name])return;o.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete o.initializingComponents[this.name],s=n&&"object"!=typeof l(void 0,this.schema)?void 0:{},this.oldData=b({},this.data,n),this.update(s),o.isPlaying&&this.play(),o.emit("componentinitialized",this.evtDetail,!1)}}else this.updateCachedAttrValue(t)},resetProperty:function(t){if(h(this.schema))this.attrValue=void 0;else{if(!(t in this.attrValue))return;delete this.attrValue[t]}this.updateProperties(this.attrValue)},extendSchema:function(t){var e=a.extend({},s[this.name].schema);a.extend(e,t),this.schema=u(e),this.el.emit("schemachanged",{component:this.name})},buildData:function(t,e,n,i){var r,o,s,u,d,p,f,m,g=this.schema,v=h(g),y=this.el.mixinEls;if(r=t&&t.constructor===Array?t.length:void 0!==t&&null!==t,v)o=E(g.default)?a.clone(g.default):g.default;else for(o="object"==typeof(m=!e&&this.attrValue)?w(m):{},f=0,d=(u=Object.keys(g)).length;f<d;f++)s=g[u[f]].default,void 0===o[u[f]]&&(o[u[f]]=E(s)?a.clone(s):s);for(f=0;f<y.length;f++)(p=y[f].getAttribute(this.attrName))&&(o=b(o,p,v));if(r){if(v)return!0===i?t:l(t,g);o=b(o,t,v)}else{if(!0===i)return o;if(v)return l(o,g)}return!0===i?o:c(o,g,void 0,this.name,n)}},window.debug)var A=e.exports.registrationOrderWarnings={};function w(t){var e,n,i={};for(n in t)e=t[n],i[n]=E(e)?a.clone(e):e;return i}function b(t,e,n){if(n&&(null===e||"object"!=typeof e))return e;var i,r=a.extend(t,e);for(i in r)r[i]&&r[i].constructor===Object&&(r[i]=a.clone(r[i]));return r}function M(t){return t.tick||t.tock}function E(t){return t&&(t.constructor===Object||t.constructor===Array)}e.exports.registerComponent=function(t,e){var n,i,c,l={};if(document.currentScript&&document.currentScript!==g&&r.forEach(function(e){e.hasLoaded||document.currentScript.compareDocumentPosition(e)!==Node.DOCUMENT_POSITION_FOLLOWING&&(m("The component `"+t+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(A[t]=!0))}),!0===v.test(t)&&m("The component name `"+t+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+t.toLowerCase()+"`"),-1!==t.indexOf("__"))throw new Error("The component name `"+t+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(e).forEach(function(t){l[t]={value:e[t],writable:!0}}),s[t])throw new Error("The component `"+t+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");return((n=function(t,e,n){y.call(this,t,e,n)}).prototype=Object.create(y.prototype,l)).name=t,n.prototype.constructor=n,n.prototype.system=o&&o.systems[t],n.prototype.play=(i=n.prototype.play,function(){var t=this.el.sceneEl,e=this.el.isPlaying&&!this.isPlaying;this.initialized&&e&&(i.call(this),this.isPlaying=!0,M(this)&&t.addBehavior(this))}),n.prototype.pause=(c=n.prototype.pause,function(){var t=this.el.sceneEl;this.isPlaying&&(c.call(this),this.isPlaying=!1,M(this)&&t.removeBehavior(this))}),s[t]={Component:n,dependencies:n.prototype.dependencies,isSingleProp:h(n.prototype.schema),multiple:n.prototype.multiple,parse:n.prototype.parse,parseAttrValueForCache:n.prototype.parseAttrValueForCache,schema:a.extend(u(n.prototype.schema,n.prototype.name)),stringify:n.prototype.stringify,type:n.prototype.type},n}},{"../utils/":171,"./scene/scenes":107,"./schema":109,"./system":111}],102:[function(t,e,n){var i=t("./schema").process,r=e.exports.geometries={},o=e.exports.geometryNames=[],a=t("../lib/three"),s=e.exports.Geometry=function(){};s.prototype={schema:{},init:function(t){return this.geometry=new a.Geometry,this.geometry},update:function(t){}},e.exports.registerGeometry=function(t,e){var n,a={};if(Object.keys(e).forEach(function(t){a[t]={value:e[t],writable:!0}}),r[t])throw new Error("The geometry `"+t+"` has been already registered");return((n=function(){s.call(this)}).prototype=Object.create(s.prototype,a)).name=t,n.prototype.constructor=n,r[t]={Geometry:n,schema:i(n.prototype.schema)},o.push(t),n}},{"../lib/three":149,"./schema":109}],103:[function(t,e,n){var i=t("../utils/coordinates"),r=t("debug"),o=r("core:propertyTypes:warn"),a=r("core:propertyTypes:warn"),s=e.exports.propertyTypes={},c=/[,> .[\]:]/;function l(t,e,n,i){"type"in s?o("Property type "+t+" is already registered."):s[t]={default:e,parse:n||h,stringify:i||d}}function u(t){var e,n;return"string"!=typeof t?t:(n=t.match(/\url\((.+)\)/))?n[1]:"#"===t.charAt(0)?(e=document.getElementById(t.substring(1)))?"CANVAS"===e.tagName||"VIDEO"===e.tagName||"IMG"===e.tagName?e:e.getAttribute("src"):void a('"'+t+'" asset not found.'):t}function h(t){return t}function d(t){return null===t?"null":t.toString()}function p(t){return parseInt(t,10)}function f(t){return i.parse(t,this.default)}function m(t,e){if(null===t)return!0;if("object"!=typeof t)return!1;if(Object.keys(t).length!==e)return!1;var n=t.x,i=t.y,r=t.z,o=t.w;return!("number"!=typeof n||"number"!=typeof i||e>2&&"number"!=typeof r||e>3&&"number"!=typeof o)}l("audio","",u),l("array",[],function(t){return Array.isArray(t)?t:t&&"string"==typeof t?t.split(",").map(function(t){return t.trim()}):[]},function(t){return t.join(", ")}),l("asset","",u),l("boolean",!1,function(t){return"false"!==t&&!1!==t}),l("color","#FFF",h,d),l("int",0,p),l("number",0,function(t){return parseFloat(t,10)}),l("map","",u),l("model","",u),l("selector",null,function(t){return t?"string"!=typeof t?t:"#"!==t[0]||c.test(t)?document.querySelector(t):document.getElementById(t.substring(1)):null},function(t){return t.getAttribute?"#"+t.getAttribute("id"):d(t)}),l("selectorAll",null,function(t){return t?"string"!=typeof t?t:Array.prototype.slice.call(document.querySelectorAll(t),0):null},function(t){return t instanceof Array?t.map(function(t){return"#"+t.getAttribute("id")}).join(", "):d(t)}),l("src","",function(t){return a("`src` property type is deprecated. Use `asset` instead."),u(t)}),l("string","",h,d),l("time",0,p),l("vec2",{x:0,y:0},f,i.stringify),l("vec3",{x:0,y:0,z:0},f,i.stringify),l("vec4",{x:0,y:0,z:0,w:0},f,i.stringify),e.exports.registerPropertyType=l,e.exports.isValidDefaultValue=function(t,e){return("audio"!==t||"string"==typeof e)&&!("array"===t&&!Array.isArray(e))&&("asset"!==t||"string"==typeof e)&&("boolean"!==t||"boolean"==typeof e)&&("color"!==t||"string"==typeof e)&&("int"!==t||"number"==typeof e)&&("number"!==t||"number"==typeof e)&&("map"!==t||"string"==typeof e)&&("model"!==t||"string"==typeof e)&&("selector"!==t||"string"==typeof e||null===e)&&("selectorAll"!==t||"string"==typeof e||null===e)&&("src"!==t||"string"==typeof e)&&("string"!==t||"string"==typeof e)&&("time"!==t||"number"==typeof e)&&("vec2"===t?m(e,2):"vec3"===t?m(e,3):"vec4"!==t||m(e,4))},e.exports.isValidDefaultCoordinate=m},{"../utils/coordinates":166,debug:9}],104:[function(t,e,n){var i=t("./metaTags").inject,r=t("./wakelock"),o=t("../a-register-element"),a=t("./scenes"),s=t("../system").systems,c=t("../../lib/three"),l=t("@tweenjs/tween.js"),u=t("../../utils/"),h=t("../a-entity"),d=t("../a-node"),p=t("./postMessage"),f=u.bind,m=u.device.isIOS(),g=u.device.isMobile(),v=o.registerElement,y=u.debug("core:a-scene:warn");function A(t){return null!==t.getAttribute("antialias")?"true"===t.getAttribute("antialias"):!t.isMobile}function w(t){var e;function n(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||t.exitVR(),document.activeElement.blur(),document.body.focus()}(e=document.createElement("canvas")).classList.add("a-canvas"),e.dataset.aframeCanvas=!0,t.appendChild(e),document.addEventListener("fullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),e.addEventListener("touchmove",function(t){t.preventDefault()}),t.canvas=e,t.emit("render-target-loaded",{target:e}),setTimeout(f(t.resize,t),0)}e.exports.AScene=v("a-scene",{prototype:Object.create(h.prototype,{defaultComponents:{value:{inspector:"","keyboard-shortcuts":"",screenshot:"","vr-mode-ui":""}},createdCallback:{value:function(){this.isIOS=m,this.isMobile=g,this.isScene=!0,this.object3D=new c.Scene;var t=this;this.object3D.onAfterRender=function(e,n,i){t.isPlaying&&t.tock(t.time,t.delta,i)},this.render=f(this.render,this),this.systems={},this.systemNames=[],this.time=this.delta=0,this.init()}},init:{value:function(){this.behaviors={tick:[],tock:[]},this.hasLoaded=!1,this.isPlaying=!1,this.originalHTML=this.innerHTML,this.renderTarget=null,w(this),this.setupRenderer(),this.resize(),this.addFullScreenStyles(),p(this)},writable:!0},addFullScreenStyles:{value:function(){document.documentElement.classList.add("a-html"),document.body.classList.add("a-body"),this.classList.add("fullscreen")}},removeFullScreenStyles:{value:function(){document.documentElement.classList.remove("a-html"),document.body.classList.remove("a-body"),this.classList.remove("fullscreen")}},attachedCallback:{value:function(){var t,e=this;i(this),r(this),this.initSystems(),t=f(this.resize,this),window.addEventListener("load",t),window.addEventListener("resize",function(){this.isIOS?setTimeout(t,100):t()}),this.play(),a.push(this),this.onVRPresentChangeBound=f(this.onVRPresentChange,this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){e.enterVR()},this.exitVRBound=function(){e.exitVR()},this.exitVRTrueBound=function(){e.exitVR(!0)},this.pointerRestrictedBound=function(){e.pointerRestricted()},this.pointerUnrestrictedBound=function(){e.pointerUnrestricted()},window.addEventListener("vrdisplayactivate",this.enterVRBound),window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)},writable:window.debug},initSystems:{value:function(){Object.keys(s).forEach(f(this.initSystem,this))}},initSystem:{value:function(t){this.systems[t]||(this.systems[t]=new s[t](this),this.systemNames.push(t))}},detachedCallback:{value:function(){var t=a.indexOf(this);a.splice(t,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)}},addBehavior:{value:function(t){var e,n,i=this.behaviors;for(n in i)t[n]&&-1===(e=this.behaviors[n]).indexOf(t)&&e.push(t)}},getPointerLockElement:{value:function(){return document.pointerLockElement},writable:window.debug},checkHeadsetConnected:{value:u.device.checkHeadsetConnected,writable:window.debug},enterVR:{value:function(t){var e,n=this,i=n.renderer.vr;return this.is("vr-mode")?Promise.resolve("Already in VR."):t||!this.checkHeadsetConnected()&&!this.isMobile?(r(),Promise.resolve()):(e=u.device.getVRDisplay(),i.setDevice(e),i.enabled=!0,e.requestPresent([{source:this.canvas}]).then(r,function(t){throw t&&t.message?new Error("Failed to enter VR mode (`requestPresent`): "+t.message):new Error("Failed to enter VR mode (`requestPresent`).")}));function r(){var t;n.addState("vr-mode"),n.emit("enter-vr",{target:n}),n.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),n.addFullScreenStyles(),n.isMobile||n.checkHeadsetConnected()||((t=n.canvas).requestFullscreen||t.webkitRequestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen).apply(t),n.resize()}},writable:!0},exitVR:{value:function(t){var e=this;return this.is("vr-mode")?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),t||!this.checkHeadsetConnected()&&!this.isMobile?(n(),Promise.resolve()):(this.renderer.vr.enabled=!1,u.device.getVRDisplay().exitPresent().then(n,function(t){throw t&&t.message?new Error("Failed to exit VR mode (`exitPresent`): "+t.message):new Error("Failed to exit VR mode (`exitPresent`).")}))):Promise.resolve("Not in VR.");function n(){e.removeState("vr-mode"),e.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.hasAttribute("embedded")&&e.removeFullScreenStyles(),e.resize(),e.isIOS&&u.forceCanvasResizeSafariMobile(this.canvas),e.emit("exit-vr",{target:e})}},writable:!0},pointerRestricted:{value:function(){if(this.canvas){var t=this.getPointerLockElement();t&&t!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}},pointerUnrestricted:{value:function(){var t=this.getPointerLockElement();t&&t===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}},onVRPresentChange:{value:function(t){(t.display||t.detail.display).isPresenting?this.enterVR(!0):this.exitVR(!0)}},getAttribute:{value:function(t){var e=this.systems[t];return e?e.data:h.prototype.getAttribute.call(this,t)}},getComputedAttribute:{value:function(t){y("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(t)}},getDOMAttribute:{value:function(t){var e=this.systems[t];return e?e.data:h.prototype.getDOMAttribute.call(this,t)}},setAttribute:{value:function(t,e,n){var i=this.systems[t];if(i)return d.prototype.setAttribute.call(this,t,e),void i.updateProperties(e);h.prototype.setAttribute.call(this,t,e,n)}},removeBehavior:{value:function(t){var e,n,i,r=this.behaviors;for(n in r)t[n]&&-1!==(i=(e=this.behaviors[n]).indexOf(t))&&e.splice(i,1)}},resize:{value:function(){var t,e,n,i=this.camera,r=this.canvas;this.getAttribute("embedded")&&this.is("vr-mode"),e=this.renderer.vr.getDevice(),n=this.renderer.vr.enabled&&e&&e.isPresenting,!i||!r||this.is("vr-mode")&&(this.isMobile||n)||(t={height:window.innerHeight,width:window.innerWidth},i.aspect=t.width/t.height,i.updateProjectionMatrix(),this.renderer.setSize(t.width,t.height,!1))},writable:!0},setupRenderer:{value:function(){var t,e=this;(t=this.renderer=new c.WebGLRenderer({canvas:this.canvas,antialias:A(this),alpha:!0})).setPixelRatio(window.devicePixelRatio),t.sortObjects=!1,this.addEventListener("camera-set-active",function(){t.vr.setPoseTarget(e.camera.el.object3D)})},writable:window.debug},play:{value:function(){var t=this;this.renderStarted?h.prototype.play.call(this):(this.addEventListener("loaded",function(){function t(t){t.renderStarted||(t.resize(),t.renderer&&(window.performance&&window.performance.mark("render-started"),t.clock=new c.Clock,t.render(),t.renderStarted=!0,t.emit("renderstart")))}h.prototype.play.call(this),this.camera?t(this):this.addEventListener("camera-set-active",function(){t(this)})}),setTimeout(function(){h.prototype.load.call(t)}))}},updateComponent:{value:function(t){t in s||h.prototype.updateComponent.apply(this,arguments)}},tick:{value:function(t,e){var n,i=this.systems;for(l.update(),n=0;n<this.behaviors.tick.length;n++)this.behaviors.tick[n].el.isPlaying&&this.behaviors.tick[n].tick(t,e);for(n=0;n<this.systemNames.length;n++)i[this.systemNames[n]].tick&&i[this.systemNames[n]].tick(t,e)}},tock:{value:function(t,e,n){var i,r=this.systems;for(i=0;i<this.behaviors.tock.length;i++)this.behaviors.tock[i].el.isPlaying&&this.behaviors.tock[i].tock(t,e,n);for(i=0;i<this.systemNames.length;i++)r[this.systemNames[i]].tock&&r[this.systemNames[i]].tock(t,e,n)}},render:{value:function(){this.delta=1e3*this.clock.getDelta();var t=this.renderer;this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,this.delta),t.animate(this.render),t.render(this.object3D,this.camera,this.renderTarget)},writable:!0}})}),e.exports.shouldAntiAlias=A,e.exports.setupCanvas=w},{"../../lib/three":149,"../../utils/":171,"../a-entity":97,"../a-node":99,"../a-register-element":100,"../system":111,"./metaTags":105,"./postMessage":106,"./scenes":107,"./wakelock":108,"@tweenjs/tween.js":1}],105:[function(t,e,n){var i,r=t("../../constants/"),o=t("../../utils").extend,a=e.exports.MOBILE_HEAD_TAGS=[c({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui"}),c({name:"mobile-web-app-capable",content:"yes"}),c({name:"theme-color",content:"black"})],s=[c({name:"apple-mobile-web-app-capable",content:"yes"}),c({name:"apple-mobile-web-app-status-bar-style",content:"black"}),(i={rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"},{tagName:"link",attributes:i,exists:function(){return document.querySelector('link[rel="'+i.rel+'"]')}})];function c(t){return{tagName:"meta",attributes:t,exists:function(){return document.querySelector('meta[name="'+t.name+'"]')}}}e.exports.inject=function(t){var e,n=document.head,i=n.querySelector("script"),c=[];return a.forEach(l),t.isIOS&&s.forEach(l),c;function l(t){t&&!t.exists()&&(e=function(t){if(t&&t.tagName){var e=document.createElement(t.tagName);return e.setAttribute(r.AFRAME_INJECTED,""),o(e,t.attributes)}}(t))&&(i?i.parentNode.insertBefore(e,i):n.appendChild(e),c.push(e))}}},{"../../constants/":92,"../../utils":171}],106:[function(t,e,n){var i=t("../../utils/bind"),r=t("../../utils/").isIframed;function o(t){if(t.data)switch(t.data.type){case"vr":switch(t.data.data){case"enter":this.enterVR();break;case"exit":this.exitVR()}}}e.exports=function(t){r()&&window.addEventListener("message",i(o,t))}},{"../../utils/":171,"../../utils/bind":165}],107:[function(t,e,n){e.exports=[]},{}],108:[function(t,e,n){var i=t("../../../vendor/wakelock/wakelock");e.exports=function(t){if(t.isMobile){var e=t.wakelock=new i;t.addEventListener("enter-vr",function(){e.request()}),t.addEventListener("exit-vr",function(){e.release()})}}},{"../../../vendor/wakelock/wakelock":181}],109:[function(t,e,n){var i,r=t("../utils/"),o=t("./propertyTypes"),a=r.debug,s=o.isValidDefaultValue,c=o.propertyTypes,l=a("core:schema:warn");function u(t){return"type"in t?"string"==typeof t.type:"default"in t}function h(t,e){var n,i,r=t.default,o=t.type;return t.type?"bool"===t.type?o="boolean":"float"===t.type&&(o="number"):o=void 0===r||"boolean"!=typeof r&&"number"!=typeof r?Array.isArray(r)?"array":"string":typeof r,(i=c[o])||l("Unknown property type for component `"+e+"`: "+o),n=!!t.parse,t.parse=t.parse||i.parse,t.stringify=t.stringify||i.stringify,t.type=o,"default"in t?n||s(o,r)||l("Default value `"+r+"` does not match type `"+o+"` in component `"+e+"`"):t.default=i.default,t}function d(t,e){return void 0!==t&&null!==t&&""!==t||(t=e.default,Array.isArray(t)&&(t=t.slice())),e.parse(t,e.default)}function p(t,e){return"object"!=typeof t?t:e&&null!==t?e.stringify(t):JSON.stringify(t)}e.exports.isSingleProperty=u,e.exports.process=function(t,e){var n;if(u(t))return h(t,e);for(n in t)t[n]=h(t[n],e);return t},e.exports.processPropertyDefinition=h,e.exports.parseProperties=(i=[],function(t,e,n,r,o){var a,s,c,u;for(s in i.length=0,n?t:e)i.push(s);if(null===t||"object"!=typeof t)return t;for(s in t)e[s]||o||l("Unknown property `"+s+"` for component/system `"+r+"`.");for(a=0;a<i.length;a++){if(c=e[s=i[a]],u=t[s],!e[s])return;t[s]=d(u,c)}return t}),e.exports.parseProperty=d,e.exports.stringifyProperties=function(t,e){var n,i,r,o,a={};for(n in t)i=e[n],"object"==typeof(o=r=t[n])&&(o=p(r,i),i||l("Unknown component property: "+n)),a[n]=o;return a},e.exports.stringifyProperty=p},{"../utils/":171,"./propertyTypes":103}],110:[function(t,e,n){var i=t("./schema").process,r=e.exports.shaders={},o=e.exports.shaderNames=[],a=t("../lib/three"),s=t("../utils"),c={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},l=e.exports.Shader=function(){};l.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(t){return this.attributes=this.initVariables(t,"attribute"),this.uniforms=this.initVariables(t,"uniform"),this.material=new(this.raw?a.RawShaderMaterial:a.ShaderMaterial)({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initVariables:function(t,e){var n,i,r=this.schema,o={};for(n in r)r[n].is===e&&(i=c[r[n].type],o[n]={type:i,value:void 0});return o},update:function(t){this.updateVariables(t,"attribute"),this.updateVariables(t,"uniform")},updateVariables:function(t,e){var n,i,r,o=this.schema;for(n in r="uniform"===e?this.uniforms:this.attributes,t)if(o[n]&&o[n].is===e)if("map"!==o[n].type)r[n].value=this.parseValue(o[n].type,t[n]),r[n].needsUpdate=!0;else{if(!r[n]||r[n].value===t[n])continue;i="_texture_"+n,this.setMapOnTextureLoad(r,n,i),s.material.updateMapMaterialFromData(i,n,this,t)}},parseValue:function(t,e){var n;switch(t){case"vec2":return new a.Vector2(e.x,e.y);case"vec3":return new a.Vector3(e.x,e.y,e.z);case"vec4":return new a.Vector4(e.x,e.y,e.z,e.w);case"color":return n=new a.Color(e),new a.Vector3(n.r,n.g,n.b);case"map":return a.ImageUtils.loadTexture(e);default:return e}},setMapOnTextureLoad:function(t,e,n){var i=this;this.el.addEventListener("materialtextureloaded",function(){t[e].value=i.material[n],t[e].needsUpdate=!0})}},e.exports.registerShader=function(t,e){var n,a={};if(Object.keys(e).forEach(function(t){a[t]={value:e[t],writable:!0}}),r[t])throw new Error("The shader "+t+" has been already registered");return((n=function(){l.call(this)}).prototype=Object.create(l.prototype,a)).name=t,n.prototype.constructor=n,r[t]={Shader:n,schema:i(n.prototype.schema)},o.push(t),n}},{"../lib/three":149,"../utils":171,"./schema":109}],111:[function(t,e,n){var i=t("./component"),r=t("./schema"),o=t("../utils/"),a=r.parseProperties,s=r.parseProperty,c=r.process,l=r.isSingleProperty,u=o.styleParser,h=e.exports.systems={},d=e.exports.System=function(t){var e=i&&i.components[this.name];this.el=t,this.sceneEl=t,e&&(e.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};d.prototype={schema:{},init:function(){},update:function(t){},updateProperties:function(t){var e=this.data;Object.keys(r).length&&(this.buildData(t),this.update(e))},buildData:function(t){var e=this.schema;Object.keys(e).length&&(t=t||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),l(e)?this.data=s(t,e):this.data=a(u.parse(t)||{},e))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},e.exports.registerSystem=function(t,e){var n,i,r={},a=o.findAllScenes(document);if(Object.keys(e).forEach(function(t){r[t]={value:e[t],writable:!0}}),h[t])throw new Error("The system `"+t+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");for(((i=function(t){d.call(this,t)}).prototype=Object.create(d.prototype,r)).name=t,i.prototype.constructor=i,i.prototype.schema=o.extend(c(i.prototype.schema)),h[t]=i,n=0;n<a.length;n++)a[n].initSystem(t)}},{"../utils/":171,"./component":101,"./schema":109}],112:[function(t,e,n){t("./pivot")},{"./pivot":113}],113:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../lib/three"),o=new r.Vector3,a=new r.Vector3;i("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var t=this.data,e=this.el,n=e.object3D.parent,i=e.object3D,s=new r.Group;o.copy(i.position),a.copy(i.rotation),n.remove(i),s.add(i),n.add(s),e.object3D=s,i.position.set(-1*t.x,-1*t.y,-1*t.z),s.position.set(t.x+o.x,t.y+o.y,t.z+o.z),s.rotation.copy(i.rotation),i.rotation.set(0,0,0)}})},{"../../core/component":101,"../../lib/three":149}],114:[function(t,e,n){var i=t("../../core/component").components,r=t("../../core/shader").shaders,o=t("../../utils/"),a={};function s(t){var e=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();"fog"===t&&(e="material-fog"),"visible"===t&&(e="material-visible"),a[e]="material."+t}Object.keys(i.material.schema).forEach(s),Object.keys(r.standard.schema).forEach(s),e.exports=function(){return{defaultComponents:{material:{}},mappings:o.extend({},a)}}},{"../../core/component":101,"../../core/shader":110,"../../utils/":171}],115:[function(t,e,n){t("./primitives/a-camera"),t("./primitives/a-collada-model"),t("./primitives/a-cursor"),t("./primitives/a-curvedimage"),t("./primitives/a-gltf-model"),t("./primitives/a-image"),t("./primitives/a-light"),t("./primitives/a-link"),t("./primitives/a-obj-model"),t("./primitives/a-sky"),t("./primitives/a-sound"),t("./primitives/a-text"),t("./primitives/a-video"),t("./primitives/a-videosphere"),t("./primitives/meshPrimitives")},{"./primitives/a-camera":117,"./primitives/a-collada-model":118,"./primitives/a-cursor":119,"./primitives/a-curvedimage":120,"./primitives/a-gltf-model":121,"./primitives/a-image":122,"./primitives/a-light":123,"./primitives/a-link":124,"./primitives/a-obj-model":125,"./primitives/a-sky":126,"./primitives/a-sound":127,"./primitives/a-text":128,"./primitives/a-video":129,"./primitives/a-videosphere":130,"./primitives/meshPrimitives":131}],116:[function(t,e,n){var i=t("../../core/a-entity"),r=t("../../core/component").components,o=t("../../core/a-register-element").registerElement,a=t("../../utils/"),s=a.debug,c=a.entity.setComponentProperty,l=s("extras:primitives:debug"),u=s("extras:primitives:warn"),h=e.exports.primitives={};e.exports.registerPrimitive=function(t,e){t=t.toLowerCase(),l("Registering <%s>",t),e.defaultAttributes&&u("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var n=o(t,{prototype:Object.create(i.prototype,{defaultComponentsFromPrimitive:{value:e.defaultComponents||e.defaultAttributes||{}},deprecated:{value:e.deprecated||null},deprecatedMappings:{value:e.deprecatedMappings||{}},mappings:{value:e.mappings||{}},createdCallback:{value:function(){e.deprecated,this.resolveMappingCollisions()}},resolveMappingCollisions:{value:function(){var t=this.mappings;Object.keys(t).forEach(function(e){var n;e!==e.toLowerCase()&&u("Mapping keys should be specified in lower case. The mapping key "+e+" may not be recognized"),r[e]&&(n=t[e].replace(".","-"),t[n]=t[e],delete t[e])})}},getExtraComponents:{value:function(){var t,e,n,i,r,o,s=this;for(e=a.clone(this.defaultComponentsFromPrimitive),(r=this.getAttribute("mixin"))&&(r=r.trim().split(" ")).forEach(function(t){var n=s.sceneEl.querySelector("#"+t).componentCache;Object.keys(n).forEach(function(t){var i,r;e[t]=(i=e[t],r=n[t],c(i)?l(r):c(r)?l(i):u(i)&&u(r)?a.extendDeep(i,r):l(r))})}),n=0;n<this.attributes.length;n++)t=this.attributes[n],(i=this.mappings[t.name])&&((o=a.entity.getComponentPropertyPath(i)).constructor===Array?(e[o[0]]=e[o[0]]||{},e[o[0]][o[1]]=t.value.trim()):e[o]=t.value.trim());return e;function c(t){return void 0===t}function l(t){return u(t)?a.extendDeep({},t):t}function u(t){return null!==t&&t.constructor===Object}}},attributeChangedCallback:{value:function(t,e,n){var i=this.mappings[t];this.deprecatedMappings,t&&i&&c(this,i,n)}}})});return h[t]=n,n},e.exports.definePrimitive=function(t,n,i){i=i||{},Object.keys(n).map(function(t){!function(t,e){var n=r[t].schema;Object.keys(n).map(function(n){var i=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();void 0!==e[i]&&(i=t+"-"+n),e[i]=t+"."+n})}(t,i)}),e.exports.registerPrimitive(t,a.extendDeep({},null,{defaultComponents:n,mappings:i}))}},{"../../core/a-entity":97,"../../core/a-register-element":100,"../../core/component":101,"../../utils/":171}],117:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}})},{"../primitives":116}],118:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-collada-model",{mappings:{src:"collada-model"}})},{"../primitives":116}],119:[function(t,e,n){var i=t("../getMeshMixin");(0,t("../primitives").registerPrimitive)("a-cursor",t("../../../utils/").extendDeep({},i(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},{"../../../utils/":171,"../getMeshMixin":114,"../primitives":116}],120:[function(t,e,n){var i=t("../getMeshMixin");(0,t("../primitives").registerPrimitive)("a-curvedimage",t("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},{"../../../utils/":171,"../getMeshMixin":114,"../primitives":116}],121:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-gltf-model",{mappings:{src:"gltf-model"}})},{"../primitives":116}],122:[function(t,e,n){var i=t("../getMeshMixin");(0,t("../primitives").registerPrimitive)("a-image",t("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":171,"../getMeshMixin":114,"../primitives":116}],123:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target"}})},{"../primitives":116}],124:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-link",{defaultComponents:{},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},{"../primitives":116}],125:[function(t,e,n){var i=t("../getMeshMixin")();(0,t("../primitives").registerPrimitive)("a-obj-model",t("../../../utils/").extendDeep({},i,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},{"../../../utils/":171,"../getMeshMixin":114,"../primitives":116}],126:[function(t,e,n){var i=t("../getMeshMixin"),r=t("../primitives").registerPrimitive,o=t("../../../utils/"),a=t("./meshPrimitives");r("a-sky",o.extendDeep({},i(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:o.extendDeep({},a["a-sphere"].prototype.mappings)}))},{"../../../utils/":171,"../getMeshMixin":114,"../primitives":116,"./meshPrimitives":131}],127:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},{"../primitives":116}],128:[function(t,e,n){(0,t("../primitives").definePrimitive)("a-text",{text:{anchor:"align",width:5}})},{"../primitives":116}],129:[function(t,e,n){var i=t("../getMeshMixin");(0,t("../primitives").registerPrimitive)("a-video",t("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":171,"../getMeshMixin":114,"../primitives":116}],130:[function(t,e,n){var i=t("../getMeshMixin");(0,t("../primitives").registerPrimitive)("a-videosphere",t("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},{"../../../utils/":171,"../getMeshMixin":114,"../primitives":116}],131:[function(t,e,n){var i=t("../getMeshMixin"),r=t("../../../core/geometry").geometries,o=t("../../../core/geometry").geometryNames,a=t("../primitives").registerPrimitive,s=t("../../../utils/"),c=e.exports={};function l(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}o.forEach(function(t){var e=r[t],n=l(t),o={};Object.keys(e.schema).forEach(function(t){o[l(t)]="geometry."+t});var u="a-"+n,h=a(u,s.extendDeep({},i(),{defaultComponents:{geometry:{primitive:t}},mappings:o}));c[u]=h})},{"../../../core/geometry":102,"../../../utils/":171,"../getMeshMixin":114,"../primitives":116}],132:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(t){this.geometry=new r.BoxGeometry(t.width,t.height,t.depth,t.segmentsWidth,t.segmentsHeight,t.segmentsDepth)}})},{"../core/geometry":102,"../lib/three":149}],133:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),o=r.Math.degToRad;i("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new r.CircleGeometry(t.radius,t.segments,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":102,"../lib/three":149}],134:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),o=r.Math.degToRad;i("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new r.CylinderGeometry(t.radiusTop,t.radiusBottom,t.height,t.segmentsRadial,t.segmentsHeight,t.openEnded,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":102,"../lib/three":149}],135:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),o=r.Math.degToRad;i("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new r.CylinderGeometry(t.radius,t.radius,t.height,t.segmentsRadial,t.segmentsHeight,t.openEnded,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":102,"../lib/three":149}],136:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new r.DodecahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":102,"../lib/three":149}],137:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new r.IcosahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":102,"../lib/three":149}],138:[function(t,e,n){t("./box.js"),t("./circle.js"),t("./cone.js"),t("./cylinder.js"),t("./dodecahedron.js"),t("./icosahedron.js"),t("./octahedron.js"),t("./plane.js"),t("./ring.js"),t("./sphere.js"),t("./tetrahedron.js"),t("./torus.js"),t("./torusKnot.js"),t("./triangle.js")},{"./box.js":132,"./circle.js":133,"./cone.js":134,"./cylinder.js":135,"./dodecahedron.js":136,"./icosahedron.js":137,"./octahedron.js":139,"./plane.js":140,"./ring.js":141,"./sphere.js":142,"./tetrahedron.js":143,"./torus.js":144,"./torusKnot.js":145,"./triangle.js":146}],139:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new r.OctahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":102,"../lib/three":149}],140:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(t){this.geometry=new r.PlaneGeometry(t.width,t.height,t.segmentsWidth,t.segmentsHeight)}})},{"../core/geometry":102,"../lib/three":149}],141:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),o=r.Math.degToRad;i("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new r.RingGeometry(t.radiusInner,t.radiusOuter,t.segmentsTheta,t.segmentsPhi,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":102,"../lib/three":149}],142:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),o=r.Math.degToRad;i("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(t){this.geometry=new r.SphereGeometry(t.radius,t.segmentsWidth,t.segmentsHeight,o(t.phiStart),o(t.phiLength),o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":102,"../lib/three":149}],143:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new r.TetrahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":102,"../lib/three":149}],144:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),o=r.Math.degToRad;i("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(t){this.geometry=new r.TorusGeometry(t.radius,2*t.radiusTubular,t.segmentsRadial,t.segmentsTubular,o(t.arc))}})},{"../core/geometry":102,"../lib/three":149}],145:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(t){this.geometry=new r.TorusKnotGeometry(t.radius,2*t.radiusTubular,t.segmentsTubular,t.segmentsRadial,t.p,t.q)}})},{"../core/geometry":102,"../lib/three":149}],146:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),o=new r.Quaternion,a=new r.Vector3(0,0,1),s=new r.Vector2,c=new r.Vector2,l=new r.Vector2;i("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(t){var e,n,i,u,h,d;(i=new r.Triangle).a.set(t.vertexA.x,t.vertexA.y,t.vertexA.z),i.b.set(t.vertexB.x,t.vertexB.y,t.vertexB.z),i.c.set(t.vertexC.x,t.vertexC.y,t.vertexC.z),n=i.normal(),o.setFromUnitVectors(n,a),u=i.a.clone().applyQuaternion(o),h=i.b.clone().applyQuaternion(o),d=i.c.clone().applyQuaternion(o),s.set(Math.min(u.x,h.x,d.x),Math.min(u.y,h.y,d.y)),c.set(Math.max(u.x,h.x,d.x),Math.max(u.y,h.y,d.y)),l.set(0,0).subVectors(c,s),u=(new r.Vector2).subVectors(u,s).divide(l),h=(new r.Vector2).subVectors(h,s).divide(l),d=(new r.Vector2).subVectors(d,s).divide(l),(e=this.geometry=new r.Geometry).vertices.push(i.a),e.vertices.push(i.b),e.vertices.push(i.c),e.faces.push(new r.Face3(0,1,2,n)),e.faceVertexUvs[0]=[[u,h,d]]}})},{"../core/geometry":102,"../lib/three":149}],147:[function(t,e,n){window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices;var i=t("webvr-polyfill");window.webvrpolyfill=new i({BUFFER_SCALE:1,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0});var r=t("./utils/"),o=r.debug,a=o("A-Frame:error"),s=o("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&s("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),"file:"===window.location.protocol&&a("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/0.5.0/introduction/getting-started.html#using-a-local-server."),window.Promise=window.Promise||t("promise-polyfill"),r.device.isIOSOlderThan10(window.navigator.userAgent)&&(window.WebVRConfig.BUFFER_SCALE=1/window.devicePixelRatio),t("present"),r.device.isBrowserEnvironment&&(t("./style/aframe.css"),t("./style/rStats.css"));var c=t("./core/scene/a-scene").AScene,l=t("./core/component").components,u=t("./core/component").registerComponent,h=t("./core/geometry").registerGeometry,d=t("./extras/primitives/primitives").registerPrimitive,p=t("./core/shader").registerShader,f=t("./core/system").registerSystem,m=t("./core/shader").shaders,g=t("./core/system").systems,v=window.THREE=t("./lib/three"),y=window.TWEEN=t("@tweenjs/tween.js"),A=t("../package");t("./components/index"),t("./geometries/index"),t("./shaders/index"),t("./systems/index");var w=t("./core/a-node"),b=t("./core/a-entity");t("./core/a-animation"),t("./core/a-assets"),t("./core/a-cubemap"),t("./core/a-mixin"),t("./extras/components/"),t("./extras/primitives/"),e.exports=window.AFRAME={AComponent:t("./core/component").Component,AEntity:b,ANode:w,AScene:c,components:l,geometries:t("./core/geometry").geometries,registerComponent:u,registerElement:t("./core/a-register-element").registerElement,registerGeometry:h,registerPrimitive:d,registerShader:p,registerSystem:f,primitives:{getMeshMixin:t("./extras/primitives/getMeshMixin"),primitives:t("./extras/primitives/primitives").primitives},scenes:t("./core/scene/scenes"),schema:t("./core/schema"),shaders:m,systems:g,THREE:v,TWEEN:y,utils:r,version:A.version}},{"../package":51,"./components/index":60,"./core/a-animation":94,"./core/a-assets":95,"./core/a-cubemap":96,"./core/a-entity":97,"./core/a-mixin":98,"./core/a-node":99,"./core/a-register-element":100,"./core/component":101,"./core/geometry":102,"./core/scene/a-scene":104,"./core/scene/scenes":107,"./core/schema":109,"./core/shader":110,"./core/system":111,"./extras/components/":112,"./extras/primitives/":115,"./extras/primitives/getMeshMixin":114,"./extras/primitives/primitives":116,"./geometries/index":138,"./lib/three":149,"./shaders/index":151,"./style/aframe.css":156,"./style/rStats.css":157,"./systems/index":160,"./utils/":171,"@tweenjs/tween.js":1,present:31,"promise-polyfill":33,"webvr-polyfill":46}],148:[function(t,e,n){window.aframeStats=function(t){var e=null,n=t;return{update:function(){var t;e("te").set((t=n.querySelectorAll("*"),Array.prototype.slice.call(t).filter(function(t){return t.isEntity}),t.length)),window.performance.getEntriesByName&&e("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))},start:function(){},end:function(){},attach:function(t){e=t},values:{te:{caption:"Entities"},lt:{caption:"Load Time"}},groups:[{caption:"A-Frame",values:["te","lt"]}],fractions:[]}},"object"==typeof e&&(e.exports={aframeStats:window.aframeStats})},{}],149:[function(t,e,i){(function(n){var i=n.THREE=t("three");i.TextureLoader&&(i.TextureLoader.prototype.crossOrigin="anonymous"),i.ImageLoader&&(i.ImageLoader.prototype.crossOrigin="anonymous"),i.Cache&&(i.Cache.enabled=!0),t("three/examples/js/loaders/GLTFLoader"),t("three/examples/js/loaders/OBJLoader"),t("three/examples/js/loaders/MTLLoader"),t("three/examples/js/loaders/ColladaLoader"),i.ColladaLoader.prototype.crossOrigin="anonymous",i.GLTFLoader.prototype.crossOrigin="anonymous",i.MTLLoader.prototype.crossOrigin="anonymous",i.OBJLoader.prototype.crossOrigin="anonymous",e.exports=i}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{three:40,"three/examples/js/loaders/ColladaLoader":41,"three/examples/js/loaders/GLTFLoader":42,"three/examples/js/loaders/MTLLoader":43,"three/examples/js/loaders/OBJLoader":44}],150:[function(t,e,n){var i=t("../core/shader").registerShader,r=t("../lib/three"),o=t("../utils/");function a(t){return{fog:t.fog,color:new r.Color(t.color),wireframe:t.wireframe,wireframeLinewidth:t.wireframeLinewidth}}e.exports.Shader=i("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(t){this.textureSrc=null,this.material=new r.MeshBasicMaterial(a(t)),o.material.updateMap(this,t)},update:function(t){this.updateMaterial(t),o.material.updateMap(this,t)},updateMaterial:function(t){var e=this.material;t=a(t),Object.keys(t).forEach(function(n){e[n]=t[n]})}})},{"../core/shader":110,"../lib/three":149,"../utils/":171}],151:[function(t,e,n){t("./flat"),t("./standard"),t("./sdf"),t("./msdf"),t("./ios10hls")},{"./flat":150,"./ios10hls":152,"./msdf":153,"./sdf":154,"./standard":155}],152:[function(t,e,n){var i=t("../core/shader").registerShader;e.exports.Shader=i("ios10hls",{schema:{src:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["uniform sampler2D src;","uniform float opacity;","varying vec2 vUV;","void main() {","  vec2 offset = vec2(0, 0);","  vec2 repeat = vec2(1, 1);","  vec4 color = texture2D(src, vec2(vUV.x / repeat.x + offset.x, (1.0 - vUV.y) / repeat.y + offset.y)).bgra;","  gl_FragColor = vec4(color.rgb, opacity);","}"].join("\n")})},{"../core/shader":110}],153:[function(t,e,n){var i=t("../core/shader").registerShader;e.exports.Shader=i("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","uniform sampler2D map;","uniform vec3 color;","uniform float opacity;","uniform float alphaTest;","uniform bool negate;","varying vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","void main() {","  vec3 sample = texture2D(map, vUV).rgb;","  if (negate) {","    sample = 1.0 - sample;","  }","  float sigDist = median(sample.r, sample.g, sample.b) - 0.5;","  float alpha = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  if (isBigEnough <= BIG_ENOUGH && alpha < alphaTest) { discard; return; }","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","}"].join("\n")})},{"../core/shader":110}],154:[function(t,e,n){var i=t("../core/shader").registerShader;e.exports.Shader=i("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","uniform sampler2D map;","uniform vec3 color;","uniform float opacity;","uniform float alphaTest;","varying vec2 vUV;","#ifdef GL_OES_standard_derivatives","float contour(float width, float value) {","  return smoothstep(0.5 - value, 0.5 + value, width);","}","#else","float aastep(float value, float afwidth) {","  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","}","#endif","void main() {","#ifdef GL_OES_standard_derivatives","  vec2 uv = vUV;","  vec4 texColor = texture2D(map, uv);","  float dist = texColor.a;","  float width = fwidth(dist);","  float alpha = contour(dist, width);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * dist;","  }","  else if (isBigEnough <= BIG_ENOUGH) {","    vec4 box = vec4 (uv - duv, uv + duv);","    alpha = (alpha + 0.5 * (","      contour(texture2D(map, box.xy).a, width)","      + contour(texture2D(map, box.zw).a, width)","      + contour(texture2D(map, box.xw).a, width)","      + contour(texture2D(map, box.zy).a, width)","    )) / 3.0;","  }","  if (isBigEnough <= BIG_ENOUGH && alpha < alphaTest) { discard; return; }","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","#else","  vec4 texColor = texture2D(map, vUV);","  float value = texColor.a;","  float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","  float alpha = aastep(value, afwidth);","  float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);","  if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }","  alpha = alpha * ratio + (1.0 - ratio) * value;","  if (ratio < 1.0)","    if (alpha <= DISCARD_ALPHA) { discard; return; }","#endif","  gl_FragColor = vec4(color, opacity * alpha);","}"].join("\n")})},{"../core/shader":110}],155:[function(t,e,n){var i=t("../core/shader").registerShader,r=t("../lib/three"),o=t("../utils/"),a=new r.CubeTextureLoader,s={};function c(t){var e={color:new r.Color(t.color),emissive:new r.Color(t.emissive),emissiveIntensity:t.emissiveIntensity,fog:t.fog,metalness:t.metalness,roughness:t.roughness,wireframe:t.wireframe,wireframeLinewidth:t.wireframeLinewidth};return t.normalMap&&(e.normalScale=t.normalScale),t.ambientOcclusionMap&&(e.aoMapIntensity=t.ambientOcclusionMapIntensity),t.displacementMap&&(e.displacementScale=t.displacementScale,e.displacementBias=t.displacementBias),e}e.exports.Shader=i("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(t){this.material=new r.MeshStandardMaterial(c(t)),o.material.updateMap(this,t),t.normalMap&&o.material.updateDistortionMap("normal",this,t),t.displacementMap&&o.material.updateDistortionMap("displacement",this,t),t.ambientOcclusionMap&&o.material.updateDistortionMap("ambientOcclusion",this,t),t.metalnessMap&&o.material.updateDistortionMap("metalness",this,t),t.roughnessMap&&o.material.updateDistortionMap("roughness",this,t),this.updateEnvMap(t)},update:function(t){this.updateMaterial(t),o.material.updateMap(this,t),t.normalMap&&o.material.updateDistortionMap("normal",this,t),t.displacementMap&&o.material.updateDistortionMap("displacement",this,t),t.ambientOcclusionMap&&o.material.updateDistortionMap("ambientOcclusion",this,t),t.metalnessMap&&o.material.updateDistortionMap("metalness",this,t),t.roughnessMap&&o.material.updateDistortionMap("roughness",this,t),this.updateEnvMap(t)},updateMaterial:function(t){var e=this.material;t=c(t),Object.keys(t).forEach(function(n){e[n]=t[n]})},updateEnvMap:function(t){var e=this,n=this.material,i=t.envMap,c=t.sphericalEnvMap;if(!i&&!c||this.isLoadingEnvMap)return n.envMap=null,void(n.needsUpdate=!0);this.isLoadingEnvMap=!0,c?this.el.sceneEl.systems.material.loadTexture(c,{src:c},function(t){e.isLoadingEnvMap=!1,t.mapping=r.SphericalReflectionMapping,n.envMap=t,o.material.handleTextureEvents(e.el,t),n.needsUpdate=!0}):s[i]?s[i].then(function(t){e.isLoadingEnvMap=!1,n.envMap=t,o.material.handleTextureEvents(e.el,t),n.needsUpdate=!0}):s[i]=new Promise(function(t){o.srcLoader.validateCubemapSrc(i,function(i){a.load(i,function(i){e.isLoadingEnvMap=!1,n.envMap=i,o.material.handleTextureEvents(e.el,i),t(i)})})})}})},{"../core/shader":110,"../lib/three":149,"../utils/":171}],156:[function(t,e,n){var i=".a-html{bottom:0;left:0;position:fixed;right:0;top:0}.a-body{height:100%;margin:0;overflow:hidden;padding:0;width:100%}:-webkit-full-screen{background-color:transparent}.a-hidden{display:none!important}.a-canvas{height:100%;left:0;position:absolute;top:0;width:100%}.a-canvas.a-grab-cursor:hover{cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}.a-canvas.a-grab-cursor:active,.a-grabbing{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}a-scene.fullscreen .a-canvas{width:100%!important;height:100%!important;top:0!important;left:0!important;right:0!important;bottom:0!important;position:fixed!important}.a-inspector-loader{background-color:#ed3160;position:fixed;left:3px;top:3px;padding:6px 10px;color:#fff;text-decoration:none;font-size:12px;font-family:Roboto,sans-serif;text-align:center;z-index:99999;width:204px}@keyframes dots-1{from{opacity:0}25%{opacity:1}}@keyframes dots-2{from{opacity:0}50%{opacity:1}}@keyframes dots-3{from{opacity:0}75%{opacity:1}}@-webkit-keyframes dots-1{from{opacity:0}25%{opacity:1}}@-webkit-keyframes dots-2{from{opacity:0}50%{opacity:1}}@-webkit-keyframes dots-3{from{opacity:0}75%{opacity:1}}.a-inspector-loader .dots span{animation:dots-1 2s infinite steps(1);-webkit-animation:dots-1 2s infinite steps(1)}.a-inspector-loader .dots span:first-child+span{animation-name:dots-2;-webkit-animation-name:dots-2}.a-inspector-loader .dots span:first-child+span+span{animation-name:dots-3;-webkit-animation-name:dots-3}a-scene{display:block;position:relative;height:100%;width:100%}a-assets,a-scene audio,a-scene img,a-scene video{display:none}.a-enter-vr-modal,.a-orientation-modal{font-family:Consolas,Andale Mono,Courier New,monospace}.a-enter-vr-modal a{border-bottom:1px solid #fff;padding:2px 0;text-decoration:none;transition:.1s color ease-in}.a-enter-vr-modal a:hover{background-color:#fff;color:#111;padding:2px 4px;position:relative;left:-4px}.a-enter-vr{font-family:sans-serif,monospace;font-size:13px;width:100%;font-weight:200;line-height:16px;position:absolute;right:20px;bottom:20px}.a-enter-vr.embedded{right:5px;bottom:5px}.a-enter-vr-button,.a-enter-vr-modal,.a-enter-vr-modal a{color:#fff}.a-enter-vr-button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20245.82%20141.73%22%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill%3A%23fff%3Bfill-rule%3Aevenodd%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Emask%3C%2Ftitle%3E%3Cpath%20class%3D%22a%22%20d%3D%22M175.56%2C111.37c-22.52%2C0-40.77-18.84-40.77-42.07S153%2C27.24%2C175.56%2C27.24s40.77%2C18.84%2C40.77%2C42.07S198.08%2C111.37%2C175.56%2C111.37ZM26.84%2C69.31c0-23.23%2C18.25-42.07%2C40.77-42.07s40.77%2C18.84%2C40.77%2C42.07-18.26%2C42.07-40.77%2C42.07S26.84%2C92.54%2C26.84%2C69.31ZM27.27%2C0C11.54%2C0%2C0%2C12.34%2C0%2C28.58V110.9c0%2C16.24%2C11.54%2C30.83%2C27.27%2C30.83H99.57c2.17%2C0%2C4.19-1.83%2C5.4-3.7L116.47%2C118a8%2C8%2C0%2C0%2C1%2C12.52-.18l11.51%2C20.34c1.2%2C1.86%2C3.22%2C3.61%2C5.39%2C3.61h72.29c15.74%2C0%2C27.63-14.6%2C27.63-30.83V28.58C245.82%2C12.34%2C233.93%2C0%2C218.19%2C0H27.27Z%22%2F%3E%3C%2Fsvg%3E) 50% 50%/70% 70% no-repeat rgba(0,0,0,.35);border:0;bottom:0;cursor:pointer;min-width:50px;min-height:30px;padding-right:5%;padding-top:4%;position:absolute;right:0;transition:background-color .05s ease;-webkit-transition:background-color .05s ease;z-index:9999}.a-enter-vr-button:active,.a-enter-vr-button:hover{background-color:#666}[data-a-enter-vr-no-webvr] .a-enter-vr-button{border-color:#666;opacity:.65}[data-a-enter-vr-no-webvr] .a-enter-vr-button:active,[data-a-enter-vr-no-webvr] .a-enter-vr-button:hover{background-color:rgba(0,0,0,.35);cursor:not-allowed}.a-enter-vr-modal{background-color:#666;border-radius:0;display:none;min-height:32px;margin-right:70px;padding:9px;width:280px;right:2%;position:absolute}.a-enter-vr-modal:after{border-bottom:10px solid transparent;border-left:10px solid #666;border-top:10px solid transparent;display:inline-block;content:'';position:absolute;right:-5px;top:5px;width:0;height:0}.a-enter-vr-modal a,.a-enter-vr-modal p{display:inline}.a-enter-vr-modal p{margin:0}.a-enter-vr-modal p:after{content:' '}[data-a-enter-vr-no-headset].a-enter-vr:hover .a-enter-vr-modal,[data-a-enter-vr-no-webvr].a-enter-vr:hover .a-enter-vr-modal{display:block}.a-orientation-modal{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center/50% 50% no-repeat rgba(244,244,244,1);bottom:0;font-size:14px;font-weight:600;left:0;line-height:20px;right:0;position:fixed;top:0;z-index:9999999}.a-orientation-modal:after{color:#666;content:\"Insert phone into Cardboard holder.\";display:block;position:absolute;text-align:center;top:70%;transform:translateY(-70%);width:100%}.a-orientation-modal button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;border:none;height:50px;text-indent:-9999px;width:50px}";t("browserify-css").createStyle(i,{href:"src/style/aframe.css"}),e.exports=i},{"browserify-css":5}],157:[function(t,e,n){var i=".rs-base{background-color:#333;color:#fafafa;border-radius:0;font:10px monospace;left:5px;line-height:1em;opacity:.85;overflow:hidden;padding:10px;position:fixed;top:5px;width:300px;z-index:10000}.rs-base div.hidden{display:none}.rs-base h1{color:#fff;cursor:pointer;font-size:1.4em;font-weight:300;margin:0 0 5px;padding:0}.rs-group{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;margin-bottom:5px}.rs-group:last-child{margin-bottom:0}.rs-counter-base{align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;height:10px;-webkit-justify-content:space-between;justify-content:space-between;margin:2px 0}.rs-counter-base.alarm{color:#b70000;text-shadow:0 0 0 #b70000,0 0 1px #fff,0 0 1px #fff,0 0 2px #fff,0 0 2px #fff,0 0 3px #fff,0 0 3px #fff,0 0 4px #fff,0 0 4px #fff}.rs-counter-id{font-weight:300;-webkit-box-ordinal-group:0;-webkit-order:0;order:0;width:54px}.rs-counter-value{font-weight:300;-webkit-box-ordinal-group:1;-webkit-order:1;order:1;text-align:right;width:35px}.rs-canvas{-webkit-box-ordinal-group:2;-webkit-order:2;order:2}@media (min-width:480px){.rs-base{left:20px;top:20px}}";t("browserify-css").createStyle(i,{href:"src/style/rStats.css"}),e.exports=i},{"browserify-css":5}],158:[function(t,e,n){var i=t("../utils/bind"),r=t("../constants/"),o=t("../core/system").registerSystem;e.exports.System=o("camera",{init:function(){this.activeCameraEl=null,this.sceneEl.addEventListener("loaded",i(this.setupDefaultCamera,this))},setupDefaultCamera:function(){var t,e=this.sceneEl;!e.camera||e.camera.el.getAttribute("camera").spectator?((t=document.createElement("a-entity")).setAttribute("camera",{active:!0}),t.setAttribute("wasd-controls",""),t.setAttribute("look-controls",""),t.setAttribute(r.AFRAME_INJECTED,""),t.setAttribute("position",{x:0,y:r.DEFAULT_CAMERA_HEIGHT,z:0}),e.appendChild(t),e.addEventListener("enter-vr",this.removeDefaultOffset),e.addEventListener("exit-vr",this.addDefaultOffset),e.emit("camera-ready",{cameraEl:t})):e.emit("camera-ready",{cameraEl:e.camera.el})},disableActiveCamera:function(){var t=this.sceneEl.querySelectorAll("[camera]");t[t.length-1].setAttribute("camera","active",!0)},setActiveCamera:function(t){var e,n,i,r,o=this.activeCameraEl,a=this.sceneEl;if((r=t.getObject3D("camera"))&&t!==this.activeCameraEl){var s=a.querySelector("[data-aframe-default-camera]");for(t!==(s&&s.querySelector("[camera]"))&&function(t){var e;t.camera&&(e=t.querySelector("[data-aframe-default-camera]"))&&t.removeChild(e)}(a),this.activeCameraEl=t,this.activeCameraEl.play(),a.camera=r,o&&o.setAttribute("camera","active",!1),n=a.querySelectorAll("[camera]"),i=0;i<n.length;i++)(e=n[i]).isEntity&&t!==e&&(e.setAttribute("camera","active",!1),e.pause());a.emit("camera-set-active",{cameraEl:t})}},setSpectatorCamera:function(t){var e,n=this.spectatorCameraEl,i=this.sceneEl;t.getObject3D("camera")&&t!==this.spectatorCameraEl&&(n&&n.setAttribute("camera","spectator",!1),(e=this.spectatorCameraEl=t).setAttribute("camera","active",!1),e.play(),i.emit("camera-set-spectator",{cameraEl:t}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},tock:function(){var t,e=this.sceneEl,n=e.renderer.vr.enabled;this.spectatorCameraEl&&!e.isMobile&&(t=this.spectatorCameraEl.components.camera.camera,e.renderer.vr.enabled=!1,e.renderer.render(e.object3D,t),e.renderer.vr.enabled=n)}})},{"../constants/":92,"../core/system":111,"../utils/bind":165}],159:[function(t,e,n){var i=t("../core/geometry").geometries,r=t("../core/system").registerSystem,o=t("../lib/three");function a(t){var e,n,r=t.primitive,a=i[r]&&i[r].Geometry,s=new a;if(!a)throw new Error("Unknown geometry `"+r+"`");return s.init(t),e=s.geometry,t.buffer?((n=(new o.BufferGeometry).fromGeometry(e)).metadata={type:e.type,parameters:e.parameters||{}},e.dispose(),n):e}e.exports.System=r("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(t){var e,n,i=this.cache;return t.skipCache?a(t):(e=i[n=this.hash(t)],function(t,e){t[e]=void 0===t[e]?1:t[e]+1}(this.cacheCount,n),e||(e=a(t),i[n]=e,e))},unuseGeometry:function(t){var e,n=this.cache,i=this.cacheCount;t.skipCache||n[e=this.hash(t)]&&(function(t,e){i[e]--}(0,e),i[e]>0||(n[e].dispose(),delete n[e],delete i[e]))},hash:function(t){return JSON.stringify(t)}})},{"../core/geometry":102,"../core/system":111,"../lib/three":149}],160:[function(t,e,n){t("./camera"),t("./geometry"),t("./light"),t("./material"),t("./shadow"),t("./tracked-controls")},{"./camera":158,"./geometry":159,"./light":161,"./material":162,"./shadow":163,"./tracked-controls":164}],161:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../utils/bind"),o=t("../constants/");e.exports.System=i("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",r(this.setupDefaultLights,this))},registerLight:function(t){t.hasAttribute("data-aframe-default-light")||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var t,e=this.sceneEl;if(this.defaultLights){t=document.querySelectorAll("[data-aframe-default-light]");for(var n=0;n<t.length;n++)e.removeChild(t[n]);this.defaultLights=!1}},setupDefaultLights:function(){var t,e,n=this.sceneEl;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||((t=document.createElement("a-entity")).setAttribute("light",{color:"#BBB",type:"ambient"}),t.setAttribute("data-aframe-default-light",""),t.setAttribute(o.AFRAME_INJECTED,""),n.appendChild(t),(e=document.createElement("a-entity")).setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),e.setAttribute("position",{x:-.5,y:1,z:1}),e.setAttribute("data-aframe-default-light",""),e.setAttribute(o.AFRAME_INJECTED,""),n.appendChild(e),this.defaultLights=!0)}})},{"../constants/":92,"../core/system":111,"../utils/bind":165}],162:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../lib/three"),o=t("../utils/"),a=t("../utils/material").isHLS,s=o.bind,c=o.debug,l=c("components:texture:error"),u=new r.TextureLoader,h=c("components:texture:warn");function d(t,e){var n=e.offset||{x:0,y:0},i=e.repeat||{x:1,y:1};!!e.npot&&(t.wrapS=r.ClampToEdgeWrapping,t.wrapT=r.ClampToEdgeWrapping,t.magFilter=r.LinearFilter,t.minFilter=r.LinearFilter),1===i.x&&1===i.y||(t.wrapS=r.RepeatWrapping,t.wrapT=r.RepeatWrapping,t.repeat.set(i.x,i.y)),0===n.x&&0===n.y||t.offset.set(n.x,n.y)}u.setCrossOrigin("anonymous"),e.exports.System=i("material",{init:function(){this.materials={},this.textureCounts={},this.textureCache={},this.sceneEl.addEventListener("materialtextureloaded",s(this.onMaterialTextureLoaded,this))},clearTextureCache:function(){this.textureCache={}},loadTexture:function(t,e,n){var i=this;if("CANVAS"!==t.tagName){if("VIDEO"===t.tagName)return t.src||t.srcObject||t.childElementCount||h("Video element was defined with neither `source` elements nor `src` / `srcObject` attributes."),void this.loadVideo(t,e,n);o.srcLoader.validateSrc(t,function(t){i.loadImage(t,e,n)},function(t){i.loadVideo(t,e,n)})}else this.loadCanvas(t,e,n)},loadImage:function(t,e,n){var i=this.hash(e),o=this.textureCache;o[i]?o[i].then(n):(o[i]=function(t,e){return new Promise(function(n,i){function o(t){d(t,e),t.needsUpdate=!0,n(t)}"string"==typeof t?u.load(t,o,function(){},function(t){l("`$s` could not be fetched (Error code: %s; Response: %s)",t.status,t.statusText)}):o(new r.Texture(t))})}(t,e),o[i].then(n))},loadCanvas:function(t,e,n){t.readyState=2,t.HAVE_CURRENT_DATA=2,this.loadVideo(t,e,n)},loadVideo:function(t,e,n){var i,o,s,c,l=this.textureCache;function u(t){t.texture.needsUpdate=!0,n(t.texture,t.videoEl)}if("string"!=typeof t){if(s=t,l[i=this.hashVideo(e,s)])return void l[i].then(u);!function(t){t.autoplay=t.hasAttribute("autoplay")&&"false"!==t.getAttribute("autoplay"),t.controls=t.hasAttribute("controls")&&"false"!==t.getAttribute("controls"),"false"===t.getAttribute("loop")&&t.removeAttribute("loop"),"false"===t.getAttribute("preload")&&(t.preload="none"),t.crossOrigin=t.crossOrigin||"anonymous",t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline","")}(s)}s=s||function(t,e,n){var i=document.createElement("video");return i.width=e,i.height=n,i.setAttribute("playsinline",""),i.setAttribute("webkit-playsinline",""),i.autoplay=!0,i.loop=!0,i.crossOrigin="anonymous",i.addEventListener("error",function(){h("`$s` is not a valid video",t)},!0),i.src=t,i}(t,e.width,e.height),l[i=this.hashVideo(e,s)]?l[i].then(u):((o=new r.VideoTexture(s)).minFilter=r.LinearFilter,d(o,e),this.sceneEl.isIOS&&a(s.src||s.getAttribute("src"),s.type||s.getAttribute("type"))&&(o.format=r.RGBAFormat,o.needsCorrectionBGRA=!0,o.flipY=!1,o.needsCorrectionFlipY=!0),c={texture:o,videoEl:s},l[i]=Promise.resolve(c),u(c))},hash:function(t){return t.src.tagName&&((t=o.extendDeep({},t)).src=t.src.src),JSON.stringify(t)},hashVideo:function(t,e){return function(t,e){var n,i,r,o=e.getAttribute("id");if(o)return o;for(i="",r=t||{},n=0;n<e.attributes.length;n++)r[e.attributes[n].name]=e.attributes[n].value;return Object.keys(r).sort().forEach(function(t){i+=t+":"+r[t]+";"}),i}(t,e)},registerMaterial:function(t){this.materials[t.uuid]=t},unregisterMaterial:function(t){delete this.materials[t.uuid];var e=this.textureCounts;Object.keys(t).filter(function(e){return t[e]&&t[e].isTexture}).forEach(function(n){e[t[n].uuid]--,e[t[n].uuid]<=0&&t[n].dispose()})},updateMaterials:function(t){var e=this.materials;Object.keys(e).forEach(function(t){e[t].needsUpdate=!0})},onMaterialTextureLoaded:function(t){this.textureCounts[t.detail.texture.uuid]||(this.textureCounts[t.detail.texture.uuid]=0),this.textureCounts[t.detail.texture.uuid]++}})},{"../core/system":111,"../lib/three":149,"../utils/":171,"../utils/material":172}],163:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../lib/three"),o={basic:r.BasicShadowMap,pcf:r.PCFShadowMap,pcfsoft:r.PCFSoftShadowMap};e.exports.System=i("shadow",{schema:{autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var t=this.sceneEl,e=this.data;this.shadowMapEnabled=!1,t.renderer&&(t.renderer.shadowMap.type=o[e.type],t.renderer.shadowMap.autoUpdate=e.autoUpdate,this.setShadowMapEnabled(this.shadowMapEnabled))},setShadowMapEnabled:function(t){var e=this.sceneEl.renderer;this.shadowMapEnabled=t,e&&(e.shadowMap.enabled=t)}})},{"../core/system":111,"../lib/three":149}],164:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../utils");e.exports.System=i("tracked-controls",{init:function(){var t=this;this.controllers=[],this.updateControllerList(navigator.getGamepads&&navigator.getGamepads()),this.throttledUpdateControllerList=r.throttle(this.updateControllerList,500,this),navigator.getVRDisplays&&this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(e){e.length&&(t.vrDisplay=e[0])})})},tick:function(){var t;t=navigator.getGamepads&&navigator.getGamepads(),this.throttledUpdateControllerList(t)},updateControllerList:function(t){var e,n,i,r=this.controllers;if(t){for(i=r.length,r.length=0,n=0;n<t.length;++n)(e=t[n])&&e.pose&&r.push(e);r.length!==i&&this.el.emit("controllersupdated",void 0,!1)}}})},{"../core/system":111,"../utils":171}],165:[function(t,e,n){e.exports=function(t,e){return n=Array.prototype.slice.call(arguments,2),function(){var i=n.concat(Array.prototype.slice.call(arguments,0));return t.apply(e,i)};var n}},{}],166:[function(t,e,n){var i=t("./debug"),r=t("object-assign"),o=i("utils:coordinates:warn"),a=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;function s(t){return a.test(t)}function c(t){var e;for(e in t)void 0!==t[e]?t[e].constructor===String&&(t[e]=parseFloat(t[e],10)):delete t[e];return t}e.exports.regex=a,e.exports.parse=function(t,e){var n,i;return t&&t instanceof Object?(e&&(t.x=void 0===t.x?e.x:t.x,t.y=void 0===t.y?e.y:t.y,t.z=void 0===t.z?e.z:t.z,t.w=void 0===t.w?e.w:t.w),c(t)):null===t||void 0===t?"object"==typeof e?r({},e):e:(n=t.trim().replace(/\s+/g," ").split(" "),(i={}).x=n[0]||e&&e.x,i.y=n[1]||e&&e.y,i.z=n[2]||e&&e.z,i.w=n[3]||e&&e.w,c(i))},e.exports.stringify=function(t){return"object"!=typeof t?t:[t.x,t.y,t.z,t.w].join(" ").trim()},e.exports.isCoordinates=s,e.exports.isCoordinate=function(t){return o("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),s(t)},e.exports.toVector3=function(t){return new THREE.Vector3(t.x,t.y,t.z)}},{"./debug":167,"object-assign":25}],167:[function(t,e,n){(function(n){var i=t("debug"),r={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}},o=function(t){var e=i(t);return e.color=function(t){var e=function(t){var e=t.split(":");return e[e.length-1]}(t);return r.colors&&r.colors[e]||null}(t),e};t("object-assign")(o,i);var a=function(){try{return window.localStorage}catch(t){}}();a&&(parseInt(a.logs,10)||"true"===a.logs)?o.enable("*"):o.enable("*:error,*:info,*:warn"),n.browser&&(window.logs=o),e.exports=o}).call(this,t("_process"))},{_process:32,debug:9,"object-assign":25}],168:[function(t,e,n){(function(t){var n,i;function r(){return n}navigator.getVRDisplays&&navigator.getVRDisplays().then(function(t){n=t.length&&t[0],i="Cardboard VRDisplay"===n.displayName}),e.exports.getVRDisplay=r,e.exports.checkHeadsetConnected=function(){return!!r()},e.exports.checkHasPositionalTracking=function(){var t=r();return!s()&&!u()&&t&&t.capabilities.hasPosition};var o,a,s=(a=!1,o=window.navigator.userAgent||window.navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4)))&&(a=!0),(l()||c()||h())&&(a=!0),function(){return a});function c(t){var e=t||window.navigator.userAgent;return/ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(e)}function l(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}function u(){return/SamsungBrowser.+Mobile VR/i.test(window.navigator.userAgent)}function h(){return/R7 Build/.test(window.navigator.userAgent)}e.exports.isMobile=s,e.exports.isTablet=c,e.exports.isIOS=l,e.exports.isGearVR=u,e.exports.isR7=h,e.exports.isLandscape=function(){var t=window.orientation;return h()&&(t+=90),90===t||-90===t},e.exports.isIOSOlderThan10=function(t){return/(iphone|ipod|ipad).*os.(7|8|9)/i.test(t)},e.exports.isBrowserEnvironment=!(t&&!t.browser),e.exports.isNodeEnvironment=!e.exports.isBrowserEnvironment,e.exports.PolyfillControls=function(t){var e;window.VRFrameData&&(e=new window.VRFrameData),this.update=function(){var r;n&&i&&(n.getFrameData(e),null!==(r=e.pose).orientation&&t.quaternion.fromArray(r.orientation),null!==r.position?t.position.fromArray(r.position):t.position.set(0,0,0))}}}).call(this,t("_process"))},{_process:32}],169:[function(t,e,n){var i={};function r(t,e){return i[e=e||"."]||(i[e]={}),-1!==t.indexOf(e)?i[e][t]=t.split(e):i[e][t]=t,i[e][t]}e.exports.getComponentPropertyPath=r,e.exports.propertyPathCache=i,e.exports.getComponentProperty=function(t,e,n){var i;return n=n||".",-1!==e.indexOf(n)?(i=r(e,n)).constructor===String?t.getAttribute(i):t.getAttribute(i[0])[i[1]]:t.getAttribute(e)},e.exports.setComponentProperty=function(t,e,n,i){var o;i=i||".",-1===e.indexOf(i)?t.setAttribute(e,n):(o=r(e,i)).constructor===String?t.setAttribute(o,n):t.setAttribute(o[0],o[1],n)}},{}],170:[function(t,e,n){e.exports=function(t){var e=t.style.width,n=t.style.height;t.style.width=parseInt(e,10)+1+"px",t.style.height=parseInt(n,10)+1+"px",setTimeout(function(){t.style.width=e,t.style.height=n},200)}},{}],171:[function(t,e,n){var i=t("./debug"),r=t("deep-assign"),o=t("./device"),a=t("object-assign"),s=t("./object-pool"),c=i("utils:warn");e.exports.bind=t("./bind"),e.exports.coordinates=t("./coordinates"),e.exports.debug=i,e.exports.device=o,e.exports.entity=t("./entity"),e.exports.forceCanvasResizeSafariMobile=t("./forceCanvasResizeSafariMobile"),e.exports.material=t("./material"),e.exports.objectPool=s,e.exports.split=t("./split").split,e.exports.styleParser=t("./styleParser"),e.exports.trackedControls=t("./tracked-controls"),e.exports.checkHeadsetConnected=function(){return c("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),o.checkHeadsetConnected(arguments)},e.exports.isGearVR=function(){return c("`utils.isGearVR` has moved to `utils.device.isGearVR`"),o.isGearVR(arguments)},e.exports.isIOS=function(){return c("`utils.isIOS` has moved to `utils.device.isIOS`"),o.isIOS(arguments)},e.exports.isMobile=function(){return c("`utils.isMobile has moved to `utils.device.isMobile`"),o.isMobile(arguments)},e.exports.throttle=function(t,n,i){var r;return i&&(t=e.exports.bind(t,i)),function(){var e=Date.now();(void 0===r||(void 0===r?n:e-r)>=n)&&(r=e,t.apply(null,arguments))}},e.exports.throttleTick=function(t,n,i){var r;return i&&(t=e.exports.bind(t,i)),function(e,i){var o=void 0===r?i:e-r;(void 0===r||o>=n)&&(r=e,t(e,o))}},e.exports.debounce=function(t,e,n){var i;return function(){var r=this,o=arguments,a=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||t.apply(r,o)},e),a&&t.apply(r,o)}},e.exports.extend=a,e.exports.extendDeep=r,e.exports.clone=function(t){return JSON.parse(JSON.stringify(t))};var l,u,h=(l=s.createPool(function(){return[]}),function(t,e){var n,i,r,o,a,s;if(void 0===t||void 0===e||null===t||null===e||!(t&&e&&t.constructor===Object&&e.constructor===Object||t.constructor===Array&&e.constructor===Array))return t===e;for(n in i=l.use(),r=l.use(),i.length=0,r.length=0,t)i.push(n);for(n in e)r.push(n);if(i.length!==r.length)return l.recycle(i),l.recycle(r),!1;for(o=0;o<i.length;++o)if(a=t[i[o]],s=e[i[o]],"object"==typeof a||"object"==typeof s||Array.isArray(a)&&Array.isArray(s)){if(a===s)continue;if(!h(a,s))return l.recycle(i),l.recycle(r),!1}else if(a!==s)return l.recycle(i),l.recycle(r),!1;return l.recycle(i),l.recycle(r),!0});e.exports.deepEqual=h,e.exports.diff=(u=[],function(t,e,n){var i,r,o,a,s,c,l;for(s in a=n||{},u.length=0,t)u.push(s);if(!e)return a;for(o in e)-1===u.indexOf(o)&&u.push(o);for(c=0;c<u.length;c++)i=t[s=u[c]],r=e[s],((l=i&&r&&i.constructor===Object&&r.constructor===Object)&&!h(i,r)||!l&&i!==r)&&(a[s]=r);return a}),e.exports.shouldCaptureKeyEvent=function(t){return!t.metaKey&&document.activeElement===document.body},e.exports.splitString=function(t,e){void 0===e&&(e=" ");var n=new RegExp(e,"g");return(t=(t||"").replace(n,e)).split(e)},e.exports.getElData=function(t,e){e=e||{};var n={};return Object.keys(e).forEach(function(e){t.hasAttribute(e)&&(n[e]=t.getAttribute(e))}),n},e.exports.getUrlParameter=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},e.exports.isIframed=function(){return window.top!==window.self},e.exports.findAllScenes=function(t){for(var e=[],n=t.getElementsByTagName("*"),i=0,r=n.length;i<r;i++)n[i].isScene&&e.push(n[i]);return e},e.exports.srcLoader=t("./src-loader")},{"./bind":165,"./coordinates":166,"./debug":167,"./device":168,"./entity":169,"./forceCanvasResizeSafariMobile":170,"./material":172,"./object-pool":173,"./split":174,"./src-loader":175,"./styleParser":176,"./tracked-controls":177,"deep-assign":11,"object-assign":25}],172:[function(t,e,n){var i=t("../lib/three"),r=["application/x-mpegurl","application/vnd.apple.mpegurl"];function o(t,e){e&&(t.emit("materialtextureloaded",{src:e.image,texture:e}),e.image&&"VIDEO"===e.image.tagName&&(e.image.addEventListener("loadeddata",function(){t.components&&t.components.material&&(e.needsCorrectionBGRA&&e.needsCorrectionFlipY&&-1!==["standard","flat"].indexOf(t.components.material.data.shader)&&t.setAttribute("material","shader","ios10hls"),t.emit("materialvideoloadeddata",{src:e.image,texture:e}))}),e.image.addEventListener("ended",function(){t.emit("materialvideoended",{src:e.image,texture:e})})))}e.exports.updateMapMaterialFromData=function(t,e,n,r){var a=n.el,s=n.material,c=r[e];if(n.materialSrcs||(n.materialSrcs={}),!c)return delete n.materialSrcs[t],void l(null);function l(e){s[t]=e,s.needsUpdate=!0,o(a,e)}c!==n.materialSrcs[t]&&(n.materialSrcs[t]=c,c instanceof i.Texture?l(c):a.sceneEl.systems.material.loadTexture(c,{src:c,repeat:r.repeat,offset:r.offset,npot:r.npot},function(e){n.materialSrcs[t]===c&&l(e)}))},e.exports.updateMap=function(t,n){return e.exports.updateMapMaterialFromData("map","src",t,n)},e.exports.updateDistortionMap=function(t,e,n){var i=t;"ambientOcclusion"===t&&(i="ao");var r=e.el,a=e.material,s=n[t+"Map"],c={};if(c.src=s,c.offset=n[t+"TextureOffset"],c.repeat=n[t+"TextureRepeat"],c.wrap=n[t+"TextureWrap"],s){if(s===e[t+"TextureSrc"])return;return e[t+"TextureSrc"]=s,void r.sceneEl.systems.material.loadTexture(s,c,l)}function l(t){a[i+"Map"]=t,a.needsUpdate=!0,o(r,t)}a.map&&l(null)},e.exports.handleTextureEvents=o,e.exports.isHLS=function(t,e){return!(!e||!r.includes(e.toLowerCase()))||!!(t&&t.toLowerCase().indexOf(".m3u8")>0)}},{"../lib/three":149}],173:[function(t,e,n){var i=Object.freeze(Object.create(null));function r(){return{}}function o(t){var e;if(t.constructor===Object)for(e in t)t[e]=void 0}e.exports.createPool=function(t){var e=[],n=null;function a(i){var r,o;if((i=void 0===i?e.length:i)>0&&null==n&&(n=0),i>0)for(r=e.length,e.length+=Number(i),o=r;o<e.length;o++)e[o]=t();return e.length}return t=t||r,{grow:a,pool:e,recycle:function(t){t instanceof Object&&(null!==n&&-1!==n?e[--n]=t:e[e.length]=t)},size:function(){return e.length},use:function(){var t;return null!==n&&n!==e.length||a(e.length||5),t=e[n],e[n++]=i,o(t),t}}},e.exports.clearObject=o},{}],174:[function(t,e,n){var i;e.exports.split=(i={},function(t,e){return e in i||(i[e]={}),t in i[e]?i[e][t]:(i[e][t]=t.split(e),i[e][t])})},{}],175:[function(t,e,n){var i=t("./debug")("utils:src-loader:warn");function r(t,e,n){!function(t,e){var n;t.tagName?e("IMG"===t.tagName):((n=new XMLHttpRequest).open("HEAD",t),n.addEventListener("load",function(i){var r;n.status>=200&&n.status<300?null==(r=n.getResponseHeader("Content-Type"))?a(t,e):r.startsWith("image")?e(!0):e(!1):a(t,e),n.abort()}),n.send())}(t,function(i){i?e(t):n(t)})}function o(t){var e=t.match(/\url\((.+)\)/);if(e)return e[1]}function a(t,e){var n=new Image;n.addEventListener("load",function(){e(!0)}),n.addEventListener("error",function(){e(!1)}),n.src=t}e.exports={parseUrl:o,validateSrc:r,validateCubemapSrc:function(t,e){var n,a,s,c="",l=[];for(a=0;a<5;a++)c+="(url\\((?:[^\\)]+)\\),\\s*)";function u(t){l.push(t),6===l.length&&e(l)}if(c+="(url\\((?:[^\\)]+)\\)\\s*)",s=t.match(new RegExp(c)))for(a=1;a<7;a++)r(o(s[a]),u);else if(n=function(t){try{var e=document.querySelector(t);return e||i('No element was found matching the selector: "%s"',t),e}catch(e){return void i('"%s" is not a valid selector',t)}}(t))return"A-CUBEMAP"===n.tagName&&n.srcs?e(n.srcs):void i('Selector "%s" does not point to <a-cubemap>',t)}}},{"./debug":167}],176:[function(t,e,n){var i=t("style-attr");function r(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}function o(t){var e={};return Object.keys(t).forEach(function(n){var i=r(n);e[i]=t[n]}),e}e.exports.parse=function(t){var e;return"string"!=typeof t?t:(e=i.parse(t))[""]?t:o(e)},e.exports.stringify=function(t){return"string"==typeof t?t:i.stringify(t)},e.exports.toCamelCase=r,e.exports.transformKeysToCamelCase=o},{"style-attr":35}],177:[function(t,e,n){var i=t("./split").split,r=t("../constants").DEFAULT_HANDEDNESS,o=["x","y","z","w"],a=2;function s(t,e,n){var i,r,o=t.el.sceneEl,a=n.index||0;return!!(e&&(r=o&&o.systems["tracked-controls"])&&(i=r.controllers).length&&c(i,null,e,n.hand,a))}function c(t,e,n,o,s){var c,l,u,h,d,p,f=0,m=s||0;for(n&&n.indexOf("|")>=0&&(l=i(n,"|")),u=0;u<t.length;u++){if(c=t[u],l){for(d=!1,h=0;h<l.length;h++)if((p=l[h])&&c.id.startsWith(p)){d=!0;break}if(!d)continue}else if(n&&c.id.indexOf(n))continue;if((n||c.id===e)&&(!o||!c.hand||o===c.hand)){if(o&&!c.hand&&(m=a*s+(o===r?0:1)),f===m)return c;++f}}}e.exports.checkControllerPresentAndSetup=function(t,e,n){var i=t.el,r=s(t,e,n);if(t.controllerPresent&&!t.controllerEventsActive&&t.addEventListeners(),r===t.controllerPresent)return r;t.controllerPresent=r,r?(t.injectTrackedControls(),t.addEventListeners(),i.emit("controllerconnected",{name:t.name,component:t})):(t.removeEventListeners(),i.emit("controllerdisconnected",{name:t.name,component:t}))},e.exports.isControllerPresent=s,e.exports.findMatchingController=c,e.exports.emitIfAxesChanged=function(t,e,n){var i,r,a,s,c;for(r in e){for(i=e[r],a=!1,c=0;c<i.length;c++)n.detail.changed[i[c]]&&(a=!0);if(a){for(s={},c=0;c<i.length;c++)s[o[c]]=n.detail.axis[i[c]];t.el.emit(r+"moved",s)}}},e.exports.onButtonEvent=function(t,e,n,i){var r=(i?n.mapping[i]:n.mapping).buttons[t];n.el.emit(r+e),n.updateModel&&n.updateModel(r,e)}},{"../constants":92,"./split":174}],178:[function(t,e,n){window.glStats=function(){var t=null,e=0,n=0,i=0,r=0,o=0,a=0,s=0;function c(t,e){return function(){e.apply(this,arguments),t.apply(this,arguments)}}return WebGLRenderingContext.prototype.drawArrays=c(WebGLRenderingContext.prototype.drawArrays,function(){e++,arguments[0]==this.POINTS?a+=arguments[2]:o+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=c(WebGLRenderingContext.prototype.drawElements,function(){n++,r+=arguments[1]/3,o+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=c(WebGLRenderingContext.prototype.useProgram,function(){i++}),WebGLRenderingContext.prototype.bindTexture=c(WebGLRenderingContext.prototype.bindTexture,function(){s++}),{update:function(){t("allcalls").set(e+n),t("drawElements").set(n),t("drawArrays").set(e),t("bindTexture").set(s),t("useProgram").set(i),t("glfaces").set(r),t("glvertices").set(o),t("glpoints").set(a)},start:function(){e=0,n=0,i=0,r=0,o=0,a=0,s=0},end:function(){},attach:function(e){t=e},values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(t){var e=null;return{update:function(){e("renderer.info.memory.geometries").set(t.info.memory.geometries),e("renderer.info.programs").set(t.info.programs.length),e("renderer.info.memory.textures").set(t.info.memory.textures),e("renderer.info.render.calls").set(t.info.render.calls),e("renderer.info.render.faces").set(t.info.render.faces),e("renderer.info.render.points").set(t.info.render.points),e("renderer.info.render.vertices").set(t.info.render.vertices)},start:function(){},end:function(){},attach:function(t){e=t},values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.faces":{caption:"Faces",over:1e3},"renderer.info.render.points":{caption:"Points"},"renderer.info.render.vertices":{caption:"Vertices"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.faces","renderer.info.render.points","renderer.info.render.vertices"]}],fractions:[]}},window.BrowserStats=function(){var t=null,e=0,n=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),performance.memory.totalJSHeapSize;var i=Math.log(1024);function r(t){var e=Math.floor(Math.log(t)/i);return Math.round(100*t/Math.pow(1024,e))/100}return{update:function(){e=r(performance.memory.usedJSHeapSize),n=r(performance.memory.totalJSHeapSize),t("memory").set(e),t("total").set(n)},start:function(){e=0},end:function(){},attach:function(e){t=e},values:{memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},groups:[{caption:"Browser",values:["memory","total"]}],fractions:[{base:"total",steps:["memory"]}]}},"object"==typeof e&&(e.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats})},{}],179:[function(t,e,n){"use strict";!function(){"performance"in window==0&&(window.performance={});var t=window.performance;if("now"in t==0){var e=Date.now();t.timing&&t.timing.navigationStart&&(e=t.timing.navigationStart),t.now=function(){return Date.now()-e}}t.mark||(t.mark=function(){}),t.measure||(t.measure=function(){})}(),window.rStats=function(t){function e(t,e){for(var n=Object.keys(t),i=0,r=n.length;i<r;i++)e(n[i])}var n=t||{},i=n.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],r=(n.CSSPath?n.CSSPath:"")+"rStats.css";(n.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",r]).forEach(function(t){var e,n;e=t,(n=document.createElement("link")).href=e,n.rel="stylesheet",n.type="text/css",document.getElementsByTagName("head")[0].appendChild(n)}),n.values||(n.values={});var o,a,s=10,c=200,l={};function u(t){var i=t.toLowerCase();if(void 0===i&&(i="default"),l[i])return l[i];var r=null;n&&n.groups&&e(n.groups,function(t){var e=n.groups[parseInt(t,10)];r||-1===e.values.indexOf(i.toLowerCase())||(r=e)});var o=new function(t,e){var i,r=t,o=0,l=0,u=0,h=0,d=performance.now(),p=0,f=document.createElement("div"),m=document.createElement("span"),g=document.createElement("div"),v=document.createTextNode(""),y=n?n.values[r.toLowerCase()]:null,A=new function(t,e,n){var i={},r=document.createElement("canvas"),o=r.getContext("2d"),a=0,l=0,u=i.color?i.color:"#666666",h=document.createElement("canvas"),d=h.getContext("2d");h.width=1,h.height=2*s,d.fillStyle="#444444",d.fillRect(0,0,1,2*s),d.fillStyle=u,d.fillRect(0,s,1,s),d.fillStyle="#ffffff",d.globalAlpha=.5,d.fillRect(0,s,1,1),d.globalAlpha=1;var p=document.createElement("canvas"),f=p.getContext("2d");return p.width=1,p.height=2*s,f.fillStyle="#444444",f.fillRect(0,0,1,2*s),f.fillStyle="#b70000",f.fillRect(0,s,1,s),f.globalAlpha=.5,f.fillStyle="#ffffff",f.fillRect(0,s,1,1),f.globalAlpha=1,r.width=c,r.height=s,r.style.width=r.width+"px",r.style.height=r.height+"px",r.className="rs-canvas",t.appendChild(r),o.fillStyle="#444444",o.fillRect(0,0,r.width,r.height),{draw:function(t,e){(l+=.1*(t-l))>(a*=.99)&&(a=l),o.drawImage(r,1,0,r.width-1,r.height,0,0,r.width-1,r.height),e?o.drawImage(p,r.width-1,r.height-l*r.height/a-s):o.drawImage(h,r.width-1,r.height-l*r.height/a-s)}}}(f,r,y),w=!1;function b(t){if(y&&y.average){h+=t,p++;var e=performance.now();e-d>=(y.avgMs||1e3)&&(u=h/p,h=0,d=e,p=0)}}function M(){i=performance.now(),n.userTimingAPI&&performance.mark(r+"-start"),w=!0}function E(){o=performance.now()-i,n.userTimingAPI&&(performance.mark(r+"-end"),w&&performance.measure(r,r+"-start",r+"-end")),b(o)}return m.className="rs-counter-id",m.textContent=y&&y.caption?y.caption:r,g.className="rs-counter-value",g.appendChild(v),f.appendChild(m),f.appendChild(g),e?e.div.appendChild(f):a.appendChild(f),i=performance.now(),{set:function(t){b(o=t)},start:M,tick:function(){E(),M()},end:E,frame:function(){var t=performance.now(),e=t-i;l++,e>1e3&&(o=y&&!1===y.interpolate?l:1e3*l/e,l=0,i=t,b(o))},value:function(){return o},draw:function(){var t=y&&y.average?u:o;v.nodeValue=Math.round(100*t)/100;var e=y&&(y.below&&o<y.below||y.over&&o>y.over);A.draw(o,e),f.className=e?"rs-counter-base alarm":"rs-counter-base"}}}(i,r);return l[i]=o,o}function h(){e(n.plugins,function(t){n.plugins[t].update()}),e(l,function(t){l[t].draw()}),n&&n.fractions&&e(n.fractions,function(t){var i=n.fractions[parseInt(t,10)],r=[],o=l[i.base.toLowerCase()];o&&(o=o.value(),e(n.fractions[t].steps,function(e){var i=n.fractions[t].steps[parseInt(e,10)].toLowerCase(),a=l[i];a&&r.push(a.value()/o)})),i.graph.draw(r)})}return function(){if(n.plugins){n.values||(n.values={}),n.groups||(n.groups=[]),n.fractions||(n.fractions=[]);for(var t=0;t<n.plugins.length;t++)n.plugins[t].attach(u),e(n.plugins[t].values,function(e){n.values[e]=n.plugins[t].values[e]}),n.groups=n.groups.concat(n.plugins[t].groups),n.fractions=n.fractions.concat(n.plugins[t].fractions)}else n.plugins={};(o=document.createElement("div")).className="rs-base",(a=document.createElement("div")).className="rs-container",a.style.height="auto",o.appendChild(a),document.body.appendChild(o),n&&(n.groups&&e(n.groups,function(t){var e=n.groups[parseInt(t,10)],i=document.createElement("div");i.className="rs-group",e.div=i;var r=document.createElement("h1");r.textContent=e.caption,r.addEventListener("click",function(t){this.classList.toggle("hidden"),t.preventDefault()}.bind(i)),a.appendChild(r),a.appendChild(i)}),n.fractions&&e(n.fractions,function(t){var r=n.fractions[parseInt(t,10)],o=document.createElement("div");o.className="rs-fraction";var l=document.createElement("div");l.className="rs-legend";var u=0;e(n.fractions[t].steps,function(e){var r=document.createElement("p");r.textContent=n.fractions[t].steps[e],r.style.color=i[u],l.appendChild(r),u++}),o.appendChild(l),o.style.height=u*s+"px",r.div=o;var h=new function(t,n){var r=document.createElement("canvas"),o=r.getContext("2d");return r.width=c,r.height=s*n,r.style.width=r.width+"px",r.style.height=r.height+"px",r.className="rs-canvas",t.appendChild(r),o.fillStyle="#444444",o.fillRect(0,0,r.width,r.height),{draw:function(t){o.drawImage(r,1,0,r.width-1,r.height,0,0,r.width-1,r.height);var n=0;e(t,function(e){var a=t[e]*r.height;o.fillStyle=i[e],o.fillRect(r.width-1,n,1,a),n+=a})}}}(o,u);r.graph=h,a.appendChild(o)}))}(),function(t){return t?u(t):{element:o,update:h}}},"object"==typeof e&&(e.exports=window.rStats)},{}],180:[function(t,e,n){var i={base64:function(t,e){return"data:"+t+";base64,"+e},isMobile:function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},isIOS:function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},isIFrame:function(){try{return window.self!==window.top}catch(t){return!0}},appendQueryParameter:function(t,e,n){return t+(t.indexOf("?")<0?"?":"&")+e+"="+n},getQueryParameter:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},isLandscapeMode:function(){return 90==window.orientation||-90==window.orientation}};e.exports=i},{}],181:[function(t,e,n){var i,r=t("./util.js");e.exports=(i=navigator.userAgent||navigator.vendor||window.opera).match(/iPhone/i)||i.match(/iPod/i)?function(){var t=null;this.request=function(){t||(t=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){t&&(clearInterval(t),t=null)}}:function(){var t=document.createElement("video");t.addEventListener("ended",function(){t.play()}),this.request=function(){t.paused&&(t.src=r.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),t.play())},this.release=function(){t.pause(),t.src=""}}},{"./util.js":180}]},{},[147])(147)}).call(this,i(23),i(212).setImmediate)},function(t,e,n){"use strict";e.__esModule=!0,e.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),e.addEventListener=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},e.removeEventListener=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},e.getConfirmation=function(t,e){return e(window.confirm(t))},e.supportsHistory=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history},e.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},e.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},e.isExtraneousPopstateEvent=function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(t,e,n){"use strict";t.exports={}},function(t,e,n){"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))r.call(n,l)&&(s[l]=n[l]);if(i){a=i(n);for(var u=0;u<a.length;u++)o.call(n,a[u])&&(s[a[u]]=n[a[u]])}}return s}},function(t,e,n){var i=n(214);t.exports=function t(e,n,r){return i(n)||(r=n||r,n=[]),r=r||{},e instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(t,e)}(e,n):i(e)?function(e,n,i){for(var r=[],o=0;o<e.length;o++)r.push(t(e[o],n,i).source);return u(new RegExp("(?:"+r.join("|")+")",h(i)),n)}(e,n,r):function(t,e,n){return d(o(t,n),e,n)}(e,n,r)},t.exports.parse=o,t.exports.compile=function(t,e){return s(o(t,e))},t.exports.tokensToFunction=s,t.exports.tokensToRegExp=d;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(t,e){for(var n,i=[],o=0,a=0,s="",u=e&&e.delimiter||"/";null!=(n=r.exec(t));){var h=n[0],d=n[1],p=n.index;if(s+=t.slice(a,p),a=p+h.length,d)s+=d[1];else{var f=t[a],m=n[2],g=n[3],v=n[4],y=n[5],A=n[6],w=n[7];s&&(i.push(s),s="");var b=null!=m&&null!=f&&f!==m,M="+"===A||"*"===A,E="?"===A||"*"===A,x=n[2]||u,T=v||y;i.push({name:g||o++,prefix:m||"",delimiter:x,optional:E,repeat:M,partial:b,asterisk:!!w,pattern:T?l(T):w?".*":"[^"+c(x)+"]+?"})}}return a<t.length&&(s+=t.substr(a)),s&&i.push(s),i}function a(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function s(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var o="",s=n||{},c=(r||{}).pretty?a:encodeURIComponent,l=0;l<t.length;l++){var u=t[l];if("string"!=typeof u){var h,d=s[u.name];if(null==d){if(u.optional){u.partial&&(o+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(i(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(h=c(d[p]),!e[l].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===p?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(d).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}):c(d),!e[l].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');o+=u.prefix+h}}else o+=u}return o}}function c(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function u(t,e){return t.keys=e,t}function h(t){return t.sensitive?"":"i"}function d(t,e,n){i(e)||(n=e||n,e=[]);for(var r=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<t.length;s++){var l=t[s];if("string"==typeof l)a+=c(l);else{var d=c(l.prefix),p="(?:"+l.pattern+")";e.push(l),l.repeat&&(p+="(?:"+d+p+")*"),a+=p=l.optional?l.partial?d+"("+p+")?":"(?:"+d+"("+p+"))?":d+"("+p+")"}}var f=c(n.delimiter||"/"),m=a.slice(-f.length)===f;return r||(a=(m?a.slice(0,-f.length):a)+"(?:"+f+"(?=$))?"),a+=o?"$":r&&m?"":"(?="+f+"|$)",u(new RegExp("^"+a,h(n)),e)}},function(t,e,n){"use strict";e.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o=l(n(2)),a=n(7),s=n(52),c=l(n(51));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t,e,n){return Math.min(Math.max(t,e),n)};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.getUserConfirmation,n=t.initialEntries,l=void 0===n?["/"]:n,h=t.initialIndex,d=void 0===h?0:h,p=t.keyLength,f=void 0===p?6:p,m=(0,c.default)(),g=function(t){r(M,t),M.length=M.entries.length,m.notifyListeners(M.location,M.action)},v=function(){return Math.random().toString(36).substr(2,f)},y=u(d,0,l.length-1),A=l.map(function(t){return"string"==typeof t?(0,s.createLocation)(t,void 0,v()):(0,s.createLocation)(t,void 0,t.key||v())}),w=a.createPath,b=function(t){var n=u(M.index+t,0,M.entries.length-1),i=M.entries[n];m.confirmTransitionTo(i,"POP",e,function(t){t?g({action:"POP",location:i,index:n}):g()})},M={length:A.length,action:"POP",location:A[y],index:y,entries:A,createHref:w,push:function(t,n){(0,o.default)(!("object"===(void 0===t?"undefined":i(t))&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,s.createLocation)(t,n,v(),M.location);m.confirmTransitionTo(r,"PUSH",e,function(t){if(t){var e=M.index+1,n=M.entries.slice(0);n.length>e?n.splice(e,n.length-e,r):n.push(r),g({action:"PUSH",location:r,index:e,entries:n})}})},replace:function(t,n){(0,o.default)(!("object"===(void 0===t?"undefined":i(t))&&void 0!==t.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var r=(0,s.createLocation)(t,n,v(),M.location);m.confirmTransitionTo(r,"REPLACE",e,function(t){t&&(M.entries[M.index]=r,g({action:"REPLACE",location:r}))})},go:b,goBack:function(){return b(-1)},goForward:function(){return b(1)},canGo:function(t){var e=M.index+t;return e>=0&&e<M.entries.length},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.setPrompt(t)},listen:function(t){return m.appendListener(t)}};return M}},function(t,e,n){"use strict";e.__esModule=!0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=u(n(2)),o=u(n(4)),a=n(52),s=n(7),c=u(n(51)),l=n(78);function u(t){return t&&t.__esModule?t:{default:t}}var h={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+(0,s.stripLeadingSlash)(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:s.stripLeadingSlash,decodePath:s.addLeadingSlash},slash:{encodePath:s.addLeadingSlash,decodePath:s.addLeadingSlash}},d=function(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},p=function(t){var e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(l.canUseDOM,"Hash history needs a DOM");var e=window.history,n=(0,l.supportsGoWithoutReloadUsingHash)(),u=t.getUserConfirmation,f=void 0===u?l.getConfirmation:u,m=t.hashType,g=void 0===m?"slash":m,v=t.basename?(0,s.stripTrailingSlash)((0,s.addLeadingSlash)(t.basename)):"",y=h[g],A=y.encodePath,w=y.decodePath,b=function(){var t=w(d());return(0,r.default)(!v||(0,s.hasBasename)(t,v),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+v+'".'),v&&(t=(0,s.stripBasename)(t,v)),(0,a.createLocation)(t)},M=(0,c.default)(),E=function(t){i(k,t),k.length=e.length,M.notifyListeners(k.location,k.action)},x=!1,T=null,C=function(){var t=d(),e=A(t);if(t!==e)p(e);else{var n=b(),i=k.location;if(!x&&(0,a.locationsAreEqual)(i,n))return;if(T===(0,s.createPath)(n))return;T=null,S(n)}},S=function(t){x?(x=!1,E()):M.confirmTransitionTo(t,"POP",f,function(e){e?E({action:"POP",location:t}):D(t)})},D=function(t){var e=k.location,n=I.lastIndexOf((0,s.createPath)(e));-1===n&&(n=0);var i=I.lastIndexOf((0,s.createPath)(t));-1===i&&(i=0);var r=n-i;r&&(x=!0,O(r))},_=d(),L=A(_);_!==L&&p(L);var N=b(),I=[(0,s.createPath)(N)],O=function(t){(0,r.default)(n,"Hash history go(n) causes a full page reload in this browser"),e.go(t)},j=0,P=function(t){1===(j+=t)?(0,l.addEventListener)(window,"hashchange",C):0===j&&(0,l.removeEventListener)(window,"hashchange",C)},R=!1,k={length:e.length,action:"POP",location:N,createHref:function(t){return"#"+A(v+(0,s.createPath)(t))},push:function(t,e){(0,r.default)(void 0===e,"Hash history cannot push state; it is ignored");var n=(0,a.createLocation)(t,void 0,void 0,k.location);M.confirmTransitionTo(n,"PUSH",f,function(t){if(t){var e=(0,s.createPath)(n),i=A(v+e);if(d()!==i){T=e,function(t){window.location.hash=t}(i);var o=I.lastIndexOf((0,s.createPath)(k.location)),a=I.slice(0,-1===o?0:o+1);a.push(e),I=a,E({action:"PUSH",location:n})}else(0,r.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),E()}})},replace:function(t,e){(0,r.default)(void 0===e,"Hash history cannot replace state; it is ignored");var n=(0,a.createLocation)(t,void 0,void 0,k.location);M.confirmTransitionTo(n,"REPLACE",f,function(t){if(t){var e=(0,s.createPath)(n),i=A(v+e);d()!==i&&(T=e,p(i));var r=I.indexOf((0,s.createPath)(k.location));-1!==r&&(I[r]=e),E({action:"REPLACE",location:n})}})},go:O,goBack:function(){return O(-1)},goForward:function(){return O(1)},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=M.setPrompt(t);return R||(P(1),R=!0),function(){return R&&(R=!1,P(-1)),e()}},listen:function(t){var e=M.appendListener(t);return P(1),function(){P(-1),e()}}};return k}},function(t,e,n){"use strict";e.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o=h(n(2)),a=h(n(4)),s=n(52),c=n(7),l=h(n(51)),u=n(78);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(){try{return window.history.state||{}}catch(t){return{}}};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(u.canUseDOM,"Browser history needs a DOM");var e=window.history,n=(0,u.supportsHistory)(),h=!(0,u.supportsPopStateOnHashChange)(),p=t.forceRefresh,f=void 0!==p&&p,m=t.getUserConfirmation,g=void 0===m?u.getConfirmation:m,v=t.keyLength,y=void 0===v?6:v,A=t.basename?(0,c.stripTrailingSlash)((0,c.addLeadingSlash)(t.basename)):"",w=function(t){var e=t||{},n=e.key,i=e.state,r=window.location,a=r.pathname+r.search+r.hash;return(0,o.default)(!A||(0,c.hasBasename)(a,A),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+a+'" to begin with "'+A+'".'),A&&(a=(0,c.stripBasename)(a,A)),(0,s.createLocation)(a,i,n)},b=function(){return Math.random().toString(36).substr(2,y)},M=(0,l.default)(),E=function(t){r(R,t),R.length=e.length,M.notifyListeners(R.location,R.action)},x=function(t){(0,u.isExtraneousPopstateEvent)(t)||S(w(t.state))},T=function(){S(w(d()))},C=!1,S=function(t){C?(C=!1,E()):M.confirmTransitionTo(t,"POP",g,function(e){e?E({action:"POP",location:t}):D(t)})},D=function(t){var e=R.location,n=L.indexOf(e.key);-1===n&&(n=0);var i=L.indexOf(t.key);-1===i&&(i=0);var r=n-i;r&&(C=!0,I(r))},_=w(d()),L=[_.key],N=function(t){return A+(0,c.createPath)(t)},I=function(t){e.go(t)},O=0,j=function(t){1===(O+=t)?((0,u.addEventListener)(window,"popstate",x),h&&(0,u.addEventListener)(window,"hashchange",T)):0===O&&((0,u.removeEventListener)(window,"popstate",x),h&&(0,u.removeEventListener)(window,"hashchange",T))},P=!1,R={length:e.length,action:"POP",location:_,createHref:N,push:function(t,r){(0,o.default)(!("object"===(void 0===t?"undefined":i(t))&&void 0!==t.state&&void 0!==r),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var a=(0,s.createLocation)(t,r,b(),R.location);M.confirmTransitionTo(a,"PUSH",g,function(t){if(t){var i=N(a),r=a.key,s=a.state;if(n)if(e.pushState({key:r,state:s},null,i),f)window.location.href=i;else{var c=L.indexOf(R.location.key),l=L.slice(0,-1===c?0:c+1);l.push(a.key),L=l,E({action:"PUSH",location:a})}else(0,o.default)(void 0===s,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=i}})},replace:function(t,r){(0,o.default)(!("object"===(void 0===t?"undefined":i(t))&&void 0!==t.state&&void 0!==r),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var a=(0,s.createLocation)(t,r,b(),R.location);M.confirmTransitionTo(a,"REPLACE",g,function(t){if(t){var i=N(a),r=a.key,s=a.state;if(n)if(e.replaceState({key:r,state:s},null,i),f)window.location.replace(i);else{var c=L.indexOf(R.location.key);-1!==c&&(L[c]=a.key),E({action:"REPLACE",location:a})}else(0,o.default)(void 0===s,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(i)}})},go:I,goBack:function(){return I(-1)},goForward:function(){return I(1)},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=M.setPrompt(t);return P||(j(1),P=!0),function(){return P&&(P=!1,j(-1)),e()}},listen:function(t){var e=M.appendListener(t);return j(1),function(){j(-1),e()}}};return R}},function(t,e,n){"use strict";function i(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";n.r(e);var i=n(1),r=n(0),o=n.n(r),a=o.a.shape({trySubscribe:o.a.func.isRequired,tryUnsubscribe:o.a.func.isRequired,notifyNestedSubs:o.a.func.isRequired,isSubscribed:o.a.func.isRequired}),s=o.a.shape({subscribe:o.a.func.isRequired,dispatch:o.a.func.isRequired,getState:o.a.func.isRequired});function c(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1]||e+"Subscription",r=function(t){function r(n,i){!function(t,e){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,i));return o[e]=n.store,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,t),r.prototype.getChildContext=function(){var t;return(t={})[e]=this[e],t[n]=null,t},r.prototype.render=function(){return i.Children.only(this.props.children)},r}(i.Component);return r.propTypes={store:s.isRequired,children:o.a.element.isRequired},r.childContextTypes=((t={})[e]=s.isRequired,t[n]=a,t),r}var l=c(),u=n(45),h=n.n(u),d=n(4),p=n.n(d),f=null,m={notify:function(){}},g=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.store=e,this.parentSub=n,this.onStateChange=i,this.unsubscribe=null,this.listeners=m}return t.prototype.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},t.prototype.notifyNestedSubs=function(){this.listeners.notify()},t.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},t.prototype.trySubscribe=function(){var t,e;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(t=[],e=[],{clear:function(){e=f,t=f},notify:function(){for(var n=t=e,i=0;i<n.length;i++)n[i]()},get:function(){return e},subscribe:function(n){var i=!0;return e===t&&(e=t.slice()),e.push(n),function(){i&&t!==f&&(i=!1,e===t&&(e=t.slice()),e.splice(e.indexOf(n),1))}}}))},t.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=m)},t}(),v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},y=0,A={};function w(){}function b(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.getDisplayName,c=void 0===o?function(t){return"ConnectAdvanced("+t+")"}:o,l=r.methodName,u=void 0===l?"connectAdvanced":l,d=r.renderCountProp,f=void 0===d?void 0:d,m=r.shouldHandleStateChanges,b=void 0===m||m,M=r.storeKey,E=void 0===M?"store":M,x=r.withRef,T=void 0!==x&&x,C=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(r,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),S=E+"Subscription",D=y++,_=((e={})[E]=s,e[S]=a,e),L=((n={})[S]=a,n);return function(e){p()("function"==typeof e,"You must pass a component to the function returned by "+u+". Instead received "+JSON.stringify(e));var n=e.displayName||e.name||"Component",r=c(n),o=v({},C,{getDisplayName:c,methodName:u,renderCountProp:f,shouldHandleStateChanges:b,storeKey:E,withRef:T,displayName:r,wrappedComponentName:n,WrappedComponent:e}),a=function(n){function a(t,e){!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t,e));return i.version=D,i.state={},i.renderCount=0,i.store=t[E]||e[E],i.propsMode=Boolean(t[E]),i.setWrappedInstance=i.setWrappedInstance.bind(i),p()(i.store,'Could not find "'+E+'" in either the context or props of "'+r+'". Either wrap the root component in a <Provider>, or explicitly pass "'+E+'" as a prop to "'+r+'".'),i.initSelector(),i.initSubscription(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,n),a.prototype.getChildContext=function(){var t,e=this.propsMode?null:this.subscription;return(t={})[S]=e||this.context[S],t},a.prototype.componentDidMount=function(){b&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},a.prototype.componentWillReceiveProps=function(t){this.selector.run(t)},a.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},a.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=w,this.store=null,this.selector.run=w,this.selector.shouldComponentUpdate=!1},a.prototype.getWrappedInstance=function(){return p()(T,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+u+"() call."),this.wrappedInstance},a.prototype.setWrappedInstance=function(t){this.wrappedInstance=t},a.prototype.initSelector=function(){var e=t(this.store.dispatch,o);this.selector=function(t,e){var n={run:function(i){try{var r=t(e.getState(),i);(r!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=r,n.error=null)}catch(t){n.shouldComponentUpdate=!0,n.error=t}}};return n}(e,this.store),this.selector.run(this.props)},a.prototype.initSubscription=function(){if(b){var t=(this.propsMode?this.props:this.context)[S];this.subscription=new g(this.store,t,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},a.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(A)):this.notifyNestedSubs()},a.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},a.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},a.prototype.addExtraProps=function(t){if(!(T||f||this.propsMode&&this.subscription))return t;var e=v({},t);return T&&(e.ref=this.setWrappedInstance),f&&(e[f]=this.renderCount++),this.propsMode&&this.subscription&&(e[S]=this.subscription),e},a.prototype.render=function(){var t=this.selector;if(t.shouldComponentUpdate=!1,t.error)throw t.error;return Object(i.createElement)(e,this.addExtraProps(t.props))},a}(i.Component);return a.WrappedComponent=e,a.displayName=r,a.childContextTypes=L,a.contextTypes=_,a.propTypes=_,h()(a,e)}}var M=Object.prototype.hasOwnProperty;function E(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function x(t,e){if(E(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++)if(!M.call(e,n[r])||!E(t[n[r]],e[n[r]]))return!1;return!0}var T=n(44);function C(t){return function(e,n){var i=t(e,n);function r(){return i}return r.dependsOnOwnProps=!1,r}}function S(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function D(t,e){return function(e,n){n.displayName;var i=function(t,e){return i.dependsOnOwnProps?i.mapToProps(t,e):i.mapToProps(t)};return i.dependsOnOwnProps=!0,i.mapToProps=function(e,n){i.mapToProps=t,i.dependsOnOwnProps=S(t);var r=i(e,n);return"function"==typeof r&&(i.mapToProps=r,i.dependsOnOwnProps=S(r),r=i(e,n)),r},i}}n(57);var _=[function(t){return"function"==typeof t?D(t):void 0},function(t){return t?void 0:C(function(t){return{dispatch:t}})},function(t){return t&&"object"==typeof t?C(function(e){return Object(T.bindActionCreators)(t,e)}):void 0}],L=[function(t){return"function"==typeof t?D(t):void 0},function(t){return t?void 0:C(function(){return{}})}],N=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function I(t,e,n){return N({},n,t,e)}var O=[function(t){return"function"==typeof t?function(t){return function(e,n){n.displayName;var i=n.pure,r=n.areMergedPropsEqual,o=!1,a=void 0;return function(e,n,s){var c=t(e,n,s);return o?i&&r(c,a)||(a=c):(o=!0,a=c),a}}}(t):void 0},function(t){return t?void 0:function(){return I}}];function j(t,e){var n=e.initMapStateToProps,i=e.initMapDispatchToProps,r=e.initMergeProps,o=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(t,o),s=i(t,o),c=r(t,o);return(o.pure?function(t,e,n,i,r){var o=r.areStatesEqual,a=r.areOwnPropsEqual,s=r.areStatePropsEqual,c=!1,l=void 0,u=void 0,h=void 0,d=void 0,p=void 0;function f(r,c){var f,m,g=!a(c,u),v=!o(r,l);return l=r,u=c,g&&v?(h=t(l,u),e.dependsOnOwnProps&&(d=e(i,u)),p=n(h,d,u)):g?(t.dependsOnOwnProps&&(h=t(l,u)),e.dependsOnOwnProps&&(d=e(i,u)),p=n(h,d,u)):v?(f=t(l,u),m=!s(f,h),h=f,m&&(p=n(h,d,u)),p):p}return function(r,o){return c?f(r,o):(h=t(l=r,u=o),d=e(i,u),p=n(h,d,u),c=!0,p)}}:function(t,e,n,i){return function(r,o){return n(t(r,o),e(i,o),o)}})(a,s,c,t,o)}var P=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function R(t,e,n){for(var i=e.length-1;i>=0;i--){var r=e[i](t);if(r)return r}return function(e,i){throw new Error("Invalid value of type "+typeof t+" for "+n+" argument when connecting component "+i.wrappedComponentName+".")}}function k(t,e){return t===e}var z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.connectHOC,n=void 0===e?b:e,i=t.mapStateToPropsFactories,r=void 0===i?L:i,o=t.mapDispatchToPropsFactories,a=void 0===o?_:o,s=t.mergePropsFactories,c=void 0===s?O:s,l=t.selectorFactory,u=void 0===l?j:l;return function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=o.pure,l=void 0===s||s,h=o.areStatesEqual,d=void 0===h?k:h,p=o.areOwnPropsEqual,f=void 0===p?x:p,m=o.areStatePropsEqual,g=void 0===m?x:m,v=o.areMergedPropsEqual,y=void 0===v?x:v,A=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(o,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),w=R(t,r,"mapStateToProps"),b=R(e,a,"mapDispatchToProps"),M=R(i,c,"mergeProps");return n(u,P({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:w,initMapDispatchToProps:b,initMergeProps:M,pure:l,areStatesEqual:d,areOwnPropsEqual:f,areStatePropsEqual:g,areMergedPropsEqual:y},A))}}();n.d(e,"Provider",function(){return l}),n.d(e,"createProvider",function(){return c}),n.d(e,"connectAdvanced",function(){return b}),n.d(e,"connect",function(){return z})},function(t,e,n){"use strict";n.r(e);var i=n(2),r=n.n(i),o=n(1),a=n.n(o),s=n(0),c=n.n(s),l=n(84),u=n.n(l),h=n(4),d=n.n(h),p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var m=function(t){function e(){var n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=i=f(this,t.call.apply(t,[this].concat(o))),i.state={match:i.computeMatch(i.props.history.location.pathname)},f(i,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getChildContext=function(){return{router:p({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},e.prototype.computeMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}},e.prototype.componentWillMount=function(){var t=this,e=this.props,n=e.children,i=e.history;d()(null==n||1===a.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=i.listen(function(){t.setState({match:t.computeMatch(i.location.pathname)})})},e.prototype.componentWillReceiveProps=function(t){r()(this.props.history===t.history,"You cannot change <Router history>")},e.prototype.componentWillUnmount=function(){this.unlisten()},e.prototype.render=function(){var t=this.props.children;return t?a.a.Children.only(t):null},e}(a.a.Component);m.propTypes={history:c.a.object.isRequired,children:c.a.node},m.contextTypes={router:c.a.object},m.childContextTypes={router:c.a.object.isRequired};var g=m,v=g;function y(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var A=function(t){function e(){var n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=i=y(this,t.call.apply(t,[this].concat(o))),i.history=u()(i.props),y(i,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentWillMount=function(){r()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},e.prototype.render=function(){return a.a.createElement(v,{history:this.history,children:this.props.children})},e}(a.a.Component);A.propTypes={basename:c.a.string,forceRefresh:c.a.bool,getUserConfirmation:c.a.func,keyLength:c.a.number,children:c.a.node};var w=A,b=n(83),M=n.n(b);function E(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var x=function(t){function e(){var n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=i=E(this,t.call.apply(t,[this].concat(o))),i.history=M()(i.props),E(i,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentWillMount=function(){r()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},e.prototype.render=function(){return a.a.createElement(v,{history:this.history,children:this.props.children})},e}(a.a.Component);x.propTypes={basename:c.a.string,getUserConfirmation:c.a.func,hashType:c.a.oneOf(["hashbang","noslash","slash"]),children:c.a.node};var T=x,C=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function S(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var D=function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)},_=function(t){function e(){var n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=i=S(this,t.call.apply(t,[this].concat(o))),i.handleClick=function(t){if(i.props.onClick&&i.props.onClick(t),!t.defaultPrevented&&0===t.button&&!i.props.target&&!D(t)){t.preventDefault();var e=i.context.router.history,n=i.props,r=n.replace,o=n.to;r?e.replace(o):e.push(o)}},S(i,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(){var t=this.props,e=(t.replace,t.to),n=t.innerRef,i=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(t,["replace","to","innerRef"]);d()(this.context.router,"You should not use <Link> outside a <Router>");var r=this.context.router.history.createHref("string"==typeof e?{pathname:e}:e);return a.a.createElement("a",C({},i,{onClick:this.handleClick,href:r,ref:n}))},e}(a.a.Component);_.propTypes={onClick:c.a.func,target:c.a.string,replace:c.a.bool,to:c.a.oneOfType([c.a.string,c.a.object]).isRequired,innerRef:c.a.oneOfType([c.a.string,c.a.func])},_.defaultProps={replace:!1},_.contextTypes={router:c.a.shape({history:c.a.shape({push:c.a.func.isRequired,replace:c.a.func.isRequired,createHref:c.a.func.isRequired}).isRequired}).isRequired};var L=_,N=n(82),I=n.n(N);function O(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var j=function(t){function e(){var n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=i=O(this,t.call.apply(t,[this].concat(o))),i.history=I()(i.props),O(i,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentWillMount=function(){r()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},e.prototype.render=function(){return a.a.createElement(g,{history:this.history,children:this.props.children})},e}(a.a.Component);j.propTypes={initialEntries:c.a.array,initialIndex:c.a.number,getUserConfirmation:c.a.func,keyLength:c.a.number,children:c.a.node};var P=j,R=n(81),k=n.n(R),z={},B=0,F=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&(e={path:e});var n=e,i=n.path,r=void 0===i?"/":i,o=n.exact,a=void 0!==o&&o,s=n.strict,c=void 0!==s&&s,l=n.sensitive,u=function(t,e){var n=""+e.end+e.strict+e.sensitive,i=z[n]||(z[n]={});if(i[t])return i[t];var r=[],o={re:k()(t,r,e),keys:r};return B<1e4&&(i[t]=o,B++),o}(r,{end:a,strict:c,sensitive:void 0!==l&&l}),h=u.re,d=u.keys,p=h.exec(t);if(!p)return null;var f=p[0],m=p.slice(1),g=t===f;return a&&!g?null:{path:r,url:"/"===r&&""===f?"/":f,isExact:g,params:d.reduce(function(t,e,n){return t[e.name]=m[n],t},{})}},U=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function H(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var G=function(t){return 0===a.a.Children.count(t)},Q=function(t){function e(){var n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=i=H(this,t.call.apply(t,[this].concat(o))),i.state={match:i.computeMatch(i.props,i.context.router)},H(i,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getChildContext=function(){return{router:U({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},e.prototype.computeMatch=function(t,e){var n=t.computedMatch,i=t.location,r=t.path,o=t.strict,a=t.exact,s=t.sensitive;if(n)return n;d()(e,"You should not use <Route> or withRouter() outside a <Router>");var c=e.route,l=(i||c.location).pathname;return r?F(l,{path:r,strict:o,exact:a,sensitive:s}):c.match},e.prototype.componentWillMount=function(){r()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),r()(!(this.props.component&&this.props.children&&!G(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),r()(!(this.props.render&&this.props.children&&!G(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},e.prototype.componentWillReceiveProps=function(t,e){r()(!(t.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),r()(!(!t.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(t,e.router)})},e.prototype.render=function(){var t=this.state.match,e=this.props,n=e.children,i=e.component,r=e.render,o=this.context.router,s=o.history,c=o.route,l=o.staticContext,u={match:t,location:this.props.location||c.location,history:s,staticContext:l};return i?t?a.a.createElement(i,u):null:r?t?r(u):null:n?"function"==typeof n?n(u):G(n)?null:a.a.Children.only(n):null},e}(a.a.Component);Q.propTypes={computedMatch:c.a.object,path:c.a.string,exact:c.a.bool,strict:c.a.bool,sensitive:c.a.bool,component:c.a.func,render:c.a.func,children:c.a.oneOfType([c.a.func,c.a.node]),location:c.a.object},Q.contextTypes={router:c.a.shape({history:c.a.object.isRequired,route:c.a.object.isRequired,staticContext:c.a.object})},Q.childContextTypes={router:c.a.object.isRequired};var V=Q,Y=V,W=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X=function(t){var e=t.to,n=t.exact,i=t.strict,r=t.location,o=t.activeClassName,s=t.className,c=t.activeStyle,l=t.style,u=t.isActive,h=t.ariaCurrent,d=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(t,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","ariaCurrent"]);return a.a.createElement(Y,{path:"object"===(void 0===e?"undefined":q(e))?e.pathname:e,exact:n,strict:i,location:r,children:function(t){var n=t.location,i=t.match,r=!!(u?u(i,n):i);return a.a.createElement(L,W({to:e,className:r?[s,o].filter(function(t){return t}).join(" "):s,style:r?W({},l,c):l,"aria-current":r&&h},d))}})};X.propTypes={to:L.propTypes.to,exact:c.a.bool,strict:c.a.bool,location:c.a.object,activeClassName:c.a.string,className:c.a.string,activeStyle:c.a.object,style:c.a.object,isActive:c.a.func,ariaCurrent:c.a.oneOf(["page","step","location","true"])},X.defaultProps={activeClassName:"active",ariaCurrent:"true"};var Z=X,K=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.enable=function(t){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(t)},e.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},e.prototype.componentWillMount=function(){d()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},e.prototype.componentWillReceiveProps=function(t){t.when?this.props.when&&this.props.message===t.message||this.enable(t.message):this.disable()},e.prototype.componentWillUnmount=function(){this.disable()},e.prototype.render=function(){return null},e}(a.a.Component);K.propTypes={when:c.a.bool,message:c.a.oneOfType([c.a.func,c.a.string]).isRequired},K.defaultProps={when:!0},K.contextTypes={router:c.a.shape({history:c.a.shape({block:c.a.func.isRequired}).isRequired}).isRequired};var J=K,$=n(55),tt=n(54),et=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},nt=function(t,e,n,i){var r=void 0;"string"==typeof t?(r=function(t){var e=t||"/",n="",i="",r=e.indexOf("#");-1!==r&&(i=e.substr(r),e=e.substr(0,r));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===i?"":i}}(t)).state=e:(void 0===(r=et({},t)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==e&&void 0===r.state&&(r.state=e));try{r.pathname=decodeURI(r.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(r.key=n),i?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=Object($.default)(r.pathname,i.pathname)):r.pathname=i.pathname:r.pathname||(r.pathname="/"),r};"undefined"==typeof window||!window.document||window.document.createElement,"function"==typeof Symbol&&Symbol.iterator,Object.assign,Object.assign,"function"==typeof Symbol&&Symbol.iterator,Object.assign;var it=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},e.prototype.componentWillMount=function(){d()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},e.prototype.componentDidMount=function(){this.isStatic()||this.perform()},e.prototype.componentDidUpdate=function(t){var e=nt(t.to),n=nt(this.props.to);!function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&Object(tt.default)(t.state,e.state)}(e,n)?this.perform():r()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"')},e.prototype.perform=function(){var t=this.context.router.history,e=this.props,n=e.push,i=e.to;n?t.push(i):t.replace(i)},e.prototype.render=function(){return null},e}(a.a.Component);it.propTypes={push:c.a.bool,from:c.a.string,to:c.a.oneOfType([c.a.string,c.a.object]).isRequired},it.defaultProps={push:!1},it.contextTypes={router:c.a.shape({history:c.a.shape({push:c.a.func.isRequired,replace:c.a.func.isRequired}).isRequired,staticContext:c.a.object}).isRequired};var rt=it,ot=n(7),at=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function st(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var ct=function(t,e){return t?at({},e,{pathname:Object(ot.addLeadingSlash)(t)+e.pathname}):e},lt=function(t){return"string"==typeof t?Object(ot.parsePath)(t):(i=void 0===(n=(e=t).pathname)?"/":n,o=void 0===(r=e.search)?"":r,s=void 0===(a=e.hash)?"":a,{pathname:i,search:"?"===o?"":o,hash:"#"===s?"":s});var e,n,i,r,o,a,s},ut=function(t){return"string"==typeof t?t:Object(ot.createPath)(t)},ht=function(t){return function(){d()(!1,"You cannot %s with <StaticRouter>",t)}},dt=function(){},pt=function(t){function e(){var n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=i=st(this,t.call.apply(t,[this].concat(o))),i.createHref=function(t){return Object(ot.addLeadingSlash)(i.props.basename+ut(t))},i.handlePush=function(t){var e=i.props,n=e.basename,r=e.context;r.action="PUSH",r.location=ct(n,lt(t)),r.url=ut(r.location)},i.handleReplace=function(t){var e=i.props,n=e.basename,r=e.context;r.action="REPLACE",r.location=ct(n,lt(t)),r.url=ut(r.location)},i.handleListen=function(){return dt},i.handleBlock=function(){return dt},st(i,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},e.prototype.componentWillMount=function(){r()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},e.prototype.render=function(){var t=this.props,e=t.basename,n=(t.context,t.location),i=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(t,["basename","context","location"]),r={createHref:this.createHref,action:"POP",location:function(t,e){if(!t)return e;var n=Object(ot.addLeadingSlash)(t);return 0!==e.pathname.indexOf(n)?e:at({},e,{pathname:e.pathname.substr(n.length)})}(e,lt(n)),push:this.handlePush,replace:this.handleReplace,go:ht("go"),goBack:ht("goBack"),goForward:ht("goForward"),listen:this.handleListen,block:this.handleBlock};return a.a.createElement(g,at({},i,{history:r}))},e}(a.a.Component);pt.propTypes={basename:c.a.string,context:c.a.object.isRequired,location:c.a.oneOfType([c.a.string,c.a.object])},pt.defaultProps={basename:"",location:"/"},pt.childContextTypes={router:c.a.object.isRequired};var ft=pt,mt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentWillMount=function(){d()(this.context.router,"You should not use <Switch> outside a <Router>")},e.prototype.componentWillReceiveProps=function(t){r()(!(t.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),r()(!(!t.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},e.prototype.render=function(){var t=this.context.router.route,e=this.props.children,n=this.props.location||t.location,i=void 0,r=void 0;return a.a.Children.forEach(e,function(e){if(a.a.isValidElement(e)){var o=e.props,s=o.path,c=o.exact,l=o.strict,u=o.sensitive,h=o.from,d=s||h;null==i&&(r=e,i=d?F(n.pathname,{path:d,exact:c,strict:l,sensitive:u}):t.match)}}),i?a.a.cloneElement(r,{location:n,computedMatch:i}):null},e}(a.a.Component);mt.contextTypes={router:c.a.shape({route:c.a.object.isRequired}).isRequired},mt.propTypes={children:c.a.node,location:c.a.object};var gt=mt,vt=F,yt=n(45),At=n.n(yt),wt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bt=function(t){var e=function(e){var n=e.wrappedComponentRef,i=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(e,["wrappedComponentRef"]);return a.a.createElement(V,{render:function(e){return a.a.createElement(t,wt({},i,e,{ref:n}))}})};return e.displayName="withRouter("+(t.displayName||t.name)+")",e.WrappedComponent=t,e.propTypes={wrappedComponentRef:c.a.func},At()(e,t)};n.d(e,"BrowserRouter",function(){return w}),n.d(e,"HashRouter",function(){return T}),n.d(e,"Link",function(){return L}),n.d(e,"MemoryRouter",function(){return P}),n.d(e,"NavLink",function(){return Z}),n.d(e,"Prompt",function(){return J}),n.d(e,"Redirect",function(){return rt}),n.d(e,"Route",function(){return Y}),n.d(e,"Router",function(){return v}),n.d(e,"StaticRouter",function(){return ft}),n.d(e,"Switch",function(){return gt}),n.d(e,"matchPath",function(){return vt}),n.d(e,"withRouter",function(){return bt})},function(t,e,n){"use strict";function i(t){return function(e){var n=e.dispatch,i=e.getState;return function(e){return function(r){return"function"==typeof r?r(n,i,t):e(r)}}}}e.__esModule=!0;var r=i();r.withExtraArgument=i,e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(0,n(44).combineReducers)({});e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(44),r=a(n(89)),o=a(n(88));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.createStore)(r.default,t,(0,i.applyMiddleware)(o.default))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),o=l(r),a=l(n(16)),s=l(n(14)),c=l(n(15));function l(t){return t&&t.__esModule?t:{default:t}}n(18),n(31),n(17),n(30),n(29),n(28),n(27),n(26),n(25),n(24);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.onSceneLoad=n.onSceneLoad.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),i(e,[{key:"onSceneLoad",value:function(){document.querySelector("a-scene").querySelector(".butterfly").setAttribute("material-butterfly",{}),document.querySelector("a-scene").querySelector(".cloud").setAttribute("material-cloud",{})}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){document.querySelector("a-scene").addEventListener("loaded",this.onSceneLoad),AFRAME.registerShader("skyGradient",{schema:{colorTop:{type:"color",default:"black",is:"uniform"},colorBottom:{type:"color",default:"red",is:"uniform"}},vertexShader:["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 colorTop;","uniform vec3 colorBottom;","varying vec3 vWorldPosition;","void main()","{","vec3 pointOnSphere = normalize(vWorldPosition.xyz);","float f = 1.0;","if(pointOnSphere.y > - 0.2){","f = sin(pointOnSphere.y * 2.0);","}","gl_FragColor = vec4(mix(colorBottom,colorTop, f ), 1.0);","}"].join("\n")})}},{key:"componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return o.default.createElement(s.default,{roomid:"98989898","networked-scene":!0,"networked-audio":!0},o.default.createElement("a-assets",null),o.default.createElement("a-entity",{class:"butterfly",position:"0 1 0"}),o.default.createElement("a-entity",{class:"cloud",rotation:"-90 0 0",position:"0 0 0"}),o.default.createElement("a-entity",{"material-par":!0,position:"0 0 -3"}),o.default.createElement(c.default,null),o.default.createElement(a.default,{gun:!0}),o.default.createElement("a-entity",{class:"target0","gltf-model":"/others/target/target.glb","static-body":!0,scale:"10 10 10",position:"0 10 -50",rotation:"0 0 0"}),o.default.createElement("a-entity",{class:"target1","gltf-model":"/others/target/target.glb","static-body":!0,scale:"10 10 10",position:"0  4 -30",rotation:"0 120 0"}),o.default.createElement("a-entity",{class:"target2","gltf-model":"/others/target/target.glb","static-body":!0,scale:"10 10 10",position:"0 15  -80",rotation:"0 0 0"}),o.default.createElement("a-entity",{light:"type: ambient; intensity: 0.5;"}),o.default.createElement("a-entity",{light:"type: directional ; castShadow: false; intensity: 0.4; shadowCameraVisible: false; shadowCameraFar: 120; shadowMapWidth: 1024; shadowMapHeight: 1024;",position:"0 155 -150"}),o.default.createElement("a-entity",{light:" castShadow: true; intensity: 0.2;shadowBias: 0.01; shadowCameraNear: 1; shadowCameraBias: 0.01;type: point; shadowCameraFar: 400;shadowMapWidth: 4024; shadowMapHeight: 4024",position:"0 155 -150"}),o.default.createElement("a-entity",{id:"sky",geometry:"primitive: sphere; radius: 650;",material:"shader: skyGradient; colorTop: skyblue; colorBottom: skywhite; side: back"}),o.default.createElement("a-entity",{shadow:"receive: true",environment:"shadow: true; flatShading: true;ground: hills; groundYScale: 25; seed: 17; groundColor:brown; groundColor2:black; horizonColor: #a3dab8; grid: none;groundTexture:walkernoise;;dressing: none; "}))}}]),e}();e.default=u},function(t,e,n){"use strict";function i(t){this.size=Math.pow(2,t)+1,this.max=this.size-1,this.map=new Float32Array(this.size*this.size)}function r(t){var e=[181,186,136];return t>=20&&(e=[244,255,148]),t>=26&&(e=[48,140,48]),t>=28&&(e=[54,117,43]),t>=30&&(e=[99,99,99]),t>=36&&(e=[240,240,240]),"rgb("+e[0]+", "+e[1]+", "+e[2]+")"}i.prototype.setMap=function(t){this.map=t},i.prototype.get=function(t,e){return t<0||t>this.max||e<0||e>this.max?-1:this.map[t+this.size*e]},i.prototype.set=function(t,e,n){this.map[t+this.size*e]=n},i.prototype.generate=function(t){var e=this;function n(t){var e=t.filter(function(t){return-1!==t});return e.reduce(function(t,e){return t+e},0)/e.length}function i(t,i,r,o){var a=n([e.get(t-r,i-r),e.get(t+r,i-r),e.get(t+r,i+r),e.get(t-r,i+r)]);e.set(t,i,a+o)}function r(t,i,r,o){var a=n([e.get(t,i-r),e.get(t+r,i),e.get(t,i+r),e.get(t-r,i)]);e.set(t,i,a+o)}this.set(0,0,e.max),this.set(this.max,0,e.max/2),this.set(this.max,this.max,0),this.set(0,this.max,e.max/2),function n(o){var a,s,c=o/2,l=t*o;if(!(c<1)){for(s=c;s<e.max;s+=o)for(a=c;a<e.max;a+=o)i(a,s,c,Math.random()*l*2-l);for(s=0;s<=e.max;s+=c)for(a=(s+c)%o;a<=e.max;a+=o)r(a,s,c,Math.random()*l*2-l);n(o/2)}}(this.max)},i.prototype.getAverageHeight=function(){return this.map.reduce(function(t,e){return t+e},0)/this.map.length},i.prototype.getMinHeight=function(){var t=1/0;return this.map.forEach(function(e){e<t&&(t=e)}),t},i.prototype.getMaxHeight=function(){var t=-1/0;return this.map.forEach(function(e){e>t&&(t=e)}),t},i.prototype._toMesh=function(t,e,n,i){for(var r=new THREE.PlaneGeometry(t,t,e-1,e-1),o=t/e,a=1/0,s=-1/0,c=0;c<e;c++)for(var l=0;l<e;l++){var u=this.get(Math.floor(l*o*this.size/t),Math.floor(c*o*this.size/t));u<a&&(a=u),u>s&&(s=u),u<0&&(u=0),0!==c&&c!==e-1&&0!==l&&l!==e-1||(u=0),r.vertices[c*e+l].z=u}var h=(s-a)/2;r.vertices.forEach(function(t){t.z-=h});var d=this.createTexture(t,e),p=new THREE.MeshPhongMaterial({map:d,wireframe:n,shading:THREE.FlatShading,side:THREE.DoubleSide,shininess:0}),f=new THREE.Mesh(r,p);return f.rotation.x=-Math.PI/2,f.receiveShadow=!0,f.castShadow=!0,f.position.y-=this.getMinHeight(),f},i.prototype.toShadedMesh=function(t,e,n){return this._toMesh(t,e,!1,n)},i.prototype.toWireframeMesh=function(t,e,n){return this._toMesh(t,e,!0,n)},i.prototype.createTexture=function(t,e){var n=document.createElement("canvas");n.width=t,n.height=t;for(var i=t/e,o=n.getContext("2d"),a=(this.getMinHeight(),this.getMaxHeight(),0);a<e;a++)for(var s=0;s<e;s++){var c=this.get(Math.floor(s*i*this.size/t),Math.floor(a*i*this.size/t));o.fillStyle=r(c),o.fillRect(s*i,a*i,i,i)}return new THREE.CanvasTexture(n)},AFRAME.registerComponent("terrain",{schema:{detail:{type:"int",default:5},sharpness:{type:"number",default:.5},width:{type:"int",default:200},increments:{type:"int",default:20},color:{type:"color",default:"#ff0"}},init:function(){},update:function(){var t=this.data,e=(this.el,new i(t.detail));e.generate(t.sharpness);var n=e.toShadedMesh(t.width,t.increments,t.color),r=new THREE.Raycaster;r.set(new THREE.Vector3(0,-10,0),new THREE.Vector3(0,1,0),0,1e3);for(var o=0;r.intersectObject(n).length&&o<50;)e.generate(t.sharpness),n=e.toShadedMesh(t.width,t.increments,t.color),o++;this.el.setObject3D("mesh",n)},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-terrain",{defaultComponents:{terrain:{}},mappings:{detail:"terrain.detail",sharpness:"terrain.sharpness",width:"terrain.width",increments:"terrain.increments",color:"terrain.color"}})},function(t,e,n){"use strict";if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("environment",{schema:{active:{default:!1},preset:{default:"default",oneOf:["none","default","contact","egypt","checkerboard","forest","goaland","yavapai","goldmine","arches","threetowers","poison","tron","japan","dream","volcano","starry","osiris"]},seed:{type:"int",default:1,min:0,max:1e3},skyType:{default:"color",oneOf:["none","color","gradient","atmosphere"]},skyColor:{type:"color"},horizonColor:{type:"color"},lighting:{default:"distant",oneOf:["none","distant","point"]},shadow:{default:!1},shadowSize:{default:10},lightPosition:{type:"vec3",default:{x:0,y:1,z:-.2}},fog:{type:"float",default:0,min:0,max:1},flatShading:{default:!1},playArea:{type:"float",default:1,min:1,max:100},ground:{default:"hills",oneOf:["none","flat","hills","canyon","spikes","noise"]},groundYScale:{type:"float",default:3,min:0,max:50},groundTexture:{default:"none",oneOf:["none","checkerboard","squares","walkernoise"]},groundColor:{type:"color",default:"#553e35"},groundColor2:{type:"color",default:"#694439"},dressing:{default:"none",oneOf:["none","cubes","pyramids","cylinders","hexagons","stones","trees","mushrooms","towers","apparatus","arches","torii"]},dressingAmount:{type:"int",default:10,min:0,max:1e3},dressingColor:{type:"color",default:"#795449"},dressingScale:{type:"float",default:5,min:0,max:100},dressingVariance:{type:"vec3",default:{x:1,y:1,z:1}},dressingUniformScale:{default:!0},dressingOnPlayArea:{type:"float",default:0,min:0,max:1},grid:{default:"none",oneOf:["none","1x1","2x2","crosses","dots","xlines","ylines"]},gridColor:{type:"color",default:"#ccc"}},multiple:!1,presets:{none:{},default:{active:!0,seed:1,skyType:"atmosphere",skyColor:"#88c",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:-.11,y:1,z:.33},fog:.78,flatShading:!1,playArea:1,ground:"hills",groundYScale:3,groundTexture:"checkerboard",groundColor:"#454545",groundColor2:"#5d5d5d",dressing:"none",dressingAmount:10,dressingColor:"#795449",dressingScale:1,dressingVariance:{x:0,y:0,z:0},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"none",gridColor:"#ccc",shadow:!1},contact:{active:!0,seed:14,skyType:"gradient",skyColor:"#478d54",horizonColor:"#b696cb",lighting:"distant",lightPosition:{x:0,y:2.01,z:-1},fog:.8,flatShading:!1,playArea:1,ground:"spikes",groundYScale:4.91,groundTexture:"none",groundColor:"#2e455f",groundColor2:"#694439",dressing:"apparatus",dressingAmount:7,dressingColor:"#657067",dressingScale:20,dressingVariance:{x:20,y:20,z:20},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"1x1",gridColor:"#478d54",shadow:!1},egypt:{active:!0,seed:26,skyType:"gradient",skyColor:"#1b7660",horizonColor:"#e4b676",lighting:"distant",lightPosition:{x:0,y:1.65,z:-1},fog:.75,flatShading:!1,playArea:1,ground:"hills",groundYScale:5,groundTexture:"walkernoise",groundColor:"#664735",groundColor2:"#6c4b39",dressing:"pyramids",dressingAmount:10,dressingColor:"#7c5c45",dressingScale:5,dressingVariance:{x:20,y:20,z:20},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"spots",gridColor:"#e4b676",shadow:!1},checkerboard:{active:!0,seed:1,skyType:"gradient",skyColor:"#0d0d0d",horizonColor:"#404040",lighting:"distant",lightPosition:{x:0,y:1,z:-.2},fog:.81,flatShading:!0,playArea:1,ground:"hills",groundYScale:4.81,groundTexture:"checkerboard",groundColor:"#252525",groundColor2:"#111111",dressing:"cubes",dressingAmount:10,dressingColor:"#9f9f9f",dressingScale:1.51,dressingVariance:{x:5,y:20,z:5},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"dots",gridColor:"#ccc",shadow:!1},forest:{active:!0,seed:8,skyType:"gradient",skyColor:"#24b59f",horizonColor:"#eff9b7",lighting:"distant",lightPosition:{x:-1.2,y:.88,z:-.55},fog:.8,flatShading:!1,playArea:1,ground:"noise",groundYScale:4.18,groundTexture:"squares",groundColor:"#937a24",groundColor2:"#987d2e",dressing:"trees",dressingAmount:500,dressingColor:"#888b1d",dressingScale:1,dressingVariance:{x:10,y:10,z:10},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"none",gridColor:"#c5a543",shadow:!1},goaland:{active:!0,seed:17,skyType:"gradient",skyColor:"#14645f",horizonColor:"#a3dab8",lighting:"point",lightPosition:{x:.1,y:4,z:.56},fog:.73,flatShading:!1,playArea:1,ground:"noise",groundYScale:.81,groundTexture:"none",groundColor:"#ae3241",groundColor2:"#db4453",dressing:"mushrooms",dressingAmount:150,dressingColor:"#a9313d",dressingScale:5,dressingVariance:{x:5,y:10,z:5},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"dots",gridColor:"#239893",shadow:!1},yavapai:{active:!0,seed:11,skyType:"gradient",skyColor:"#239849",horizonColor:"#cfe0af",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!0,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"walkernoise",groundColor:"#C66344",groundColor2:"#c96b4b",dressing:"stones",dressingAmount:500,dressingColor:"#C66344",dressingScale:.06,dressingVariance:{x:.2,y:.1,z:.2},dressingUniformScale:!0,dressingOnPlayArea:1,grid:"none",gridColor:"#239893",shadow:!1},goldmine:{active:!0,seed:53,skyType:"gradient",skyColor:"#1e1c1a",horizonColor:"#8c7964",lighting:"point",lightPosition:{x:-.09,y:3,z:.33},fog:.43,flatShading:!0,playArea:1.08,ground:"canyon",groundYScale:50,groundTexture:"none",groundColor:"#353535",groundColor2:"#454545",dressing:"hexagons",dressingAmount:300,dressingColor:"#fe921b",dressingScale:.5,dressingVariance:{x:2,y:8,z:2},dressingUniformScale:!0,dressingOnPlayArea:.03,grid:"none",gridColor:"#ccc",shadow:!1},threetowers:{active:!0,seed:5,skyType:"gradient",skyColor:"#23a06b",horizonColor:"#f5e170",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!1,playArea:1,ground:"spikes",groundYScale:4.26,groundTexture:"walkernoise",groundColor:"#273a49",groundColor2:"#2b464f",dressing:"towers",dressingAmount:3,dressingColor:"#5f6d94",dressingScale:50,dressingVariance:{x:10,y:100,z:10},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"none",gridColor:"#239893",shadow:!1},poison:{active:!0,seed:92,skyType:"gradient",skyColor:"#1ea84a",horizonColor:"#177132",lighting:"distant",lightPosition:{x:.5,y:1,z:0},fog:.8,flatShading:!1,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"none",groundColor:"#851f31",groundColor2:"#912235",dressing:"hexagons",dressingAmount:20,dressingColor:"#c7415b",dressingScale:20,dressingVariance:{x:20,y:200,z:20},dressingUniformScale:!1,dressingOnPlayArea:0,grid:"crosses",gridColor:"#1ea84a",shadow:!1},arches:{active:!0,seed:19,skyType:"atmosphere",skyColor:"#8cbdc8",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:-.11,y:.16,z:.33},fog:.67,flatShading:!0,playArea:1,ground:"canyon",groundYScale:10,groundTexture:"walkernoise",groundColor:"#a87d6f",groundColor2:"#795449",dressing:"arches",dressingAmount:6,dressingColor:"#795449",dressingScale:26,dressingVariance:{x:20,y:40,z:20},dressingUniformScale:!0,dressingOnPlayArea:.04,grid:"none",gridColor:"#ccc",shadow:!1},tron:{active:!0,seed:14,skyType:"gradient",skyColor:"#091b39",horizonColor:"#284a9e",lighting:"distant",lightPosition:{x:-.72,y:.62,z:.4},fog:.8,flatShading:!1,playArea:1,ground:"spikes",groundYScale:4.91,groundTexture:"none",groundColor:"#061123",groundColor2:"#694439",dressing:"towers",dressingAmount:5,dressingColor:"#fb000e",dressingScale:15,dressingVariance:{x:20,y:20,z:20},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"1x1",gridColor:"#fb000e",shadow:!1},japan:{active:!0,seed:14,skyType:"gradient",skyColor:"#7e5db5",horizonColor:"#b4adda",lighting:"distant",lightPosition:{x:1.33,y:1,z:.24},fog:.9,flatShading:!1,playArea:1,ground:"hills",groundYScale:25,groundTexture:"walkernoise",groundColor:"#7e5db5",groundColor2:"#cabdf5",dressing:"torii",dressingAmount:4,dressingColor:"#bc5e7c",dressingScale:15,dressingVariance:{x:0,y:0,z:0},dressingUniformScale:!0,dressingOnPlayArea:0,grid:"spots",gridColor:"#e4b676",shadow:!1},dream:{active:!0,seed:17,skyType:"gradient",skyColor:"#87faf4",horizonColor:"#b34093",lighting:"distant",lightPosition:{x:-.72,y:.53,z:.97},fog:.8,flatShading:!1,playArea:1,ground:"hills",groundYScale:20,groundTexture:"checkerboard",groundColor:"#b34093",groundColor2:"#c050a2",dressing:"mushrooms",dressingAmount:300,dressingColor:"#3cf7ed",dressingScale:.2,dressingVariance:{x:.2,y:.2,z:.2},dressingUniformScale:!0,dressingOnPlayArea:1,grid:"none",gridColor:"#239893",shadow:!1},volcano:{active:!0,seed:92,skyType:"gradient",skyColor:"#4a070f",horizonColor:"#f62300",lighting:"point",lightPosition:{x:.5,y:2.25,z:0},fog:.87,flatShading:!1,playArea:1,ground:"canyon",groundYScale:9.76,groundTexture:"walkernoise",groundColor:"#fb0803",groundColor2:"#510000",dressing:"arches",dressingAmount:15,dressingColor:"#fb0803",dressingScale:3,dressingVariance:{x:10,y:100,z:10},dressingUniformScale:!1,dressingOnPlayArea:.2,grid:"none",gridColor:"#fa0e00",shadow:!1},starry:{active:!0,seed:1,skyType:"atmosphere",skyColor:"#88c",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:0,y:-.01,z:-.46},fog:.7,flatShading:!1,playArea:1,ground:"hills",groundYScale:3,groundTexture:"none",groundColor:"#553e35",groundColor2:"#694439",dressing:"none",dressingAmount:100,dressingColor:"#795449",dressingScale:5,dressingVariance:{x:1,y:1,z:1},dressingUniformScale:!0,grid:"1x1",dressingOnPlayArea:0,gridColor:"#39d2f2",shadow:!1},osiris:{active:!0,seed:46,skyType:"atmosphere",skyColor:"#88c",horizonColor:"#ddd",lighting:"distant",lightPosition:{x:0,y:.02,z:-.46},fog:0,flatShading:!1,playArea:1,ground:"hills",groundYScale:3,groundTexture:"none",groundColor:"#9e7b47",groundColor2:"#9e7b47",dressing:"pyramids",dressingAmount:7,dressingColor:"#9e7b47",dressingScale:5,dressingVariance:{x:30,y:30,z:30},dressingUniformScale:!0,grid:"dots",dressingOnPlayArea:0,gridColor:"#daa452",shadow:!1}},init:function(){for(var t in this.STAGE_SIZE=200,this.assets={arches:[{type:"mesh",vertices:[409,268,4,351,228,36,336,236,-57,-152,391,69,-135,358,88,-119,330,43,-20,358,-35,-153,357,-47,37,413,-26,-20,411,-14,-302,148,154,-339,121,-126,-389,200,-88,-477,193,-76,-314,346,-19,-314,306,-30,-250,296,-73,-267,237,-82,-212,303,-68,-245,200,-67,-223,304,108,-329,299,107,-289,350,76,-320,342,69,119,373,-39,38,370,8,113,367,52,492,202,-31,462,83,-104,447,71,-80,426,112,25,482,189,-7,222,372,6,121,402,41,87,382,67,221,346,55,559,93,-13,528,47,39,505,21,-111,528,54,-101,616,31,-53,442,256,-15,300,338,19,257,308,-79,408,256,-74,312,352,-26,384,297,-31,437,257,-47,-29,415,53,-232,377,59,-139,335,77,-132,344,2,-18,377,-37,-171,387,-28,-254,384,18,-651,-27,27,-435,-28,179,-345,149,165,-272,-28,23,-215,146,-2,-279,-29,-59,-211,145,-55,-337,-28,-128,-413,247,0,-293,363,24,-214,254,-36,-164,290,33,-284,150,94,-218,362,105,75,369,29,518,147,-63,447,190,-70,445,56,-105,391,185,-60,431,49,-33,459,83,26,470,162,42,130,390,53,167,341,-30,125,394,-45,239,368,-17,91,414,10,450,18,2,449,-27,-9,436,-28,-58,496,-27,-110,582,-28,-140,647,-27,-56,325,325,-45,-307,297,-56,-647,-28,-45,-188,310,-54,-264,197,113,-367,175,139,8,387,82,426,45,-55,114,359,-28,500,27,44,461,-29,13,-512,-27,-151,-152,376,-38,-490,-28,148,12,370,-28,442,160,42,465,194,32,381,183,-33,649,-27,-34,444,16,29,616,-28,25,417,267,-66,-132,352,-34,-322,-27,130,-271,86,-115,-635,-28,-121,-291,203,-99,176,405,-10,561,52,-93,371,305,9,311,237,-22,377,200,-81,-129,406,46,-154,371,99,-82,361,71,-21,354,26,-91,363,-27,-165,413,-12,-414,215,110,-238,127,26,-408,-28,-128,-674,-28,-94,-446,232,-39,-311,226,-90,-255,210,-61,-235,192,-11,-217,218,58,-269,299,124,-386,276,78,-399,281,42,15,373,58,16,393,75,549,107,-46,481,188,-68,409,120,-41,541,81,12,230,368,41,194,350,-50,224,361,-50,604,-28,-10,602,-27,35,486,56,-121,502,69,-120,457,-27,-110,226,317,-40,-584,-28,-124,439,-26,-30,467,-26,39,547,-27,-146,21,368,14,466,229,-29,578,-27,44,609,-27,-96,291,356,-15,290,306,34,255,321,28,231,311,-5,-251,386,50,-183,307,87,-152,307,24,-264,373,-12,-392,-27,190,-333,-28,84,-281,-27,54,-270,-28,-23,-308,-28,-101,-687,-27,-59,39,418,39,413,163,25,404,206,-90,54,400,-31,121,352,8,-454,41,148,-426,9,182,-564,115,3,-427,27,-107,-548,118,-32,-556,122,-53,-517,91,-101,-475,54,140,-461,52,-134,-558,119,-71,-434,286,59,-687,-31,52,-595,146,22,-670,-28,164,-537,166,122,-575,-28,217,-566,159,65,-470,152,136,-712,-29,102,-639,-29,211,-532,-30,181,-442,-30,-100],faces:[76,104,162,1,176,103,103,76,1,2,119,73,73,105,2,2,118,152,45,161,46,46,109,45,3,120,49,49,68,3,3,121,139,139,48,3,4,122,94,94,121,4,6,123,124,9,175,81,10,169,111,10,67,92,88,43,146,11,131,114,11,128,183,13,130,15,90,184,174,90,182,184,130,184,63,14,130,63,15,130,14,16,131,12,15,168,53,18,91,17,131,16,17,65,133,132,65,132,91,67,134,166,166,92,67,20,135,92,20,166,4,4,121,20,22,135,68,25,102,96,25,157,102,69,138,157,69,157,25,39,150,71,71,141,39,28,150,149,149,72,28,142,176,105,36,140,27,27,143,36,32,115,81,32,144,161,161,80,32,77,35,144,34,26,77,78,179,96,145,152,78,178,79,145,80,146,79,147,140,36,143,108,36,143,37,148,74,95,154,154,83,74,72,149,151,151,95,72,38,150,156,40,147,106,70,140,40,40,116,70,42,162,0,35,163,162,43,145,146,46,117,41,47,158,27,48,139,175,122,138,94,157,138,123,52,178,102,52,102,6,52,124,7,7,100,52,53,125,8,57,93,181,56,169,181,59,127,58,60,173,61,62,128,11,11,112,62,65,91,167,65,167,66,126,93,21,22,68,49,72,95,29,142,29,74,74,82,142,75,107,97,75,97,103,76,97,37,104,143,31,78,152,164,78,164,179,79,178,8,97,155,159,107,98,155,83,98,82,154,95,84,39,116,86,86,156,39,87,160,116,24,145,96,162,104,0,105,118,2,43,177,119,44,177,43,91,51,167,44,88,109,46,161,117,3,68,121,3,48,120,4,166,50,50,122,4,5,123,122,123,138,122,110,124,51,170,10,111,110,91,7,7,124,110,8,125,9,9,81,8,186,12,188,92,135,10,11,114,112,64,63,137,13,15,89,89,53,100,64,168,14,14,168,15,89,100,16,16,12,89,100,18,16,17,91,132,112,19,61,18,7,91,19,17,132,133,127,59,133,59,61,136,21,22,134,127,133,20,92,166,121,135,20,158,31,27,21,135,22,23,137,136,24,102,178,178,145,24,25,179,69,26,94,138,27,140,70,27,70,141,150,177,71,28,177,150,29,142,73,73,119,29,142,82,30,30,176,142,107,75,82,31,143,27,33,81,175,31,41,104,115,79,8,32,33,144,80,115,32,33,175,139,35,162,42,77,139,34,163,26,179,163,179,164,78,96,145,177,29,119,108,143,148,148,37,159,97,159,37,74,83,82,38,149,150,156,150,39,40,106,87,87,116,40,140,147,40,161,144,42,42,117,161,41,0,104,41,117,0,0,117,42,164,118,163,1,163,118,118,176,1,118,105,176,152,118,164,43,152,145,43,119,2,71,109,141,47,41,158,44,71,177,45,109,88,45,88,146,46,47,109,141,47,27,167,50,166,49,120,165,139,121,94,5,122,50,123,51,124,157,6,102,157,123,6,100,8,178,5,167,51,6,124,52,100,178,52,53,168,125,125,165,120,54,125,168,9,48,175,120,9,125,93,10,135,181,101,56,57,169,10,59,172,61,67,170,171,67,171,127,58,127,171,129,186,113,60,61,172,61,173,112,62,112,173,174,189,129,165,64,23,64,137,23,165,22,49,64,54,168,17,114,131,17,112,114,66,133,65,19,132,133,19,133,61,134,133,66,166,134,66,166,66,167,93,135,21,68,135,121,23,136,22,94,34,139,25,96,179,26,138,69,69,179,26,30,103,176,116,141,70,39,141,116,73,142,105,143,76,37,26,35,77,103,97,76,77,144,33,33,139,77,38,151,149,80,161,45,80,45,146,81,115,8,107,155,97,82,98,107,95,151,84,38,156,85,86,116,160,96,102,24,72,29,28,29,95,74,75,30,82,108,147,36,88,44,43,91,110,51,170,67,10,11,183,131,64,14,63,89,15,53,100,7,18,112,17,19,127,134,67,136,126,21,158,41,31,33,32,81,115,80,79,177,28,29,43,2,152,71,44,109,47,46,41,141,109,47,167,5,50,123,5,51,100,53,8,125,54,165,9,120,48,93,57,10,59,58,172,174,185,189,165,54,64,165,23,22,94,26,34,30,75,103,143,104,76,26,163,35,38,85,151,192,182,191,183,128,201,12,13,89,181,169,57,186,153,113,188,183,99,184,182,63,185,13,189,180,181,93,186,99,153,189,186,129,185,184,130,186,13,12,187,93,126,193,199,194,194,196,193,200,187,195,187,197,195,187,126,197,197,190,194,190,136,137,190,196,194,63,182,192,63,192,196,192,198,196,191,182,55,193,196,198,194,199,197,195,197,199,136,197,126,190,137,63,190,63,196,197,136,190,192,191,198,201,99,183,90,55,182,181,180,101,185,130,13,186,188,99,186,189,13,187,180,93,200,101,187,183,188,131,184,185,174,180,187,101,16,18,17,12,131,188,35,42,144,163,1,162,76,162,1,79,146,145]}],stones:[{type:"mesh",vertices:[-376,189,42,230,223,-310,353,162,-62,414,-23,-67,256,90,-475,24,85,-526,-418,-16,57,-432,66,-40,-199,151,-376,-155,49,467,-91,289,201,293,197,91,81,-17,-480,42,108,431,-359,-17,-250,383,-19,-243,194,-15,270,-272,180,293,-86,212,262,234,54,297,395,97,-302,-123,-21,-444,-416,-19,-123,-323,-18,267,-100,-16,429,-300,96,-361,163,-19,409,118,201,-431,-241,-18,391,-130,274,-309,306,-19,-399,-221,96,404],faces:[31,18,17,0,17,18,3,20,2,18,11,10,29,27,8,27,29,1,0,18,10,10,29,0,16,19,26,11,2,1,20,30,4,20,3,15,30,12,4,4,12,5,5,27,4,4,27,20,21,25,5,7,8,25,22,7,14,7,25,14,23,28,31,0,7,17,24,26,9,31,28,9,8,27,5,2,20,1,13,19,18,10,11,1,19,13,26,3,11,19,19,16,3,11,3,2,11,18,19,20,15,30,29,10,1,25,21,14,8,5,25,5,12,21,6,7,22,7,6,23,8,0,29,8,7,0,23,31,7,13,31,9,18,31,13,9,28,24,26,13,9,27,1,20,7,31,17]},{type:"mesh",vertices:[-217,34,-153,198,90,20,212,85,169,-131,93,171,197,113,30,173,121,164,315,29,-16,219,24,189,282,50,-102,232,38,-181,-195,-9,-166,-156,30,-207,-51,-9,-231,-180,91,-173,-19,73,-204,-280,23,96,-242,100,107,3,158,-82,109,88,221,275,-10,-40,236,-10,-135,-178,49,184,-1,-10,-243,265,-11,109,-12,-9,237,-36,46,251,-233,86,-81,93,77,-171,-163,133,69,18,16,263,296,44,93,131,-12,-226,-89,-10,-201,-273,-10,-51,-240,-9,110,190,-12,192,-253,-11,-92,42,43,-258,-115,-11,238,168,99,-88,-285,-10,24,71,124,-158,298,-10,10,116,150,-24,-282,44,39],faces:[44,16,26,13,26,16,0,26,13,27,14,41,4,5,1,7,30,2,28,5,43,41,39,27,17,43,41,43,4,39,13,28,17,17,41,13,28,43,17,24,29,38,29,35,7,18,25,29,5,18,2,18,5,3,30,42,6,30,35,23,19,20,8,8,20,9,9,39,8,1,30,8,31,37,9,11,14,37,14,27,37,32,11,12,11,37,12,11,0,13,33,40,44,44,26,33,33,0,36,34,38,15,44,40,15,21,3,16,27,39,9,2,30,1,21,25,3,16,3,28,28,3,5,4,43,5,41,43,39,13,16,28,25,21,38,38,29,25,7,18,29,29,24,35,18,7,2,18,3,25,30,23,42,30,7,35,8,30,6,6,19,8,6,42,19,8,39,1,37,31,22,27,9,37,9,20,31,10,11,32,11,10,0,12,37,22,14,13,41,14,11,13,33,26,0,36,0,10,21,44,15,16,44,21,15,40,34,38,21,15,4,1,39,5,2,1]},{type:"mesh",vertices:[-101,102,57,99,35,102,40,72,80,59,14,-168,-186,22,45,-176,25,-30,66,-7,146,153,-7,53,-110,47,-96,-90,-8,-146,150,-7,-12,-200,-7,8,-173,-7,-55,55,46,-60,125,-7,110,136,30,-10,-149,58,68,-15,82,-71,98,-7,-86,-34,-6,-194,-33,-7,171,-36,65,137,38,-8,-192,-103,-9,147,-12,62,-152],faces:[2,17,0,17,8,0,17,24,8,19,24,22,5,11,4,2,13,17,17,13,24,21,23,20,1,2,21,7,15,1,7,10,15,5,9,12,15,18,13,0,5,16,0,8,5,1,15,2,10,18,15,3,13,18,24,3,22,11,23,4,4,16,5,16,4,23,24,13,3,15,13,2,6,1,21,6,21,20,6,14,1,2,0,21,1,14,7,3,18,22,8,24,19,8,19,9,12,11,5,5,8,9,16,23,21,16,21,0]},{type:"mesh",vertices:[86,55,-18,58,38,73,97,-12,79,135,7,10,-93,-11,-72,-133,5,33,13,68,-32,94,-11,-57,-90,52,53,-24,-11,-106,-13,-10,104,-75,49,-69,-12,18,114,49,-12,-96,-46,-11,-85,-119,-11,-26,48,5,-111,-58,-11,105,-117,-12,52,-5,35,-93,123,-11,7],faces:[5,8,11,2,3,1,8,1,6,11,8,6,6,19,11,10,12,17,20,7,3,3,7,16,16,0,3,16,9,19,14,4,9,15,18,5,5,11,15,18,17,5,19,0,16,1,3,0,0,6,1,19,6,0,12,8,17,2,1,12,12,10,2,1,8,12,3,2,20,16,13,9,16,7,13,19,4,11,15,11,4,17,8,5,9,4,19]}],torii:[{type:"mesh",mirror:!0,flatShading:!0,vertices:[692,966,-52,661,834,-52,692,966,52,661,834,52,0,894,-52,0,776,-52,0,894,52,0,776,52,518,935,52,345,913,52,170,899,52,162,779,52,328,790,52,494,808,52,170,899,-52,345,913,-52,518,935,-52,494,808,-52,328,790,-52,162,779,-52,0,618,16,0,697,16,0,618,-16,0,697,-16,586,618,16,586,697,16,586,618,-16,586,697,-16,331,-29,-75,331,766,-52,369,-29,-65,357,766,-45,396,-29,-37,377,766,-26,406,-29,0,384,766,0,396,-29,37,377,766,26,369,-29,65,357,766,45,331,-29,75,331,766,52,294,-29,65,305,766,45,267,-29,37,286,766,26,257,-29,0,279,766,0,267,-29,-37,286,766,-26,294,-29,-65,305,766,-45,0,777,85,0,681,33,333,762,-75,333,806,-75,371,762,-65,371,806,-65,398,762,-37,398,806,-37,408,762,0,408,806,0,398,762,37,398,806,37,371,762,65,371,806,65,333,762,75,333,806,75,296,762,65,296,806,65,268,762,37,268,806,37,258,762,0,258,806,0,268,762,-37,268,806,-37,296,762,-65,296,806,-65,0,681,-33,0,777,-85,52,681,33,52,777,85,52,681,-33,52,777,-85],faces:[4,10,14,1,13,17,11,6,7,0,3,1,16,1,17,4,19,5,14,18,19,15,17,18,3,8,13,13,9,12,12,10,11,19,7,5,19,12,11,18,13,12,16,2,0,15,8,16,14,9,15,23,26,22,27,24,26,25,20,24,26,20,22,23,25,27,29,30,28,31,32,30,33,34,32,35,36,34,37,38,36,39,40,38,41,42,40,43,44,42,45,46,44,47,48,46,49,50,48,51,28,50,55,56,54,57,58,56,59,60,58,61,62,60,63,64,62,79,81,83,65,66,64,82,53,78,67,68,66,81,53,80,69,70,68,83,80,82,71,72,70,79,82,78,73,74,72,75,63,59,75,76,74,77,54,76,60,68,76,4,6,10,1,3,13,11,10,6,0,2,3,16,0,1,4,14,19,14,15,18,15,16,17,3,2,8,13,8,9,12,9,10,19,11,7,19,18,12,18,17,13,16,8,2,15,9,8,14,10,9,23,27,26,27,25,24,25,21,20,26,24,20,23,21,25,29,31,30,31,33,32,33,35,34,35,37,36,37,39,38,39,41,40,41,43,42,43,45,44,45,47,46,47,49,48,49,51,50,51,29,28,55,57,56,57,59,58,59,61,60,61,63,62,63,65,64,79,52,81,65,67,66,82,80,53,67,69,68,81,52,53,69,71,70,83,81,80,71,73,72,79,83,82,73,75,74,59,57,55,55,77,75,75,73,71,71,69,75,67,65,63,63,61,59,59,55,75,75,69,67,67,63,75,75,77,76,77,55,54,76,54,56,56,58,76,60,62,68,64,66,68,68,70,72,72,74,68,76,58,60,62,64,68,68,74,76]}],hexagons:[{type:"extrude",vertices:[-.198,-.302,.197,-.3,.372,0,.199,.298,-.202,.298,-.368,0]}],towers:[{type:"extrude",vertices:[-.054,-.178,-.007,-.182,.069,-.027,.189,.079,.178,.124,-.007,.097,-.145,.182,-.178,.144,-.079,-.021]},{type:"lathe",segments:4,vertices:[.004,.02,.012,.092,.042,.166,.067,.55,.101,.594,.105,.838,.193,.934,.18,.994]},{type:"lathe",segments:5,vertices:[.069,.216,.067,.562,.126,.562,.128,.774,.191,.774,.193,.986]}],trees:[{type:"lathe",noise:.015,segments:6,vertices:[1e-6,.826,.054,.832,.105,.854,.136,.9,.136,.958,.118,.994]},{type:"lathe",noise:.015,segments:14,vertices:[1e-6,.01,.069,.022,.13,.068,.178,.18,.189,.32,.191,.59,.193,.75,.138,.79,.018,.808,.018,.996]},{type:"lathe",noise:.015,segments:14,vertices:[1e-6,.436,.126,.46,.201,.57,.219,.72,.154,.846,.028,.884,.034,.996]}],apparatus:[{type:"lathe",segments:10,vertices:[1e-6,.23,.042,.23,.069,.36,.038,.362,.038,.372,.06,.372,.073,.572,.024,.572,.024,.67,.069,.67,.075,.722,.097,.724,.105,.852,.083,.902,.065,.902,.065,.924,.128,.924,.146,.996]},{type:"lathe",segments:16,vertices:[1e-6,.232,.229,.182,.486,.07,.356,.182,.213,.242,.154,.242,.144,.262,.178,.262,.126,.314,.04,.328,.038,.374,.058,.374,.071,.408,.026,.406,.03,.42,.091,.418,.034,.496,.01,.498,.03,.506,.014,.998]}],mushrooms:[{type:"lathe",noise:.02,segments:14,vertices:[1e-6,.006,.13,.018,.341,.084,.437,.144,.492,.234,.484,.246,.276,.232,.107,.284,.046,.346,.062,.852,.097,.956,.166,.998]},{type:"lathe",noise:.02,segments:10,vertices:[1e-6,.562,.091,.572,.172,.61,.223,.666,.256,.74,.258,.806,.246,.824,.062,.826,.065,.948,.097,.998]},{type:"lathe",noise:.02,segments:10,vertices:[1e-6,.768,.099,.772,.219,.802,.306,.844,.352,.886,.352,.908,.118,.904,.107,.93,.115,.966,.14,.996]}]},this.assets)for(var e=0;e<this.assets[t].length;e++){var n=this.assets[t][e];if("mesh"==n.type)for(var i=0,r=n.vertices.length;i<r;i++)n.vertices[i]/=1e3}this.userFog=this.el.sceneEl.getAttribute("fog"),this.sky=document.createElement("a-sky"),this.sky.setAttribute("radius",700),this.sky.setAttribute("theta-length",110),this.stars=null,this.groundMaterial=null,this.ground=document.createElement("a-entity"),this.ground.setAttribute("rotation","-90 0 0"),this.ground.classList.add("environmentGround"),this.groundCanvas=null,this.groundTexture=null,this.groundMaterial=null,this.groundGeometry=null,this.dressing=document.createElement("a-entity"),this.dressing.classList.add("environmentDressing"),!!this.el.sceneEl.getAttribute("physics")&&this.ground.setAttribute("static-body","shape","none"),this.gridCanvas=null,this.gridTexture=null,this.hemilight=document.createElement("a-entity"),this.hemilight.setAttribute("position","0 50 0"),this.hemilight.setAttribute("light",{type:"hemisphere",color:"#CEE4F0",intensity:.4}),this.sunlight=document.createElement("a-entity"),this.sunlight.setAttribute("position",this.data.lightPosition),this.sunlight.setAttribute("light",{intensity:.6}),this.el.appendChild(this.ground)},getFogColor:function(t,e){var n;if("color"===t||"none"===t)n=new THREE.Color(this.data.skyColor);else if("gradient"===t)n=new THREE.Color(this.data.horizonColor);else if("atmosphere"===t){var i=[1,.5,.22,.1,.05,0],r=["#C0CDCF","#81ADC5","#525e62","#2a2d2d","#141616","#000"];if(e<=0)return"#000";e=Math.min(1,e);for(var o=0;o<i.length;o++)if(e>i[o]){var a=new THREE.Color(r[o-1]),s=new THREE.Color(r[o]),c=(e-i[o])/(i[o-1]-i[o]);s.lerp(a,c),n=s;break}}return"#"+n.getHexString()},update:function(t){if(!t||void 0==t.preset||t.preset!==this.data.preset){var e=Object.assign({},this.presets[this.data.preset]);if(t&&void 0!=t.preset||Object.assign(e,this.el.components.environment.attrValue),this.el.setAttribute("environment",e),t)return;t={}}var n=this.data.skyType,i=new THREE.Vector3(this.data.lightPosition.x,this.data.lightPosition.y,this.data.lightPosition.z);if(i.normalize(),this.sunlight){if(this.sunlight.setAttribute("position",this.data.lightPosition),"atmosphere"!=n){var r=new THREE.Color(this.data.skyColor);r.r=(r.r+1)/2,r.g=(r.g+1)/2,r.b=(r.b+1)/2,this.hemilight.setAttribute("light",{color:"#"+r.getHexString()}),this.sunlight.setAttribute("light",{intensity:.6}),this.hemilight.setAttribute("light",{intensity:.6})}else this.sunlight.setAttribute("light",{intensity:.1+.5*i.y}),this.hemilight.setAttribute("light",{intensity:.1+.5*i.y});this.sunlight.setAttribute("light",{castShadow:this.data.shadow,shadowCameraLeft:-this.data.shadowSize,shadowCameraBottom:-this.data.shadowSize,shadowCameraRight:this.data.shadowSize,shadowCameraTop:this.data.shadowSize})}if(n!=t.skyType||this.data.skyColor!=t.skyColor||this.data.horizonColor!=t.horizonColor){this.sky.removeAttribute("material");var o={};o.shader={none:"flat",color:"flat",gradient:"gradientshader",atmosphere:"skyshader"}[n],this.stars&&this.stars.setAttribute("visible","atmosphere"===n),"color"===n?(o.color=this.data.skyColor,o.fog=!1):"gradient"===n&&(o.topColor=this.data.skyColor,o.bottomColor=this.data.horizonColor),this.sky.setAttribute("material",o)}"atmosphere"===n&&(this.sky.setAttribute("material",{sunPosition:i}),this.setStars(2e3*(1-Math.max(0,8*(i.y+.08))))),this.data.lighting!==t.lighting&&(this.sunlight.setAttribute("light",{type:"point"===this.data.lighting?"point":"directional"}),this.sunlight.setAttribute("visible","none"!==this.data.lighting),this.hemilight.setAttribute("visible","none"!==this.data.lighting));var a=!this.groundGeometry||this.data.seed!=t.seed||this.data.ground!=t.ground||this.data.playArea!=t.playArea||this.data.flatShading!=t.flatShading;(a||this.data.groundColor!=t.groundColor||this.data.groundColor2!=t.groundColor2||this.data.groundYScale!=t.groundYScale||this.data.groundTexture!=t.groundTexture||this.data.gridColor!=t.gridColor||this.data.grid!=t.grid)&&(this.updateGround(a),this.hemilight&&this.hemilight.setAttribute("light",{groundColor:this.data.groundColor})),this.data.seed==t.seed&&this.data.dressingOnPlayArea==t.dressingOnPlayArea&&this.data.dressing==t.dressing&&this.data.flatShading==t.flatShading&&this.data.dressingAmount==t.dressingAmount&&this.data.dressingScale==t.dressingScale&&this.data.dressingColor==t.dressingColor&&this.data.dressingVariance.x==t.dressingVariance.x&&this.data.dressingVariance.y==t.dressingVariance.y&&this.data.dressingVariance.z==t.dressingVariance.z&&this.data.dressingUniformScale==t.dressingUniformScale||this.updateDressing(),this.sky.setAttribute("visible","none"!==n),this.el.setAttribute("visible",this.data.active),this.data.active||(this.userFog?this.el.sceneEl.setAttribute("fog",this.userFog):this.el.sceneEl.removeAttribute("fog")),this.dumpParametersDiff()},logPreset:function(){for(var t in this.schema)if("preset"!==t){t+": ";var e=this.schema[t].type;"vec3"===e?"{ x: "+this.data[t].x+", y: "+this.data[t].y+", z: "+this.data[t].z+"}":"string"===e||"color"===e?'"'+this.data[t]+'"':this.data[t],", "}},dumpParametersDiff:function(){function t(t){return Math.floor(1e3*t)/1e3}var e=[],n="none"!=this.data.preset&&this.presets[this.data.preset];for(var i in n&&e.push("preset: "+this.data.preset),this.schema)if(!("preset"===i||n&&void 0==n[i])){var r=n?n[i]:this.schema[i].default,o=this.data[i];if("vec3"===this.schema[i].type){var a=r;"string"==typeof r&&(a={x:(r=r.split(" "))[0],y:r[1],z:r[2]}),t(a.x)==t(o.x)&&t(a.y)==t(o.y)&&t(a.z)==t(o.z)||e.push(i+": "+t(o.x)+" "+t(o.y)+" "+t(o.z))}else r!=o&&("number"===this.schema[i].type&&(o=t(o)),e.push(i+": "+o))}},random:function(t){return parseFloat("0."+Math.sin(9999*this.data.seed*t).toString().substr(7))},updateGround:function(t){var e=this;if(t){var n="none"!=this.data.ground;if(this.ground.setAttribute("visible",n),!n)return;var r=this.STAGE_SIZE+2,o=r/2,a=r/63;this.groundGeometry||(this.groundGeometry=new THREE.PlaneGeometry(r,r,63,63));var s=new i,c=this.groundGeometry.vertices,l=this.groundGeometry.vertices.length,u=!!this.el.sceneEl.getAttribute("physics");if(u)for(var h=0,d=[],p=0;p<64;p++)d.push(new Float32Array(64));for(var f=[],m=0,g=0,v=0;m<l;m++)if("flat"!==this.data.ground){switch(this.data.ground){case"hills":M=Math.max(0,s.noise(g,v,0));break;case"canyon":M=.2+.8*s.noise(g,v,0),M=Math.min(1,10*Math.pow(M,2));break;case"spikes":M=this.random(m)<.02?this.random(m+1):0;break;case"noise":M=this.random(m)<.35?this.random(m+1):0}M+=.1*this.random(m+2);var y=2*g/10-1,A=2*v/10-1,w=this.data.playArea;M*=(y=Math.max(0,Math.min(1,(Math.abs(y)-(w-.9))*(1/w))))>(A=Math.max(0,Math.min(1,(Math.abs(A)-(w-.9))*(1/w))))?y:A,f[m]=M,u&&(d[Math.round((c[m].x+o)/a)][Math.round((c[m].y+o)/a)]=M*this.data.groundYScale,M>h&&(h=M)),(g+=10/64)>=10&&(g=0,v+=10/64)}else c[m].z=0;var b=[0,0,0,0,0,0,0,.0895847786217928,.27158203125,.4210248101502657,.43695309162139895,.30792557783424856,.12333526611328126,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.022602849639952183,.1113787293434143,.21112023387104273,.24461746215820312,.18243736121803522,.0561252236366272,0,0,0,0,0,0,.02837057299911976,.19618256092071534,.3728097964078188,.45,.3728097964078188,.19618256092071534,.02837057299911976,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.060924494841734914,.24488589093928112,.42299749712155876,.4898262304733729,.4149168513564287,.2658512509075429,.12717985342108948,.0021605900961013448,0,0,.021875653497749538,.11550842411750538,.1524743435779463,.15248500679098598,.12267099375632273,.05654123171560321,0,0,0,0,0,0,0,.06319683549255573,.10204355622278247,.10988378338515759,.12713228314238287,.1904879911481291,.24945356444493086,.2435228594425034,.15870121784425176,.031037984517677475,0,0,0,0,0,0,.04918352099383271,.20803597382200928,.36801368527842226,.4279103989712894,.34100493126057735,.16506872802151334,.0047723154999336275,0,0,0,0,.025015836437819416,.10109633905554449,.10979724144901559,.06831585016178629,0,0,0,0,0,0,0,0,0,0,0,0,.11347199987212662,.31498722888225694,.4570838519091126,.4794162131802956,.4034730204656626,.29675485330028695,.18979329847402368,.11311368865405456,.10887689292430879,.17646986998173161,.264151715406706,.3133485382297053,.3303576468592837,.2956698363116326,.18681122178777798,.030851482870600577,0,0,0,0,0,0,.03370230810159569,.09748693980260392,.11096370220184326,.12182298941276692,.1573205386619918,.17729705412539087,.1420729257865787,.05130277986398135,0,0,0,0,0,0,0,.12994165254313522,.27011998997923287,.38149737538581313,.3810612380504608,.24989534717642542,.062135874680134866,0,0,0,0,0,.0016444309992948547,.0909681268819555,.1192503440972672,.11081493331456627,.059745716537690896,.006021781288820582,0,.03474394348171728,0,.02661875932244584,.02861039209729843,0,0,0,0,0,0,.11781774641027687,.31556112920038437,.43659614028880384,.4474209875032692,.38601371773415694,.3057698922324811,.22762280508977503,.19861760430503636,.23876196090496002,.31884343888611755,.3889311858975377,.4391553267908357,.4369152374798162,.3382928080171018,.15615466535052067,0,0,0,0,0,0,0,.006047663824529967,.021923018619418144,.02694859013284205,.039651943407700396,.03434857121612519,0,0,0,0,0,0,0,0,.0775691927842658,.21433337872304142,.3323215048934583,.3850954764787467,.31412333277985455,.13538566014615588,0,0,0,0,0,0,0,0,.043928103382634864,.08868945488776969,.10247547855514938,.08076609187859579,.0434537608678256,.017862755848961954,.089813232421875,.18235154217375893,.22970012982887056,.18616722338656544,.05993131280411035,0,0,0,0,0,.11318099363907096,.2835445723542108,.3563828919781372,.3371248370321155,.2836478722369066,.20402394989823733,.15019645690917968,.16283830590227807,.2353100585663924,.32633786114811303,.4132623730110936,.4697092868159132,.4333834637218388,.28614815274781336,.08560083992779255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.1055645433603786,.23479203764963757,.3367743025029995,.35351235183781854,.2470714569091797,.05586835726660127,0,0,0,0,0,0,0,0,0,.05648711717911681,.1352644685539417,.151506866332344,.08802869685450787,0,.130874365568161,.25798978839717696,.35661695284082584,.3502708248350659,.22042729273231032,.036361400560881475,0,0,0,0,0,.09519696324609632,.18564508359923834,.1914770224962192,.1563376494650491,.07684238371868134,.007437794911675156,.0018223326843187283,.06828985181965451,.1718284410292474,.284035659590689,.3963368740831111,.4373627980325251,.3572771994975222,.1897910319149787,.027673004416699284,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.05368152304985898,.1739272498122031,.2708723296370293,.2888288042343969,.1995730477385223,.04185025041398709,0,0,0,0,0,0,0,0,0,.06791633902963673,.19625040952695372,.23811439878859306,.15738927203691366,.0062732680119387645,.054253578186035156,.20232931592871795,.349312923848629,.4038132701075373,.3205442254229638,.15291987157327191,.0014751456778014926,0,0,0,0,0,.034695138860934095,.04566436503120173,.017462246312925346,0,0,0,0,.023703974065925594,.1425772057514223,.2825514759272689,.3728667161789616,.34665006960950695,.21795001065765973,.06961991423928993,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.06666619484863338,.16723975864632906,.2143040194612565,.17852012515068055,.08149176503707038,0,0,0,0,0,0,0,0,.0028583028264250743,.14801726476069998,.29616943957262265,.3502220780345756,.26658391021244654,.1005173750207794,0,.07714629307715694,.2666490677862034,.38776233702948204,.3712514274930669,.2469272595970652,.1070342821149008,0,0,0,0,0,0,0,0,0,0,0,0,0,.02956282479209449,.17456248855846884,.28528707055809743,.2903789291145034,.19213594699976966,.0620254926659554,0,0,0,0,0,.04953186818166,.0678107004845515,.06669116663983303,.06438281366759956,.06151722998074854,.05928063557752381,.05839683145713959,.05872037938603012,.05425733224639008,0,0,0,0,0,0,.062331995044022585,.14297767201007988,.16568645592196846,.13079909262714037,.0796528091835859,.0591673454200453,.049651939121246616,0,0,0,0,.0008722206013023489,.11160170111706412,.2605054305261298,.41351099992324125,.4739360357956363,.3976363558195145,.2385778881698576,0,0,.17569233875547072,.33184273155000027,.3566221307963133,.26650296333029927,.14509910827910064,.04160102692080727,0,0,0,0,0,0,0,0,0,0,0,0,0,.04392178839407279,.14112928952090442,.1593983219609072,.09521484375,.0001629478319955524,0,0,0,0,.10520706655224786,.18605805239476467,.196142578125,.18124826263046998,.1524064661702141,.11818024961794436,.09312963634729386,.08512211477900565,.09110280589666218,.09643373947019428,.04534235000610352,0,0,0,0,0,0,.045870813578585516,.10362548828125,.11717336018882633,.10389051020611077,.09529005936310568,.08878532350063324,.05067833123648598,.0032535754842683675,0,.02493624687194824,.10202181445679344,.1963708815659629,.32867601937257407,.4767904613167048,.5548304980807416,.51559710673464,.3955141692156531,0,0,.10857909873953449,.2429801166238948,.26038031497813846,.18272373227605768,.08631554378331337,.01025368947413399,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.11171665384475586,.2413969549901327,.3027073034100298,.2894545569783077,.24637835042293452,.16884264062184137,.08211741465187179,.024469463723720254,.013109621259178575,.03567957241044737,.06422406101953004,.05479316311859748,0,0,0,0,0,0,0,0,.030724064845732868,.046067486998014155,.04823128047939749,.047186111769782005,.04376513440698198,.048652120727422046,.07126602159616571,.11422900367670082,.16317712822513006,.21098895812396976,.29398217289542805,.4149343391673114,.5144862883985643,.5421464867306732,.4973227017017259,0,0,.09800120083501725,.16738602660124888,.13808696431060527,.05187305183112552,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.0630290633979712,.21607215698522428,.31498600281903466,.3303143204905562,.28523326814174654,.2118584500603636,.0907179697084871,0,0,0,0,.002469272758382468,.05038495966291521,.06254759982539936,.024658245840379324,0,0,0,0,0,0,0,0,0,0,.004251073971062347,.058821665413918825,.11808041761274897,.15606696124887096,.16056069368861234,.1446000701106925,.15675477997201834,.2272246526003073,.3326798000719473,.4243580123650418,.46032911188082615,0,.046747747137323194,.13891719249182707,.14175536114482462,.061479563205185175,0,0,0,0,.000956537007981232,.05037211318924064,.0492866284243552,.0017873639990021674,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.14623247833580919,.2663217192578165,.30419260264695747,.2633138929406867,.19031511407811194,.09768177582965222,0,0,0,0,0,0,.06187344345996735,.13755899718677903,.1469884770450038,.08618677236591511,7854595586351821e-20,0,0,0,0,0,0,0,0,0,.06273842069412168,.13456182749012816,.15385986115488778,.11273352171602904,.03979764438166176,0,0,.08254750539778727,.2051167760083493,.29355803097744737,0,.11739580975989057,.1902012701360036,.1689773827660581,.07249168313574046,0,0,0,0,.06782988620982025,.12408226202351216,.11645695279210458,.05524290256435052,0,0,0,0,.05144343491342909,.06278754923423549,.008355263597357521,0,0,0,0,0,0,0,.07804054646755675,.1999642995418981,.26608781617410104,.2426274784769703,.15895582023171925,.07194557189941407,0,0,0,0,0,0,0,.10318547822535039,.19917195741761307,.22201904604244194,.16039131045210694,.06158038435969502,0,0,0,0,0,0,0,0,.002776406397155995,.08657723700416682,.14713068357218193,.14185585007071497,.07034803942924413,0,0,0,0,0,.09686891491205572,.0002537587657570839,.1327463678486784,.21949881180127276,.22225514806397145,.15081516785456586,.06400749538425732,.02350441859597532,.02532197020495055,.06848067882037867,.13348521269482108,.16537412342229518,.137187422200236,.06497597931242183,0,0,0,0,.05824857995165827,.06834716575429071,.015142358481949066,0,0,0,0,0,0,.04715596864673564,.1414632814816168,.22593456094409847,.24312594250005326,.1776449590663994,.07269456129451488,0,0,0,0,0,0,0,.06460072811946235,.16294617170574385,.24143357931390172,.2456944828698244,.171097587040917,.06791294114651265,0,0,0,0,0,0,.015420666683567306,.02366022095295932,.07075926829258718,.1383803087447522,.17536506014332634,.14796403031159572,.06375587749079552,0,0,0,0,0,0,.03566232919692993,.16975263708218205,.2677889535178281,.2875051395650224,.22995506197421492,.14773942038795787,.10233784836024143,.09533546429168782,.12686603871406987,.17808372950807694,.1977744909921455,.16167197735293037,.08585018452413351,.004260590235817418,0,0,0,.038605089631606186,.0436012083693214,0,0,0,0,0,0,.04007936672658335,.10902052859693755,.1789121995881221,.22232394695438418,.1975281902640852,.10581631458210837,0,0,0,0,0,0,0,.07069928841370086,.14613439838857387,.22994299132260496,.284078591590273,.2632614679717619,.17227071312002293,.06499894671997027,0,0,0,0,.009620672065831393,.07757286643831662,.10745739279499977,.1203107467665177,.16308725056418721,.21473274679717919,.22959229161637756,.1834355363273062,.09127222838124287,0,0,0,0,0,0,.13321307245641947,.2644395470885646,.357452388923934,.3624327223910745,.2787795691165997,.16615553794434004,.09577078859004798,.07076737748218218,.09644506415588694,.16172203864607282,.20993316863216172,.2021470121590198,.14036479543746339,.05772224946859909,0,0,0,0,0,0,0,0,0,0,.017332379267782017,.08934359980109698,.1295516720254167,.1595146925714431,.15667067719626146,.1040747624465356,.01647790753479348,0,0,0,0,0,0,.05613861336326307,.15060148092508416,.2202913635074334,.29027925702625906,.3217330804951927,.27797526810672174,.17240981144793677,.06196568992420311,0,0,0,0,.07451568124291083,.16391303569407745,.20432885411122695,.22260284353447163,.2654506500178429,.3102078217989153,.3145062236162938,.25980071105386743,.1655391682764405,.06070738042005228,0,0,0,0,0,.225,.35333372506429445,.43811608329415325,.4181766656634864,.2919465065002442,.13162873853580095,.02409307882189751,0,0,.08697088583721779,.18534060940146446,.22655857357312925,.19002771377563477,.10801005790126511,.031020843237638474,0,0,0,0,0,0,0,0,0,.06376953125,.0972837906330824,.09955635070800782,.08533319234848023,.04495849609375,0,0,0,0,0,0,0,.0087188720703125,.09691651687026025,.17438998222351076,.23839056044816972,.30000000000000004,.3214631035923958,.2710068702697754,.16469102650880815,.058026123046875,0,0,0,0,.10316039220197126,.20164569467306137,.24666393228108063,.26776714324951173,.31441407311940567,.3642550453543663,.3743152129347436,.325,.23493805538164453,.13364314064383506,.029207739635603504,0,0,0,0,.23959672395139933,.36993570982612,.459879796912858,.43530463738575403,.2868205811521051,.09242402487825101,0,0,0,0,.12971039635539827,.20990208972279495,.19538580776908532,.11597511335382314,.03276052045824756,0,0,0,0,0,0,0,0,.043455450273618086,.07767577372073903,.07179584078144782,.04129472341281679,0,0,0,0,0,0,0,0,.0034515309384747805,.030280247767512238,.07439206810719928,.1297137332765412,.18836507894113869,.24820979948622154,.27510509781473,.23768899736661717,.14742288225258363,.05298515515257947,0,0,0,0,.07451568124291083,.16391303569407745,.20432885411122695,.2235989998577253,.2746016167919127,.3368765655273301,.3636338821468506,.32867996978548036,.24549197242825113,.14574109894225593,.05764300999475621,.010564082057607038,.0024542330770844036,.001045351388298066,0,.1605202317237854,.299203050503049,.4147678296610366,.4218708481316647,.29378721484554265,.10013610198393266,0,0,0,0,.07084846860385596,.15640489794633028,.14852176856129518,.07259351386721417,0,0,0,0,0,0,0,0,.02941576486241786,.06912689348319706,.07274303435697221,.04109399022326481,0,0,0,0,0,0,0,.026912614916802725,.038557945984658205,.025576418351209364,.01029921648105301,.016228770799004623,.05296205140667496,.10663861504031065,.1677962369110901,.2073005938631722,.19210971987128575,.12571106092542214,.047431663822681006,0,0,0,0,.00897062665597792,.07757286643831662,.10745739279499977,.12147989247041552,.1738273455077906,.24603270086120405,.2872513051394315,.26427615095162765,.18510938556893924,.08371098691251576,.010531773648360087,.00789332013882813,.057285297934153136,.10017339584317995,.07467339525995763,.028116814233362677,.1790456371722254,.33500904290635586,.40316947469539255,.33315831037494664,.17369821199918326,.023941310643930482,0,0,0,.03577278163837483,.09160726449007459,.07307700709317544,0,0,0,0,0,0,0,0,.022371694100015556,.06023203136663096,.08042053410763542,.06767723283060151,.02850678745130842,0,0,0,0,0,0,0,.038912554687360636,.042197548931829344,.01249521488588069,0,0,0,.04006880604878044,.10106787865292972,.14974994159976182,.1523927805141949,.10612381981018902,.04212321666049519,0,0,0,0,0,0,.015420666683567306,.023921125316545045,.07315600774667665,.14536514781836912,.18823213751277615,.16600427032626613,.08469640158041684,0,0,0,.032856614597395944,.11541733418299992,.11041563476772094,0,.0523166654448481,.2485474520938624,.38055330404637927,.3755299001466483,.2593345002239566,.12245963852028581,.015099192643506143,0,0,.013523302162047912,.029462826597227123,0,0,0,0,0,0,.02505435776229206,.03771205600827657,.03641389011172578,.05413535482379359,.0756583191572645,.0802818524997889,.05935037285089493,.021153193190608023,0,0,0,0,0,0,.003862571716308594,.03607080887250618,.03055711445922498,0,0,0,0,0,.04919868931174279,.10333275221748864,.11904107112568454,.08884341281416255,.037080834410153335,0,0,0,0,0,0,0,0,0,.049567500851662775,.08988920134214311,.06478788778185844,0,0,0,0,0,.09862270279218137,.11642827407074989,0,0,.15897990218277333,.3154302625102571,.342797022955952,.2571059548464737,.1403507284904206,.04473504574369516,0,0,0,0,0,0,0,0,0,.008087085742697541,.0687454344872597,.07534724861727328,.06314905706795458,.05678938387344024,.05584228720921934,.044383061244496334,.02103935936988819,0,0,0,0,0,0,0,.0243829951970838,.04171987876800304,.019891432482981242,0,0,0,0,0,0,.058009713836398726,.0863149103932607,.07178971200003481,.03617544607090509,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.11329364153617565,.16961035615617384,0,0,.1014414562968284,.2252509552609626,.23561213288830915,.15763290869543853,.06643962946229749,.00019902878235480425,0,0,0,0,0,0,0,0,0,.03766591856598536,.0918240919755732,.08607049678440107,.05987286750532803,.03221009772545711,.0063015260815376456,0,0,0,0,0,0,0,.01064787575641617,.03446074501558876,.04590328484773636,.04360141005445666,.0054015724510605885,0,0,0,0,0,0,.030109197858143057,.06354956445051699,.0669262109388348,.035542585086295736,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.13626926287844016,.23441575352972815,0,0,.10301763272292326,.1576253124700619,.11709353410566621,.02774752088336083,0,0,0,0,.028532376105643433,.01703274848388504,0,0,0,0,0,.050814427755143346,.08643047282330799,.06600131700481922,.027493727233087385,0,0,0,0,0,0,0,.005387306156610806,.03667511327251177,.05530597468835823,.05751436140388887,.049459515709895645,.03147562558413589,0,0,0,0,0,0,0,.02783605522532572,.06499383198929101,.0675266039214179,.03562071096502564,0,0,0,0,0,0,0,0,0,0,0,.0006165140095617972,0,0,0,0,0,.12482366379707414,.24638691605818608,0,.06473312877885747,.14993669721006883,.14352449152595456,.05626730360090733,0,0,0,0,.026479952800150388,.08404239852970932,.08039654087949658,.022468760982155802,0,0,0,0,.049140251578796784,.06423724516353105,.0322531950423354,0,0,0,0,0,0,0,.0022383758107025645,.03767393231391907,.0629675797019445,.0667147073429078,.05263611081245473,.033618164062500004,.009471083970493056,0,0,0,0,0,0,.004685497283935547,.04805176112822665,.07854428028222174,.07315962816901447,.036353705823421484,0,0,0,0,0,0,0,0,0,.00019170400919392707,.07528052507423126,.08013482093811035,.009434368192341936,0,0,0,0,.06078106750210282,.17871739163099393,0,.12417507353158479,.19785296213158607,.17865271857747977,.084768489853505,0,0,0,0,.08209246569506565,.1355393837533964,.12447756099170093,.060453721521602694,0,0,0,0,.04419522117591695,.048359400558065785,.011389186404792138,0,0,0,0,0,0,0,.021002807732222184,.046981045675072164,.05939336602423003,.05155638474241947,.031081196448636522,.011053496960084888,0,0,0,0,0,0,8421291952075279e-20,.03187844616295479,.07267123730059633,.09504654542572402,.08001974509533877,.03724637558906921,0,0,0,0,0,0,0,0,.007480981772069462,.08943094892122753,.1459415468000471,.13521890255124164,.058561854116203044,0,0,0,0,0,.05741142517933858,.001871645450592041,.1347213371904573,.22464768217380993,.2329804321133796,.1673126077375855,.08417664634409594,.044337193364526684,.04517289753999237,.08559093978255987,.14566414677818146,.17192472335950698,.13933868241391495,.06507959156006109,0,0,0,0,.04315222400837811,.046554658370740756,.009438732330528455,0,0,0,0,0,0,.010876925552238962,.027189479450147276,.04108454340621394,.04266673541164347,.029750989140225677,.01043805301235268,0,0,0,0,0,0,8.072887851540147e-7,.019369020609668167,.05378007295075805,.0924157539578221,.10822458948297255,.08547444177318765,.03795310560053622,0,0,0,0,0,.0100239632993123,.031669251379617604,.040612195407265975,.0860918692960075,.1491970027555027,.18032121887671224,.14815651149256157,.06203696873263738,0,0,0,0,0,0,.05156299564987421,.17409493939782106,.2601370724814711,.2731387891259369,.21742977247207307,.14283290307566643,.1048426519645107,.1027573733634201,.13519990661297926,.18104740187381146,.1911323752331569,.1459294909609405,.06579705407211804,0,0,0,0,.029189619377551622,.03799301583680777,.00807792780490899,0,0,0,0,0,.006247955451951706,.01787918723146076,.020296132322158388,.02610107584287392,.023836221144596506,.01351569308259593,.0008931183940298664,0,0,0,0,0,.00047266533695803514,.017859760620356994,.040854097028600204,.07529590436206492,.10918972500551703,.11765448415977665,.08864060058980269,.0382669971388907,0,0,0,0,.023004529711077915,.09605922780810082,.12819861736923072,.14011871720632316,.16754363451783036,.18945946726761417,.17308337364295923,.10842143641621078,.016621300122779153,0,0,0,0,0,0,.15480422973632812,.24301827302149448,.28871369736543784,.2659393422543097,.18935849284753203,.10904346521190078,.0722902128077294,.07189781279596445,.10861442685127258,.16208549090590624,.18083898126060377,.1423974720854176,.06541256541386246,0,0,0,0,0,.013689432342107467,.004215067813116491,0,0,0,0,0,.003409733520613401,.01272982864566075,.014503229583088034,.007979811925906695,.0069010990212206086,.0035258846919532546,0,0,0,0,0,.002366849337704482,.01614631737099615,.03619213190177107,.058062205339958,.08643894642591478,.1115977831012387,.11412044672488265,.08503135260003349,.037518862867727876,0,0,0,0,.0843911579072426,.17692164987638537,.2189241864623398,.23112156033748762,.2242074553625983,.17885411230672618,.0945724786327375,0,0,0,0,0,0,0,0,.23559244070202112,.27809416000600384,.2704314987843477,.20137126275772366,.09941931452554797,.014352285225952492,0,0,.03461906921002083,.10930880994291241,.15218938098374651,.13256680503586454,.06434241824963464,0,0,0,0,0,0,0,.0021277622328284454,0,0,0,0,0,19461894958272555e-21,.003352941252645373,.0021921302470104837,0,0,0,0,0,0,0,.010477622259344352,.02769366657634666,.04399839021159792,.05799608418166129,.07446128211631732,.08997780297109287,.09240574377569956,.0730017383477159,.0355627962894971,0,0,0,0,.10194049016387774,.20003876110487362,.24486099392306876,.2533315249283163,.21089862613364335,.10572724440760868,0,0,0,0,0,0,0,0,0,.2306233048439026,.23627042109294327,.19463366236391266,.10619582078516976,.0042258084040440735,0,0,0,0,.0655432077972911,.12843140711215711,.12441462390081953,.06345498777518514,0,0,0,0,0,0,0,.02036627956586017,.02888410473660257,.0175745247141748,0,0,0,0,0,0,0,0,0,0,0,0,0,.014897849292538026,.02971398361507661,.03681078336629185,.03849638624086161,.04123020137194545,.04994065440535889,.058899049697743074,.056299952687013606,.033028674397428404,0,0,0,0,.06308314961280735,.14885336838300986,.187432292615756,.18941996014455073,.12650885315756774,0,0,0,0,0,0,0,0,0,0,.13643928710371256,.12843111340935376,.09142956503917188,.02950901797225567,0,0,0,0,0,.06804067009549979,.1297871440634893,.12487982405881576,.06350562855341195,0,0,0,0,0,0,0,.031136383299337926,.05048377520831819,.04216890713390447,.016355727565262115,0,0,0,0,0,0,0,0,0,0,0,0,.014506812540133763,.023487331460492467,.02075559954727125,.01120645717318504,.0037917694880889035,.010329267506038966,.028516391553841117,.0420769011880967,.030970650052523755,0,0,0,0,0,.059417622708017516,.08708767374225423,.0830727225184404,.020549199099496623,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.0043985337135381995,.050463867187500004,.12061000334797428,.1583241865038872,.13467186862835662,.06457157135009765,0,0,0,0,0,0,0,.03382320404052735,.05901351546635852,.05726619511842728,.03533020300092176,.011645507812500002,.0007667168858461083,0,0,0,0,0,0,0,0,0,0,.011095046997070323,.014625022304244345,.005638584494590761,0,0,0,.01136291027069092,.03463052026927471,.029960632324218753,0,0,0,0,0,0,0,0,0,0,0,0,0,.04295074939727783,.10815312154591084,.07733917236328125,0,0,0,0,0,0,0,.0553021891496428,.10766646622077593,.12402723119684245,.12593626809539174,.1594633931765202,.2041823953307523,.21105951098667758,.16203421926570633,.07925364620330981,0,0,0,0,0,0,0,.032589782300857455,.06149529051582094,.06827798292178883,.0547412394779015,.03471538087360387,.021556295160373377,.015211865470223355,.005259546050795637,0,0,0,0,0,0,0,0,.006727772752512357,.005315186878590358,0,0,0,0,.003306938505759583,.034452249258026174,.0353101697184286,0,0,0,0,0,0,0,0,0,0,0,0,.05727690823842726,.16738517645137097,.22936436004876587,.18362394725910747,.059230201087600534,0,0,0,0,0,0,.09448658229121065,.2140359031807949,.261552310623145,.27344593151410107,.3064466877724044,.3340770834834467,.3116878577814191,.23336411144865327,.13302937420321542,.04557153174422819,0,0,0,0,0,0,.023323912560226746,.05065919874674401,.06766007810700786,.06887484928649862,.0585528979310766,.04529446373031304,.03292071797130803,.015017391126181506,0,0,0,0,0,0,0,0,.001391135780977494,0,0,0,0,0,.012867737873150988,.050059716299328934,.05761774394341047,.029993946965089925,0,0,0,0,0,0,0,0,0,0,.08549258154816926,.2039819844767132,.3058326841351686,.36500550756258965,.32726077431198064,.21101662671453625,.08991592245880042,.047740659550650544,0,0,0,0,.07993034985827308,.2484433980636956,.3324590379520225,.36926489039287785,.41980219043234684,.44910583760109896,.4112359856311452,.30999097756367683,.19318713780711222,.10034772737957799,.018569668624245982,0,0,0,0,0,.006144406786899027,.02373583070435065,.04719827416043847,.06455804968611187,.06810631366279268,.058610945590128125,.043055754729603116,.020601949386787437,.0012786408503302493,0,0,0,0,0,0,0,0,0,0,0,0,0,.03595749705442231,.07044586076150498,.08075470803717621,.06639334322884974,.027618839586441048,0,0,0,0,0,0,0,0,.0644328569270221,.19676193646664616,.29984881407320435,.37787354745738333,.4340933838804194,.43088831764590907,.36326911187850025,.2687173743634037,.207349036672842,0,0,0,0,.001960826280992478,.1723930299580836,.2826016619278562,.35186439185516677,.43294856026768685,.4826499110995151,.4487948152243007,.3395048903910343,.21405926852021367,.11879819113114394,.045325374618914796,.004666535195293875,0,.012159935828474034,.018163087964057925,.0042392941567143795,0,0,.010470804985925498,.038147397725812486,.05444357246160508,.051981298073916105,.03847841811875697,.01807976781100252,.0006880487781018025,0,0,0,0,0,0,0,0,0,0,0,0,.02719130521580482,.05793758974277808,.07839814463092766,.08383007411612198,.08047846217864106,.053694058356450115,0,0,0,0,0,0,0,.019349980544393474,.13525105335696283,.22523261904716493,.283768516534262,.3288312941062941,.3813448825089871,.42516209150198847,.4273065018553517,.37856878780576153,.30578720674835225,0,0,0,0,0,.025305252346754566,.1432543646017126,.24000762945352094,.35060471190281534,.42630983015925833,.4079436171666569,.30342636862334377,.17830942681058276,.08475163293160978,.022329318240987342,.007363640700840738,.025874828174710277,.04604887209598865,.0413294985206933,.008095995976162855,0,0,0,.001505748245358127,.02502546036448621,.030000814325604107,.022467138797718007,.009257311185771822,0,0,0,0,0,0,0,0,0,0,0,.0029050462188746876,.024984747642520237,.049883009272148136,.06522823707448122,.06572430932439548,.060373459806356784,.06125649525460284,.043991042968613094,0,0,0,0,0,0,.016346812049002086,.10197722054244736,.15462924469393946,.170091862987465,.17402711917993618,.1896825428899216,.23766800062568322,.31848023099554723,.3777964755833125,.3691375157369732,.2915695805031391,0,0,0,0,0,0,.0013765835113730418,.11156035103962274,.23756612789584325,.32853042977982433,.3220582439852649,.2250411861372525,.10468645406963334,.015495360174146723,0,0,.012028622627258302,.04833882242687766,.047581097448474455,.009444290841929616,0,0,0,0,0,.006834530172930499,.005431603424483457,0,0,0,0,0,0,.005601012758087444,.006984902933865557,0,0,0,0,.010813724893412925,.03418350603897125,.05277599440490877,.053819695583271716,.03742020203958141,.020785371420060983,.018979483930383047,.005482615807417802,0,0,0,0,0,.03166661472350825,.10838202809106741,.1489102460141851,.13366064270342723,.0832435613963753,.047522985247736974,.04748460905298657,.0905710170030899,.18267769716749171,.2615539662238352,.2664267495085255,.18539612190867782,.0779629647731781,.04910182164284294,0,0,0,0,0,.0034323012685106152,.13284439718700014,.22773559170648858,.2264832668654737,.1358264134524928,.022052329983807795,0,0,0,0,.037068887893002035,.04669528255498756,.011314531821349318,0,0,0,0,0,0,0,0,0,0,0,0,.011820213845930995,.026425528379980665,.025556782859881482,.010343874154859788,0,0,0,.011583962472972218,.03264502193815134,.04425383261675744,.034000195127896767,.00514401217128575,0,0,0,0,0,0,0,.03380323227532448,.11469348633162042,.17377228320587015,.1713126545777239,.10008080767588277,.0015236162433211575,0,0,0,.06309312563375613,.13875496909185106,.14029500898965597,.05549607283911916,.1318359375,.1003740200383163,0,0,0,0,0,0,.009856224060058594,.0908534914710799,.09450992551865056,.026246579718190333,0,0,0,0,0,.03809504327546165,.05836375441867859,.03126762660576787,0,0,0,0,0,0,0,0,0,0,0,.022139842358592437,.04526367187500001,.061661747485595705,.05895058930618689,.03771814609845024,.01169840767979622,0,.0045821399311535066,.022494957855997203,.03482365608215333,.03899308773350186,.019327283647726293,0,0,0,0,0,0,0,.05185376055305824,.1350744893998126,.21111512482166292,.24211225994490634,.18743402968975717,.05879517629914517,0,0,0,0,0,.06303996951919544,.06873652926879004,0,.07015934586524963,.051158704762380124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.047939740247687025,.07416644396196626,.06291009122090228,.04119222986935825,.019382133331089096,0,0,0,0,0,0,0,0,.022062931332322823,.060842720525891354,.0847897187108174,.10021103780714115,.09938118992879284,.08021910608213864,.05296533184620743,.03331523069610386,.03181154302430065,.04090401607513265,.045122768084866045,.03607775816944314,.014752476218926171,0,0,0,0,0,0,.03162528307770158,.138228190938815,.22046556551929677,.2803079193918478,.2750676446798444,.1724085300854092,.007196301368170206,0,0,0,0,0,.07160856788053184,.08350581429870618,.022863782812784433,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.010694503784179688,.04888437717249028,.07210096661256671,.08028830582013535,.08219036538284855,.07792454172434729,.05920405139098364,.033292705641368464,0,0,0,0,0,0,.039225446357997386,.08307362585262999,.10316947996616364,.11541238671906028,.12191758865352541,.11582435452510774,.09733213877543677,.07529899358493962,.06061141459724127,.05278843289750968,.04570218271692284,.03546092979572913,.018343993982952615,0,0,0,0,0,0,.057731680587213896,.16575525217173492,.2336070568753661,.26923237884311674,.23319500400352686,.109587611556438,0,0,0,0,0,.07100843327043549,.1447202858357819,.15041376814740204,.10350214281519388,0,0,0,.03690402455403987,.06551773860205401,.03210625716480015,0,0,0,0,0,0,0,0,.0077551686031456235,.026925993780986347,.028414785861968994,.029366085591292373,.042290774053290736,.06727261763542595,.09280245802620471,.11098315960276534,.11971597093564759,.09454064551301562,.04493266999938897,0,0,0,0,0,.029335729777470322,.06977594513668825,.08339651066344232,.09223126921730274,.10946898851947327,.12277296369269415,.11936859197222348,.09840191606014727,.07010761888099191,.043400819310990824,.027247589034459455,.02453513655127325,.02619161706187612,.02042811346175205,.00032971625975619645,0,0,0,0,.03361320092477663,.12100960243789616,.16660119295449105,.17853597916829075,.1269276603662118,.01403432130073763,0,0,0,0,.07451751764318769,.17399156619937628,.2205351974349699,.20157569154865906,.15427745409761598,0,0,.023379871776342043,.12900329905254893,.17275354481535032,.13030133399551147,.03284842196444515,0,0,0,0,0,0,.007879854499293515,.0586980314928951,.05661108999211706,.02178955078125,0,0,.028477744944353848,.0697561587090604,.12008753904523531,.14953146548086807,.13423041970837915,.08134710639715195,.023311144963705035,0,0,0,0,0,.02898430903970848,.03768577575683594,.04492471965466791,.07106145990783262,.09957370298833156,.1079901039833203,.08831446332897884,.050439754271246785,.010525990738941005,0,.0015622822412098005,.026032268820017638,.040267132035936015,.02628406946314499,0,0,0,0,0,.040616366631184064,.0672567964027877,.06445320207858458,.011943293257128574,0,0,0,0,.033929831791283505,.14528994021303276,.22474868170684204,.2335330878421331,.1781271695790565,.11504985637951393,.02786305546760559,.04790765831579573,.1248871732523098,.20305788989432189,.21728168271825155,.15255934255634807,.044655981985885385,0,0,0,0,0,0,.01541176872943447,.06354512441620974,.048001295556400224,0,0,0,0,.03253251186953463,.09650421659488517,.14275795811708802,.14012334276874536,.09146653467191755,.030491831216795936,0,0,0,0,0,0,0,0,.028262153238190216,.06220529121949497,.07361347437846107,.05247449084793514,.00951951610925057,0,0,0,.012769441970930285,.04224915356634471,.03328817272771829,0,0,0,0,0,0,0,0,0,0,0,0,0,.04457148400654387,.14923848635350942,.20417557738717562,.17529624008598413,.08245799431084255,0,.12485790252685547,.1376497724441923,.19478131422043532,.24725072961767136,.2419443111948567,.17093539121430146,.06848792950658833,0,0,0,0,0,0,.03332844280184011,.07131452744337707,.04188939784734691,0,0,0,0,0,.05589955133970679,.11948782422960279,.13619726838970825,.10135649185976946,.044698896173679926,0,0,0,0,0,0,0,0,0,.008093267288772977,.02173981487640049,.001508238058721423,0,0,0,0,.005843419520263638,.05039237786207003,.04740025778919517,.0033138337134851707,0,0,0,0,0,0,0,0,0,0,0,0,.07028858954647887,.16523272473615447,.19953952148080134,.1418416943336933,.019756508108869753,0,.10638365149497986,.11543671869766359,.16038106136408303,.20972893828436678,.22397665675528344,.19121557197200056,.12980257618627733,.06361305138188632,0,0,0,0,.03821611738644606,.08141324350165105,.09433305625608801,.05152104697695511,0,0,0,0,0,.0006629797521635707,.07672820931004863,.12181764742010565,.1184874289553136,.08138134843185964,.03613833576106436,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.02915744881252831,.08221462383658497,.08440987563670461,.04557478749313022,0,0,0,0,0,0,0,0,0,0,0,.04998825723139746,.13978469184469522,.2219363686533472,.25112988429891914,.1935467602468834,.06980940534966718,0,0,.006464601028710604,.037688761949539185,.08900166722014546,.1404285430908203,.1723019522614777,.17772987484931946,.1703125,.1625,.1546875,.146875,.1390625,.13125,.12336564715951681,.10434716939926147,.059179156087338924,0,0,0,0,0,0,.02000858783721924,.08891698308289052,.12412109375000001,.11719151921570302,.08644633293151856,.025999709218740466,0,0,0,0,0,0,0,0,0,0,0,0,0,.004644085839390755,.0770920991897583,.12058613188564778,.12138824462890625,.09360811337828637,.04177317619323731,0,0,0,0,0,0,0,0,0,.06442871093750001,.13716551763936877,.2006869688630104,.2689895997173153,.31240177154541016,.28909171937266365,.19681470841169357,.08322452119318768,0,0,0,0,.008703950175984687,.09427712022031597,.1646838169611089,.21858325284347654,.28070633112802174,.3236067028016728,.31297027241316083,.25254959674784583,.17925626385144824,.12299529783727461,.07856315254156021,.04653481583418869,.025487749837338924,.004440683840489158,0,0,0,0,0,.03656085489148221,.0997365509730571,.12105946959333175,.10739559407631967,.054435874325442925,0,0,0,0,0,0,0,0,0,0,0,0,.015265218418835503,.07836972511139813,.12355150483986117,.13717297149479937,.12722724367871338,.111588489288575,.06991365082273629,0,0,0,0,0,0,0,.004149916781860031,.08182550397367606,.13348248465936194,.1671629051245837,.2006158893300729,.2569316184506445,.3254971795415287,.35410309266392576,.31089021943806583,.2134351644448725,0,0,0,0,0,0,.08647874604922379,.18270147838571651,.2929425029084087,.37157939933521517,.3621962273884151,.27096258054577577,.15856494695035508,.07423683981769491,.019668116634733224,.010413880001475029,.032081544399261475,.05374920879704792,.044494972163789726,0,0,0,0,0,.044704040401848034,.08117593277147282,.07976143391201447,.039269419802630615,0,0,0,0,0,0,0,0,0,0,0,.02138882567552165,.08740631495020353,.13306467041480816,.14001432021035784,.11567181928336807,.08950796123899636,.08160750911531159,.05209428892270865,0,0,0,0,0,0,.034821724437642844,.10576992882187995,.13634238865617396,.13016190977068617,.12067273100524699,.13059227403671514,.17837651793683418,.26684974080581014,.3359409655333938,.33135706409184706,.2478900829783861,0,0,0,0,0,0,0,.08905409427568349,.2163349917915184,.30861637556690646,.3034212656661989,.20758208508942133,.08830516742623332,.00014358281866651973,0,0,.007642990909516811,.061700555065967215,.06907840563581202,.015142399000367103,0,0,0,0,0,.012141612311654736,.014320985787924135,0,0,0,0,0,0,.0473320873787945,.0526298598969271,.004702244821181212,0,0,0,.045905125347919976,.11207847684140688,.13965463211094617,.1160823090220628,.06265623999995175,.02212406283981778,.015272513332580255,0,0,0,0,0,0,.04853006788656842,.1219408500435005,.15388200830839058,.12710669871491626,.06649029840937147,.025357036430204555,.023752919081002632,.06586260906716619,.1574777161127514,.23610621220533004,.24054612871184777,.1585727093880986,.11069412231445312,.08148628488630365,0,0,0,0,0,0,.10976475551724434,.20314247458208073,.20127587693123133,.11122625632507593,0,0,0,0,0,.052788304768418476,.0766733762999138,.023606739800661105,0,0,0,0,0,0,0,0,0,0,0,0,.05719757080078125,.12105321449411122,.11667177999152045,.049243842814405525,0,0,0,.054890662461076545,.11504704132676125,.12307426578493619,.07237407508182514,0,0,0,0,0,0,0,0,.04128959215970838,.11774143640650436,.17318853688218994,.16605015399045442,.09087781252162941,0,0,0,0,.04925467127468437,.11992438312932947,.11538195008715775,.025564663601748094,.21789605710655452,.20039404160869595,.08484049365993566,0,0,0,0,0,0,.055546821665740535,.04943495582021389,0,0,0,0,0,0,.07737813668458401,.12388484483836384,.07281440358299066,0,0,0,0,0,0,0,0,0,0,0,0,.07902862317860126,.13889775381516478,.13826164186895695,.08172272694274889,.014295113444131147,0,.026830208360028807,.09835830316261221,.1372489250468334,.10873731966641335,.020986895212048884,0,0,0,0,0,0,0,792982513002416e-19,.0664476353066544,.12477569945365019,.14647229403632095,.11595169180066778,.03335028923317273,0,0,0,0,.031177207606734213,.07778752194713527,.04134863869880952,0,.24253917932510377,.2656971536362959,.20281839334256518,.06257781996811589,0,0,0,0,0,0,0,0,0,0,0,0,0,.1367913969540601,.19725377362130417,.1450411246674698,.05527789980487796,0,0,0,0,0,0,0,0,0,0,0,.03141510486602783,.08003034395734732,.0965520258638577,.08342140447160196,.06451513364163475,.06728243389751265,.10488225911278448,.15710513879758947,.1609726897731889,.08804098942141314,0,0,0,0,0,0,0,0,.0067975686726470036,.027166368226058203,.043997637093525555,.03309295787345312,0,0,0,0,0,.04895654349334573,.12668203385674134,.14331038155895745,.06127921838457269,0,.17543273214250804,.25521767031066883,.28422344756289314,.2250820267580884,.09395999205967769,0,0,0,0,0,0,0,0,0,0,0,.043599339021602644,.20013321556799088,.2488023327028959,.18798420160073637,.09664392624872775,.043830356881461814,.04556108708431228,.08063393061908186,.10583046836188714,.08378536423317665,.021679658364046617,0,0,0,0,0,0,0,.017754846911709365,.05314205654613477,.08883164216834771,.12338653851680122,.15611782710385558,.18300688791997685,.15214062478321466,.04823455028235912,0,0,0,0,0,.03780987720642542,.07260324527160265,.053526248807685334,.0026024165579729753,0,0,0,0,0,0,.008245253490994534,.08643875143712072,.1869755594309426,.2770069751440502,.27807875839226076,.1621141838759161,0,.069873046875,.1988014073727527,.3161915634729667,.34649367661979796,.25948696844279767,.10847812306481046,0,0,0,0,0,0,0,0,0,0,.12044677734375,.23166520400318405,.24227354637114332,.1658668407550067,.07310754433274269,.03957657150658633,.0770074279862456,.14409174708180217,.1805734634399414,.1456179161386899,.05831360723823309,0,0,0,0,0,0,0,0,.01298336486070184,.07266844063997269,.1182286780749564,.14108828245662153,.14678200338858005,.09521484375,0,0,0,0,0,.07170805583009497,.17086333146598917,.20169677734375,.13834577884281316,.021987462567631157,0,0,0,0,0,0,.03803462421490167,.14533062692207752,.2744925420833397,.38786517195403575,.3977963445069463,.2762897438631626,.0896098478742033,.005810906924307346,.1575458750401765,.31870675459977155,.3965900294918636,.33774564510188726,.186825719965156,.04069062264358508,0,0,0,0,0,0,0,0,.06132887356643671,.16689984453259968,.21445839400808575,.17832513557683274,.08465547227311411,0,0,.02424641264735039,.11223993915785527,.1581736465624317,.11760682445491988,.016560724039987207,0,0,0,0,0,0,0,0,0,.02923531783667599,.05372840419554492,.06284801540123841,.05901363305747509,.004967283051655613,0,0,0,0,.016906151815783234,.14018694024970688,.26275065694765065,.3052787507825997,.23219827592015518,.09022554968390949,0,0,0,0,0,0,0,.10717119379580527,.25165200505484925,.38972742245602204,.42676489809995044,.32613870391583694,.15016221285227074,0,.15294092370248957,.31738338991263504,.3995645954508885,.3440559427608605,.19428509968978547,.04728748472012967,0,0,0,0,0,.03395203105283145,.044557229448457705,.06792414656661379,.12896105892713192,.1769396245479584,.1642159428693137,.08635349197635662,0,0,0,0,.010863931456711384,.059474611189216375,.017014388371293876,0,0,0,0,0,.02421246394401355,.044432468712329865,.04154338468784635,.02796011915602037,.004496144179562567,0,0,0,0,0,0,0,0,0,.02247207774705373,.15735286693124806,.30469477777697573,.37767598405480385,.3287104772301266,.19701295289270604,.06678082108560535,0,0,0,0,0,0,.002963438630104065,.1516076337283342,.3100616344318041,.37923619307049383,.3103623651020655,.15366553508827752,0,.13408487008552342,.28781223096707786,.3757524294087547,.341129630350693,.2155557041974294,.08681635527020426,0,0,0,0,.07997352576655993,.1460560243007592,.14915144777648867,.15147955759058293,.16217528248370855,.14503085678443314,.07813104725254053,0,0,0,0,0,0,0,0,0,0,0,0,.0319211094769738,.13411857853184453,.150764208228793,.13362210677240355,.08159051189489352,0,0,0,0,0,0,0,0,0,0,.023458249344450257,.16515325985552065,.3259440559355241,.4199860086373519,.39580553667790197,.2860788438958993,.17075755990234365,.05886786066746979,0,0,0,0,0,0,.08522217336576432,.2590365800863168,.3603369311709478,.3280742036989974,.19645074003740925,0,.07947246394891394,.1975354759729271,.2931993738847787,.30922111845575273,.25735423741302554,.16876179512928502,.08294621403301221,.0319762721657753,.04698790203410113,.11708146903511078,.19532714491064668,.22774443372618408,.20395519828653905,.1658627768045335,.11041535549523758,.03378562927246094,0,0,0,0,0,0,0,0,0,0,0,0,0,.14634350234427984,.2216866550368337,.21064281463623047,.1671579833446799,.08255431648467493,0,0,0,0,0,0,0,0,0,0,.02437124945683422,.16230500096571632,.3054014893224064,.38617849349975586,.3706025391763603,.29322342442537774,.22168523836089093,.1552759686484933,.030015924118427507,0,0,0,0,0,.09637364141214277,.26660728454589844,.39004768756998587,.3928073976417181,.28991619638036425,0,.0010092167974757663,.06014406802112915,.1520347177344805,.23352104467474177,.26234073444798184,.23258848184636116,.18066455470723616,.16394899734332286,.1944710071013683,.24197980526716228,.2655742988922162,.23985707750118196,.17492587189233283,.08664369885460906,0,0,0,0,0,0,0,0,0,0,0,0,0,.018027879483831555,.1620716195893457,.24807617058499476,.2484929124357254,.1891285428428091,.11463873356090064,.023394906805386362,0,0,0,0,0,0,0,0,0,0,.025216454760296953,.14928887377059008,.24334751258154866,.2725676058616955,.24072052747280598,.19504478019632054,.18635678405506773,.19303464431053002,.15306052094097994,.07340973035401037,0,0,0,.04622029461960475,.1541498922928647,.30941301363205653,.4221031229244545,.4442407765981715,.36268208518127476,0,0,0,0,.10432813225952486,.19872097223892937,.22241838647127565,.20421865733927042,.22265055908355863,.2709048363793605,.29876129359994935,.2702727125585425,.187772993683393,.08197810603729035,0,0,0,0,0,0,0,0,0,0,0,0,0,.059551863394081694,.21720707733402378,.3176144591558867,.30863904383157603,.21504513787019808,.10364409536123276,.004223444393617104,0,0,0,0,0,0,0,0,0,0,0,.026043298653262603,.1331891137641179,.16700027668890982,.12719957157969475,.06153928239917139,.03617834014993093,.08710525690473325,.1675673868246122,.2193491229446765,.21833243987178436,.17190063047769005,.11803111978515517,.10033961313290844,.12233657016824395,.1971058555533094,.32451606949371126,.4234385276122976,.42921559512615204,.3550446550285148,0,0,0,0,0,.08047565292436415,.13132312284299152,.1339541755153102,.17997104729620333,.2528721145557966,.285579757034862,.23859426121199587,.12688887179107838,0,0,0,0,0,0,0,.06719590263833197,.09426108745947448,.021870794334041932,0,0,0,.030982950198540582,.19529241893750346,.3572395759907252,.41485140173457846,.3310639021055577,.1688200946857231,.021818028471898288,0,0,0,0,0,0,0,0,0,0,0,0,.02691652016019273,.12363587076963067,.11526558131045674,.02383821629337035,0,0,0,.1233582285977171,.2292972200727466,.27023250550460814,.23317638338575186,.15840396403025353,.11212463280743318,.11335140414850498,.16649811138965412,.2723455930747143,.35554583377701665,.35359007109257556,.26340362371411175];for(m=0,g=0,v=0;m<l;m++){var M;"flat"!==this.data.ground?(M=b[m],c[m].z=b[m],u&&(d[Math.round((c[m].x+o)/a)][Math.round((c[m].y+o)/a)]=M*this.data.groundYScale,M>h&&(h=M))):c[m].z=0}if(u){var E=new CANNON.Heightfield(d,{elementSize:a,minValue:0,maxValue:h*this.data.groundYScale});E.offset=new THREE.Vector3(-r/2,-r/2,0),this.ground.addEventListener("body-loaded",function(){if(e.ground.body.addShape(E,E.offset,E.orientation),e.el.sceneEl.systems.physics.debug){var t=e.ground.components["static-body"];t.createWireframe.bind(t)(e.ground.body,E),e.el.sceneEl.object3D.add(t.wireframe)}})}this.data.flatShading=!0,this.groundGeometry.computeFaceNormals(),this.data.flatShading?this.groundGeometry.computeFlatVertexNormals():this.groundGeometry.computeVertexNormals(),this.groundGeometry.verticesNeedUpdate=!0,this.groundGeometry.normalsNeedUpdate=!0}this.ground.setAttribute("scale",{z:this.data.groundYScale});var x=this.STAGE_SIZE/20;if(!this.groundCanvas||2048!=this.groundCanvas.width){this.gridCanvas=document.createElement("canvas"),this.gridCanvas.width=2048,this.gridCanvas.height=2048,this.gridTexture=new THREE.Texture(this.gridCanvas),this.gridTexture.wrapS=THREE.RepeatWrapping,this.gridTexture.wrapT=THREE.RepeatWrapping,this.gridTexture.repeat.set(x,x),this.groundCanvas=document.createElement("canvas"),this.groundCanvas.width=2048,this.groundCanvas.height=2048,this.groundTexture=new THREE.Texture(this.groundCanvas),this.groundTexture.wrapS=THREE.RepeatWrapping,this.groundTexture.wrapT=THREE.RepeatWrapping,this.groundTexture.repeat.set(x,x),this.groundMaterial=new THREE.MeshLambertMaterial({map:this.groundTexture,emissive:new THREE.Color(1118481),emissiveMap:this.gridTexture,shading:this.data.flatShading?THREE.FlatShading:THREE.SmoothShading});var T=new THREE.TextureLoader,C=T.load("/assets/images/ground/Plaster17/1K/Plaster17_COL_VAR2_1K.jpg");C.wrapS=THREE.RepeatWrapping,C.wrapT=THREE.RepeatWrapping,C.repeat.x=20,C.repeat.y=20;var S=T.load("/assets/images/ground/Plaster17/1K/Plaster17_NRM_1K.jpg");S.wrapS=THREE.RepeatWrapping,S.wrapT=THREE.RepeatWrapping,S.repeat.x=20,S.repeat.y=20,this.groundMaterial=new THREE.MeshStandardMaterial({map:C,normalMap:S,shininess:20,metalness:0,roughness:.45})}if(this.groundTexture.needsUpdate=!0,this.gridTexture.needsUpdate=!0,t){var D=new THREE.Mesh(this.groundGeometry,this.groundMaterial);this.ground.setObject3D("mesh",D)}else this.ground.getObject3D("mesh").material=this.groundMaterial;this.ground.setAttribute("shadow",{cast:!1,receive:!0})},drawGrid:function(t,e,n){if("none"!=this.data.grid){var i,r,o,a=Math.floor(n/2),s=e/(n/2);switch(t.fillStyle=this.data.gridColor,this.data.grid){case"1x1":case"2x2":for("1x1"==this.data.grid&&(a*=2,s=e/n),i=0;i<a;i++)o=Math.floor(i*s),t.fillRect(0,o,e,1),t.fillRect(o,0,1,e);break;case"crosses":var c=Math.floor(s/20);for(i=0;i<a+1;i++)for(o=Math.floor(i*s),r=0;r<a+1;r++){var l=Math.floor(r*s-c);t.fillRect(l,o,2*c,1),t.fillRect(o,l,1,2*c)}break;case"dots":for(i=0;i<a+1;i++)for(r=0;r<a+1;r++)t.beginPath(),t.arc(Math.floor(r*s),Math.floor(i*s),4,0,2*Math.PI),t.fill();break;case"xlines":for(i=0;i<a;i++)t.fillRect(Math.floor(i*s),0,1,e);break;case"ylines":for(i=0;i<a;i++)t.fillRect(0,Math.floor(i*s),e,1)}}},drawTexture:function(t,e,n){var r,o,a,s,c,l,u;if(t.fillStyle=this.data.groundColor,t.fillRect(0,0,e,e),"none"!=this.data.groundTexture)switch(this.data.groundTexture){case"checkerboard":t.fillStyle=this.data.groundColor2;var h=Math.floor(n/2),d=e/(n/2);for(r=0;r<h+1;r+=2)for(var p=0;p<h+1;p++)t.fillRect(Math.floor((r+p%2)*d),Math.floor(p*d),Math.floor(d),Math.floor(d));break;case"squares":var f=e/16;for(a=new THREE.Color(this.data.groundColor),s=new THREE.Color(this.data.groundColor2),r=0;r<256;r++)(o=this.random(r+3)>.5?a.clone():s.clone()).addScalar(.1*this.random(r+3)-.05),t.fillStyle="#"+o.getHexString(),t.fillRect(r%16*f,Math.floor(r/16)*f,f,f);break;case"noise":c=(l=t.getImageData(0,0,e,e)).data,a=new THREE.Color(this.data.groundColor),s=new THREE.Color(this.data.groundColor2);var m=new THREE.Color(s.r-a.r,s.g-a.g,s.b-a.b),g=new i;for(r=0,p=0,u=c.length;r<u;r+=4,p++){var v=g.noise(p%e/e*3,p/e/e*3,0);c[r+0]=Math.floor(255*(a.r+m.r*v)),c[r+1]=Math.floor(255*(a.g+m.g*v)),c[r+2]=Math.floor(255*(a.b+m.b*v))}t.putImageData(l,0,0);break;case"walkernoise":var y=Math.floor(e/2),A=document.createElement("canvas");A.width=y,A.height=y;var w=A.getContext("2d");w.fillStyle=this.data.groundColor,w.fillRect(0,0,y,y),c=(l=w.getImageData(0,0,y,y)).data,a=new THREE.Color(this.data.groundColor),s=new THREE.Color(this.data.groundColor2);var b=[];for(r=0;r<1e3;r++)o=a.clone().lerp(s,Math.random()),b.push({x:Math.random()*y,y:Math.random()*y,r:Math.floor(255*o.r),g:Math.floor(255*o.g),b:Math.floor(255*o.b)});for(var M=0;M<5e3;M++)for(r=0;r<1e3;r++){var E=b[r],x=4*Math.floor(E.y*y+E.x);c[x+0]=E.r,c[x+1]=E.g,c[x+2]=E.b,E.x+=Math.floor(3*Math.random())-1,E.y+=Math.floor(3*Math.random())-1,E.x>=y&&(E.x=E.x-y),E.y>=y&&(E.y=E.y-y),E.x<0&&(E.x=y+E.x),E.y<0&&(E.y=y+E.y)}w.putImageData(l,0,0),t.drawImage(A,0,0,e,e)}},getAssetGeometry:function(t){if(!t)return null;var e,n,i,r=[],o=this;function a(t,e){for(var n=new THREE.Vector3,i=0,r=t.vertices.length;i<r;i++)n.x=(o.random(i)-.5)*e,n.y=(o.random(i+r)-.5)*e,n.z=(o.random(i+2*r)-.5)*e,t.vertices[i].add(n)}for(var s=0;s<t.length;s++)if("lathe"===t[s].type){var c=-99999,l=[];for(i=t[s].vertices,e=0;e<i.length;e+=2)l.push(new THREE.Vector2(i[e],i[e+1])),i[e+1]>c&&(c=i[e+1]);(n=new THREE.LatheGeometry(l,t[s].segments||8)).applyMatrix((new THREE.Matrix4).makeRotationFromEuler(new THREE.Euler(-Math.PI,0,0))),n.applyMatrix((new THREE.Matrix4).makeTranslation(0,c,0)),t[s].noise&&a(n,t[s].noise),r.push(n)}else if("extrude"===t[s].type){var u=new THREE.Shape;for(i=t[s].vertices,e=0;e<i.length;e+=2)0===e?u.moveTo(i[e],i[e+1]):u.lineTo(i[e],i[e+1]);(n=new THREE.ExtrudeGeometry(u,{amount:1,bevelEnabled:!1})).applyMatrix((new THREE.Matrix4).makeRotationFromEuler(new THREE.Euler(-Math.PI/2,0,0))),t[s].noise&&a(n,t[s].noise),r.push(n)}else if("mesh"===t[s].type){n=new THREE.Geometry,i=t[s].vertices;for(var h=t[s].faces,d=0;d<i.length;d+=3)n.vertices.push(new THREE.Vector3(i[d],i[d+1],i[d+2]));for(var p=0;p<h.length;p+=3)n.faces.push(new THREE.Face3(h[p],h[p+1],h[p+2]));this.data.flatShading||t[s].flatShading?n.computeFaceNormals():n.computeVertexNormals(),t[s].mirror&&n.merge(n,(new THREE.Matrix4).makeRotationFromEuler(new THREE.Euler(0,Math.PI,0))),t[s].noise&&a(n,t[s].noise),r.push(n)}return r},updateDressing:function(){var t=new THREE.Object3D;if(this.dressing.setAttribute("visible","none"!=this.data.dressing),"none"!==this.data.dressing){var e,n=new THREE.Geometry;switch(this.data.dressing){case"cubes":(e=[new THREE.BoxGeometry(1,1,1)])[0].applyMatrix((new THREE.Matrix4).makeTranslation(0,.5,0));break;case"pyramids":(e=[new THREE.ConeGeometry(1,1,4,1,!0)])[0].applyMatrix((new THREE.Matrix4).makeTranslation(0,.5,0));break;case"cylinders":(e=[new THREE.CylinderGeometry(.5,.5,1,8,1,!0)])[0].applyMatrix((new THREE.Matrix4).makeTranslation(0,.5,0));break;default:if(!(e=this.getAssetGeometry(this.assets[this.data.dressing])))return}for(var i=0,r=88343;i<this.data.dressingAmount;i++,r++){var o,a=e[Math.floor(this.random(33+i)*e.length)],s=this.data.dressingScale,c=new THREE.Vector3(this.data.dressingVariance.x,this.data.dressingVariance.y,this.data.dressingVariance.z);o=this.random(r)<this.data.dressingOnPlayArea?15*this.random(r+1):10+Math.max(c.x,c.z)+10*this.random(r+1)+this.random(r+2)*this.STAGE_SIZE/3;var l=this.random(r+3)*Math.PI*2,u=new THREE.Matrix4,h=this.random(r+4),d=this.data.dressingUniformScale;u.compose(new THREE.Vector3(Math.cos(l)*o,0,Math.sin(l)*o),(new THREE.Quaternion).setFromAxisAngle(new THREE.Vector3(0,1,0),(this.random(r+5)-.5)*c.length()*Math.PI*2),new THREE.Vector3(s+(d?h:this.random(r+6))*c.x,s+(d?h:this.random(r+7))*c.y,s+(d?h:this.random(r+8))*c.z)),n.merge(a,u)}var p=new THREE.BufferGeometry;p.fromGeometry(n);var f=new THREE.MeshLambertMaterial({color:new THREE.Color(this.data.dressingColor),vertexColors:THREE.VertexColors});this.data.flatShading&&p.computeVertexNormals();var m=new THREE.Mesh(p,f);t.add(m),this.dressing.setObject3D("mesh",t)}},createStars:function(){for(var t=new THREE.BufferGeometry,e=new Float32Array(6e3),n=this.STAGE_SIZE-1,i=new THREE.Vector3,r=0;r<e.length;r+=3)i.set(this.random(r+23)-.5,this.random(r+24),this.random(r+25)-.5),i.normalize(),i.multiplyScalar(n),e[r]=i.x,e[r+1]=i.y,e[r+2]=i.z;t.addAttribute("position",new THREE.BufferAttribute(e,3)),t.setDrawRange(0,0);var o=new THREE.PointsMaterial({size:.01,color:13421772,fog:!1});this.stars.setObject3D("mesh",new THREE.Points(t,o))},setStars:function(t){this.stars||(this.stars=document.createElement("a-entity"),this.stars.id="stars",this.createStars(),this.el.appendChild(this.stars)),t=Math.floor(Math.min(2e3,Math.max(0,t))),this.stars.getObject3D("mesh").geometry.setDrawRange(0,t)}}),AFRAME.registerShader("skyshader",{schema:{luminance:{type:"number",default:1,min:0,max:2,is:"uniform"},turbidity:{type:"number",default:2,min:0,max:20,is:"uniform"},reileigh:{type:"number",default:1,min:0,max:4,is:"uniform"},mieCoefficient:{type:"number",default:.005,min:0,max:.1,is:"uniform"},mieDirectionalG:{type:"number",default:.8,min:0,max:1,is:"uniform"},sunPosition:{type:"vec3",default:{x:0,y:0,z:-1},is:"uniform"},color:{type:"color",default:"#fff"}},vertexShader:["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D skySampler;","uniform vec3 sunPosition;","varying vec3 vWorldPosition;","vec3 cameraPos = vec3(0., 0., 0.);","uniform float luminance;","uniform float turbidity;","uniform float reileigh;","uniform float mieCoefficient;","uniform float mieDirectionalG;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float pn = 0.035;","const vec3 lambda = vec3(680E-9, 550E-9, 450E-9);","const vec3 K = vec3(0.686, 0.678, 0.666);","const float v = 4.0;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const vec3 up = vec3(0.0, 1.0, 0.0);","const float EE = 1000.0;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float cutoffAngle = pi/1.95;","const float steepness = 1.5;","vec3 totalRayleigh(vec3 lambda)","{","return (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn));","}","vec3 simplifiedRayleigh()","{","return 0.0005 / vec3(94, 40, 18);","}","float rayleighPhase(float cosTheta)","{   ","return (3.0 / (16.0*pi)) * (1.0 + pow(cosTheta, 2.0));","}","vec3 totalMie(vec3 lambda, vec3 K, float T)","{","float c = (0.2 * T ) * 10E-18;","return 0.434 * c * pi * pow((2.0 * pi) / lambda, vec3(v - 2.0)) * K;","}","float hgPhase(float cosTheta, float g)","{","return (1.0 / (4.0*pi)) * ((1.0 - pow(g, 2.0)) / pow(1.0 - 2.0*g*cosTheta + pow(g, 2.0), 1.5));","}","float sunIntensity(float zenithAngleCos)","{","return EE * max(0.0, 1.0 - exp(-((cutoffAngle - acos(zenithAngleCos))/steepness)));","}","// Filmic ToneMapping http://filmicgames.com/archives/75","float A = 0.15;","float B = 0.50;","float C = 0.10;","float D = 0.20;","float E = 0.02;","float F = 0.30;","float W = 1000.0;","vec3 Uncharted2Tonemap(vec3 x)","{","return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;","}","void main() ","{","float sunfade = 1.0-clamp(1.0-exp((sunPosition.y/450000.0)),0.0,1.0);","float reileighCoefficient = reileigh - (1.0* (1.0-sunfade));","vec3 sunDirection = normalize(sunPosition);","float sunE = sunIntensity(dot(sunDirection, up));","vec3 betaR = simplifiedRayleigh() * reileighCoefficient;","vec3 betaM = totalMie(lambda, K, turbidity) * mieCoefficient;","float zenithAngle = acos(max(0.0, dot(up, normalize(vWorldPosition - cameraPos))));","float sR = rayleighZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));","float sM = mieZenithLength / (cos(zenithAngle) + 0.15 * pow(93.885 - ((zenithAngle * 180.0) / pi), -1.253));","vec3 Fex = exp(-(betaR * sR + betaM * sM));","float cosTheta = dot(normalize(vWorldPosition - cameraPos), sunDirection);","float rPhase = rayleighPhase(cosTheta*0.5+0.5);","vec3 betaRTheta = betaR * rPhase;","float mPhase = hgPhase(cosTheta, mieDirectionalG);","vec3 betaMTheta = betaM * mPhase;","vec3 Lin = pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * (1.0 - Fex),vec3(1.5));","Lin *= mix(vec3(1.0),pow(sunE * ((betaRTheta + betaMTheta) / (betaR + betaM)) * Fex,vec3(1.0/2.0)),clamp(pow(1.0-dot(up, sunDirection),5.0),0.0,1.0));","vec3 direction = normalize(vWorldPosition - cameraPos);","float theta = acos(direction.y); // elevation --\x3e y-axis, [-pi/2, pi/2]","float phi = atan(direction.z, direction.x); // azimuth --\x3e x-axis [-pi/2, pi/2]","vec2 uv = vec2(phi, theta) / vec2(2.0*pi, pi) + vec2(0.5, 0.0);","vec3 L0 = vec3(0.1) * Fex;","float sundisk = smoothstep(sunAngularDiameterCos,sunAngularDiameterCos+0.00002,cosTheta);","L0 += (sunE * 19000.0 * Fex)*sundisk;","vec3 whiteScale = 1.0/Uncharted2Tonemap(vec3(W));","vec3 texColor = (Lin+L0);   ","texColor *= 0.04 ;","texColor += vec3(0.0,0.001,0.0025)*0.3;","float g_fMaxLuminance = 1.0;","float fLumScaled = 0.1 / luminance;     ","float fLumCompressed = (fLumScaled * (1.0 + (fLumScaled / (g_fMaxLuminance * g_fMaxLuminance)))) / (1.0 + fLumScaled); ","float ExposureBias = fLumCompressed;","vec3 curr = Uncharted2Tonemap((log2(2.0/pow(luminance,4.0)))*texColor);","vec3 color = curr*whiteScale;","vec3 retColor = pow(color,vec3(1.0/(1.2+(1.2*sunfade))));","gl_FragColor.rgb = retColor;","gl_FragColor.a = 1.0;","}"].join("\n")}),AFRAME.registerShader("gradientshader",{schema:{topColor:{type:"color",default:"1 0 0",is:"uniform"},bottomColor:{type:"color",default:"0 0 1",is:"uniform"}},vertexShader:["varying vec3 vWorldPosition;","void main() {"," vec4 worldPosition = modelMatrix * vec4( position, 1.0 );"," vWorldPosition = worldPosition.xyz;"," gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 bottomColor;","uniform vec3 topColor;","uniform float offset;","varying vec3 vWorldPosition;","void main() {"," float h = normalize( vWorldPosition ).y;"," gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max(h, 0.0 ), 0.8 ), 0.0 ) ), 1.0 );","}"].join("\n")});var i=function(t){var e;for(void 0===t&&(t=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=[],e=0;e<256;e++)this.p[e]=Math.floor(256*t.random(666));for(this.perm=[],e=0;e<512;e++)this.perm[e]=this.p[255&e]};i.prototype.dot=function(t,e,n,i){return t[0]*e+t[1]*n+t[2]*i},i.prototype.mix=function(t,e,n){return(1-n)*t+n*e},i.prototype.fade=function(t){return t*t*t*(t*(6*t-15)+10)},i.prototype.noise=function(t,e,n){var i=Math.floor(t),r=Math.floor(e),o=Math.floor(n);t-=i,e-=r,n-=o,i&=255,r&=255,o&=255;var a=this.perm[i+this.perm[r+this.perm[o]]]%12,s=this.perm[i+this.perm[r+this.perm[o+1]]]%12,c=this.perm[i+this.perm[r+1+this.perm[o]]]%12,l=this.perm[i+this.perm[r+1+this.perm[o+1]]]%12,u=this.perm[i+1+this.perm[r+this.perm[o]]]%12,h=this.perm[i+1+this.perm[r+this.perm[o+1]]]%12,d=this.perm[i+1+this.perm[r+1+this.perm[o]]]%12,p=this.perm[i+1+this.perm[r+1+this.perm[o+1]]]%12,f=this.dot(this.grad3[a],t,e,n),m=this.dot(this.grad3[u],t-1,e,n),g=this.dot(this.grad3[c],t,e-1,n),v=this.dot(this.grad3[d],t-1,e-1,n),y=this.dot(this.grad3[s],t,e,n-1),A=this.dot(this.grad3[h],t-1,e,n-1),w=this.dot(this.grad3[l],t,e-1,n-1),b=this.dot(this.grad3[p],t-1,e-1,n-1),M=this.fade(t),E=this.fade(e),x=this.fade(n),T=this.mix(f,m,M),C=this.mix(y,A,M),S=this.mix(g,v,M),D=this.mix(w,b,M),_=this.mix(T,S,E),L=this.mix(C,D,E);return this.mix(_,L,x)}},function(t,e,n){"use strict";var i=(0,AFRAME.utils.debug)("aframe-text-component:error"),r=new THREE.FontLoader;AFRAME.registerComponent("text-geometry",{schema:{bevelEnabled:{default:!1},bevelSize:{default:8,min:0},bevelThickness:{default:12,min:0},curveSegments:{default:12,min:0},font:{type:"asset",default:"/assets/fonts/dawningOfANewDayRegular.typeface.json"},height:{default:.05,min:0},size:{default:.5,min:0},style:{default:"normal",oneOf:["normal","italics"]},weight:{default:"normal",oneOf:["normal","bold"]},value:{default:""}},update:function(t){var e=this.data,n=this.el.getOrCreateObject3D("mesh",THREE.Mesh);e.font.constructor===String?r.load(e.font,function(t){var i=AFRAME.utils.clone(e);i.font=t,n.geometry=new THREE.TextGeometry(e.value,i)}):e.font.constructor===Object?n.geometry=new THREE.TextGeometry(e.value,e):i("Must provide `font` (typeface.json) or `fontPath` (string) to text component.")}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),o=l(r),a=l(n(16)),s=l(n(14)),c=l(n(15));function l(t){return t&&t.__esModule?t:{default:t}}n(18),n(31),n(94),n(93),n(17),n(30),n(29),n(28),n(27),n(26),n(25),n(24),n(92);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.onSceneLoad=n.onSceneLoad.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),i(e,[{key:"onSceneLoad",value:function(){document.querySelector(".staticbox").addEventListener("collide",function(t){}),document.querySelector(".target0").addEventListener("collide",function(t){}),document.querySelector(".target1").addEventListener("collide",function(t){document.querySelector(".target1count")}),document.querySelector(".target2").addEventListener("collide",function(t){})}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){document.querySelector("a-scene").addEventListener("loaded",this.onSceneLoad),AFRAME.registerShader("skyGradient",{schema:{colorTop:{type:"color",default:"black",is:"uniform"},colorBottom:{type:"color",default:"red",is:"uniform"}},vertexShader:["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 colorTop;","uniform vec3 colorBottom;","varying vec3 vWorldPosition;","void main()","{","vec3 pointOnSphere = normalize(vWorldPosition.xyz);","float f = 1.0;","if(pointOnSphere.y > - 0.2){","f = sin(pointOnSphere.y * 2.0);","}","gl_FragColor = vec4(mix(colorBottom,colorTop, f ), 1.0);","}"].join("\n")})}},{key:"componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return o.default.createElement(s.default,{stats:!0,roomid:"12213412","networked-scene":!0,inspector:!0,"vr-mode-ui":!0},o.default.createElement("a-assets",null),o.default.createElement(c.default,null),o.default.createElement(a.default,{gun:!0}),o.default.createElement("a-entity",{class:"target0","gltf-model":"/others/target/target.glb","static-body":!0,scale:"10 10 10",position:"0 10 -50",rotation:"0 45 0"}),o.default.createElement("a-entity",{class:"target1","gltf-model":"/others/target/target.glb","static-body":"shape: box",scale:"10 10 10",position:"0  4 -30",rotation:"0 45 0"}),o.default.createElement("a-entity",{class:"target2","gltf-model":"/others/target/target.glb","static-body":!0,scale:"10 10 10",position:"0 15  -80",rotation:"0 45 0"}),o.default.createElement("a-entity",{class:"target0count",rotation:"0 90 0",position:"0 12 -50","text-geometry":"value: 0;  bevelEnabled: true; bevelSize: 0.05; bevelThickness: 0.05; curveSegments: 12; size: 0.5; height: 0;",material:"color:#FFF; metalness:1; roughness: 0.54;"}),o.default.createElement("a-entity",{class:"target1count",rotation:"0 90 0",position:"0 6 -30","text-geometry":"value: 0;  bevelEnabled: true; bevelSize: 0.05; bevelThickness: 0.05; curveSegments: 12; size: 0.5; height: 0;",material:"color:#FFF; metalness:1; roughness: 0.54;"}),o.default.createElement("a-entity",{class:"target2count",rotation:"0 90 0",position:"0 17 -80","text-geometry":"value: 33;bevelEnabled: true; bevelSize: 0.05; bevelThickness: 0.05; curveSegments: 12; size: 0.5; height: 0;",material:"color:#red; metalness:1; roughness: 0.54;"}),o.default.createElement("a-entity",{light:"type: ambient; intensity: 0.5;"}),o.default.createElement("a-entity",{light:"type: directional ; castShadow: false; intensity: 0.4; shadowCameraVisible: false; shadowCameraFar: 120; shadowMapWidth: 1024; shadowMapHeight: 1024;",position:"0 155 -150"}),o.default.createElement("a-entity",{light:" castShadow: true; intensity: 0.2;shadowBias: 0.01; shadowCameraNear: 1; shadowCameraBias: 0.01;type: point; shadowCameraFar: 400;shadowMapWidth: 4024; shadowMapHeight: 4024",position:"0 155 -150"}),o.default.createElement("a-entity",{id:"sky",geometry:"primitive: sphere; radius: 650;",material:"shader: skyGradient; colorTop: skyblue; colorBottom: skywhite; side: back"}),o.default.createElement("a-entity",{shadow:"receive: true",environment:"fog: float; shadow: true; flatShading: true;ground: hills; groundYScale: 25; seed: 17; groundColor:brown; groundColor2:black; horizonColor: #a3dab8; grid: none;groundTexture:walkernoise;;dressing: none; "}),o.default.createElement("a-box",{class:"staticbox",color:"#39BB82",width:"10",height:"4.5",depth:"0.1",position:"8 2.5 -10","static-body":!0}))}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),o=l(r),a=l(n(16)),s=l(n(14)),c=l(n(15));function l(t){return t&&t.__esModule?t:{default:t}}n(18),n(31),n(17),n(30),n(29),n(28),n(27),n(26),n(25),n(24);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.onSceneLoad=n.onSceneLoad.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),i(e,[{key:"onSceneLoad",value:function(){document.querySelector("a-scene").querySelector(".butterfly").setAttribute("material-butterfly",{}),document.querySelector("a-scene").querySelector(".cloud").setAttribute("material-cloud",{})}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){document.querySelector("a-scene").addEventListener("loaded",this.onSceneLoad),AFRAME.registerShader("skyGradient",{schema:{colorTop:{type:"color",default:"black",is:"uniform"},colorBottom:{type:"color",default:"red",is:"uniform"}},vertexShader:["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 colorTop;","uniform vec3 colorBottom;","varying vec3 vWorldPosition;","void main()","{","vec3 pointOnSphere = normalize(vWorldPosition.xyz);","float f = 1.0;","if(pointOnSphere.y > - 0.2){","f = sin(pointOnSphere.y * 2.0);","}","gl_FragColor = vec4(mix(colorBottom,colorTop, f ), 1.0);","}"].join("\n")})}},{key:"componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return o.default.createElement(s.default,{roomid:"1222666666","networked-scene":!0},o.default.createElement("a-assets",null),o.default.createElement("a-entity",{class:"butterfly",position:"0 1 0"}),o.default.createElement("a-entity",{class:"cloud",rotation:"-90 0 0",position:"0 0 0"}),o.default.createElement("a-entity",{"material-par":!0,position:"0 0 -3"}),o.default.createElement(c.default,null),o.default.createElement(a.default,null),o.default.createElement("a-entity",{light:" castShadow: true; color: #e3fbdc; intensity: 0.7;shadowBias: 0.01; shadowCameraNear: 1; shadowCameraBias: 0.01;type: point; shadowMapWidth: 4024; shadowMapHeight: 4024",position:"0 55 5"}),o.default.createElement("a-entity",{light:"color: #ffffff; type: ambient;intensity: 0.3;",position:"0 0.1 0"}),o.default.createElement("a-entity",{id:"sky",geometry:"primitive: sphere; radius: 650;",material:"shader: skyGradient; colorTop: skyblue; colorBottom: skywhite; side: back"}),o.default.createElement("a-entity",{shadow:"receive: true",environment:"shadow: true; flatShading: true;ground: hills; groundYScale: 25; seed: 17; groundColor:brown; groundColor2:black; horizonColor: #a3dab8; grid: none;groundTexture:walkernoise;;dressing: none; "}))}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),o=l(r),a=l(n(16)),s=l(n(14)),c=l(n(15));function l(t){return t&&t.__esModule?t:{default:t}}n(18),n(31),n(17),n(30),n(29),n(28),n(27),n(26),n(25),n(24);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.onSceneLoad=n.onSceneLoad.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),i(e,[{key:"onSceneLoad",value:function(){document.querySelector("a-scene").querySelector(".butterfly").setAttribute("material-butterfly",{}),document.querySelector("a-scene").querySelector(".cloud").setAttribute("material-cloud",{})}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){document.querySelector("a-scene").addEventListener("loaded",this.onSceneLoad),AFRAME.registerShader("skyGradient",{schema:{colorTop:{type:"color",default:"black",is:"uniform"},colorBottom:{type:"color",default:"red",is:"uniform"}},vertexShader:["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 colorTop;","uniform vec3 colorBottom;","varying vec3 vWorldPosition;","void main()","{","vec3 pointOnSphere = normalize(vWorldPosition.xyz);","float f = 1.0;","if(pointOnSphere.y > - 0.2){","f = sin(pointOnSphere.y * 2.0);","}","gl_FragColor = vec4(mix(colorBottom,colorTop, f ), 1.0);","}"].join("\n")})}},{key:"componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return o.default.createElement(s.default,{roomid:"1222222434","networked-scene":!0,"networked-audio":!0},o.default.createElement("a-assets",null),o.default.createElement("a-entity",{class:"butterfly",position:"0 1 0"}),o.default.createElement("a-entity",{class:"cloud",rotation:"-90 0 0",position:"0 0 0"}),o.default.createElement("a-entity",{"material-par":!0,position:"0 0 -3"}),o.default.createElement(c.default,null),o.default.createElement(a.default,null),o.default.createElement("a-entity",{light:" castShadow: true; color: #e3fbdc; intensity: 0.7;shadowBias: 0.01; shadowCameraNear: 1; shadowCameraBias: 0.01;type: point; shadowMapWidth: 4024; shadowMapHeight: 4024",position:"0 55 5"}),o.default.createElement("a-entity",{light:"color: #ffffff; type: ambient;intensity: 0.3;",position:"0 0.1 0"}),o.default.createElement("a-entity",{id:"sky",geometry:"primitive: sphere; radius: 650;",material:"shader: skyGradient; colorTop: skyblue; colorBottom: skywhite; side: back"}),o.default.createElement("a-entity",{shadow:"receive: true",environment:"shadow: true; flatShading: true;ground: hills; groundYScale: 25; seed: 17; groundColor:brown; groundColor2:black; horizonColor: #a3dab8; grid: none;groundTexture:walkernoise;;dressing: none; "}))}}]),e}();e.default=u},function(t,e,n){"use strict";AFRAME.registerComponent("wobble-normal",{schema:{},tick:function(t){this.el.components.material.material.normalMap&&(this.el.components.material.material.normalMap.offset.x+=1e-4*Math.sin(t/1e4),this.el.components.material.material.normalMap.offset.y+=1e-4*Math.cos(t/8e3),this.el.components.material.material.normalScale.x=.5+.5*Math.cos(t/1e3),this.el.components.material.material.normalScale.x=.5+.5*Math.sin(t/1200))}}),AFRAME.registerPrimitive("a-ocean-plane",{defaultComponents:{geometry:{primitive:"plane",height:1e4,width:1e4},rotation:"-90 0 0",material:{shader:"standard",color:"#8ab39f",metalness:1,roughness:.2,normalMap:"url(https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/waternormals.jpg)",normalTextureRepeat:"50 50",normalTextureOffset:"0 0",normalScale:"0.5 0.5",opacity:.8},"wobble-normal":{}}})},function(t,e,n){"use strict";var i=n(58);AFRAME.registerComponent("ambisonic",{schema:{src:{type:"string"},volume:{type:"number",default:1}},multiple:!0,init:function(){this.sceneEl=document.querySelector("a-scene"),this.camera=document.getElementById("camera");var t=new AudioContext;this.resonanceAudioScene=new i.ResonanceAudio(t),this.resonanceAudioScene.output.connect(t.destination),this.resonanceAudioScene.setRoomProperties({width:39.1,height:54.8,depth:39.1},{left:"marble",right:"marble",front:"marble",back:"marble",down:"wood-panel",up:"marble"});var e=document.createElement("audio");e.volume=this.data.volume,e.src=this.data.src,e.loop=!0;var n=t.createMediaElementSource(e);this.source=this.resonanceAudioScene.createSource(),n.connect(this.source.input);var r=this.el.getAttribute("position");this.source.setPosition(r.x,r.y,r.z),e.play()},update:function(){},play:function(){},tick:function(){}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),o=l(r),a=l(n(16)),s=l(n(14)),c=l(n(15));function l(t){return t&&t.__esModule?t:{default:t}}n(99),n(98);var u=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),i(e,[{key:"onConnect",value:function(){}},{key:"onconnect",value:function(){}},{key:"playerloaded",value:function(){}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return o.default.createElement(s.default,{roomid:"1111","networked-scene":!0,"networked-audio":!0},o.default.createElement("a-entity",{light:"type: directional; color: #BE792D; intensity: 2;",position:"2 20 0"}),o.default.createElement("a-entity",{light:"type: ambient; color: #BE792D"}),o.default.createElement("a-entity",{light:"type: point; color: #BE792D",position:"-16.732069 -0.004731 -0.01061"}),o.default.createElement("a-entity",{light:"type: point; color: #BE792D",position:"0.144815 -0.004731 -16.732069"}),o.default.createElement("a-entity",{light:"type: point; color: #BE792D",position:"16.732069 -0.004731 -0.010608"}),o.default.createElement("a-assets",null,o.default.createElement("img",{id:"sky_sphere-texture",src:"/rooms/wallace/textures/sky_sphere.jpg"}),o.default.createElement("a-asset-item",{id:"office",src:"/rooms/wallace/models/office.glb"}),o.default.createElement("a-asset-item",{id:"water",src:"/rooms/wallace/models/water.glb"}),o.default.createElement("a-asset-item",{id:"steps",src:"/rooms/wallace/models/steps.glb"}),o.default.createElement("a-asset-item",{id:"deck",src:"/rooms/wallace/models/deck.glb"}),o.default.createElement("a-asset-item",{id:"table",src:"/rooms/wallace/models/table.glb"}),o.default.createElement("img",{id:"water-normal",src:"/rooms/wallace/models/water_normal.jpg"})),o.default.createElement(c.default,null),o.default.createElement(a.default,null),o.default.createElement("a-sky",{color:"#EEEEFF",material:"src: #sky_sphere-texture"}),o.default.createElement("a-gltf-model",{"static-body":!0,src:"#steps"}),o.default.createElement("a-gltf-model",{"static-body":!0,src:"#deck"}),o.default.createElement("a-gltf-model",{"static-body":!0,src:"#table"}),o.default.createElement("a-ocean-plane",{material:"normalMap: #water-normal; sphericalEnvMap: #cgsky;",position:"0 -1 0"}),o.default.createElement("a-gltf-model",{src:"#office"}),o.default.createElement("a-entity",{ambisonic:"src:/rooms/wallace/audio/ambience_1.ogg; volume:0.2",position:"0 2 0"}))}}]),e}();e.default=u},function(t,e,n){(t.exports=n(36)(!1)).push([t.i,".Dance{text-align:center}",""])},function(t,e,n){var i=n(101);"string"==typeof i&&(i=[[t.i,i,""]]);n(35)(i,{hmr:!0,transform:void 0,insertInto:void 0}),i.locals&&(t.exports=i.locals)},function(t,e){t.exports="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"},function(t,e){t.exports="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform vec3 color;\nuniform float time;\n\nvoid main() {\n  // Use sin(time), which curves between 0 and 1 over time,\n  // to determine the mix of two colors:\n  //    (a) Dynamic color where 'R' and 'B' channels come\n  //        from a modulus of the UV coordinates.\n  //    (b) Base color.\n  // \n  // The color itself is a vec4 containing RGBA values 0-1.\n  gl_FragColor = mix(\n    vec4(mod(vUv , 0.05) * 20.0, 1.0, 1.0),\n    vec4(color, 1.0),\n    sin(time)\n  );\n}\n"},function(t,e,n){"use strict";var i=o(n(104)),r=o(n(103));function o(t){return t&&t.__esModule?t:{default:t}}AFRAME.registerComponent("material-displacement",{schema:{color:{type:"color"}},init:function(){var t=this,e=this.data;this.material=new THREE.ShaderMaterial({uniforms:{time:{value:0},color:{value:new THREE.Color(e.color)}},vertexShader:r.default,fragmentShader:i.default}),this.applyToMesh(),this.el.addEventListener("model-loaded",function(){return t.applyToMesh()})},update:function(){this.material.uniforms.color.value.set(this.data.color)},applyToMesh:function(){var t=this.el.getObject3D("mesh");t&&(t.material=this.material)},tick:function(t){this.material.uniforms.time.value=t/1e3}})},function(t,e,n){"use strict";AFRAME.registerComponent("audioanalyser-volume-bind",{schema:{analyserEl:{type:"selector"},component:{type:"string"},property:{type:"string"},max:{type:"number"},multiplier:{type:"number"}},tick:function(){var t,e,n=this.data,i=this.el;(t=n.analyserEl.components["resonance-room"]).analyser&&(e=Math.min(n.max,t.volume*n.multiplier),i.setAttribute(n.component,n.property,e))}})},function(t,e,n){"use strict";AFRAME.registerComponent("scale-y-color",{schema:{from:{type:"vec3",default:{x:0,y:0,z:0}},to:{type:"vec3",default:{x:255,y:255,z:255}},maxScale:{default:20}},tick:function(t){var e=this.data,n=this.el;if(!(t-this.time<50)){this.time=t;var i,r=n.getAttribute("scale").y/e.maxScale;n.setAttribute("material","color","#"+(i=((e.to.x-e.from.x)*r<<16|(e.to.y-e.from.y)*r<<8|(e.to.z-e.from.z)*r).toString(16).toUpperCase(),new Array(7-i.length).join("0")+i))}}})},function(t,e,n){"use strict";AFRAME.registerComponent("ring-on-beat",{schema:{analyserEl:{type:"selector"}},init:function(){var t=this.data.analyserEl||this.el,e=this.el,n=this.rings=[];t.addEventListener("audioanalyser-beat",function(){var t=document.createElement("a-ring");t.setAttribute("material","opacity","0.6"),t.setAttribute("position","0 0.1 0"),t.setAttribute("rotation","-90 0 0"),e.appendChild(t),t.addEventListener("loaded",function(){n.push(t),setTimeout(function(){e.removeChild(t),n.splice(n.indexOf(t),1)},2e3)})})},tick:function(){this.rings.forEach(function(t){var e=t.getAttribute("scale");t.setAttribute("scale",{x:1.06*e.x+.05,y:1.06*e.y+.05,z:e.z})})}})},function(t,e,n){"use strict";var i=new function(){for(var t=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],e=0;e<256;e++)t[256+e]=t[e];function n(t){return t*t*t*(t*(6*t-15)+10)}function i(t,e,n){return e+t*(n-e)}function r(t,e,n,i){var r=15&t,o=r<8?e:n,a=r<4?n:12==r||14==r?e:i;return(0==(1&r)?o:-o)+(0==(2&r)?a:-a)}return{noise:function(e,o,a){var s=~~e,c=~~o,l=~~a,u=255&s,h=255&c,d=255&l,p=(e-=s)-1,f=(o-=c)-1,m=(a-=l)-1,g=n(e),v=n(o),y=n(a),A=t[u]+h,w=t[A]+d,b=t[A+1]+d,M=t[u+1]+h,E=t[M]+d,x=t[M+1]+d;return i(y,i(v,i(g,r(t[w],e,o,a),r(t[E],p,o,a)),i(g,r(t[b],e,f,a),r(t[x],p,f,a))),i(v,i(g,r(t[w+1],e,o,m),r(t[E+1],p,o,a-1)),i(g,r(t[b+1],e,f,m),r(t[x+1],p,f,m))))}}};AFRAME.registerComponent("audioanalyser-waveform",{dependencies:["audioanalyser"],schema:{maxHeight:{default:.2},multiplier:{default:.01},radius:{default:1}},init:function(){this.colors=[],this.geometry,this.levels=[],this.noisePos=0,this.rings=[]},update:function(){var t,e,n,i,r,o=this.data,a=this.el;for((n=new THREE.Shape).absarc(0,0,o.radius,0,2*Math.PI,!1),this.geometry=n.createPointsGeometry(256),this.geometry.dynamic=!0,a.setObject3D("waveformContainer",new THREE.Object3D),r=1,t=0;t<160;t++)i=new THREE.LineBasicMaterial({color:16777215,linewidth:1,opacity:.7,blending:THREE.AdditiveBlending,depthTest:!0,transparent:!0}),r*=1.05,(e=new THREE.Line(this.geometry,i)).scale.x=r,e.scale.y=r,a.getObject3D("waveformContainer").add(e),this.rings.push(e),this.levels.push(0),this.colors.push(0)},tick:function(){var t,e=this.colors,n=this.data,r=this.el,o=this.levels,a=this.rings;(t=r.components.audioanalyser).analyser&&(o.push(t.volume/256*2),o.shift(1),this.noisePos+=.005,e.push(Math.abs(i.noise(this.noisePos,0,0))),e.shift(1),this.geometry.vertices.forEach(function(e,i){e.z=Math.min(t.waveform[i]*n.multiplier,n.maxHeight)}),this.geometry.vertices[this.geometry.vertices.length-1].z=this.geometry.vertices[0].z,this.geometry.verticesNeedUpdate=!0,a.forEach(function(t,n){var i;i=o[160-n-1]+.01,t.material.color.setHSL(e[n],1,i),t.material.linewidth=3*i,t.material.opacity=i,t.scale.z=i}))},remove:function(){this.el.removeObject3D("waveformContainer")}})},function(t,e,n){"use strict";AFRAME.registerComponent("audioanalyser-volume-scale",{schema:{analyserEl:{type:"selector"},multiplier:{type:"number",default:1}},tick:function(){var t,e=this.data.analyserEl,n=this.el;t=e.components["resonance-room"].volume*this.data.multiplier,t=Math.max(t,1),t=Math.min(t,1.2),n.setAttribute("scale",{x:t,y:t,z:t})}})},function(t,e,n){"use strict";AFRAME.registerComponent("audioanalyser-levels-scale",{schema:{analyserEl:{type:"selector"},max:{default:20},multiplier:{default:100}},tick:function(t){var e,n,i=this.data;if(this.el,i.analyserEl,n=i.analyserEl.levels){e=this.el.children;for(var r=0;r<e.length;r++)e[r].setAttribute("scale",{x:1,y:Math.min(i.max,Math.max(n[r]*i.multiplier,.05)),z:1})}}})},function(t,e,n){"use strict";var i=n(58);if(!i.ResonanceAudio)throw"ResonanceAudio has not been loaded!";if(!AFRAME)throw"AFRAME has not been loaded!";var r,o=Object.keys(i.ResonanceAudio.Utils.ROOM_MATERIAL_COEFFICIENTS);if(AFRAME.registerComponent("resonance-room",{schema:{enabled:{default:!0},camera:{type:"selector",default:"[camera]"},src:{type:"asset"},"src-position":{type:"vec3",default:"0 0 0"},width:{type:"number",default:2},height:{type:"number",default:2},depth:{type:"number",default:2},helper:{type:"boolean",default:!1},"left-wall":{default:"brick-bare",oneOf:o},"right-wall":{default:"brick-bare",oneOf:o},"front-wall":{default:"brick-bare",oneOf:o},"back-wall":{default:"brick-bare",oneOf:o},"down-wall":{default:"brick-bare",oneOf:o},"up-wall":{default:"brick-bare",oneOf:o}},init:function(){var t=this;this.el.sceneEl.addEventListener("loaded",function(){t._camera=t.el.sceneEl.querySelector("#player")}),this.initResonanceScene(),this.updateProps()},update:function(){this._camera=this.el.sceneEl.querySelector("#player")},tick:function(){var t=this._camera.getAttribute("position");this.el.resonanceAudioScene.setListenerPosition(t.x,t.y,t.z),this.el.an.getByteFrequencyData(this.el.levels),this.el.an.getByteTimeDomainData(this.el.dataArray);for(var e=0,n=0;n<this.el.levels.length;n++)e+=this.el.levels[n];this.volume=e/this.el.levels.length},remove:function(){this.el.audioEl.pause(),this.el.audioEl=null},pause:function(){this.el.audioEl&&this.el.audioEl.pause()},play:function(){this.el.audioEl&&this.el.audioEl.paused&&this.el.audioEl.play()},initResonanceScene:function(){if(!this.el.audioContext){this.el.audioContext=new AudioContext,this.el.audioContextAn=new AudioContext,this.el.an=this.el.audioContext.createAnalyser(),this.el.an.connect(this.el.audioContext.destination),this.el.levels=new Uint8Array(1024),this.el.waveform=new Uint8Array(2048),this.el.an.fftSize=2048;var t=this.el.an.fftSize;this.el.dataArray=new Uint8Array(t),this.el.an.getByteTimeDomainData(this.el.dataArray),this.el.an.getByteFrequencyData(this.el.levels),this.el.emit("audioanalyser-ready",{analyser:this.el.an}),this.el.resonanceAudioScene=new i.ResonanceAudio(this.el.audioContext),this.el.resonanceAudioScene.output.connect(this.el.audioContext.destination)}},updateProps:function(){this.setUpRoom(),this.setUpAudio(),this.updateRoomHelper(),this.updateSourceHelper()},setUpRoom:function(){var t={width:this.data.width,height:this.data.height,depth:this.data.depth},e={left:this.data["left-wall"],right:this.data["right-wall"],front:this.data["front-wall"],back:this.data["back-wall"],down:this.data["down-wall"],up:this.data["up-wall"]};this.el.resonanceAudioScene.setRoomProperties(t,e)},setUpAudio:function(){if(this.data.src){var t=document.createElement("audio");t.crossOrigin="anonymous",t.src=this.data.src;var e=this.el.audioContext.createMediaElementSource(t),n=this.el.resonanceAudioScene.createSource();e.connect(n.input),this.el.resonanceAudioScene.output.connect(this.el.an);var i=this.data["src-position"];n.setPosition(i.x,i.y,i.z),this.data.autoplay,t.loop=this.data.loop,this.el.audioEl=t}},updateRoomHelper:function(){var t=this.el.querySelector(".resonance-room-helper");if(this.data.helper&&!t){var e=document.createElement("a-box");e.classList.add("resonance-room-helper"),e.setAttribute("position",{x:0,y:this.data.height/2,z:0}),e.setAttribute("width",this.data.width),e.setAttribute("height",this.data.height),e.setAttribute("depth",this.data.depth),e.setAttribute("wireframe",!0),e.setAttribute("color","black"),this.el.appendChild(e)}else!this.data.helper&&t&&(t.parendNode.removeChild(t),t=null)},updateSourceHelper:function(){var t=this.el.querySelector(".resonance-source-helper");if(this.data.helper&&!t){var e=document.createElement("a-sphere");e.classList.add("resonance-source-helper"),e.setAttribute("radius",.2),e.setAttribute("segments-width",14),e.setAttribute("segments-height",6),e.setAttribute("wireframe",!0),e.setAttribute("color","blue"),e.setAttribute("position",this.data["src-position"]),this.el.appendChild(e)}else!this.data.helper&&t&&(t.parendNode.removeChild(t),t=null)}}),AFRAME.registerPrimitive("a-resonance-room",{defaultComponents:{},mappings:{enabled:"resonance-room.enabled",src:"resonance-room.src","src-position":"resonance-room.src-position",width:"resonance-room.width",height:"resonance-room.height",depth:"resonance-room.depth",helper:"resonance-room.helper","left-wall":"resonance-room.left-wall","right-wall":"resonance-room.right-wall","front-wall":"resonance-room.front-wall","back-wall":"resonance-room.back-wall","down-wall":"resonance-room.down-wall","up-wall":"resonance-room.up-wall",loop:"resonance-room.loop",autoplay:"resonance-room.autoplay"}}),"undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerSystem("audioanalyser",{init:function(){this.analysers={}},getOrCreateAnalyser:function(t){r||(r=new AudioContext);var e=this.analysers,n=r.createAnalyser(),i=t.src,o=i.getAttribute("src");return e[o]?e[o]:(r.createMediaElementSource(i).connect(n),n.connect(r.destination),n.smoothingTimeConstant=t.smoothingTimeConstant,n.fftSize=t.fftSize,e[o]=n,e[o])}}),AFRAME.registerComponent("audioanalyser",{schema:{enableBeatDetection:{default:!0},enableLevels:{default:!0},enableWaveform:{default:!0},enableVolume:{default:!0},fftSize:{default:2048},smoothingTimeConstant:{default:.8},src:{type:"selector"},unique:{default:!1}},init:function(){this.analyser=null,this.levels=null,this.waveform=null,this.volume=0},update:function(){var t=this.data,e=this,n=this.system;function i(t){e.analyser=t,e.levels=new Uint8Array(e.analyser.frequencyBinCount),e.waveform=new Uint8Array(e.analyser.fftSize),e.el.emit("audioanalyser-ready",{analyser:t})}t.src&&(t.unique?i(n.createAnalyser(t)):i(n.getOrCreateAnalyser(t)))},tick:function(){var t=this.data;if(this.analyser){if((t.enableLevels||t.enableVolume)&&this.analyser.getByteFrequencyData(this.levels),t.enableWaveform&&this.analyser.getByteTimeDomainData(this.waveform),t.enableVolume||t.enableBeatDetection){for(var e=0,n=0;n<this.levels.length;n++)e+=this.levels[n];this.volume=e/this.levels.length}if(t.enableBeatDetection){var i=this.volume;this.beatCutOff||(this.beatCutOff=i),i>this.beatCutOff&&i>.15?(this.el.emit("audioanalyser-beat"),this.beatCutOff=1.5*i,this.beatTime=0):this.beatTime<=60?this.beatTime++:(this.beatCutOff*=.99,this.beatCutOff=Math.max(this.beatCutOff,.15))}}}})},function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("entity-generator",{schema:{mixin:{default:""},num:{default:10}},init:function(){for(var t=this.data,e=0;e<t.num;e++){var n=document.createElement("a-entity");n.setAttribute("mixin",t.mixin),this.el.appendChild(n)}}})},function(t,e){function n(t,e,n){var i,r,o,a=[],s=Math.ceil(e/t.columns);i=t.marginColumn,r=t.marginRow,n&&(i=t.margin,r=t.margin);for(var c=0;c<s;c++)for(var l=0;l<t.columns;l++)o=[0,0,0],0===t.plane.indexOf("x")&&(o[0]=l*i),0===t.plane.indexOf("y")&&(o[1]=l*i),1===t.plane.indexOf("y")&&(o[1]=c*r),1===t.plane.indexOf("z")&&(o[2]=c*r),a.push(o);return a}function i(t,e){for(var n=[],i=0;i<e;i++){var r;r=isNaN(t.angle)?i*(2*Math.PI)/e:i*t.angle*.01745329252;var o=[];0===t.plane.indexOf("x")&&(o[0]=t.radius*Math.cos(r)),0===t.plane.indexOf("y")&&(o[1]=t.radius*Math.cos(r)),1===t.plane.indexOf("y")&&(o[1]=t.radius*Math.sin(r)),1===t.plane.indexOf("z")&&(o[2]=t.radius*Math.sin(r)),n.push(o)}return n}function r(t,e){return t.columns=e,n(t,e,!0)}function o(t,e){return c([[1,0,0],[0,1,0],[0,0,1],[-1,0,0],[0,-1,0],[0,0,-1]],t.radius/2)}function a(t,e){var n=(1+Math.sqrt(5))/2,i=1/n,r=2-n,o=-1*i,a=-1*r;return c([[-1,r,0],[-1,a,0],[0,-1,r],[0,-1,a],[0,1,r],[0,1,a],[1,r,0],[1,a,0],[i,i,i],[i,i,o],[i,o,i],[i,o,o],[r,0,1],[r,0,-1],[o,i,i],[o,i,o],[o,o,i],[o,o,o],[a,0,1],[a,0,-1]],t.radius/2)}function s(t,e){var n=Math.sqrt(3),i=-1/Math.sqrt(3);return c([[0,0,n+i],[-1,0,i],[1,0,i],[0,2*Math.sqrt(2/3),0]],t.radius/2)}function c(t,e){return t.map(function(t){return t.map(function(t,n){return t*e})})}function l(t,e){t.forEach(function(t,n){var i=e[n];t.setAttribute("position",{x:i[0],y:i[1],z:i[2]})})}AFRAME.registerComponent("layout",{schema:{angle:{type:"number",default:!1,min:0,max:360,if:{type:["circle"]}},columns:{default:1,min:0,if:{type:["box"]}},margin:{default:1,min:0,if:{type:["box","line"]}},marginColumn:{default:1,min:0,if:{type:["box"]}},marginRow:{default:1,min:0,if:{type:["box"]}},plane:{default:"xy"},radius:{default:1,min:0,if:{type:["circle","cube","dodecahedron","pyramid"]}},reverse:{default:!1},type:{default:"line",oneOf:["box","circle","cube","dodecahedron","line","pyramid"]},fill:{default:!0,if:{type:["circle"]}}},init:function(){var t=this,e=this.el;this.children=e.getChildEntities(),this.initialPositions=[],this.children.forEach(function(e){if(e.hasLoaded)return n();function n(){var n=e.getAttribute("position");t.initialPositions.push([n.x,n.y,n.z])}e.addEventListener("loaded",n)}),e.addEventListener("child-attached",function(n){n.detail.el.parentNode===e&&(t.children.push(n.detail.el),t.update())}),e.addEventListener("child-detached",function(e){-1!==t.children.indexOf(e.detail.el)&&(t.children.splice(t.children.indexOf(e.detail.el),1),t.initialPositions.splice(t.children.indexOf(e.detail.el),1),t.update())})},update:function(t){var e,c,u,h=this.children,d=this.data,p=this.el,f=h.length;switch(d.type){case"box":c=n;break;case"circle":c=i;break;case"cube":c=o;break;case"dodecahedron":c=a;break;case"pyramid":c=s;break;default:c=r}u=c(d,f,"string"==typeof(e=p.getDOMAttribute("layout"))?-1!==e.indexOf("margin"):"margin"in e),d.reverse&&u.reverse(),l(h,u)},remove:function(){this.el.removeEventListener("child-attached",this.childAttachedCallback),l(this.children,this.initialPositions)}}),t.exports.getBoxPositions=n,t.exports.getCirclePositions=i,t.exports.getLinePositions=r,t.exports.getCubePositions=o,t.exports.getDodecahedronPositions=a,t.exports.getPyramidPositions=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),o=l(r),a=(n(75),l(n(16))),s=l(n(14)),c=l(n(15));function l(t){return t&&t.__esModule?t:{default:t}}n(18),n(114),n(113),n(112),n(17),n(111),n(110),n(109),n(108),n(107),n(106),n(105),n(59),n(102);var u=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),i(e,[{key:"playerloaded",value:function(){}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){AFRAME.registerShader("skyGradient",{schema:{colorTop:{type:"color",default:"black",is:"uniform"},colorBottom:{type:"color",default:"red",is:"uniform"}},vertexShader:["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 colorTop;","uniform vec3 colorBottom;","varying vec3 vWorldPosition;","void main()","{","vec3 pointOnSphere = normalize(vWorldPosition.xyz);","float f = 1.0;","if(pointOnSphere.y > - 0.2){","f = sin(pointOnSphere.y * 2.0);","}","gl_FragColor = vec4(mix(colorBottom,colorTop, f ), 1.0);","}"].join("\n")})}},{key:"componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return o.default.createElement(s.default,{roomid:"99","networked-scene":!0,"networked-audio":!0},o.default.createElement("a-assets",null,o.default.createElement("a-mixin",{id:"bar",geometry:"primitive: box",material:"color: rgb(10, 20, 50); shader: flat","scale-y-color":"from: 10 20 50; to: 210, 220, 250; maxScale: 150",rotation:"90 180 0"}),o.default.createElement("a-mixin",{id:"bar1","static-body":!0,geometry:"primitive: box",material:"color: rgb(10, 20, 50); shader: flat",scale:"0 10 0",rotation:"90 180 0"})),o.default.createElement(c.default,null),o.default.createElement("a-entity",{scale:"2 2 2",geometry:"primitive:torusKnot",position:"7 9 -10",material:"color:magenta;metalness:1;roughness:0.1;sphericalEnvMap:https://img.gs/bbdkhfbzkk/2048x2048,stretch/http://i.imgur.com/WqlqEkq.jpg",rotation:""},o.default.createElement("a-animation",{easing:"linear",attribute:"rotation",dur:"10000",to:"0 0 360",repeat:"indefinite"})),o.default.createElement("a-entity",{id:"speaker",geometry:"primitive: box; depth: 2.5; height: 15; width: 3.5",material:"color: #10193F",position:"-1 0 -10","static-body":"sphereRadius:0.1"}),o.default.createElement("a-entity",{id:"speaker1",geometry:"primitive: box; depth: 2.5; height: 15; width: 3.5",material:"color: #10193F",position:"16 0 -10","static-body":"sphereRadius:0.1"}),o.default.createElement("a-sphere",{id:"mouth",color:"#000","audioanalyser-volume-scale":"analyserEl: #resonance-room; multiplier: 0.04",position:"-0.95 2 -9.5",side:"double",shader:"flat"}),o.default.createElement("a-sphere",{id:"mouth",color:"#000","audioanalyser-volume-scale":"analyserEl: #resonance-room; multiplier: .03",position:"-0.95 4 -9.5",side:"double",shader:"flat"}),o.default.createElement("a-sphere",{id:"mouth",color:"#000","audioanalyser-volume-scale":"analyserEl: #resonance-room; multiplier: .03",position:"-0.95 6 -9.5",side:"double",shader:"flat"}),o.default.createElement("a-sphere",{id:"mouth",color:"#000","audioanalyser-volume-scale":"analyserEl: #resonance-room; multiplier: .04",position:"16 2 -9.5",shader:"flat"}),o.default.createElement("a-sphere",{id:"mouth",color:"#000","audioanalyser-volume-scale":"analyserEl: #resonance-room; multiplier: .03",position:"16 4 -9.5",shader:"flat"}),o.default.createElement("a-sphere",{id:"mouth",color:"#000","audioanalyser-volume-scale":"analyserEl: #resonance-room; multiplier: .03",position:"16 6 -9.5",shader:"flat"}),o.default.createElement(a.default,null),o.default.createElement("a-box",{"material-displacement":!0,color:"#39BB82",width:"15",height:"5",depth:"1",position:"8 2.5 -10.5","static-body":"sphereRadius:0.1"}),o.default.createElement("a-resonance-room",{id:"resonance-room","src-position":"8 1 -2",src:"https://icecast.vreen.live:8443/am.ogg",loop:"true",autoplay:"true",width:"75",height:"15",depth:"75",helper:"false","left-wall":"outdoors","right-wall":"outdoors","front-wall":"outdoors","back-wall":"outdoors","down-wall":"outdoors","up-wall":"outdoors"}),o.default.createElement("a-entity",{"audioanalyser-levels-scale":"analyserEl: #resonance-room; max: 50; multiplier: 0.4","entity-generator":"mixin: bar; num: 128",layout:"type: circle; radius: 35",rotation:"90 180 0"}),o.default.createElement("a-entity",{"entity-generator":"mixin: bar1; num: 128",layout:"type: circle; radius: 35",rotation:"90 180 0"}),o.default.createElement("a-light",{position:"1 -5 1",type:"point"}),o.default.createElement("a-entity",{light:" castShadow: true; color: #e3fbdc; intensity: 0.7;shadowBias: 0.01; shadowCameraNear: 1; shadowCameraBias: 0.01;type: point; shadowMapWidth: 4024; shadowMapHeight: 4024",position:"0 55 5"}),o.default.createElement("a-entity",{light:"color: #ffffff; type: ambient;intensity: 0.3;",position:"0 0.1 0"}),o.default.createElement("a-entity",{id:"sky",geometry:"primitive: sphere; radius: 650;",material:"shader: skyGradient; colorTop: #353449; colorBottom: #BC483E; side: back"}),o.default.createElement("a-entity",{"static-body":!0,rotation:"-90 0 0",geometry:"primitive: plane; height: 200; width: 200",material:"src:#ground; side: double",shadow:"receive:true"}))}}]),e}();e.default=u},function(t,e){t.exports="#define GLSLIFY 1\nvarying vec2 vUv;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvUv = uv;\n\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t}\n"},function(t,e){t.exports="#define GLSLIFY 1\nuniform sampler2D map;\n\n\t\t\tuniform vec3 fogColor;\n\t\t\tuniform float fogNear;\n\t\t\tuniform float fogFar;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main() {\n\n\t\t\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t\t\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t\t\t\tgl_FragColor = texture2D( map, vUv );\n\t\t\t\tgl_FragColor.w *= pow( gl_FragCoord.z, 20.0 );\n\t\t\t\tgl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n\t\t\t}"},function(t,e){t.exports="#define GLSLIFY 1\n\tattribute float time;\n\t\t\tattribute vec2 uvScale;\n\t\t\tattribute vec3 customColor;\n\t\t\t\n\t\t\tuniform float globalTime;\n\t\t\tuniform vec2 size;\n\t\t\tvarying vec2 vUv;\n\t\t\tvarying vec2 shadowUv;\n\n\t\t\tvarying vec3 vColor;\n\t\t\tvarying float vDarken;\n\t\t\tvarying float vAlpha;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvColor = customColor;\n\n\t\t\t\tvec3 pos = position; \n\n\t\t\t\t// time\n\t\t\t\tfloat localTime = time + globalTime*0.01;\n\t\t\t\tfloat modTime = mod( localTime, 1.0 );\n\t\t\t\tfloat accTime = modTime * modTime;\n\n\t\t\t\tpos.x += (cos(globalTime+pos.x*0.001)*pos.y*0.1) - pow(pos.y*0.1, 1.5); \n\t\t\t\tpos.z += (accTime)*1500.0;\n\t\t\t\tpos.z += sin(globalTime+pos.x*0.01)*(pos.y*0.2); \n\n\t\t\t\tvAlpha = min( 1.0, accTime*10.0 );\n\t\t\t\tvDarken = 1.0;\n\n\t\t\t\tif (pos.y <= 5.0) {\n\t\t\t\t\tvDarken = 0.25 + pos.y/20.0;\n\t\t\t\t}\n\n                vUv = uvScale * uv;\n                shadowUv = vec2(position.x/size.x, position.z/size.y)*0.75;\n\n\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );\n\n\t\t\t\tmvPosition.z -= (pos.y*0.2)*2.0; \n\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t}"},function(t,e){t.exports="#define GLSLIFY 1\n\t        uniform vec3 color;\n\t\t\tuniform vec3 sunColor;\n\t\t\tuniform sampler2D texture;\n\t\t\tuniform sampler2D shadow;\n\t\t\tuniform float globalTime;\n\t\t\t\n\t\t\tvarying vec3 vColor;\n\t\t\tvarying vec2 vUv;\n\t\t\tvarying vec2 shadowUv;\n\t\t\tvarying float vAlpha;\n\n\t\t\tuniform vec3 fogColor;\n\t\t\tuniform float fogNear;\n\t\t\tuniform float fogFar;\n\n\t\t\tconst float threshold = 0.1;\n\n\t\t\tvarying float vDarken;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec4 textureColor = texture2D(texture, vUv);\n\n\t\t\t\tif (textureColor.w < threshold) {\n\t\t\t\t\tdiscard;\n\n\t\t\t\t} else {\n\n\t\t\t\tvec4 shadowColor1 = texture2D(shadow, vec2(shadowUv.x+sin(globalTime*0.2)*0.025, shadowUv.y+cos(globalTime*0.1)*0.025));\n\t\t\t\tvec4 shadowColor2 = texture2D(shadow, vec2(shadowUv.x+0.25+cos(globalTime*0.2)*0.025, shadowUv.y+0.25+sin(globalTime*0.05)*0.025));\n\n\t\t\t\tvec4 shadowColor = mix(shadowColor1, shadowColor2, 0.5)*1.5;\n\n\t\t\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t\t\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t\t\t\tgl_FragColor = mix(textureColor * vec4(color.xyz*vColor, 1.0), vec4(sunColor.xyz,1.0), pow(shadowColor.x,1.5));\n\n\t\t\t\tvec4 color = mix( gl_FragColor, vec4( fogColor, 1.0 ), fogFactor );\n\t\t\t\tgl_FragColor = vec4( color.xyz*vDarken , (textureColor.w*3.0)*vAlpha );\n\n\t\t\t\t}\n\n\n\t\t\t}"},function(t,e){t.exports="#define GLSLIFY 1\n            attribute float time;\n\n\t\t\tuniform float globalTime;\n\t\t\tuniform float darken;\n\t\t\tvarying vec2 vUv;\n\t\t\tvarying float vDarken;\n\t\t\tvarying float vAlpha;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 pos = position; \n\n\t\t\t\t// time\n\t\t\t\tfloat localTime = time + globalTime*0.01;\n\t\t\t\tfloat modTime = mod( localTime, 1.0 );\n\t\t\t\tfloat accTime = modTime * modTime;\n\n\t\t\t\tpos.x += cos(globalTime+pos.x*0.01)*pos.y*0.05; \n\n\t\t\t\tpos.z += (accTime)*1500.0;\n\t\t\t\tpos.z += sin(globalTime+pos.x*0.01)*pos.y*0.05; \n\n\t\t\t\tvAlpha = min( 1.0, accTime*10.0 );\n\t\t\t\tvDarken = 1.0;\n\n\t\t\t\tif (pos.y <= 5.0) {\n\t\t\t\t\tvDarken = darken;\n\t\t\t\t}\n\n                vUv = uv;\n\n\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );\n\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n            }"},function(t,e){t.exports="#define GLSLIFY 1\n\t\t\tuniform vec3 color;\n\t\t\tuniform sampler2D texture;\n\t\t\tuniform float globalTime;\n\t\t\t\n\t\t\tvarying vec2 vUv;\n\n\t\t\tuniform vec3 fogColor;\n\t\t\tuniform float fogNear;\n\t\t\tuniform float fogFar;\n\n\t\t\tconst float threshold = 0.5;\n\n\t\t\tvarying float vDarken;\n\t\t\tvarying float vAlpha;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec4 textureColor = texture2D(texture, vUv);\n\n\t\t\t\tif (textureColor.w < threshold) {\n\t\t\t\t\tdiscard;\n\n\t\t\t\t} else {\n\n\t\t\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t\t\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t\t\t\tgl_FragColor = textureColor * vec4(color.xyz, 1.0);\n\n\t\t\t\tvec4 color = mix( gl_FragColor, vec4( fogColor, 1.0 ), fogFactor );\n\t\t\t\tgl_FragColor = vec4( color.xyz*vDarken , textureColor.w*vAlpha );\n\n\t\t\t\t}\n\n\n\n\n\t\t\t}"},function(t,e){t.exports="#define GLSLIFY 1\n            attribute float size;\n\t\t\tattribute float time;\n\t\t\tuniform float globalTime;\n\t\t\tuniform float scale;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 pos = position; \n\n\t\t\t\t// time\n\t\t\t\tfloat localTime = time + globalTime*0.005;\n\t\t\t\tfloat modTime = mod( localTime, 1.0 );\n\t\t\t\tfloat accTime = modTime * modTime;\n\n\t\t\t\tpos.x += cos(accTime*2.0 + (position.z))*50.0; \n\t\t\t\tpos.y += sin(accTime*4.0 + (position.x))*20.0; \n\t\t\t\tpos.z += (accTime)*1500.0;\n\n\t\t\t\tpos.z += sin(accTime*4.0 + (position.y))*1.0; \n\n\n\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );\n\n\t\t\t\tfloat sizem = sin(modTime*10.0 + (pos.z*0.1))+0.5;\n\n\t\t\t\tgl_PointSize = max(0.5, (size*sizem)) * ( scale / length( mvPosition.xyz ) );\n\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t}"},function(t,e){t.exports="#define GLSLIFY 1\n\n\t\t\tuniform vec3 color;\n\t\t\tuniform sampler2D texture;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec4 outColor = texture2D( texture, gl_PointCoord );\n\n\t\t\t\tgl_FragColor = vec4(outColor.xyz*color, outColor.x*0.5);\n\t\t\t\tgl_FragColor.w *= pow( gl_FragCoord.z, 50.0 );\n\n\t\t\t}"},function(t,e,n){"use strict";AFRAME.registerComponent("networked-audio-analyser",{schema:{},init:function(){var t,e=(t=function*(){var t=this;this.connected=!1,this.el.addEventListener("sound-source-set",function(e){var n=THREE.AudioContext.getContext();t.analyser=n.createAnalyser(),t.analyser.fftSize=32,t.levels=new Uint8Array(t.analyser.frequencyBinCount),e.detail.soundSource.connect(t.analyser)})},function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function i(r,o){try{var a=e[r](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){i("next",t)},function(t){i("throw",t)});t(s)}("next")})});return function(){return e.apply(this,arguments)}}(),tick:function(){if(this.analyser){this.analyser.getByteFrequencyData(this.levels);for(var t=0,e=0;e<this.levels.length;e++)t+=this.levels[e];this.volume=t/this.levels.length,this.el.emit("audioFrequencyChange",{volume:this.volume,levels:this.levels})}}}),AFRAME.registerComponent("matcolor-audio-feedback",{schema:{analyserSrc:{type:"selector"}},init:function(){this.onAudioFrequencyChange=this.onAudioFrequencyChange.bind(this)},play:function(){(this.data.analyserSrc||this.el).addEventListener("audioFrequencyChange",this.onAudioFrequencyChange)},pause:function(){(this.data.analyserSrc||this.el).removeEventListener("audioFrequencyChange",this.onAudioFrequencyChange)},onAudioFrequencyChange:function(t){this.mat&&this.object3D.mesh.color.setScalar(1+t.detail.volume/255*2)}}),AFRAME.registerComponent("scale-audio-feedback",{schema:{analyserSrc:{type:"selector"},minScale:{default:1},maxScale:{default:2}},init:function(){this.onAudioFrequencyChange=this.onAudioFrequencyChange.bind(this)},play:function(){(this.data.analyserSrc||this.el).addEventListener("audioFrequencyChange",this.onAudioFrequencyChange)},pause:function(){(this.data.analyserSrc||this.el).removeEventListener("audioFrequencyChange",this.onAudioFrequencyChange)},onAudioFrequencyChange:function(t){if(this.el.object3D.visible){var e=this.data,n=e.minScale,i=e.maxScale;this.el.object3D.scale.setScalar(n+(i-n)*t.detail.volume/255)}}})},function(t,e,n){"use strict";AFRAME.registerComponent("body-controller-remote",{schema:{camera:{type:"selector",default:"#player"},rotationSpeed:{default:.07},eyeNeckOffset:{type:"vec3"},neckHeight:{type:"number",default:1},headrot:{type:"selector",default:".headrot"},value:{type:"string"}},init:function(){this.targetAngleEuler=new THREE.Euler,this.targetAngle=new THREE.Quaternion,this.cameraPositionMatrix=new THREE.Matrix4;var t=this.data.eyeNeckOffset;this.eyeNeckTransformMatrix=(new THREE.Matrix4).makeTranslation(t.x,t.y,t.z),this.neckTransformMatrix=(new THREE.Matrix4).makeTranslation(0,this.data.neckHeight,0),this.bodyPositionMatrix=new THREE.Matrix4,this.bodyPositionVector=new THREE.Vector3,this.setAccelerationInput=this.setAccelerationInput.bind(this),this.setAccelerationInputStop=this.setAccelerationInputStop.bind(this),this.snapRotateLeft=this.snapRotateLeft.bind(this),this.snapRotateRight=this.snapRotateRight.bind(this),this.setAngularVelocity=this.setAngularVelocity.bind(this)},update:function(){},play:function(){},pause:function(){this.el.sceneEl},setAccelerationInputStop:function(t){},setAccelerationInput:function(t){this.el.querySelector(".man")},setAngularVelocity:function(t){},snapRotateLeft:function(t){},snapRotateRight:function(t){},tick:function(t,e){if(e){var n=this.el.object3D,i=(this.data.camera.object3D,n.el.getAttribute("text","value"));"01_walking"===i.value?this.el.parentNode.querySelector(".man").setAttribute("animation-mixer","clip: 01_walking"):"03_dancing"===i.value?this.el.parentNode.querySelector(".man").setAttribute("animation-mixer","clip: 03_dancing"):"05_waving"===i.value?this.el.parentNode.querySelector(".man").setAttribute("animation-mixer","clip: 05_waving"):"04_sitting"===i.value?this.el.parentNode.querySelector(".man").setAttribute("animation-mixer","clip: 04_sitting"):this.el.parentNode.querySelector(".man").setAttribute("animation-mixer","clip: 00_idle"),this.targetAngleEuler.set(0,n.parent.el.querySelector("#player").object3D.rotation.y,0),this.targetAngle.setFromEuler(this.targetAngleEuler),this.el.parentNode.querySelector(".man").object3D.quaternion.slerp(this.targetAngle,this.data.rotationSpeed),this.bodyPositionMatrix.copy(n.parent.el.querySelector("#player").object3D.matrix),this.bodyPositionMatrix.multiply(this.eyeNeckTransformMatrix),this.bodyPositionVector.setFromMatrixPosition(this.bodyPositionMatrix),this.bodyPositionVector.y=this.bodyPositionVector.y-1.6,this.el.parentNode.querySelector(".man").object3D.position.set(this.bodyPositionVector.x,this.bodyPositionVector.y,this.bodyPositionVector.z),this.el.parentNode.querySelector(".man").querySelector(".Armature_mixamorigNeck").object3D.rotation.x=-n.parent.el.querySelector("#player").object3D.rotation.x}}})},function(t,e,n){"use strict";AFRAME.registerComponent("body-controller-player",{schema:{camera:{type:"selector",default:"#player"},rotationSpeed:{default:.07},eyeNeckOffset:{type:"vec3"},neckHeight:{type:"number",default:1}},init:function(){this.velocity=new THREE.Vector3(0,0,0),this.accelerationInput=new THREE.Vector3(0,0,0),this.targetAngleEuler=new THREE.Euler,this.targetAngle=new THREE.Quaternion,this.cameraPositionMatrix=new THREE.Matrix4;var t=this.data.eyeNeckOffset;this.eyeNeckTransformMatrix=(new THREE.Matrix4).makeTranslation(t.x,t.y,t.z),this.neckTransformMatrix=(new THREE.Matrix4).makeTranslation(0,this.data.neckHeight,0),this.bodyPositionMatrix=new THREE.Matrix4,this.bodyPositionVector=new THREE.Vector3,this.setAccelerationInput=this.setAccelerationInput.bind(this),this.setAccelerationInputStop=this.setAccelerationInputStop.bind(this)},play:function(){var t=this.el.sceneEl;t.addEventListener("move",this.setAccelerationInput),t.addEventListener("idle",this.setAccelerationInputStop),t.addEventListener("w_up",this.setAccelerationInputStop),t.addEventListener("s_up",this.setAccelerationInputStop),t.addEventListener("rotateY",this.setAngularVelocity),t.addEventListener("snap_rotate_left",this.snapRotateLeft),t.addEventListener("snap_rotate_right",this.snapRotateRight)},pause:function(){var t=this.el.sceneEl;t.removeEventListener("move",this.setAccelerationInput),t.removeEventListener("idle",this.setAccelerationInputStop),t.removeEventListener("w_up",this.setAccelerationInputStop),t.removeEventListener("s_up",this.setAccelerationInputStop),t.removeEventListener("rotateY",this.setAngularVelocity),t.removeEventListener("snap_rotate_left",this.snapRotateLeft),t.removeEventListener("snap_rotate_right",this.snapRotateRight)},setAccelerationInputStop:function(t){this.el.querySelector(".man").setAttribute("animation-mixer","clip: 00_idle"),this.el.parentNode.querySelector(".actiontag").setAttribute("text","value","00_idle")},setAccelerationInput:function(t){this.el.querySelector(".man")&&(this.el.querySelector(".man").setAttribute("animation-mixer","clip: 01_walking"),this.el.parentNode.querySelector(".actiontag").setAttribute("text","value","01_walking"))},tick:function(t,e){if(e){var n=this.el.object3D,i=(this.el.object3D,this.data.camera.object3D),r=e/1e3;this.updateVelocity(r),this.targetAngleEuler.set(0,i.rotation.y,0),this.targetAngle.setFromEuler(this.targetAngleEuler),n.quaternion.slerp(this.targetAngle,this.data.rotationSpeed),this.bodyPositionMatrix.copy(i.matrix),this.bodyPositionMatrix.multiply(this.eyeNeckTransformMatrix),this.bodyPositionVector.setFromMatrixPosition(this.bodyPositionMatrix),this.bodyPositionVector.y=this.bodyPositionVector.y-1.6,n.position.set(this.bodyPositionVector.x,this.bodyPositionVector.y,this.bodyPositionVector.z),this.el.querySelector(".Armature_mixamorigNeck").object3D.rotation.x=-i.rotation.x}},updateVelocity:function(t){var e=this.data,n=this.velocity;if(t>.2)return n.x=0,void(n.z=0);0!==n.x&&(n.x-=n.x*e.easing*t),0!==n.z&&(n.z-=n.z*e.easing*t),0!==n.y&&(n.y-=n.y*e.easing*t),Math.abs(n.x)<.01&&(n.x=0),Math.abs(n.y)<.01&&(n.y=0),Math.abs(n.z)<.01&&(n.z=0);var i=e.groundAcc*t*this.accelerationInput.x,r=e.groundAcc*t*-this.accelerationInput.z;n.x+=i,n.z+=r,this.accelerationInput.x=.7*this.accelerationInput.x,this.accelerationInput.z=.7*this.accelerationInput.z}})},function(t,e,n){"use strict";AFRAME.registerComponent("gun",{schema:{bulletTemplate:{default:"#bullet-template"},triggerKeyCode:{default:32}},init:function(){var t=this;document.body.onkeyup=function(e){e.keyCode===t.data.triggerKeyCode&&t.shoot()}},shoot:function(){this.createBullet()},createBullet:function(){var t=document.createElement("a-entity");t.setAttribute("networked","template:"+this.data.bulletTemplate+";attachLocalTemplate: false;"),t.setAttribute("remove-in-seconds",15),t.setAttribute("gltf-model","/others/heart/heart_big.glb"),t.setAttribute("dynamic-body","shape: box; mass: 1");var e=document.querySelector("#head");t.setAttribute("position",this.getInitialBulletPosition(e)),t.setAttribute("rotation",this.getInitialBulletRotation(e)),t.setAttribute("scale","1 1 1"),document.querySelector("a-scene").appendChild(t)},getInitialBulletPosition:function(t){t.getAttribute("position");var e=new THREE.Vector3;return e.setFromMatrixPosition(t.object3D.matrixWorld),e},getInitialBulletRotation:function(t){var e=new THREE.Vector3;return t.object3D.getWorldDirection(e),e.multiplyScalar(-1),this.vec3RadToDeg(e),e},vec3RadToDeg:function(t){t.set(90*t.y,-90-THREE.Math.radToDeg(Math.atan2(t.z,t.x)),0)}}),AFRAME.registerComponent("remove-in-seconds",{schema:{default:1},init:function(){setTimeout(this.destroy.bind(this),1e3*this.data)},destroy:function(){var t=this.el;t.parentNode.removeChild(t)}})},function(t,e,n){(e=t.exports=n(36)(!1)).push([t.i,"._2Zljj4z-PgqX6GYmEaBwTS{position:absolute;top:0;bottom:0}._2Zljj4z-PgqX6GYmEaBwTS._1u069kqXgWyGkGbyrTAbWr{left:50%;right:0}._2Zljj4z-PgqX6GYmEaBwTS.JfLX-a7E8qgusDqpH8Cr-{left:0;right:50%}._2Zljj4z-PgqX6GYmEaBwTS .nipple{margin:5vh 5vw}",""]),e.locals={touchZone:"_2Zljj4z-PgqX6GYmEaBwTS",left:"_1u069kqXgWyGkGbyrTAbWr",right:"JfLX-a7E8qgusDqpH8Cr-"}},function(t,e,n){var i=n(128);"string"==typeof i&&(i=[[t.i,i,""]]);n(35)(i,{hmr:!0,transform:void 0,insertInto:void 0}),i.locals&&(t.exports=i.locals)},function(t,e,n){t.exports=function(){var t,e=!!("ontouchstart"in window),n=!!window.PointerEvent,i=!!window.MSPointerEvent,r={start:"mousedown",move:"mousemove",end:"mouseup"},o={};n?t={start:"pointerdown",move:"pointermove",end:"pointerup"}:i?t={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:e?(t={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},o=r):t=r;var a={};function s(){}function c(t,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body},this.config(e),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=c.id,c.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}function l(t,e){return this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=t,this.id=l.id,l.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5},this.config(e),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}function u(t){var e,n=this;return n.ids={},n.index=0,n.collections=[],n.config(t),n.prepareCollections(),a.bindEvt(window,"resize",function(t){clearTimeout(e),e=setTimeout(function(){var t,e=a.getScroll();n.collections.forEach(function(n){n.forEach(function(n){t=n.el.getBoundingClientRect(),n.position={x:e.x+t.left,y:e.y+t.top}})})},100)}),n.collections}a.distance=function(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},a.angle=function(t,e){var n=e.x-t.x,i=e.y-t.y;return a.degrees(Math.atan2(i,n))},a.findCoord=function(t,e,n){var i={x:0,y:0};return n=a.radians(n),i.x=t.x-e*Math.cos(n),i.y=t.y-e*Math.sin(n),i},a.radians=function(t){return t*(Math.PI/180)},a.degrees=function(t){return t*(180/Math.PI)},a.bindEvt=function(t,e,n){for(var i,r=e.split(/[ ,]+/g),o=0;o<r.length;o+=1)i=r[o],t.addEventListener?t.addEventListener(i,n,!1):t.attachEvent&&t.attachEvent(i,n)},a.unbindEvt=function(t,e,n){for(var i,r=e.split(/[ ,]+/g),o=0;o<r.length;o+=1)i=r[o],t.removeEventListener?t.removeEventListener(i,n):t.detachEvent&&t.detachEvent(i,n)},a.trigger=function(t,e,n){var i=new CustomEvent(e,n);t.dispatchEvent(i)},a.prepareEvent=function(t){return t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t},a.getScroll=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},a.applyPosition=function(t,e){e.x&&e.y?(t.style.left=e.x+"px",t.style.top=e.y+"px"):(e.top||e.right||e.bottom||e.left)&&(t.style.top=e.top,t.style.right=e.right,t.style.bottom=e.bottom,t.style.left=e.left)},a.getTransitionStyle=function(t,e,n){var i=a.configStylePropertyObject(t);for(var r in i)if(i.hasOwnProperty(r))if("string"==typeof e)i[r]=e+" "+n;else{for(var o="",s=0,c=e.length;s<c;s+=1)o+=e[s]+" "+n+", ";i[r]=o.slice(0,-2)}return i},a.getVendorStyle=function(t,e){var n=a.configStylePropertyObject(t);for(var i in n)n.hasOwnProperty(i)&&(n[i]=e);return n},a.configStylePropertyObject=function(t){var e={};return e[t]="",["webkit","Moz","o"].forEach(function(n){e[n+t.charAt(0).toUpperCase()+t.slice(1)]=""}),e},a.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},a.safeExtend=function(t,e){var n={};for(var i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)?n[i]=e[i]:t.hasOwnProperty(i)&&(n[i]=t[i]);return n},a.map=function(t,e){if(t.length)for(var n=0,i=t.length;n<i;n+=1)e(t[n]);else e(t)},s.prototype.on=function(t,e){var n,i=t.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var r=0;r<i.length;r+=1)n=i[r],this._handlers_[n]=this._handlers_[n]||[],this._handlers_[n].push(e);return this},s.prototype.off=function(t,e){return this._handlers_=this._handlers_||{},void 0===t?this._handlers_={}:void 0===e?this._handlers_[t]=null:this._handlers_[t]&&this._handlers_[t].indexOf(e)>=0&&this._handlers_[t].splice(this._handlers_[t].indexOf(e),1),this},s.prototype.trigger=function(t,e){var n,i=this,r=t.split(/[ ,]+/g);i._handlers_=i._handlers_||{};for(var o=0;o<r.length;o+=1)n=r[o],i._handlers_[n]&&i._handlers_[n].length&&i._handlers_[n].forEach(function(t){t.call(i,{type:n,target:i},e)})},s.prototype.config=function(t){this.options=this.defaults||{},t&&(this.options=a.safeExtend(this.options,t))},s.prototype.bindEvt=function(e,n){var i=this;return i._domHandlers_=i._domHandlers_||{},i._domHandlers_[n]=function(){"function"==typeof i["on"+n]&&i["on"+n].apply(i,arguments)},a.bindEvt(e,t[n],i._domHandlers_[n]),o[n]&&a.bindEvt(e,o[n],i._domHandlers_[n]),i},s.prototype.unbindEvt=function(e,n){return this._domHandlers_=this._domHandlers_||{},a.unbindEvt(e,t[n],this._domHandlers_[n]),o[n]&&a.unbindEvt(e,o[n],this._domHandlers_[n]),delete this._domHandlers_[n],this},c.prototype=new s,c.constructor=c,c.id=0,c.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},c.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",e=a.getVendorStyle("borderRadius","50%"),n=a.getTransitionStyle("transition","opacity",t),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},a.extend(i.el,n),a.extend(i.back,e),a.extend(i.front,e),this.applyStyles(i),this},c.prototype.applyStyles=function(t){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var n in t[e])this.ui[e].style[n]=t[e][n];return this},c.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},c.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},c.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},c.prototype.show=function(t){var e=this;return e.options.dataOnly?e:(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout(function(){e.ui.el.style.opacity=1},0),e.showTimeout=setTimeout(function(){e.trigger("shown",e.instance),"function"==typeof t&&t.call(this)},e.options.fadeTime),e)},c.prototype.hide=function(t){var e=this;return e.options.dataOnly?e:(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout(function(){var n="dynamic"===e.options.mode?"none":"block";e.ui.el.style.display=n,"function"==typeof t&&t.call(e),e.trigger("hidden",e.instance)},e.options.fadeTime),e.options.restJoystick&&e.restPosition(),e)},c.prototype.restPosition=function(t){var e=this;e.frontPosition={x:0,y:0};var n=e.options.fadeTime+"ms",i={};i.front=a.getTransitionStyle("transition",["top","left"],n);var r={front:{}};r.front={left:e.frontPosition.x+"px",top:e.frontPosition.y+"px"},e.applyStyles(i),e.applyStyles(r),e.restTimeout=setTimeout(function(){"function"==typeof t&&t.call(e),e.restCallback()},e.options.fadeTime)},c.prototype.restCallback=function(){var t={};t.front=a.getTransitionStyle("transition","none",""),this.applyStyles(t),this.trigger("rested",this.instance)},c.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},c.prototype.computeDirection=function(t){var e,n,i,r=t.angle.radian,o=Math.PI/4,a=Math.PI/2;if(e=r>o&&r<3*o?"up":r>-o&&r<=o?"left":r>3*-o&&r<=-o?"down":"right",n=r>-a&&r<a?"left":"right",i=r>0?"up":"down",t.force>this.options.threshold){var s={};for(var c in this.direction)this.direction.hasOwnProperty(c)&&(s[c]=this.direction[c]);var l={};for(var c in this.direction={x:n,y:i,angle:e},t.direction=this.direction,s)s[c]===this.direction[c]&&(l[c]=!0);if(l.x&&l.y&&l.angle)return t;l.x&&l.y||this.trigger("plain",t),l.x||this.trigger("plain:"+n,t),l.y||this.trigger("plain:"+i,t),l.angle||this.trigger("dir dir:"+e,t)}return t},l.prototype=new s,l.constructor=l,l.id=0,l.prototype.prepareNipples=function(){var t=this.nipples;t.on=this.on.bind(this),t.off=this.off.bind(this),t.options=this.options,t.destroy=this.destroy.bind(this),t.ids=this.ids,t.id=this.id,t.processOnMove=this.processOnMove.bind(this),t.processOnEnd=this.processOnEnd.bind(this),t.get=function(e){if(void 0===e)return t[0];for(var n=0,i=t.length;n<i;n+=1)if(t[n].identifier===e)return t[n];return!1}},l.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},l.prototype.begin=function(){var t=this.options;if("static"===t.mode){var e=this.createNipple(t.position,this.manager.getIdentifier());e.add(),this.idles.push(e)}},l.prototype.createNipple=function(t,e){var n=a.getScroll(),i={},r=this.options;if(t.x&&t.y)i={x:t.x-(n.x+this.box.left),y:t.y-(n.y+this.box.top)};else if(t.top||t.right||t.bottom||t.left){var o=document.createElement("DIV");o.style.display="hidden",o.style.top=t.top,o.style.right=t.right,o.style.bottom=t.bottom,o.style.left=t.left,o.style.position="absolute",r.zone.appendChild(o);var s=o.getBoundingClientRect();r.zone.removeChild(o),i=t,t={x:s.left+n.x,y:s.top+n.y}}var l=new c(this,{color:r.color,size:r.size,threshold:r.threshold,fadeTime:r.fadeTime,dataOnly:r.dataOnly,restJoystick:r.restJoystick,restOpacity:r.restOpacity,mode:r.mode,identifier:e,position:t,zone:r.zone,frontPosition:{x:0,y:0}});return r.dataOnly||(a.applyPosition(l.ui.el,i),a.applyPosition(l.ui.front,l.frontPosition)),this.nipples.push(l),this.trigger("added "+l.identifier+":added",l),this.manager.trigger("added "+l.identifier+":added",l),this.bindNipple(l),l},l.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},l.prototype.bindNipple=function(t){var e,n=this,i=function(t,i){e=t.type+" "+i.id+":"+t.type,n.trigger(e,i)};t.on("destroyed",n.onDestroyed.bind(n)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)},l.prototype.pressureFn=function(t,e,n){var i=this,r=0;clearInterval(i.pressureIntervals[n]),i.pressureIntervals[n]=setInterval(function(){var n=t.force||t.pressure||t.webkitForce||0;n!==r&&(e.trigger("pressure",n),i.trigger("pressure "+e.identifier+":pressure",n),r=n)}.bind(i),100)},l.prototype.onstart=function(t){var e=this,n=e.options;return t=a.prepareEvent(t),e.updateBox(),a.map(t,function(t){e.actives.length<n.maxNumberOfNipples&&e.processOnStart(t)}),e.manager.bindDocument(),!1},l.prototype.processOnStart=function(t){var e,n=this,i=n.options,r=n.manager.getIdentifier(t),o=t.force||t.pressure||t.webkitForce||0,s={x:t.pageX,y:t.pageY},c=n.getOrCreate(r,s);c.identifier!==r&&n.manager.removeIdentifier(c.identifier),c.identifier=r;var l=function(e){e.trigger("start",e),n.trigger("start "+e.id+":start",e),e.show(),o>0&&n.pressureFn(t,e,e.identifier),n.processOnMove(t)};if((e=n.idles.indexOf(c))>=0&&n.idles.splice(e,1),n.actives.push(c),n.ids.push(c.identifier),"semi"!==i.mode)l(c);else{if(!(a.distance(s,c.position)<=i.catchDistance))return c.destroy(),void n.processOnStart(t);l(c)}return c},l.prototype.getOrCreate=function(t,e){var n,i=this.options;return/(semi|static)/.test(i.mode)?(n=this.idles[0])?(this.idles.splice(0,1),n):"semi"===i.mode&&this.createNipple(e,t):n=this.createNipple(e,t)},l.prototype.processOnMove=function(t){var e=this.options,n=this.manager.getIdentifier(t),i=this.nipples.get(n);if(i){i.identifier=n;var r=i.options.size/2,o={x:t.pageX,y:t.pageY},s=a.distance(o,i.position),c=a.angle(o,i.position),l=a.radians(c),u=s/r;s>r&&(s=r,o=a.findCoord(i.position,s,c)),i.frontPosition={x:o.x-i.position.x,y:o.y-i.position.y},e.dataOnly||a.applyPosition(i.ui.front,i.frontPosition);var h={identifier:i.identifier,position:o,force:u,pressure:t.force||t.pressure||t.webkitForce||0,distance:s,angle:{radian:l,degree:c},instance:i};(h=i.computeDirection(h)).angle={radian:a.radians(180-c),degree:180-c},i.trigger("move",h),this.trigger("move "+i.id+":move",h)}else this.manager.removeIdentifier(n)},l.prototype.processOnEnd=function(t){var e=this,n=e.options,i=e.manager.getIdentifier(t),r=e.nipples.get(i),o=e.manager.removeIdentifier(r.identifier);r&&(n.dataOnly||r.hide(function(){"dynamic"===n.mode&&(r.trigger("removed",r),e.trigger("removed "+r.id+":removed",r),e.manager.trigger("removed "+r.id+":removed",r),r.destroy())}),clearInterval(e.pressureIntervals[r.identifier]),r.resetDirection(),r.trigger("end",r),e.trigger("end "+r.id+":end",r),e.ids.indexOf(r.identifier)>=0&&e.ids.splice(e.ids.indexOf(r.identifier),1),e.actives.indexOf(r)>=0&&e.actives.splice(e.actives.indexOf(r),1),/(semi|static)/.test(n.mode)?e.idles.push(r):e.nipples.indexOf(r)>=0&&e.nipples.splice(e.nipples.indexOf(r),1),e.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(e.manager.ids[o.id]=o.identifier))},l.prototype.onDestroyed=function(t,e){this.nipples.indexOf(e)>=0&&this.nipples.splice(this.nipples.indexOf(e),1),this.actives.indexOf(e)>=0&&this.actives.splice(this.actives.indexOf(e),1),this.idles.indexOf(e)>=0&&this.idles.splice(this.idles.indexOf(e),1),this.ids.indexOf(e.identifier)>=0&&this.ids.splice(this.ids.indexOf(e.identifier),1),this.manager.removeIdentifier(e.identifier),this.manager.unbindDocument()},l.prototype.destroy=function(){for(var t in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(t){t.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(t)&&clearInterval(this.pressureIntervals[t]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()},u.prototype=new s,u.constructor=u,u.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(e){var n;return t.collections.every(function(t){return!(n=t.get(e))}),n}},u.prototype.create=function(t){return this.createCollection(t)},u.prototype.createCollection=function(t){var e=new l(this,t);return this.bindCollection(e),this.collections.push(e),e},u.prototype.bindCollection=function(t){var e,n=this,i=function(t,i){e=t.type+" "+i.id+":"+t.type,n.trigger(e,i)};t.on("destroyed",n.onDestroyed.bind(n)),t.on("shown hidden rested dir plain",i),t.on("dir:up dir:right dir:down dir:left",i),t.on("plain:up plain:right plain:down plain:left",i)},u.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},u.prototype.unbindDocument=function(t){Object.keys(this.ids).length&&!0!==t||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},u.prototype.getIdentifier=function(t){var e;return t?void 0===(e=void 0===t.identifier?t.pointerId:t.identifier)&&(e=this.latest||0):e=this.index,void 0===this.ids[e]&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]},u.prototype.removeIdentifier=function(t){var e={};for(var n in this.ids)if(this.ids[n]===t){e.id=n,e.identifier=this.ids[n],delete this.ids[n];break}return e},u.prototype.onmove=function(t){return this.onAny("move",t),!1},u.prototype.onend=function(t){return this.onAny("end",t),!1},u.prototype.onAny=function(t,e){var n,i=this,r="processOn"+t.charAt(0).toUpperCase()+t.slice(1);return e=a.prepareEvent(e),a.map(e,function(t){n=i.getIdentifier(t),a.map(i.collections,function(t,e,n){n.ids.indexOf(e)>=0&&(n[r](t),t._found_=!0)}.bind(null,t,n)),t._found_||i.removeIdentifier(n)}),!1},u.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(t){t.destroy()}),this.off()},u.prototype.onDestroyed=function(t,e){if(this.collections.indexOf(e)<0)return!1;this.collections.splice(this.collections.indexOf(e),1)};var h=new u;return{create:function(t){return h.create(t)},factory:h}}()},function(t,e,n){"use strict";AFRAME.registerComponent("ik-body-playground",{schema:{camera:{type:"selector",default:"#player"},rotationSpeed:{default:.07},eyeNeckOffset:{type:"vec3"},neckHeight:{type:"number",default:1}},init:function(){},play:function(){this.el.sceneEl},pause:function(){},setAccelerationInputStop:function(t){},setAccelerationInput:function(t){},tick:function(t,e){this.el.object3D,this.data.camera.object3D}})},function(t,e,n){"use strict";var i,r,o;AFRAME.registerComponent("kinematic-body",{dependencies:["velocity"],schema:{camera:{type:"selector",default:"[camera]"},mass:{default:5},radius:{default:1.3},height:{default:1.6},linearDamping:{default:.5},enableSlopes:{default:!0}},init:function(){this.system=this.el.sceneEl.systems.physics,this.system.addComponent(this);var t=this.el,e=this.data,n=(new CANNON.Vec3).copy(t.getAttribute("position"));this.body=new CANNON.Body({material:this.system.material,position:n,mass:e.mass,linearDamping:e.linearDamping,fixedRotation:!0}),this.body.addShape(new CANNON.Sphere(e.radius),new CANNON.Vec3(0,e.radius-e.height,0)),this.body.el=this.el,this.el.body=this.body,this.system.addBody(this.body)},remove:function(){this.system.removeBody(this.body),this.system.removeComponent(this),delete this.el.body},beforeStep:function(t,e){e&&(this.body.velocity.copy(this.el.getAttribute("velocity")),this.body.position.copy(this.el.getAttribute("position")))},step:(i=new THREE.Vector3,r=new THREE.Vector3,new THREE.Vector3,o=new THREE.Vector3,function(t,e){if(e){this.el.object3D,this.data.camera.object3D;var n=this.body;this.data,this.system.getContacts(),e=Math.min(e,1e3*this.system.data.maxInterval),o.set(0,0,0),i.copy(this.el.getAttribute("velocity")),n.velocity.copy(i),r.copy(i).normalize(),this.system.driver.world&&i.add(this.system.driver.world.gravity.scale(4*e/1e3)),this.el.setAttribute("velocity",n.velocity),this.el.setAttribute("position",n.position)}}),raycastToGround:function(t,e){var n,i=void 0,r=this.body.position,o=this.body.position.clone();return o.y-=this.data.height,(i=new CANNON.Ray(r,o))._updateDirection(),i.intersectBody(t),i.hasHit?(n=i.result.hitNormalWorld,Math.abs(n.y)>Math.abs(e.y)?n:e):e}})},function(t,e,n){"use strict";AFRAME.registerComponent("spawn-in-circle",{schema:{radius:{type:"number",default:1}},init:function(){var t=this.el,e=t.getAttribute("position"),n=this.getRandomAngleInRadians(),i=this.randomPointOnCircle(this.data.radius,n),r={x:i.x+e.x,y:e.y,z:i.y+e.z};t.setAttribute("position",r);var o="0 "+(180*n/Math.PI*-1+90)+" 0";t.setAttribute("rotation",o)},getRandomAngleInRadians:function(){return Math.random()*Math.PI*2},randomPointOnCircle:function(t,e){return{x:Math.cos(e)*t,y:Math.sin(e)*t}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),o=l(r),a=l(n(16)),s=l(n(14)),c=l(n(15));function l(t){return t&&t.__esModule?t:{default:t}}n(18),n(31),n(17),n(30),n(29),n(28),n(27),n(26),n(25),n(24);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.onSceneLoad=n.onSceneLoad.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),i(e,[{key:"onSceneLoad",value:function(){}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){document.querySelector("a-scene").addEventListener("loaded",this.onSceneLoad),AFRAME.registerShader("skyGradient",{schema:{colorTop:{type:"color",default:"black",is:"uniform"},colorBottom:{type:"color",default:"red",is:"uniform"}},vertexShader:["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 colorTop;","uniform vec3 colorBottom;","varying vec3 vWorldPosition;","void main()","{","vec3 pointOnSphere = normalize(vWorldPosition.xyz);","float f = 1.0;","if(pointOnSphere.y > - 0.2){","f = sin(pointOnSphere.y * 2.0);","}","gl_FragColor = vec4(mix(colorBottom,colorTop, f ), 1.0);","}"].join("\n")})}},{key:"componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return o.default.createElement(s.default,{roomid:"121212121212121212","networked-scene":!0,inspector:!0},o.default.createElement("a-assets",null,o.default.createElement("a-asset-item",{id:"tree",src:"/rooms/home/models/home.glb"}),o.default.createElement("a-asset-item",{id:"bird-obj",src:"/CactusWren/CactusWren.glb"})),o.default.createElement(c.default,null),o.default.createElement(a.default,null),o.default.createElement("a-entity",{"gltf-model":"url(/rooms/home/models/home.glb)",scale:"0.025 0.025 0.025",shadow:"receive:true; cast: false;"}),o.default.createElement("a-entity",{light:" castShadow: true; color: #e3fbdc; intensity: 0.7;shadowBias: 0.01; shadowCameraNear: 1; shadowCameraBias: 0.01;type: point; shadowMapWidth: 4024; shadowMapHeight: 4024",position:"0 55 5"}),o.default.createElement("a-entity",{light:"color: #ffffff; type: ambient;intensity: 0.3;",position:"0 0.1 0"}),o.default.createElement("a-entity",{id:"sky",geometry:"primitive: sphere; radius: 650;",material:"shader: skyGradient; colorTop: skyblue; colorBottom: skywhite; side: back"}),o.default.createElement("a-entity",{"static-body":!0,rotation:"-90 0 0",geometry:"primitive: plane; height: 200; width: 200",material:"color: black;"}))}}]),e}();e.default=u},function(t,e,n){"use strict";AFRAME.registerComponent("link-controls",{schema:{hand:{default:"left"}},init:function(){this.el,this.cameraPosition=new THREE.Vector3,this.peeking=!1,this.linkPositionRatio=0,this.linkAnimationDuration=250},tick:function(t,e){},play:function(){var t=this.el.sceneEl;t.addEventListener("mouseenter",this.onMouseEnter),t.addEventListener("mouseleave",this.onMouseLeave)},pause:function(){var t=this.el.sceneEl;t.removeEventListener("mouseenter",this.onMouseEnter),t.removeEventListener("mouseleave",this.onMouseLeave)},onMouseEnter:function(t){if(this.selectedLinkEl,t.detail.intersectedEl,this.urlEl,t.detail.intersectedEl&&t.detail.intersectedEl.getAttribute("geometry")&&"plane"===t.detail.intersectedEl.getAttribute("geometry").primitive){var e=t.detail.intersectedEl.getAttribute("position");e.z=e.z+.1,document.querySelector("[sound]").components.sound.playSound()}},onMouseLeave:function(t){t.detail.intersectedEl&&t.detail.intersectedEl.getAttribute("geometry")&&"plane"===t.detail.intersectedEl.getAttribute("geometry").primitive&&(t.detail.intersectedEl.getAttribute("position").z=0,document.querySelector("[sound]").components.sound.stopSound())}})},function(t,e,n){"use strict";var i={};function r(t){var e={animations:t.animations,scene:t.scene.clone(!0)},n={};t.scene.traverse(function(t){t.isSkinnedMesh&&(n[t.name]=t)});var i={},r={};for(var o in e.scene.traverse(function(t){t.isBone&&(i[t.name]=t),t.isSkinnedMesh&&(r[t.name]=t)}),n){for(var a=n[o],s=a.skeleton,c=r[o],l=[],u=0;u<s.bones.length;++u){var h=i[s.bones[u].name];l.push(h)}c.bind(new THREE.Skeleton(l,s.boneInverses),c.matrixWorld),c.material=a.material.clone()}return e}function o(t){var e=t.getAttribute("data-selector"),n=t.parentNode.querySelectorAll(e),i=document.importNode(t.content,!0).firstElementChild,r=!0,o=!1,a=void 0;try{for(var s,c=n[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value,u=!0,h=!1,d=void 0;try{for(var p,f=i.attributes[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var m=p.value,g=m.name,v=m.value;l.setAttribute(g,v)}}catch(t){h=!0,d=t}finally{try{!u&&f.return&&f.return()}finally{if(h)throw d}}var y=!0,A=!1,w=void 0;try{for(var b,M=i.children[Symbol.iterator]();!(y=(b=M.next()).done);y=!0){var E=b.value;l.appendChild(document.importNode(E,!0))}}catch(t){A=!0,w=t}finally{try{!y&&M.return&&M.return()}finally{if(A)throw w}}}}catch(t){o=!0,a=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}}AFRAME.AGLTFEntity={defaultInflator:function(t,e,n){if(AFRAME.components[e].multiple&&Array.isArray(n))for(var i=0;i<n.length;i++)t.setAttribute(e+"__"+i,n[i]);else t.setAttribute(e,n)},registerComponent:function(t,e,n){AFRAME.AGLTFEntity.components[t]={inflator:n||AFRAME.AGLTFEntity.defaultInflator,componentName:e}},components:{}},AFRAME.registerElement("a-gltf-entity",{prototype:Object.create(AFRAME.AEntity.prototype,{load:{value:function(){var t=this;if(!this.hasLoaded&&this.parentEl){var e=this.getAttribute("src");if("#"===e.charAt(0)){var n=document.getElementById(e.substring(1)),a=n.getAttribute("src"),s=n.getAttribute("high-src"),c=n.getAttribute("low-src");e=s&&"high"===window.APP.quality?s:c&&"low"===window.APP.quality?c:a}var l=function(n){i[e]||(i[e]=r(n)),t.model=n.scene||n.scenes[0],t.model.animations=n.animations,t.setObject3D("mesh",t.model),t.emit("model-loaded",{format:"gltf",model:t.model}),t.getAttribute("inflate")?u(t.model,h):h()},u=function(e,n){!function t(e,n,i){var r=i.children.slice(0),o=document.createElement("a-entity"),a=i.name.replace(/[^\w-]/g,"");o.classList.add(e+a),n.appendChild(o),o.setAttribute("position",{x:i.position.x,y:i.position.y,z:i.position.z}),o.setAttribute("rotation",{x:i.rotation.x*THREE.Math.RAD2DEG,y:i.rotation.y*THREE.Math.RAD2DEG,z:i.rotation.z*THREE.Math.RAD2DEG}),o.setAttribute("scale",{x:i.scale.x,y:i.scale.y,z:i.scale.z}),i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),o.object3D.name=i.name,i.animations&&(i.parent.animations=i.animations),o.setObject3D(i.type.toLowerCase(),i);var s=i.userData.components;if(s)for(var c in s)if(s.hasOwnProperty(c)){var l=AFRAME.AGLTFEntity.components[c],u=l.inflator,h=l.componentName;u&&u(o,h,s[c])}r.forEach(function(n){t(e,o,n)})}("",t,e),t.querySelectorAll(":scope > template").forEach(o),setTimeout(n,0)},h=function(){AFRAME.ANode.prototype.load.call(t,function(){t.parentEl&&(t.updateComponents(),(t.isScene||t.parentEl.isPlaying)&&t.play())})},d=i[e];d?l(r(d)):(new THREE.GLTFLoader).load(e,l,void 0,function(n){n&&n.message&&n.message;t.emit("model-error",{format:"gltf",src:e})})}}}})})},function(t,e,n){(e=t.exports=n(36)(!1)).push([t.i,"._2NGjEwf_YLz-I2IDSUINNY{position:absolute;top:10px;left:calc(50vw - 16px);width:32px;height:32px;background-size:100%}",""]),e.locals={indicator:"_2NGjEwf_YLz-I2IDSUINNY"}},function(t,e,n){var i=n(137);"string"==typeof i&&(i=[[t.i,i,""]]);n(35)(i,{hmr:!0,transform:void 0,insertInto:void 0}),i.locals&&(t.exports=i.locals)},function(t,e){!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};e.m=t,e.c=n,e.p="/dist/",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";AFRAME&&(AFRAME.ASSETS_PATH||(AFRAME.ASSETS_PATH="./assets"),n(2),n(3),n(5),n(13),n(14),n(17),n(20),n(21),n(24),n(27),n(30))},function(t,e){!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};e.m=t,e.c=n,e.p="",e(0)}([function(t,e){AFRAME.registerComponent("rounded",{schema:{enabled:{default:!0},width:{type:"number",default:1},height:{type:"number",default:1},radius:{type:"number",default:.3},topLeftRadius:{type:"number",default:-1},topRightRadius:{type:"number",default:-1},bottomLeftRadius:{type:"number",default:-1},bottomRightRadius:{type:"number",default:-1},color:{type:"color",default:"#F0F0F0"},opacity:{type:"number",default:1}},init:function(){this.rounded=new THREE.Mesh(this.draw(),new THREE.MeshPhongMaterial({color:new THREE.Color(this.data.color),side:THREE.DoubleSide})),this.updateOpacity(),this.el.setObject3D("mesh",this.rounded)},update:function(){this.data.enabled?this.rounded&&(this.rounded.visible=!0,this.rounded.geometry=this.draw(),this.rounded.material.color=new THREE.Color(this.data.color),this.updateOpacity()):this.rounded.visible=!1},updateOpacity:function(){this.data.opacity<0&&(this.data.opacity=0),this.data.opacity>1&&(this.data.opacity=1),this.data.opacity<1?this.rounded.material.transparent=!0:this.rounded.material.transparent=!1,this.rounded.material.opacity=this.data.opacity},tick:function(){},remove:function(){this.rounded&&(this.el.object3D.remove(this.rounded),this.rounded=null)},draw:function(){var t=new THREE.Shape,e=[this.data.radius,this.data.radius,this.data.radius,this.data.radius];return-1!=this.data.topLeftRadius&&(e[0]=this.data.topLeftRadius),-1!=this.data.topRightRadius&&(e[1]=this.data.topRightRadius),-1!=this.data.bottomLeftRadius&&(e[2]=this.data.bottomLeftRadius),-1!=this.data.bottomRightRadius&&(e[3]=this.data.bottomRightRadius),function(t,e,n,i,r,o,a,s,c){o||(o=1e-5),a||(a=1e-5),s||(s=1e-5),c||(c=1e-5),t.moveTo(0,0+o),t.lineTo(0,0+r-o),t.quadraticCurveTo(0,0+r,0+o,0+r),t.lineTo(0+i-a,0+r),t.quadraticCurveTo(0+i,0+r,0+i,0+r-a),t.lineTo(0+i,0+c),t.quadraticCurveTo(0+i,0,0+i-c,0),t.lineTo(0+s,0),t.quadraticCurveTo(0,0,0,0+s)}(t,0,0,this.data.width,this.data.height,e[0],e[1],e[2],e[3]),new THREE.ShapeBufferGeometry(t)},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-rounded",{defaultComponents:{rounded:{}},mappings:{enabled:"rounded.enabled",width:"rounded.width",height:"rounded.height",radius:"rounded.radius","top-left-radius":"rounded.topLeftRadius","top-right-radius":"rounded.topRightRadius","bottom-left-radius":"rounded.bottomLeftRadius","bottom-right-radius":"rounded.bottomRightRadius",color:"rounded.color",opacity:"rounded.opacity"}})}])},function(t,e,n){"use strict";var i=n(4),r=function(t){this.el.object3D.traverse(function(e){e.material&&(e.material.transparent=!0,e.material.opacity=t)});var e=!0,n=!1,i=void 0;try{for(var r,o=this.textEntities[Symbol.iterator]();!(e=(r=o.next()).done);e=!0)r.value.setAttribute("opacity",t)}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}};AFRAME.registerComponent("fadein",{schema:{duration:{type:"int",default:200}},init:function(){this.textEntities=this.el.querySelectorAll("a-text"),this.opacityUpdate(0),this.start=null},tick:function(t){this.start||(this.start=t);var e=Math.min((t-this.start)/this.data.duration,1);this.opacityUpdate(e),1===e&&(this.el.removeAttribute("fadein"),i.emit(this.el,"animationend"))},opacityUpdate:r}),AFRAME.registerComponent("fadeout",{schema:{duration:{type:"int",default:200}},init:function(){this.textEntities=this.el.querySelectorAll("a-text"),this.opacityUpdate(1),this.start=null},tick:function(t){this.start||(this.start=t);var e=1-Math.min((t-this.start)/this.data.duration,1);this.opacityUpdate(e),0===e&&(this.el.removeAttribute("fadeout"),i.emit(this.el,"animationend"))},opacityUpdate:r}),AFRAME.registerComponent("show",{init:function(){this.textEntities=this.el.querySelectorAll("a-text"),this.opacityUpdate(1),this.el.removeAttribute("show")},opacityUpdate:r}),AFRAME.registerComponent("hide",{init:function(){this.textEntities=this.el.querySelectorAll("a-text"),this.opacityUpdate(0),this.el.removeAttribute("hide")},opacityUpdate:r})},function(t,e){"use strict";t.exports={emit:function(t,e,n){t.dispatchEvent(new CustomEvent(e,{detail:n}))}}},function(t,e,n){"use strict";var i=n(6),r=n(7),o=n(8),a=n(11),s=n(12),c=n(4);AFRAME.registerComponent("keyboard",{schema:{isOpen:{type:"boolean",default:!1},physicalKeyboard:{type:"boolean",default:!1}},currentInput:null,init:function(){var t=this;i.preloadAssets(r),s.init(this.el),o.init(this.el);var e=o.numericalUI(),n=o.mainUI(),c=o.actionsUI();this.el.alphabeticalLayout=o.alphabeticalLayout(),this.el.symbolsLayout=o.symbolsLayout(),e.appendChild(o.numericalLayout()),n.appendChild(this.el.alphabeticalLayout),c.appendChild(o.actionsLayout()),this.el.appendChild(e),this.el.appendChild(n),this.el.appendChild(c),this.el.show=function(){a.showKeyboard(t.el)},this.el.hide=function(){a.hideKeyboard(t.el)},this.el.open=function(){a.openKeyboard(t.el)},this.el.dismiss=function(){a.dismissKeyboard(t.el)},this.el.destroy=function(){a.destroyKeyboard(t.el)},this.el.setAttribute("scale","1 1 1"),this.el.setAttribute("rotation","-20 0 0"),this.el.setAttribute("position","-0.5 -0.5 -1.5"),this.el.addEventListener("input",this.inputEvent.bind(this)),this.el.addEventListener("backspace",this.backspaceEvent.bind(this)),this.el.addEventListener("dismiss",this.dismissEvent.bind(this)),document.addEventListener("keydown",this.keydownEvent.bind(this)),document.body.addEventListener("didfocusinput",this.didFocusInputEvent.bind(this)),document.body.addEventListener("didblurinput",this.didBlurInputEvent.bind(this))},update:function(){this.data.isOpen?a.showKeyboard(this.el):a.hideKeyboard(this.el)},tick:function(){},remove:function(){this.el.removeEventListener("input",this.inputEvent.bind(this)),this.el.removeEventListener("backspace",this.backspaceEvent.bind(this)),this.el.removeEventListener("dismiss",this.dismissEvent.bind(this)),document.removeEventListener("keydown",this.keydownEvent.bind(this)),document.body.removeEventListener("didfocusinput",this.didFocusInputEvent.bind(this)),document.body.removeEventListener("didblurinput",this.didBlurInputEvent.bind(this))},pause:function(){},play:function(){},inputEvent:function(t){this.currentInput&&this.currentInput.appendString(t.detail)},backspaceEvent:function(t){this.currentInput&&this.currentInput.deleteLast()},dismissEvent:function(t){this.currentInput&&this.currentInput.blur()},keydownEvent:function(t){this.currentInput&&this.data.physicalKeyboard&&(t.preventDefault(),t.stopPropagation(),"Enter"===t.key?(c.emit(a.el,"input","\n"),c.emit(a.el,"enter","\n")):"Backspace"===t.key?c.emit(a.el,"backspace"):"Escape"===t.key?c.emit(a.el,"dismiss"):t.key.length<2&&c.emit(a.el,"input",t.key))},didFocusInputEvent:function(t){this.currentInput&&this.currentInput.blur(!0),this.currentInput=t.detail,this.el.isOpen||a.openKeyboard(this.el)},didBlurInputEvent:function(t){this.currentInput=null,a.dismissKeyboard(this.el)}}),AFRAME.registerPrimitive("a-keyboard",{defaultComponents:{keyboard:{}},mappings:{"is-open":"keyboard.isOpen","physical-keyboard":"keyboard.physicalKeyboard"}})},function(t,e){"use strict";var n={preloadAssets:function(t){var e=document.querySelector("a-assets"),n=void 0;if(!e){var i=document.querySelector("a-scene");e=document.createElement("a-assets"),i.appendChild(e)}var r=!0,o=!1,a=void 0;try{for(var s,c=t[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;n=!1;var u=!0,h=!1,d=void 0;try{for(var p,f=Array.from(e.children)[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var m=p.value;l.id===m.id&&(n=!0)}}catch(t){h=!0,d=t}finally{try{!u&&f.return&&f.return()}finally{if(h)throw d}}if(!n){var g=document.createElement(l.type);g.setAttribute("id",l.id),g.setAttribute("src",l.src),e.appendChild(g)}}}catch(t){o=!0,a=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}},extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},clone:function(t){if(Array.isArray(t))return t.slice(0);var e=Object.create(Object.getPrototypeOf(t)),n=void 0,i=Object.getOwnPropertyNames(t);for(n=0;n<i.length;)Object.defineProperty(e,i[n],Object.getOwnPropertyDescriptor(t,i[n])),n++;return e},updateOpacity:function(t,e){if(t.hasAttribute("text")){var n=t.getAttribute("text");n&&(n.opacity=e,t.setAttribute("text",n))}t.object3D.traverse(function(t){t.material&&(t.material.transparent=!0,t.material.opacity=e)});var i=!0,r=!1,o=void 0;try{for(var a,s=t.querySelectorAll("a-text")[Symbol.iterator]();!(i=(a=s.next()).done);i=!0)a.value.setAttribute("opacity",e)}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}},getWidthFactor:function(t,e){var n=1e-5;return t.components.text&&t.components.text.currentFont&&(n=t.components.text.currentFont.widthFactor,n*=.5+e),n}};t.exports=n},function(t,e){"use strict";t.exports=[{type:"img",id:"aframeKeyboardShift",src:AFRAME.ASSETS_PATH+"/images/ShiftIcon.png"},{type:"img",id:"aframeKeyboardShiftActive",src:AFRAME.ASSETS_PATH+"/images/ShiftActiveIcon.png"},{type:"img",id:"aframeKeyboardGlobal",src:AFRAME.ASSETS_PATH+"/images/GlobalIcon.png"},{type:"img",id:"aframeKeyboardBackspace",src:AFRAME.ASSETS_PATH+"/images/BackspaceIcon.png"},{type:"img",id:"aframeKeyboardEnter",src:AFRAME.ASSETS_PATH+"/images/EnterIcon.png"},{type:"img",id:"aframeKeyboardDismiss",src:AFRAME.ASSETS_PATH+"/images/DismissIcon.png"},{type:"img",id:"aframeKeyboardShadow",src:AFRAME.ASSETS_PATH+"/images/KeyShadow.png"},{type:"audio",id:"aframeKeyboardKeyIn",src:AFRAME.ASSETS_PATH+"/sounds/KeyIn.mp3"},{type:"audio",id:"aframeKeyboardKeyDown",src:AFRAME.ASSETS_PATH+"/sounds/KeyDown.mp3"}]},function(t,e,n){"use strict";var i=n(9),r=n(10),o=n(11),a={el:null,init:function(t){a.el=t,o.el=t,o.SFX=t.SFX},numericalUI:function(){var t=document.createElement("a-entity");t.setAttribute("position","0.025 0 0.12"),t.setAttribute("rotation","0 25 0"),t.setAttribute("data-ui",!0);var e=document.createElement("a-rounded");return e.setAttribute("width","0.280"),e.setAttribute("height","0.360"),e.setAttribute("radius","0.02"),e.setAttribute("color",r.KEYBOARD_COLOR),t.appendChild(e),t},mainUI:function(){var t=document.createElement("a-entity");t.setAttribute("position","0.312 0 0"),t.setAttribute("data-ui",!0);var e=document.createElement("a-rounded");return e.setAttribute("width","0.840"),e.setAttribute("height","0.360"),e.setAttribute("radius","0.02"),e.setAttribute("color",r.KEYBOARD_COLOR),t.appendChild(e),t},actionsUI:function(){var t=document.createElement("a-entity");t.setAttribute("position","1.180 0 0.01"),t.setAttribute("rotation","0 -25 0"),t.setAttribute("data-ui",!0);var e=document.createElement("a-rounded");return e.setAttribute("width","0.180"),e.setAttribute("height","0.360"),e.setAttribute("radius","0.02"),e.setAttribute("color",r.KEYBOARD_COLOR),t.appendChild(e),t},numericalLayout:function(){var t=i.numerical,e=document.createElement("a-entity");e.setAttribute("position","0.02 0.26 0.001");var n=0;for(var o in t){var s="num-"+o,c=a.key(s,t[o].type,t[o].value),l=o%3,u=r.KEY_WIDTH*l,h=r.KEY_WIDTH*n;c.setAttribute("position",u+" -"+h+" 0"),2===l&&n++,e.appendChild(c)}return e},alphabeticalLayout:function(){var t=i.alphabetical,e=document.createElement("a-entity");e.setAttribute("position","0.02 0.26 0.001");var n=0,o=0,s=!1;for(var c in t){var l="main-"+c,u=a.key(l,t[c].type,t[c].value),h=r.KEY_WIDTH*o,d=r.KEY_WIDTH*n;1===n&&(h+=r.KEY_WIDTH/2),s&&(h=h+r.SPACE_KEY_WIDTH-r.KEY_WIDTH+.11),"spacebar"===t[c].type&&(s=!0,h+=.055,d=r.KEY_WIDTH*n-.01),u.setAttribute("position",h+" -"+d+" 0"),1===n&&8===o?(o=-1,n++):9===o&&(o=-1,n++),o++,e.appendChild(u)}return e},symbolsLayout:function(){var t=i.symbols,e=document.createElement("a-entity");e.setAttribute("position","0.02 0.26 0.001");var n=0,o=0,s=!1;for(var c in t){var l="symbols-"+c,u=a.key(l,t[c].type,t[c].value),h=r.KEY_WIDTH*o,d=r.KEY_WIDTH*n;s&&(h=h+r.SPACE_KEY_WIDTH-r.KEY_WIDTH+.11),"spacebar"===t[c].type&&(s=!0,h+=.055,d=r.KEY_WIDTH*n-.01),u.setAttribute("position",h+" -"+d+" 0"),9===o&&(o=-1,n++),o++,e.appendChild(u)}return e},actionsLayout:function(){var t=i.actions,e=document.createElement("a-entity");e.setAttribute("position","0.02 0.26 0.001");var n=0;for(var o in t){var s="action-"+o,c=a.key(s,t[o].type,t[o].value);c.setAttribute("position","0 -"+n+" 0"),0==o?n+=r.ACTION_WIDTH+.01:1==o&&(n+=r.KEY_WIDTH+.01),e.appendChild(c)}return e},key:function(t,e,n){var i=document.createElement("a-rounded");if(i.setAttribute("key-id",t),i.setAttribute("width",r.KEY_WIDTH),i.setAttribute("height",r.KEY_WIDTH),i.setAttribute("radius","0.008"),i.setAttribute("position","0 0 0"),i.setAttribute("key-type",e),i.setAttribute("key-value",n),i.setAttribute("color",r.KEYBOARD_COLOR),o.addKeyEvents(i),i.shadow_el=document.createElement("a-image"),i.shadow_el.setAttribute("width",1.25*r.KEY_WIDTH),i.shadow_el.setAttribute("height",1.25*r.KEY_WIDTH),i.shadow_el.setAttribute("position",r.KEY_WIDTH/2+" "+r.KEY_WIDTH/2+" -0.002"),i.shadow_el.setAttribute("src","#aframeKeyboardShadow"),i.appendChild(i.shadow_el),"text"===e||"spacebar"===e||"symbol"===e){var s=document.createElement("a-text");s.setAttribute("value",n),s.setAttribute("color","#dbddde"),s.setAttribute("position",r.KEY_WIDTH/2+" "+r.KEY_WIDTH/2+" 0.01"),s.setAttribute("scale","0.16 0.16 0.16"),s.setAttribute("align","center"),s.setAttribute("baseline","center"),i.appendChild(s)}if("spacebar"===e?(i.setAttribute("width",r.SPACE_KEY_WIDTH),i.setAttribute("height",r.SPACE_KEY_HEIGHT),i.setAttribute("color","#404b50"),i.shadow_el.setAttribute("width",1.12*r.SPACE_KEY_WIDTH),i.shadow_el.setAttribute("height",1.2*r.SPACE_KEY_HEIGHT),i.shadow_el.setAttribute("position",r.SPACE_KEY_WIDTH/2+" "+r.SPACE_KEY_HEIGHT/2+" -0.02"),s.setAttribute("color","#adb1b3"),s.setAttribute("scale","0.12 0.12 0.12"),s.setAttribute("position",r.SPACE_KEY_WIDTH/2+" "+r.SPACE_KEY_HEIGHT/2+" 0")):"symbol"===e&&s.setAttribute("scale","0.12 0.12 0.12"),"backspace"!==e&&"enter"!==e&&"dismiss"!==e||(i.setAttribute("width",r.ACTION_WIDTH),i.shadow_el.setAttribute("width",1.25*r.ACTION_WIDTH),i.shadow_el.setAttribute("position",r.ACTION_WIDTH/2+" "+r.KEY_WIDTH/2+" -0.02")),"shift"===e)(l=document.createElement("a-image")).setAttribute("data-type","icon"),l.setAttribute("width","0.032"),l.setAttribute("height","0.032"),l.setAttribute("position","0.04 0.04 0.01"),l.setAttribute("src","#aframeKeyboardShift"),i.appendChild(l),a.el.shiftKey=i;else if("global"===e)(l=document.createElement("a-image")).setAttribute("width","0.032"),l.setAttribute("height","0.032"),l.setAttribute("position","0.04 0.04 0.01"),l.setAttribute("src","#aframeKeyboardGlobal"),i.appendChild(l);else if("backspace"===e)(l=document.createElement("a-image")).setAttribute("width","0.046"),l.setAttribute("height","0.046"),l.setAttribute("position","0.07 0.04 0.01"),l.setAttribute("src","#aframeKeyboardBackspace"),i.appendChild(l);else if("enter"===e){i.setAttribute("height",r.ACTION_WIDTH),i.shadow_el.setAttribute("height",1.25*r.ACTION_WIDTH),i.shadow_el.setAttribute("position",r.ACTION_WIDTH/2+" "+r.ACTION_WIDTH/2+" -0.02");var c=document.createElement("a-circle");c.setAttribute("color","#4285f4"),c.setAttribute("radius",.044),c.setAttribute("position","0.07 0.07 0.01"),i.appendChild(c),(l=document.createElement("a-image")).setAttribute("width","0.034"),l.setAttribute("height","0.034"),l.setAttribute("position","0.07 0.07 0.011"),l.setAttribute("src","#aframeKeyboardEnter"),i.appendChild(l)}else if("dismiss"===e){var l;(l=document.createElement("a-image")).setAttribute("width","0.046"),l.setAttribute("height","0.046"),l.setAttribute("position","0.07 0.04 0.01"),l.setAttribute("src","#aframeKeyboardDismiss"),i.appendChild(l)}return i}};t.exports=a},function(t,e){"use strict";t.exports={numerical:[{type:"text",value:"1"},{type:"text",value:"2"},{type:"text",value:"3"},{type:"text",value:"4"},{type:"text",value:"5"},{type:"text",value:"6"},{type:"text",value:"7"},{type:"text",value:"8"},{type:"text",value:"9"},{type:"text",value:"."},{type:"text",value:"0"},{type:"text",value:"-"}],alphabetical:[{type:"text",value:"q"},{type:"text",value:"w"},{type:"text",value:"e"},{type:"text",value:"r"},{type:"text",value:"t"},{type:"text",value:"y"},{type:"text",value:"u"},{type:"text",value:"i"},{type:"text",value:"o"},{type:"text",value:"p"},{type:"text",value:"a"},{type:"text",value:"s"},{type:"text",value:"d"},{type:"text",value:"f"},{type:"text",value:"g"},{type:"text",value:"h"},{type:"text",value:"j"},{type:"text",value:"k"},{type:"text",value:"l"},{type:"shift"},{type:"text",value:"z"},{type:"text",value:"x"},{type:"text",value:"c"},{type:"text",value:"v"},{type:"text",value:"b"},{type:"text",value:"n"},{type:"text",value:"m"},{type:"text",value:"!"},{type:"text",value:"?"},{type:"symbol",value:"#+="},{type:"text",value:"@"},{type:"spacebar",value:""},{type:"text",value:","},{type:"text",value:"."}],symbols:[{type:"text",value:"@"},{type:"text",value:"#"},{type:"text",value:"$"},{type:"text",value:"%"},{type:"text",value:"&"},{type:"text",value:"*"},{type:"text",value:"-"},{type:"text",value:"+"},{type:"text",value:"("},{type:"text",value:")"},{type:"text",value:"~"},{type:"text",value:"`"},{type:"text",value:'"'},{type:"text",value:"'"},{type:"text",value:":"},{type:"text",value:";"},{type:"text",value:"_"},{type:"text",value:"="},{type:"text",value:"\\"},{type:"text",value:"/"},{type:"text",value:"{"},{type:"text",value:"}"},{type:"text",value:"["},{type:"text",value:"]"},{type:"text",value:"<"},{type:"text",value:">"},{type:"text",value:"^"},{type:"text",value:"|"},{type:"text",value:"!"},{type:"text",value:"?"},{type:"symbol",value:"ABC"},{type:"text",value:"@"},{type:"spacebar",value:""},{type:"text",value:","},{type:"text",value:"."}],actions:[{type:"backspace",value:"Del"},{type:"enter",value:"OK"},{type:"dismiss",value:"W"}]}},function(t,e){"use strict";t.exports={KEYBOARD_COLOR:"#263238",KEY_COLOR_HIGHLIGHT:"#29363c",KEY_COLOR_ACTIVE:"#404b50",SPACEBAR_COLOR_ACTIVE:"#3c464b",SPACEBAR_COLOR_HIGHLIGHT:"#445055",KEY_WIDTH:.08,SPACE_KEY_WIDTH:.368,SPACE_KEY_HEIGHT:.05,ACTION_WIDTH:.14}},function(t,e,n){"use strict";var i=n(10),r=n(6),o=n(4),a=n(12),s={el:null,showKeyboard:function(t){t.o_position&&t.object3D.position.copy(t.o_position),t.isOpen=!0;var e=!0,n=!1,i=void 0;try{for(var r,o=t.querySelectorAll("[data-ui]")[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=!0,c=!1,l=void 0;try{for(var u,h=a.children[Symbol.iterator]();!(s=(u=h.next()).done);s=!0)u.value.setAttribute("show",!0)}catch(t){c=!0,l=t}finally{try{!s&&h.return&&h.return()}finally{if(c)throw l}}}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}t.parentNode||t.sceneEl.appendChild(t)},hideKeyboard:function(t){var e=t.getAttribute("position");-1e4!==e.x&&(t.o_position||(t.o_position=new THREE.Vector3),t.o_position.copy(e)),t.isOpen=!1,t.setAttribute("position","-10000 -10000 -10000"),t.setAttribute("fadeout",{duration:1})},destroyKeyboard:function(t){var e=t.parentNode;e&&e.removeChild(t)},openKeyboard:function(t){t.o_position&&t.object3D.position.copy(o_position),t.isOpen=!0,t._transitioning=!0,t.parentNode||t.sceneEl.appendChild(t);var e=!0,n=!1,i=void 0;try{for(var r,a=function(){var e=r.value,n=!0,i=!1,a=void 0;try{for(var c,l=e.children[Symbol.iterator]();!(n=(c=l.next()).done);n=!0)c.value.setAttribute("hide",!0)}catch(t){i=!0,a=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}e.children[0].setAttribute("fadein",{duration:160}),e.children[0].addEventListener("animationend",function n(){e.children[0].removeEventListener("animationend",n),setTimeout(function(){e.children[1].setAttribute("fadein",{duration:160}),o.emit(s.el,"didopen"),t._transitioning=!1},10)})},c=t.querySelectorAll("[data-ui]")[Symbol.iterator]();!(e=(r=c.next()).done);e=!0)a()}catch(t){n=!0,i=t}finally{try{!e&&c.return&&c.return()}finally{if(n)throw i}}},dismissKeyboard:function(t){t._transitioning=!0;var e=!0,n=!1,i=void 0;try{for(var r,a=function(){var e=r.value,n=!0,i=!1,a=void 0;try{for(var c,l=e.children[Symbol.iterator]();!(n=(c=l.next()).done);n=!0)c.value.setAttribute("show",!0)}catch(t){i=!0,a=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}t.isOpen=!1,e.children[1].setAttribute("fadeout",{duration:160}),e.children[1].addEventListener("animationend",function n(){e.children[1].removeEventListener("animationend",n),setTimeout(function(){e.children[0].setAttribute("fadeout",{duration:160}),e.children[0].addEventListener("animationend",function n(){e.children[0].removeEventListener("animationend",n),s.hideKeyboard(t),o.emit(s.el,"diddismiss"),t._transitioning=!1})},10)})},c=t.querySelectorAll("[data-ui]")[Symbol.iterator]();!(e=(r=c.next()).done);e=!0)a()}catch(t){n=!0,i=t}finally{try{!e&&c.return&&c.return()}finally{if(n)throw i}}},addKeyEvents:function(t){t.addEventListener("click",s.keyClick),t.addEventListener("mousedown",s.keyDown),t.addEventListener("mouseup",s.keyOut),t.addEventListener("mouseleave",s.keyOut),t.addEventListener("mouseenter",s.keyIn)},keyClick:function(){a.keyDown(s.el);var t=this.getAttribute("key-type"),e=this.getAttribute("key-value");"text"===t||"spacebar"===t?("spacebar"===t&&(e=" "),s.isShiftEnabled?(e=e.toUpperCase(),s.shiftToggle()):s.isSymbols&&s.symbolsToggle(),o.emit(s.el,"input",e)):"shift"===t?s.shiftToggle():"symbol"===t?s.symbolsToggle():"backspace"===t?o.emit(s.el,"backspace"):"enter"===t?(o.emit(s.el,"input","\n"),o.emit(s.el,"enter","\n")):"dismiss"===t&&o.emit(s.el,"dismiss")},keyDown:function(){s.el._transitioning||(this.object3D.position.z=.003,"spacebar"===this.getAttribute("key-type")?this.setAttribute("color",i.SPACEBAR_COLOR_ACTIVE):this.setAttribute("color",i.KEY_COLOR_ACTIVE))},keyIn:function(){s.el._transitioning||this.object3D.children[2]&&this.object3D.children[2].material&&!this.object3D.children[2].material.opacity||(a.keyIn(s.el),"spacebar"===this.getAttribute("key-type")?this.setAttribute("color",i.SPACEBAR_COLOR_HIGHLIGHT):this.setAttribute("color",i.KEY_COLOR_HIGHLIGHT))},keyOut:function(){this.object3D.position.z=0,"spacebar"===this.getAttribute("key-type")?this.setAttribute("color",i.KEY_COLOR_ACTIVE):this.setAttribute("color",i.KEYBOARD_COLOR)},isShiftEnabled:!1,shiftToggle:function(){s.isShiftEnabled=!s.isShiftEnabled;var t=s.el.shiftKey.querySelector("[data-type]");s.isShiftEnabled?t.setAttribute("src","#aframeKeyboardShiftActive"):t.setAttribute("src","#aframeKeyboardShift");var e=!0,n=!1,i=void 0;try{for(var r,o=document.querySelectorAll("[key-id]")[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,c=a.getAttribute("key-id"),l=a.getAttribute("key-type");if(c.startsWith("main-")&&"text"===l){var u=a.querySelector("a-text");if(u){var h=u.getAttribute("value").toLowerCase();this.isShiftEnabled&&(h=h.toUpperCase()),u.setAttribute("value",h)}}}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}},isSymbols:!1,symbolsToggle:function(){if(s.isSymbols=!s.isSymbols,s.isSymbols){var t=s.el.alphabeticalLayout.parentNode;t.removeChild(s.el.alphabeticalLayout),t.appendChild(s.el.symbolsLayout)}else{var e=s.el.symbolsLayout.parentNode;e.removeChild(s.el.symbolsLayout),e.appendChild(s.el.alphabeticalLayout),setTimeout(function(){r.updateOpacity(s.el.alphabeticalLayout,1)},0)}}};t.exports=s},function(t,e){"use strict";var n={init:function(t){var e=document.createElement("a-sound");e.setAttribute("key","aframeKeyboardKeyInSound"),e.setAttribute("sfx",!0),e.setAttribute("src","#aframeKeyboardKeyIn"),e.setAttribute("position","0 2 5"),t.appendChild(e),(e=document.createElement("a-sound")).setAttribute("key","aframeKeyboardKeyDownSound"),e.setAttribute("sfx",!0),e.setAttribute("src","#aframeKeyboardKeyDown"),e.setAttribute("position","0 2 5"),t.appendChild(e)},keyIn:function(t){var e=t.querySelector("[key=aframeKeyboardKeyInSound]");e&&(e.components.sound.stopSound(),e.components.sound.playSound())},keyDown:function(t){var e=t.querySelector("[key=aframeKeyboardKeyDownSound]");e&&(e.components.sound.stopSound(),e.components.sound.playSound())}};t.exports=n},function(t,e,n){"use strict";var i=n(6),r=n(4);AFRAME.registerComponent("input",{schema:{value:{type:"string",default:""},name:{type:"string",default:""},disabled:{type:"boolean",default:!1},color:{type:"color",default:"#000"},align:{type:"string",default:"left"},font:{type:"string",default:""},letterSpacing:{type:"int",default:0},lineHeight:{type:"string",default:""},opacity:{type:"number",default:1},side:{type:"string",default:"front"},tabSize:{type:"int",default:4},placeholder:{type:"string",default:""},placeholderColor:{type:"color",default:"#AAA"},maxLength:{type:"int",default:0},type:{type:"string",default:"text"},width:{type:"number",default:1},cursorWidth:{type:"number",default:.01},cursorHeight:{type:"number",default:.08},cursorColor:{type:"color",default:"#007AFF"},backgroundColor:{type:"color",default:"#FFF"},backgroundOpacity:{type:"number",default:1}},init:function(){var t=this;this.background=document.createElement("a-rounded"),this.background.setAttribute("radius",.01),this.background.setAttribute("height",.18),this.background.setAttribute("side","double"),this.el.appendChild(this.background),this.cursor=document.createElement("a-plane"),this.cursor.setAttribute("position","0 0 0.003"),this.cursor.setAttribute("visible",!1),this.el.appendChild(this.cursor),this.text=document.createElement("a-entity"),this.el.appendChild(this.text),this.placeholder=document.createElement("a-entity"),this.placeholder.setAttribute("visible",!1),this.el.appendChild(this.placeholder),this.el.focus=this.focus.bind(this),this.el.blur=this.blur.bind(this),this.el.appendString=this.appendString.bind(this),this.el.deleteLast=this.deleteLast.bind(this),this.blink(),this.el.addEventListener("click",function(){this.components.input.data.disabled||t.focus()}),Object.defineProperty(this.el,"value",{get:function(){return this.getAttribute("value")},set:function(t){this.setAttribute("value",t)},enumerable:!0,configurable:!0})},blink:function(){var t=this;return this.isFocused?void(this.cursorInterval=setInterval(function(){t.cursor.setAttribute("visible",!t.cursor.getAttribute("visible"))},500)):(t.cursor.setAttribute("visible",!1),clearInterval(this.cursorInterval),void(this.cursorInterval=null))},isFocused:!1,focus:function(t){this.isFocused||(this.isFocused=!0,this.cursor.setAttribute("visible",!0),this.blink(),r.emit(this.el,"focus"),t||r.emit(document.body,"didfocusinput",this.el))},blur:function(t){this.isFocused&&(this.isFocused=!1,this.cursorInterval&&(clearInterval(this.cursorInterval),this.cursorInterval=null),this.cursor.setAttribute("visible",!1),r.emit(this.el,"blur"),t||r.emit(document.body,"didblurinput",this.el))},appendString:function(t){if("\n"===t)return this.blur();var e=this.el.getAttribute("value");e||(e=""),e+=t,this.el.setAttribute("value",e),r.emit(this.el,"change",e)},deleteLast:function(){var t=this.el.getAttribute("value");t||(t=""),t=t.slice(0,-1),this.el.setAttribute("value",t),r.emit(this.el,"change",t)},updateText:function(){function t(r,o,a,s){if(!r.object3D||!r.object3D.children||!r.object3D.children[0])return 0;var c=r.object3D.children[0].geometry.visibleGlyphs;return c&&(c=c[c.length-1])?c.line?(o.value=a?o.value.substr(1):o.value.slice(0,-1),r.setAttribute("text",o),t(r,o,a)):(s||(s=i.getWidthFactor(r,o.wrapCount)),((c=(c.position[0]+c.data.width)/(s/e.data.width))+n.left+n.right)/e.data.width>1?(o.value=a?o.value.substr(1):o.value.slice(0,-1),r.setAttribute("text",o),t(r,o,a,s)):c):0}var e=this,n={left:.021,right:.021},r={color:this.data.color,align:this.data.align,side:this.data.side,tabSize:this.data.tabSize,wrapCount:24*this.data.width,width:this.data.width},o=this.text.getAttribute("text");o&&this.data.value!==o.value&&(this.cursorInterval&&(clearInterval(this.cursorInterval),this.cursorInterval=null),this.cursorTimer&&(clearTimeout(this.cursorTimer),this.cursorTimer=null),this.cursor.setAttribute("visible",!0),this.cursorTimer=setTimeout(function(){e.blink()},50)),this.data.maxLength?(r.value=this.data.value.substring(0,this.data.maxLength),this.el.setAttribute("value",r.value)):r.value=this.data.value,"password"===this.data.type&&(r.value="*".repeat(this.data.value.length)),this.data.font.length&&(r.font=this.data.font),this.data.letterSpacing&&(r.letterSpacing=this.data.letterSpacing),this.data.lineHeight.length&&(r.lineHeight=this.data.lineHeight),this.text.setAttribute("visible",!1),this.text.setAttribute("text",r),r.value.length?this.placeholder.setAttribute("visible",!1):this.placeholder.setAttribute("visible",!0);var a=i.clone(r);a.value=this.data.placeholder,a.color=this.data.placeholderColor,this.placeholder.setAttribute("text",a),setTimeout(function(){if(e.text.object3D){var i=e.text.object3D.children;if(i[0]&&i[0].geometry&&i[0].geometry.visibleGlyphs){var o=0;i[0].geometry.visibleGlyphs.length&&(o=t(e.text,r,!0),e.text.setAttribute("visible",!0)),e.cursor.setAttribute("position",o+n.left+" 0 0.003")}else e.cursor.setAttribute("position",n.left+" 0 0.003")}else e.cursor.setAttribute("position",n.left+" 0 0.003");t(e.placeholder,a)},0),this.background.setAttribute("color",this.data.backgroundColor),this.background.setAttribute("width",this.data.width),this.background.setAttribute("position","0 -0.09 0.001"),this.text.setAttribute("position",n.left-.001+this.data.width/2+" 0 0.002"),this.placeholder.setAttribute("position",n.left-.001+this.data.width/2+" 0 0.002")},updateCursor:function(){this.cursor.setAttribute("width",this.data.cursorWidth),this.cursor.setAttribute("height",this.data.cursorHeight),this.cursor.setAttribute("color",this.data.cursorColor)},update:function(){setTimeout(function(){},0),this.updateCursor(),this.updateText()},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-input",{defaultComponents:{input:{}},mappings:{value:"input.value",name:"input.name",disabled:"input.disabled",color:"input.color",align:"input.align",font:"input.font","letter-spacing":"input.letterSpacing","line-height":"input.lineHeight",opacity:"input.opacity",side:"input.side","tab-size":"input.tabSize",placeholder:"input.placeholder","placeholder-color":"input.placeholderColor","max-length":"input.maxLength",type:"input.type",width:"input.width","cursor-width":"input.cursorWidth","cursor-height":"input.cursorHeight","cursor-color":"input.cursorColor","background-color":"input.backgroundColor","background-opacity":"input.backgroundOpacity"}})},function(t,e,n){"use strict";var i=n(6),r=n(4),o=n(15),a=n(16);AFRAME.registerComponent("switch",{schema:{name:{type:"string",default:""},enabled:{type:"boolean",default:!1},disabled:{type:"boolean",default:!1},fillColor:{type:"color",default:"#bababa"},knobColor:{type:"color",default:"#f5f5f5"},fillColorEnabled:{type:"color",default:"#80a8ff"},knobColorEnabled:{type:"color",default:"#4076fd"},fillColorDisabled:{type:"color",default:"#939393"},knobColorDisabled:{type:"color",default:"#a2a2a2"}},init:function(){i.preloadAssets(o),a.init(this.el),this.el.fill=document.createElement("a-rounded"),this.el.fill.setAttribute("width",.36),this.el.fill.setAttribute("height",.16),this.el.fill.setAttribute("radius",.08),this.el.fill.setAttribute("side","double"),this.el.fill.setAttribute("position","0 0 0.01"),this.el.appendChild(this.el.fill),this.el.knob=document.createElement("a-circle"),this.el.knob.setAttribute("position","0.06 0.08 0.02"),this.el.knob.setAttribute("radius",.12),this.el.knob.setAttribute("side","double"),this.el.appendChild(this.el.knob),this.el.shadow_el=document.createElement("a-image"),this.el.shadow_el.setAttribute("width",.3),this.el.shadow_el.setAttribute("height",.3),this.el.shadow_el.setAttribute("position","0 0 -0.001"),this.el.shadow_el.setAttribute("src","#aframeSwitchShadow"),this.el.knob.appendChild(this.el.shadow_el),this.el.addEventListener("click",function(){this.components.switch.data.disabled||(this.setAttribute("enabled",!this.components.switch.data.enabled),r.emit(this,"change",this.components.switch.data.enabled))}),this.el.addEventListener("mousedown",function(){return this.components.switch.data.disabled?a.clickDisabled(this):void a.click(this)}),Object.defineProperty(this.el,"enabled",{get:function(){return this.getAttribute("enabled")},set:function(t){this.setAttribute("enabled",t)},enumerable:!0,configurable:!0})},on:function(){this.el.fill.setAttribute("color",this.data.fillColorEnabled),this.el.knob.setAttribute("position","0.32 0.08 0.02"),this.el.knob.setAttribute("color",this.data.knobColorEnabled)},off:function(){this.el.fill.setAttribute("color",this.data.fillColor),this.el.knob.setAttribute("position","0.06 0.08 0.02"),this.el.knob.setAttribute("color",this.data.knobColor)},disable:function(){this.el.fill.setAttribute("color",this.data.fillColorDisabled),this.el.knob.setAttribute("color",this.data.knobColorDisabled)},update:function(){this.data.enabled?this.on():this.off(),this.data.disabled&&this.disable()},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-switch",{defaultComponents:{switch:{}},mappings:{name:"switch.name",enabled:"switch.enabled",disabled:"switch.disabled","fill-color":"switch.fillColor","knob-color":"switch.knobColor","fill-color-enabled":"switch.fillColorEnabled","knob-color-enabled":"switch.knobColorEnabled","fill-color-disabled":"switch.fillColorDisabled","knob-color-disabled":"switch.knobColorDisabled"}})},function(t,e){"use strict";t.exports=[{type:"img",id:"aframeSwitchShadow",src:AFRAME.ASSETS_PATH+"/images/SwitchShadow.png"},{type:"audio",id:"aframeSwitchClick",src:AFRAME.ASSETS_PATH+"/sounds/InputClick.mp3"},{type:"audio",id:"aframeSwitchClickDisabled",src:AFRAME.ASSETS_PATH+"/sounds/ButtonClickDisabled.mp3"}]},function(t,e){"use strict";var n={init:function(t){var e=document.createElement("a-sound");e.setAttribute("key","aframeSwitchClickSound"),e.setAttribute("sfx",!0),e.setAttribute("src","#aframeSwitchClick"),e.setAttribute("position","0 2 5"),t.appendChild(e),(e=document.createElement("a-sound")).setAttribute("key","aframeSwitchClickDisabledSound"),e.setAttribute("sfx",!0),e.setAttribute("src","#aframeSwitchClickDisabled"),e.setAttribute("position","0 2 5"),t.appendChild(e)},click:function(t){var e=t.querySelector("[key=aframeSwitchClickSound]");e&&(e.components.sound.stopSound(),e.components.sound.playSound())},clickDisabled:function(t){var e=t.querySelector("[key=aframeSwitchClickDisabledSound]");e&&(e.components.sound.stopSound(),e.components.sound.playSound())}};t.exports=n},function(t,e,n){"use strict";var i=n(6),r=n(4),o=n(18),a=n(19);AFRAME.registerComponent("slider",{schema:{name:{type:"string",default:""},enabled:{type:"boolean",default:!1},disabled:{type:"boolean",default:!1},fillColor:{type:"color",default:"#bababa"},knobColor:{type:"color",default:"#f5f5f5"},fillColorEnabled:{type:"color",default:"#80a8ff"},knobColorEnabled:{type:"color",default:"#4076fd"},fillColorDisabled:{type:"color",default:"#939393"},knobColorDisabled:{type:"color",default:"#a2a2a2"}},init:function(){i.preloadAssets(o),a.init(this.el),this.el.fill=document.createElement("a-rounded"),this.el.fill.setAttribute("width",2),this.el.fill.setAttribute("height",.16),this.el.fill.setAttribute("radius",.08),this.el.fill.setAttribute("side","double"),this.el.fill.setAttribute("position","0 0 0.01"),this.el.appendChild(this.el.fill),this.el.knob=document.createElement("a-circle"),this.el.knob.setAttribute("position","0.06 0.08 0.02"),this.el.knob.setAttribute("radius",.12),this.el.knob.setAttribute("side","double"),this.el.appendChild(this.el.knob),this.el.shadow_el=document.createElement("a-image"),this.el.shadow_el.setAttribute("width",.3),this.el.shadow_el.setAttribute("height",.3),this.el.shadow_el.setAttribute("position","0 0 -0.001"),this.el.shadow_el.setAttribute("src","#aframeSwitchShadow"),this.el.knob.appendChild(this.el.shadow_el),this.el.addEventListener("click",function(t){var e=this.el.object3D.worldToLocal(t.detail.intersection.point);e.x<=-1?data.percent=0:e.x>=1?data.percent=1:data.percent=(e.x+1)/2,r.emit(this,"change",this.components.slider.data.enabled)}),Object.defineProperty(this.el,"enabled",{get:function(){return this.getAttribute("enabled")},set:function(t){this.setAttribute("enabled",t)},enumerable:!0,configurable:!0})},on:function(){this.el.fill.setAttribute("color",this.data.fillColorEnabled),this.el.knob.setAttribute("position","0.32 0.08 0.02"),this.el.knob.setAttribute("color",this.data.knobColorEnabled)},off:function(){this.el.fill.setAttribute("color",this.data.fillColor),this.el.knob.setAttribute("position","0.06 0.08 0.02"),this.el.knob.setAttribute("color",this.data.knobColor)},disable:function(){this.el.fill.setAttribute("color",this.data.fillColorDisabled),this.el.knob.setAttribute("color",this.data.knobColorDisabled)},update:function(){},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-slider",{defaultComponents:{switch:{}},mappings:{name:"slider.name",enabled:"slider.enabled",disabled:"slider.disabled","fill-color":"slider.fillColor","knob-color":"slider.knobColor","fill-color-enabled":"slider.fillColorEnabled","knob-color-enabled":"slider.knobColorEnabled","fill-color-disabled":"slider.fillColorDisabled","knob-color-disabled":"slider.knobColorDisabled"}})},function(t,e){"use strict";t.exports=[{type:"img",id:"aframeSwitchShadow",src:AFRAME.ASSETS_PATH+"/images/SwitchShadow.png"},{type:"audio",id:"aframeSwitchClick",src:AFRAME.ASSETS_PATH+"/sounds/InputClick.mp3"},{type:"audio",id:"aframeSwitchClickDisabled",src:AFRAME.ASSETS_PATH+"/sounds/ButtonClickDisabled.mp3"}]},function(t,e){"use strict";var n={init:function(t){var e=document.createElement("a-sound");e.setAttribute("key","aframeSwitchClickSound"),e.setAttribute("sfx",!0),e.setAttribute("src","#aframeSwitchClick"),e.setAttribute("position","0 2 5"),t.appendChild(e),(e=document.createElement("a-sound")).setAttribute("key","aframeSwitchClickDisabledSound"),e.setAttribute("sfx",!0),e.setAttribute("src","#aframeSwitchClickDisabled"),e.setAttribute("position","0 2 5"),t.appendChild(e)},click:function(t){var e=t.querySelector("[key=aframeSwitchClickSound]");e&&(e.components.sound.stopSound(),e.components.sound.playSound())},clickDisabled:function(t){var e=t.querySelector("[key=aframeSwitchClickDisabledSound]");e&&(e.components.sound.stopSound(),e.components.sound.playSound())}};t.exports=n},function(t,e,n){"use strict";n(6),n(4),AFRAME.registerComponent("form",{schema:{},init:function(){},update:function(){},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-form",{defaultComponents:{form:{}},mappings:{}})},function(t,e,n){"use strict";var i=n(6),r=n(4),o=n(22),a=n(23);AFRAME.registerComponent("radio",{schema:{checked:{type:"boolean",default:!1},disabled:{type:"boolean",default:!1},name:{type:"string",default:""},value:{type:"string",default:""},label:{type:"string",default:""},radioColor:{type:"color",default:"#757575"},radioColorChecked:{type:"color",default:"#4076fd"},color:{type:"color",default:"#757575"},font:{type:"string",default:""},letterSpacing:{type:"int",default:0},lineHeight:{type:"string",default:""},opacity:{type:"number",default:1},width:{type:"number",default:1}},init:function(){var t=this;i.preloadAssets(o),a.init(this.el),this.hitbox=document.createElement("a-plane"),this.hitbox.setAttribute("height",.2),this.hitbox.setAttribute("opacity",0),this.hitbox.setAttribute("position","0 0 0.001"),this.el.appendChild(this.hitbox),this.outline=document.createElement("a-ring"),this.outline.setAttribute("radius-outer",.1),this.outline.setAttribute("radius-inner",.078),this.outline.setAttribute("position","0.1 0 0.002"),this.el.appendChild(this.outline),this.circle=document.createElement("a-circle"),this.circle.setAttribute("radius",.05),this.circle.setAttribute("position","0.1 0 0.002"),this.el.appendChild(this.circle),this.label=document.createElement("a-entity"),this.el.appendChild(this.label),this.el.addEventListener("click",function(){this.components.radio.data.disabled||(this.setAttribute("checked",!0),t.onClick())}),this.el.addEventListener("mousedown",function(){return this.components.radio.data.disabled?a.clickDisabled(this):void a.click(this)}),Object.defineProperty(this.el,"value",{get:function(){return this.getAttribute("value")},set:function(t){this.setAttribute("value",t)},enumerable:!0,configurable:!0})},onClick:function(t){if(this.data.name){var e=this.el.closest("a-form");if(e){var n=!1,i=Array.from(e.querySelectorAll("[name="+this.data.name+"]"));i.reverse();var o=!0,a=!1,s=void 0;try{for(var c,l=i[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value;u.components.radio&&(u===this.el&&u.hasAttribute("checked")?(n=!0,u.components.radio.check(),t||r.emit(u,"change",!0)):n||this.data.checked||!u.hasAttribute("checked")?u.components.radio.uncheck():(n=!0,u.components.radio.check()))}}catch(t){a=!0,s=t}finally{try{!o&&l.return&&l.return()}finally{if(a)throw s}}!n&&this.el.hasAttribute("checked")&&(this.check(),t||r.emit(this.el,"change",!0))}}},check:function(){this.outline.setAttribute("color",this.data.radioColorChecked),this.circle.setAttribute("color",this.data.radioColorChecked),this.circle.setAttribute("visible",!0),this.data.disabled&&this.disabled()},uncheck:function(){this.outline.setAttribute("color",this.data.radioColor),this.circle.setAttribute("visible",!1),this.data.disabled&&this.disabled()},disabled:function(){this.outline.setAttribute("color",this.data.radioColor),this.circle.setAttribute("color",this.data.radioColor)},update:function(){function t(r,o){if(!r.object3D||!r.object3D.children||!r.object3D.children[0])return 0;var a=r.object3D.children[0].geometry.visibleGlyphs;return a&&(a=a[a.length-1])?a.line?(n.value=n.value.slice(0,-1),r.setAttribute("text",n),t(r)):(o||(o=i.getWidthFactor(r,n.wrapCount)),(a=(a.position[0]+a.data.width)/(o/e.data.width))/e.data.width>1?(n.value=n.value.slice(0,-1),r.setAttribute("text",n),t(r,o)):a):0}var e=this;this.onClick(!0),this.hitbox.setAttribute("width",this.data.width),this.hitbox.setAttribute("position",this.data.width/2+" 0 0.001");var n={color:this.data.color,align:"left",wrapCount:10*(this.data.width+.2),width:this.data.width};this.data.font&&(n.font=this.data.font),n.value=this.data.label,n.color=this.data.color,this.label.setAttribute("text",n),this.label.setAttribute("position",this.data.width/2+.24+" 0 0.002"),setTimeout(function(){if(e.data.label.length&&t(e.label),e.data.disabled)var n=setInterval(function(){e.outline.object3D.children[0]&&(clearInterval(n),i.updateOpacity(e.outline,.4),i.updateOpacity(e.circle,.4),i.updateOpacity(e.label,.4))},10);else var r=setInterval(function(){e.outline.object3D.children[0]&&(clearInterval(r),i.updateOpacity(e.outline,1),i.updateOpacity(e.circle,1),i.updateOpacity(e.label,1))},10)},0)},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-radio",{defaultComponents:{radio:{}},mappings:{checked:"radio.checked",disabled:"radio.disabled",name:"radio.name",value:"radio.value",label:"radio.label","radio-color":"radio.radioColor","radio-color-checked":"radio.radioColorChecked",color:"radio.color",align:"radio.align",font:"radio.font","letter-spacing":"radio.letterSpacing","line-height":"radio.lineHeight",opacity:"radio.opacity",width:"radio.width"}})},function(t,e){"use strict";t.exports=[{type:"audio",id:"aframeRadioClick",src:AFRAME.ASSETS_PATH+"/sounds/InputClick.mp3"},{type:"audio",id:"aframeRadioClickDisabled",src:AFRAME.ASSETS_PATH+"/sounds/ButtonClickDisabled.mp3"}]},function(t,e){"use strict";var n={init:function(t){var e=document.createElement("a-sound");e.setAttribute("key","aframeRadioClickSound"),e.setAttribute("sfx",!0),e.setAttribute("src","#aframeRadioClick"),e.setAttribute("position","0 2 5"),t.appendChild(e),(e=document.createElement("a-sound")).setAttribute("key","aframeRadioClickDisabledSound"),e.setAttribute("sfx",!0),e.setAttribute("src","#aframeRadioClickDisabled"),e.setAttribute("position","0 2 5"),t.appendChild(e)},click:function(t){var e=t.querySelector("[key=aframeRadioClickSound]");e&&(e.components.sound.stopSound(),e.components.sound.playSound())},clickDisabled:function(t){var e=t.querySelector("[key=aframeRadioClickDisabledSound]");e&&(e.components.sound.stopSound(),e.components.sound.playSound())}};t.exports=n},function(t,e,n){"use strict";var i=n(6),r=n(4),o=n(25),a=n(26);AFRAME.registerComponent("checkbox",{schema:{checked:{type:"boolean",default:!1},disabled:{type:"boolean",default:!1},name:{type:"string",default:""},value:{type:"string",default:""},label:{type:"string",default:""},checkboxColor:{type:"color",default:"#757575"},checkboxColorChecked:{type:"color",default:"#4076fd"},color:{type:"color",default:"#757575"},font:{type:"string",default:""},letterSpacing:{type:"int",default:0},lineHeight:{type:"string",default:""},opacity:{type:"number",default:1},width:{type:"number",default:1}},init:function(){var t=this;i.preloadAssets(o),a.init(this.el),this.hitbox=document.createElement("a-plane"),this.hitbox.setAttribute("height",.2),this.hitbox.setAttribute("opacity",0),this.el.appendChild(this.hitbox),this.outline=document.createElement("a-rounded"),this.outline.setAttribute("width",.2),this.outline.setAttribute("height",.2),this.outline.setAttribute("radius",.02),this.outline.setAttribute("position","0 -0.1 0.01"),this.el.appendChild(this.outline),this.inside=document.createElement("a-rounded"),this.inside.setAttribute("width",.156),this.inside.setAttribute("height",.156),this.inside.setAttribute("radius",.01),this.inside.setAttribute("color","#EEE"),this.inside.setAttribute("position","0.0195 -0.078 0.02"),this.el.appendChild(this.inside),this.checkmark=document.createElement("a-image"),this.checkmark.setAttribute("width",.16),this.checkmark.setAttribute("height",.16),this.checkmark.setAttribute("src","#aframeCheckboxMark"),this.checkmark.setAttribute("position","0.1 0 0.03"),this.el.appendChild(this.checkmark),this.label=document.createElement("a-entity"),this.el.appendChild(this.label),this.el.addEventListener("click",function(){this.components.checkbox.data.disabled||(this.components.checkbox.data.checked=!this.components.checkbox.data.checked,this.setAttribute("checked",this.components.checkbox.data.checked),t.onClick())}),this.el.addEventListener("mousedown",function(){return this.components.checkbox.data.disabled?a.clickDisabled(this):void a.click(this)}),Object.defineProperty(this.el,"value",{get:function(){return this.getAttribute("value")},set:function(t){this.setAttribute("value",t)},enumerable:!0,configurable:!0})},onClick:function(t){this.data.checked?this.check():this.uncheck(),t||r.emit(this.el,"change",this.data.checked)},check:function(){this.outline.setAttribute("color",this.data.checkboxColorChecked),this.inside.setAttribute("color",this.data.checkboxColorChecked),this.checkmark.setAttribute("visible",!0),this.data.disabled&&this.disabled()},uncheck:function(){this.outline.setAttribute("color",this.data.checkboxColor),this.inside.setAttribute("color","#EEE"),this.checkmark.setAttribute("visible",!1),this.data.disabled&&this.disabled()},disabled:function(){this.outline.setAttribute("color",this.data.checkboxColor),this.inside.setAttribute("color",this.data.checkboxColor)},update:function(){function t(r,o){if(!r.object3D||!r.object3D.children||!r.object3D.children[0])return 0;var a=r.object3D.children[0].geometry.visibleGlyphs;return a&&(a=a[a.length-1])?a.line?(n.value=n.value.slice(0,-1),r.setAttribute("text",n),t(r)):(o||(o=i.getWidthFactor(r,n.wrapCount)),(a=(a.position[0]+a.data.width)/(o/e.data.width))/e.data.width>1?(n.value=n.value.slice(0,-1),r.setAttribute("text",n),t(r,o)):a):0}var e=this;this.onClick(!0),this.hitbox.setAttribute("width",this.data.width),this.hitbox.setAttribute("position",this.data.width/2+" 0 0.01");var n={color:this.data.color,align:"left",wrapCount:10*(this.data.width+.2),width:this.data.width};this.data.font&&(n.font=this.data.font),n.value=this.data.label,n.color=this.data.color,this.label.setAttribute("text",n),this.label.setAttribute("position",this.data.width/2+.24+" 0 0.01"),setTimeout(function(){if(e.data.label.length&&t(e.label),e.data.disabled)var n=setInterval(function(){e.checkmark.object3D.children[0]&&(clearInterval(n),i.updateOpacity(e.checkmark,.4),i.updateOpacity(e.label,.4))},10);else var r=setInterval(function(){e.checkmark.object3D.children[0]&&(clearInterval(r),i.updateOpacity(e.checkmark,1),i.updateOpacity(e.label,1))},10)},0)},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-checkbox",{defaultComponents:{checkbox:{}},mappings:{checked:"checkbox.checked",disabled:"checkbox.disabled",name:"checkbox.name",value:"checkbox.value",label:"checkbox.label","checkbox-color":"checkbox.checkboxColor","checkbox-color-checked":"checkbox.checkboxColorChecked",color:"checkbox.color",align:"checkbox.align",font:"checkbox.font","letter-spacing":"checkbox.letterSpacing","line-height":"checkbox.lineHeight",opacity:"checkbox.opacity",width:"checkbox.width"}})},function(t,e){"use strict";t.exports=[{type:"img",id:"aframeCheckboxMark",src:AFRAME.ASSETS_PATH+"/images/CheckmarkIcon.png"},{type:"audio",id:"aframeCheckboxClick",src:AFRAME.ASSETS_PATH+"/sounds/InputClick.mp3"},{type:"audio",id:"aframeCheckboxClickDisabled",src:AFRAME.ASSETS_PATH+"/sounds/ButtonClickDisabled.mp3"}]},function(t,e){"use strict";var n={init:function(t){var e=document.createElement("a-sound");e.setAttribute("key","aframeCheckboxClickSound"),e.setAttribute("sfx",!0),e.setAttribute("src","#aframeCheckboxClick"),e.setAttribute("position","0 2 5"),t.appendChild(e),(e=document.createElement("a-sound")).setAttribute("key","aframeButtonClickDisabledSound"),e.setAttribute("sfx",!0),e.setAttribute("src","#aframeButtonClickDisabled"),e.setAttribute("position","0 2 5"),t.appendChild(e)},click:function(t){var e=t.querySelector("[key=aframeCheckboxClickSound]");e&&(e.components.sound.stopSound(),e.components.sound.playSound())},clickDisabled:function(t){var e=t.querySelector("[key=aframeButtonClickDisabledSound]");e&&(e.components.sound.stopSound(),e.components.sound.playSound())}};t.exports=n},function(t,e,n){"use strict";var i=n(6),r=n(4),o=n(28),a=n(29);AFRAME.registerComponent("button",{schema:{disabled:{type:"boolean",default:!1},type:{type:"string",default:"raised"},name:{type:"string",default:""},value:{type:"string",default:"Button"},buttonColor:{type:"color",default:"#4076fd"},color:{type:"color",default:"#FFF"},font:{type:"string",default:""},letterSpacing:{type:"int",default:0},lineHeight:{type:"string",default:""},opacity:{type:"number",default:1},width:{type:"number",default:1}},init:function(){var t=this;i.preloadAssets(o),a.init(this.el),this.wrapper=document.createElement("a-entity"),this.wrapper.setAttribute("position","0 0 0.01"),this.el.appendChild(this.wrapper),this.shadow=document.createElement("a-image"),this.shadow.setAttribute("height",.36*1.25),this.shadow.setAttribute("src","#aframeButtonShadow"),this.wrapper.appendChild(this.shadow),this.outline=document.createElement("a-rounded"),this.outline.setAttribute("height",.36),this.outline.setAttribute("radius",.03),this.outline.setAttribute("position","0 -0.18 0.01"),this.wrapper.appendChild(this.outline),this.label=document.createElement("a-entity"),this.outline.appendChild(this.label),this.el.addEventListener("click",function(){this.components.button&&this.components.button.data.disabled||t.onClick()}),this.el.addEventListener("mousedown",function(){return this.components.button&&this.components.button.data.disabled?a.clickDisabled(this):(t.wrapper.setAttribute("position","0 0 0.036"),void a.click(this))}),this.el.addEventListener("mouseup",function(){this.components.button&&this.components.button.data.disabled||t.wrapper.setAttribute("position","0 0 0")}),this.el.getWidth=this.getWidth.bind(this),Object.defineProperty(this.el,"value",{get:function(){return this.getAttribute("value")},set:function(t){this.setAttribute("value",t)},enumerable:!0,configurable:!0})},onClick:function(){},getWidth:function(){return this.__width},update:function(){function t(r,o,a){if(!r.object3D||!r.object3D.children||!r.object3D.children[0])return setTimeout(function(){t(r,o)},10);var s=r.object3D.children[0].geometry.visibleGlyphs;return s?(s=s[s.length-1])?s.line?(n.value=n.value.slice(0,-1),r.setAttribute("text",n),t(r,o)):(a||(a=i.getWidthFactor(r,n.wrapCount)),(s=(s.position[0]+s.data.width)/(a/e.data.width))/e.data.width>1?(n.value=n.value.slice(0,-1),r.setAttribute("text",n),t(r,o,a)):o(s)):o(0):setTimeout(function(){t(r,o)},10)}var e=this;this.outline.setAttribute("color",this.data.buttonColor);var n={color:this.data.color,align:"center",wrapCount:10*this.data.width,width:this.data.width};this.data.font&&(n.font=this.data.font),"flat"===this.data.type&&(n.color=this.data.buttonColor),n.value=this.data.value.toUpperCase(),this.label.setAttribute("text",n),this.label.setAttribute("position",this.data.width/2+.24+" 0 0.01"),setTimeout(function(){if(e.data.value.length&&t(e.label,function(t){e.label.setAttribute("position",t/2+.14+" 0.18 0.02"),t+=.28,e.outline.setAttribute("width",t),e.__width=t,e.shadow.setAttribute("width",1.17*t),e.shadow.setAttribute("position",t/2+" 0 0"),r.emit(e.el,"change:width",t)}),e.data.disabled){e.shadow.setAttribute("visible",!1);var n=setInterval(function(){e.label.object3D.children[0]&&e.label.object3D.children[0].geometry.visibleGlyphs&&(clearInterval(n),i.updateOpacity(e.el,.4))},10)}else var o=setInterval(function(){e.label.object3D.children[0]&&e.label.object3D.children[0].geometry.visibleGlyphs&&(clearInterval(o),i.updateOpacity(e.el,1))},10);if("flat"===e.data.type){e.shadow.setAttribute("visible",!1);var a=setInterval(function(){e.label.object3D.children[0]&&e.label.object3D.children[0].geometry.visibleGlyphs&&(clearInterval(a),i.updateOpacity(e.outline,0),e.data.disabled&&i.updateOpacity(e.label,.4))},10)}},0)},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-button",{defaultComponents:{button:{}},mappings:{disabled:"button.disabled",type:"button.type",name:"button.name",value:"button.value","button-color":"button.buttonColor",color:"button.color",font:"button.font","letter-spacing":"button.letterSpacing","line-height":"button.lineHeight",opacity:"button.opacity",width:"button.width"}})},function(t,e){"use strict";t.exports=[{type:"img",id:"aframeButtonShadow",src:AFRAME.ASSETS_PATH+"/images/ButtonShadow.png"},{type:"audio",id:"aframeButtonClick",src:AFRAME.ASSETS_PATH+"/sounds/ButtonClick.mp3"},{type:"audio",id:"aframeButtonClickDisabled",src:AFRAME.ASSETS_PATH+"/sounds/ButtonClickDisabled.mp3"}]},function(t,e){"use strict";var n={init:function(t){var e=document.createElement("a-sound");e.setAttribute("key","aframeButtonClickSound"),e.setAttribute("sfx",!0),e.setAttribute("src","#aframeButtonClick"),e.setAttribute("position","0 2 5"),t.appendChild(e),(e=document.createElement("a-sound")).setAttribute("key","aframeButtonClickDisabledSound"),e.setAttribute("sfx",!0),e.setAttribute("src","#aframeButtonClickDisabled"),e.setAttribute("position","0 2 5"),t.appendChild(e)},click:function(t){var e=t.querySelector("[key=aframeButtonClickSound]");e&&(e.components.sound.stopSound(),e.components.sound.playSound())},clickDisabled:function(t){var e=t.querySelector("[key=aframeButtonClickDisabledSound]");e&&(e.components.sound.stopSound(),e.components.sound.playSound())}};t.exports=n},function(t,e,n){"use strict";var i=n(6),r=n(4),o=n(31),a=n(32);AFRAME.registerComponent("toast",{schema:{message:{type:"string",default:"You are cool"},action:{type:"string",default:""},backgroundColor:{type:"color",default:"#222"},actionColor:{type:"color",default:"#4076fd"},color:{type:"color",default:"#FFF"},font:{type:"string",default:""},letterSpacing:{type:"int",default:0},lineHeight:{type:"string",default:""},width:{type:"number",default:3},duration:{type:"number",default:2e3},autoshow:{type:"boolean",default:!0}},init:function(){var t=this;i.preloadAssets(o),a.init(this.el),this.el.setAttribute("position","10000 10000 10000"),this.el.setAttribute("rotation","-25 0 0"),this.el.setAttribute("scale","0.3 0.3 0.3"),this.background=document.createElement("a-rounded"),this.background.setAttribute("height",.44),this.background.setAttribute("radius",.03),this.background.setAttribute("position","0 -0.18 0.001"),this.el.appendChild(this.background),this.label=document.createElement("a-entity"),this.el.appendChild(this.label),this.action=document.createElement("a-button"),t.action.setAttribute("button-color","#222"),this.el.appendChild(this.action),this.action.addEventListener("change:width",function(e){var n=t.label.getAttribute("text");n.width=t.data.width-e.detail,n.wrapCount=10*n.width,t.label.setAttribute("text",n),t.label.setAttribute("position",n.width/2+.14+" 0.04 0.001"),this.setAttribute("position",t.data.width-e.detail+" "+(.44-.36)/2+" 0.001")}),this.action.addEventListener("click",function(){r.emit(t.el,"actionclick")});var e=setInterval(function(){t.action.object3D&&t.action.object3D.children[0]&&(clearInterval(e),i.updateOpacity(t.el,0),i.updateOpacity(t.label,0),i.updateOpacity(t.action,0),t.data.autoshow&&t.show())},10);this.el.show=this.show.bind(this),this.el.hide=this.hide.bind(this)},show:function(){this.hideTimer&&clearTimeout(this.hideTimer),this.el.setAttribute("position",-this.data.width/(2/this.el.object3D.scale.x)+" 0.25 -1.6");var t=this;setTimeout(function(){t.el.setAttribute("fadein",{duration:160}),setTimeout(function(){i.updateOpacity(t.label,1),t.action.components.button.shadow.setAttribute("visible",!1)},10)},0),this.hideTimer=setTimeout(function(){t.hide()},this.data.duration),a.show(this.el)},hide:function(){var t=this;setTimeout(function(){i.updateOpacity(t.label,0),t.action.components.button.shadow.setAttribute("visible",!1),setTimeout(function(){t.el.setAttribute("fadeout",{duration:160}),setTimeout(function(){t.el.setAttribute("position","10000 10000 10000")},200)},10)},0)},update:function(){this.background.setAttribute("color",this.data.backgroundColor),this.background.setAttribute("width",this.data.width);var t={color:this.data.color,align:"left",wrapCount:10*this.data.width,width:this.data.width,lineHeight:64};this.data.font&&(t.font=this.data.font),"flat"===this.data.type&&(t.color=this.data.buttonColor),t.value=this.data.message,this.label.setAttribute("text",t),this.label.setAttribute("position",this.data.width/2+.14+" 0 0.001"),this.action.setAttribute("value",this.data.action.toUpperCase()),this.action.setAttribute("color",this.data.actionColor)},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-toast",{defaultComponents:{toast:{}},mappings:{message:"toast.message",action:"toast.action","action-color":"toast.actionColor","background-color":"toast.backgroundColor",color:"toast.color",font:"toast.font","letter-spacing":"toast.letterSpacing","line-height":"toast.lineHeight",width:"toast.width",duration:"toast.duration",autoshow:"toast.autoshow"}})},function(t,e){"use strict";t.exports=[{type:"audio",id:"aframeToastShow",src:AFRAME.ASSETS_PATH+"/sounds/ToastShow.mp3"}]},function(t,e){"use strict";var n={init:function(t){var e=document.createElement("a-sound");e.setAttribute("key","aframeToastShowSound"),e.setAttribute("sfx",!0),e.setAttribute("src","#aframeToastShow"),e.setAttribute("position","0 2 5"),t.appendChild(e)},show:function(t){var e=t.querySelector("[key=aframeToastShowSound]");e&&(e.components.sound.stopSound(),e.components.sound.playSound())}};t.exports=n}])},function(t,e,n){"use strict";var i;n(139),(i=n(138))&&i.__esModule,AFRAME.registerComponent("menue",{schema:{eventSrc:{type:"selectorAll"},camera:{type:"selector",default:"#player"}},init:function(){this.onToggle=this.onToggle.bind(this),this.accelerationInput=new THREE.Vector3(0,0,0)},play:function(){this.el.sceneEl.addEventListener("menue",this.onToggle)},pause:function(){this.el.sceneEl.removeEventListener("menue",this.onToggle)},onToggle:function(){var t=this,e=this.el;if(this.el.is("menue"))e.removeChild(this.el.querySelector("#menuselectRender")),this.el.removeState("menue");else{var n=document.querySelector("a-scene").querySelector(".nametag");this.lastTime=new Date,this.selectedOptgroupValue=null,this.selectedOptgroupIndex=0,this.selectedOptionValue=null,this.selectedOptionIndex=0,this.data.camera.object3D,this.idPrefix=e.id?e.id:"menu";var i=document.createElement("a-entity");i.id=this.idPrefix+"selectRender",i.innerHTML='\n        <a-box id="'+this.idPrefix+'Frame" scale="4 2 0.005" rotation="-10 0 0"  position="0 0.5 -2.8" material="opacity: 0.5; transparent: false; color: #ffffff"> </a-box>\n        \n        <a-entity   id="'+this.idPrefix+'Key"  keyboard="isOpen: false;physical-keyboard: true"  scale="0.2 0.2 0.2" position="0 0 0" > </a-entity>\n       \n          <a-input position="-1.75 0.99 -2.88" rotation="-10 0 0" scale="1 1 1" placeholder="Username" color="black" width="1"></a-input>\n          <a-switch id="switch" position="-1.75  0.59 -2.81" rotation="-10 0 0" scale="0.5 0.5 0.5" label="Mic mute" enabled="false"></a-switch>\n         \n          <a-entity  text="value: Mic Mute;" position="-0.25 0.59 -2.81" rotation="-10 0 0" scale="2 2 2" ></a-entity>\n        \n          <a-switch id="switchDance" position="1.1 0.926 -2.857" rotation="-10 0 0" scale="0.5 0.5 0.5" enabled="false"></a-switch>\n          \n           <a-entity  text="value: Dance;" position="1 0.926 -2.857" rotation="-10 0 0" scale="2 2 2" ></a-entity>\n         \n           <a-switch id="switchWaving" position="1.1 1.24 -2.922" rotation="-10 0 0" scale="0.5 0.5 0.5" enabled="false"></a-switch>\n           \n            <a-entity  text="value: Waving;" position="1 1.24 -2.922" rotation="-10 0 0" scale="2 2 2" ></a-entity>\n       \n        \n            <a-switch id="switchSitting" position="1.1 0.582 -2.79" rotation="-10 0 0" scale="0.5 0.5 0.5" enabled="false"></a-switch>\n            \n             <a-entity  text="value: Sitting;" position="1 0.582 -2.79" rotation="-10 0 0" scale="2 2 2" ></a-entity>\n          \n            \n            \n            ';var r=document.createElement("a-entity");r.id=this.idPrefix+"selectRender1",r.innerHTML="\n       \n\n              \n                \n                ";var o=i.querySelector("a-input");o.setAttribute("value",n.getAttribute("text","value").value),window.openDropdown=function(){document.getElementById("dropani").emit("opendropdown"),document.getElementById("dropani1").emit("opendropdown");var t=document.getElementById("dropvalani"),e=document.getElementById("dropvalani1"),n=document.getElementById("dropvalani2");t.emit("opendropdown"),e.emit("opendropdown"),n.emit("opendropdown")},o.addEventListener("blur",function(t){}),i.querySelector("#switchDance").addEventListener("change",function(t){!0===t.detail?(document.querySelector("a-scene").querySelector(".man").setAttribute("animation-mixer","clip: 03_dancing"),document.querySelector("a-scene").querySelector(".actiontag").setAttribute("text","value","03_dancing")):(document.querySelector("a-scene").querySelector(".man").setAttribute("animation-mixer","clip: 00_idle"),document.querySelector("a-scene").querySelector(".actiontag").setAttribute("text","value","00_idle"))}),i.querySelector("#switchWaving").addEventListener("change",function(t){!0===t.detail?(document.querySelector("a-scene").querySelector(".man").setAttribute("animation-mixer","clip: 05_waving"),document.querySelector("a-scene").querySelector(".actiontag").setAttribute("text","value","05_waving")):(document.querySelector("a-scene").querySelector(".man").setAttribute("animation-mixer","clip: 00_idle"),document.querySelector("a-scene").querySelector(".actiontag").setAttribute("text","value","00_idle"))}),i.querySelector("#switchSitting").addEventListener("change",function(t){!0===t.detail?(document.querySelector("a-scene").querySelector(".man").setAttribute("animation-mixer","clip: 04_sitting"),document.querySelector("a-scene").querySelector(".actiontag").setAttribute("text","value","04_sitting")):(document.querySelector("a-scene").querySelector(".man").setAttribute("animation-mixer","clip: 00_idle"),document.querySelector("a-scene").querySelector(".actiontag").setAttribute("text","value","00_idle"))});var a=this.data.camera.getAttribute("position"),s=this.data.camera.getAttribute("rotation");i.setAttribute("position",a),i.setAttribute("rotation",s);var c=i.querySelector("a-switch"),l=document.querySelector("a-scene");l.is("muted")&&c.setAttribute("enabled",!0),c.addEventListener("change",function(t){!0===t.detail?(NAF.connection.adapter.enableMicrophone(!1),l.addState("muted")):(NAF.connection.adapter.enableMicrophone(!0),l.removeState("muted"))});var u=i.querySelector("#menuKey");u.addEventListener("input",function(i){"\n"===i.detail&&(n.setAttribute("text","value",o.getAttribute("value")),e.removeChild(t.el.querySelector("#menuselectRender")),t.el.removeState("menue"))}),u.addEventListener("loaded",function(t){}),o.addEventListener("focus",function(t){}),e.appendChild(i),this.el.addState("menue")}},tick:function(){}})},function(t,e,n){"use strict";var i={once:THREE.LoopOnce,repeat:THREE.LoopRepeat,pingpong:THREE.LoopPingPong};function r(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}t.exports=AFRAME.registerComponent("animation-mixer",{schema:{clip:{default:"*"},duration:{default:0},crossFadeDuration:{default:0},loop:{default:"repeat",oneOf:Object.keys(i)},repetitions:{default:1/0,min:0}},init:function(){var t=this;this.model=null,this.mixer=null,this.activeActions=[],this.data.first=!0;var e=this.el.getObject3D("mesh").parent.parent;e?this.load(e):this.el.addEventListener("model-loaded",function(e){t.load(e.detail.model)})},load:function(t){var e=this.el;this.model=t,this.mixer=new THREE.AnimationMixer(t),this.mixer.addEventListener("loop",function(t){e.emit("animation-loop",{action:t.action,loopDelta:t.loopDelta})}),this.mixer.addEventListener("finished",function(t){e.emit("animation-finished",{action:t.action,direction:t.direction})}),this.data.clip&&this.update({})},remove:function(){this.mixer&&this.mixer.stopAllAction()},update:function(t){t&&(this.stopAction(),this.data.clip&&this.playAction())},stopAction:function(){for(var t=this.data,e=0;e<this.activeActions.length;e++)t.crossFadeDuration?this.activeActions[e].fadeOut(t.crossFadeDuration):this.activeActions[e].stop();this.activeActions.length=0},playAction:function(){if(this.mixer){var t=this.model,e=this.data,n=t.animations||(t.geometry||{}).animations||[];if(n.length){var o,a=(o=e.clip,new RegExp("^"+o.split(/\*+/).map(r).join(".*")+"$")),s=0,c=!0,l=!1,u=void 0;try{for(var h,d=n[0].tracks[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;"Armature_mixamorigNeck.quaternion"===p.name&&(n[0].tracks.splice(s,1),t.animations[0].tracks.splice(s,1)),s++}}catch(t){l=!0,u=t}finally{try{!c&&d.return&&d.return()}finally{if(l)throw u}}for(var f,m=0;f=n[m];m++)if(f.name.match(a)){var g=this.mixer.clipAction(f,t);g.enabled=!0,e.duration&&g.setDuration(e.duration),g.setLoop(i[e.loop],e.repetitions).fadeIn(e.crossFadeDuration).play(),this.activeActions.push(g)}}}},tick:function(t,e){this.mixer&&!isNaN(e)&&this.mixer.update(e/1e3)}})},function(t,e,n){(e=t.exports=n(36)(!1)).push([t.i,"._1m1lbuKMgBbrxaDb6hf1jh{position:absolute;top:10px;left:calc(50vw - 16px);width:32px;height:32px;background-size:100%}._1m1lbuKMgBbrxaDb6hf1jh._1JYYXufVPkdzYdm71FJ2za{background-image:url(/assets/images/muted.png)}",""]),e.locals={indicator:"_1m1lbuKMgBbrxaDb6hf1jh",muted:"_1JYYXufVPkdzYdm71FJ2za"}},function(t,e,n){var i=n(142);"string"==typeof i&&(i=[[t.i,i,""]]);n(35)(i,{hmr:!0,transform:void 0,insertInto:void 0}),i.locals&&(t.exports=i.locals)},function(t,e,n){"use strict";var i,r=(i=n(143))&&i.__esModule?i:{default:i};AFRAME.registerComponent("mute-state-indicator",{schema:{},init:function(){this.onStateToggled=this.onStateToggled.bind(this),this.muteIcon=document.createElement("div"),this.muteIcon.classList.add(r.default.indicator),document.body.appendChild(this.muteIcon),this.updateMuteState()},play:function(){this.el.sceneEl.addEventListener("stateadded",this.onStateToggled),this.el.sceneEl.addEventListener("stateremoved",this.onStateToggled)},pause:function(){this.el.sceneEl.removeEventListener("stateadded",this.onStateToggled),this.el.sceneEl.removeEventListener("stateremoved",this.onStateToggled)},onStateToggled:function(t){"muted"!==!t.detail.state&&this.updateMuteState()},updateMuteState:function(){var t=this.el.sceneEl.is("muted");this.muteIcon.classList.toggle(r.default.muted,t)}})},function(t,e,n){"use strict";var i=function(t,e,n){if(t&&t.length){var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var c=a.value;e.length&&e.forEach(function(t){c.addEventListener(t,n)})}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}}},r=function(t,e,n){if(t&&t.length){var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var c=a.value;e.length&&e.forEach(function(t){c.removeEventListener(t,n)})}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}}};AFRAME.registerComponent("mute-mic",{schema:{eventSrc:{type:"selectorAll"},toggleEvents:{type:"array"},muteEvents:{type:"array"},unmuteEvents:{type:"array"}},init:function(){this.onToggle=this.onToggle.bind(this),this.onMute=this.onMute.bind(this),this.onUnmute=this.onUnmute.bind(this)},play:function(){var t=this.data,e=t.eventSrc,n=t.toggleEvents,r=t.muteEvents,o=t.unmuteEvents;i(e,n,this.onToggle),i(e,r,this.onMute),i(e,o,this.onUnmute)},pause:function(){var t=this.data,e=t.eventSrc,n=t.toggleEvents,i=t.muteEvents,o=t.unmuteEvents;r(e,n,this.onToggle),r(e,i,this.onMute),r(e,o,this.onUnmute)},onToggle:function(){this.el.is("muted")?(NAF.connection.adapter.enableMicrophone(!0),this.el.removeState("muted")):(NAF.connection.adapter.enableMicrophone(!1),this.el.addState("muted"))},onMute:function(){this.el.is("muted")||(NAF.connection.adapter.enableMicrophone(!1),this.el.addState("muted"))},onUnmute:function(){this.el.is("muted")&&(NAF.connection.adapter.enableMicrophone(!0),this.el.removeState("muted"))}})},function(t,e){function n(t,e){this.buttonName=e,this.onButtonPresed=this.onButtonPresed.bind(this),this.onAxisMove=this.onAxisMove.bind(this),t.addEventListener("trackpaddown",this.onButtonPresed),t.addEventListener("trackpadup",this.onButtonPresed),t.addEventListener("axismove",this.onAxisMove),this.lastPos=[0,0],this.el=t}n.prototype={onAxisMove:function(t){this.lastPos=t.detail.axis},onButtonPresed:function(t){const[e,n]=this.lastPos,r="trackpadup".includes(t.type)?"up":"down",o="up"===r&&this.lastDirection?this.lastDirection:e*e+n*n<.25?"center":i(Math.atan2(e,n));this.el.emit(`${this.buttonName}dpad${o}${r}`),"down"===r?this.lastDirection=o:delete this.lastDirection},removeListeners:function(){el.removeEventListener("trackpaddown",this.onButtonPresed),el.removeEventListener("trackpadup",this.onButtonPresed),el.removeEventListener("axismove",this.onAxisMove)}};const i=function(t){return(t=(t*THREE.Math.RAD2DEG+180+45)%360)>0&&t<90?"down":t>=90&&t<180?"left":t>=180&&t<270?"up":"right"};AFRAME.registerInputBehaviour("dpad",n)},function(t,e,n){AFRAME.inputBehaviours={},AFRAME.registerInputBehaviour=function(t,e){AFRAME.inputBehaviours[t]=e},n(146)},function(t,e){function n(t){return function(e,n,i){e.addEventListener(n+t,i)}}AFRAME.registerInputActivator("down",n("down")),AFRAME.registerInputActivator("up",n("up")),AFRAME.registerInputActivator("touchstart",n("touchstart")),AFRAME.registerInputActivator("touchend",n("touchend"))},function(t,e){function n(t,e,n){this.lastTime=0,this.timeOut=250,this.eventName=e+"down",this.el=t,this.onActivate=n,this.onButtonDown=this.onButtonDown.bind(this),t.addEventListener(this.eventName,this.onButtonDown)}n.prototype={onButtonDown(t){var e=performance.now();e-this.lastTime<this.timeOut?this.onActivate(t.detail):this.lastTime=e},removeListeners(){this.el.removeEventListener(this.eventName,this.onButtonDown)}},AFRAME.registerInputActivator("doublepress",n)},function(t,e){function n(t,e,n){this.lastTime=0,this.timeOut=250,this.eventName=e+"touchstart",this.el=t,this.onActivate=n,this.onButtonDown=this.onButtonDown.bind(this),t.addEventListener(this.eventName,this.onButtonDown)}n.prototype={onButtonDown(t){var e=performance.now();e-this.lastTime<this.timeOut?this.onActivate(t.detail):this.lastTime=e},removeListeners(){this.el.removeEventListener(this.eventName,this.onButtonDown)}},AFRAME.registerInputActivator("doubletouch",n)},function(t,e){function n(t,e,n){this.lastTime=0,this.timeOut=250,this.eventNameDown=e+"down",this.eventNameUp=e+"up",this.el=t,this.onActivate=n,this.onButtonDown=this.onButtonDown.bind(this),this.onButtonUp=this.onButtonUp.bind(this),t.addEventListener(this.eventNameDown,this.onButtonDown),t.addEventListener(this.eventNameUp,this.onButtonUp)}n.prototype={onButtonDown(t){var e=this;this.pressTimer=window.setTimeout(function(){e.onActivate(t)},1e3)},onButtonUp(t){clearTimeout(this.pressTimer)},removeListeners(){this.el.removeEventListener(this.eventNameDown,this.onButtonDown),this.el.removeEventListener(this.eventNameUp,this.onButtonUp)}},AFRAME.registerInputActivator("longpress",n)},function(t,e,n){AFRAME.inputActivators={},AFRAME.registerInputActivator=function(t,e){AFRAME.inputActivators[t]=e},n(151),n(150),n(149),n(148)},function(t,e,n){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");n(152),n(147),AFRAME.currentInputMapping=null,AFRAME.inputMappings={},AFRAME.inputActions={},AFRAME.registerSystem("input-mapping",{mappings:{},mappingsPerControllers:{},loadedControllers:[],init:function(){var t=this;this.keyboardHandler=this.keyboardHandler.bind(this),this.sceneEl.addEventListener("inputmappingregistered",function(){t.removeControllersListeners();for(var e=0;e<t.loadedControllers.length;e++){var n=t.loadedControllers[e];t.updateControllersListeners(n)}}),this.sceneEl.addEventListener("controllerconnected",function(e){var n=t.findMatchingController(e.target);if(n)t.updateControllersListeners(n);else{var i={name:e.detail.name,hand:e.detail.component.data.hand,element:e.target,handlers:{},activators:{}};t.loadedControllers.push(i),t.updateControllersListeners(i)}}),this.sceneEl.addEventListener("controllerdisconnected",function(e){var n=t.findMatchingController(e.target);n&&t.removeControllerListeners(n)}),this.addKeyboardListeners()},findMatchingController:function(t){var e,n;for(n=0;n<this.loadedControllers.length;n++)if((e=this.loadedControllers[n]).element===t)return e},addKeyboardListeners:function(){document.addEventListener("keyup",this.keyboardHandler),document.addEventListener("keydown",this.keyboardHandler),document.addEventListener("keypress",this.keyboardHandler)},removeKeyboardListeners:function(){document.removeEventListener("keyup",this.keyboardHandler),document.removeEventListener("keydown",this.keyboardHandler),document.removeEventListener("keypress",this.keyboardHandler)},removeControllerListeners:function(t){for(var e in t.handlers){var n=t.handlers[e];t.element.removeEventListener(e,n)}for(var i in t.handlers={},t.activators)t.activators[i].removeListeners();t.activators={}},updateBehaviours:function(t){AFRAME.inputBehaviours[t.name];var e=this.mappingsPerControllers[t.name].behaviours;if(e)for(var n in e){var i=e[n],r=AFRAME.inputBehaviours[i];r&&new r(t.element,n)}},updateControllersListeners:function(t){if(this.removeControllerListeners(t),AFRAME.inputMappings){var e=this.mappingsPerControllers[t.name]={mappings:{},behaviours:{}};for(var n in AFRAME.inputMappings.mappings){var i=AFRAME.inputMappings.mappings[n],r=i.common;r&&this.updateMappingsPerController(r,e,n);var o=i[t.name];o&&this.updateMappingsPerController(o,e,n)}for(var n in AFRAME.inputMappings.behaviours){var a=AFRAME.inputMappings.behaviours[n][t.name];a&&this.updateBehavioursPerController(a,e,n)}var s=this,c=function(t){return function(n){var i=e.mappings[t][AFRAME.currentInputMapping];("object"!=typeof i||(i=i[s.findMatchingController(n.target).hand]))&&n.target.emit(i,n.detail)}};for(var l in e.mappings){if(-1!==l.indexOf(".")){var u=l.split("."),h=u[0],d=u[1],p=c(l),f=AFRAME.inputActivators[d];t.activators[l]=new f(t.element,h,p)}p=c(l),t.element.addEventListener(l,p),t.handlers[l]=p}this.updateBehaviours(t)}},checkValidInputMapping:function(){AFRAME.currentInputMapping},keyboardHandler:function(t){if(this.checkValidInputMapping(),AFRAME.inputMappings&&AFRAME.inputMappings.mappings[AFRAME.currentInputMapping]&&AFRAME.inputMappings.mappings[AFRAME.currentInputMapping].keyboard){var e=AFRAME.inputMappings.mappings[AFRAME.currentInputMapping].keyboard[((32===t.keyCode?"Space":t.key)+"_"+t.type.substr(3)).toLowerCase()];e&&this.sceneEl.emit(e)}},updateBehavioursPerController:function(t,e,n){for(var i in t){var r=t[i];e.behaviours[i]||(e.behaviours[i]=r)}},updateMappingsPerController:function(t,e,n){for(var i in t){var r=t[i];e.mappings[i]||(e.mappings[i]={}),e.mappings[i][n]=r}},removeControllersListeners:function(){for(var t=0;t<this.loadedControllers.length;t++){var e=this.loadedControllers[t];this.removeControllerListeners(e)}this.mappingsPerControllers={mappings:{},behaviours:{}}}}),AFRAME.registerInputActions=function(t,e){AFRAME.inputActions=t,void 0!==e&&AFRAME.inputActions[e]&&(AFRAME.currentInputMapping=e)},AFRAME.registerInputMappings=function(t,e){if(e||0===Object.keys(AFRAME.inputMappings).length)AFRAME.inputMappings=t;else for(var n in AFRAME.inputMappings.behaviours=t.behaviours,t.mappings){var i=t.mappings[n];if(AFRAME.inputMappings[n])for(var r in i){var o=i[r];if(AFRAME.inputMappings[n][r])for(var a in o)AFRAME.inputMappings[n][r][a]=o[a];else AFRAME.inputMappings[n][r]=o}else AFRAME.inputMappings[n]=i}if(AFRAME.scenes)for(var s=0;s<AFRAME.scenes.length;s++)AFRAME.scenes[s].emit("inputmappingregistered")}},function(t,e,n){var i=n(37);function r(){throw new Error("[NetworkDriver] Driver not implemented.")}r.prototype=new i,r.prototype.constructor=r,t.exports=r},function(t,e){t.exports.slerp=function(t,e,n){if(n<=0)return t;if(n>=1)return e;var i=t[0],r=t[1],o=t[2],a=t[3],s=a*e[3]+i*e[0]+r*e[1]+o*e[2];if(!(s<0))return e;if((t=t.slice())[3]=-e[3],t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],(s=-s)>=1)return t[3]=a,t[0]=i,t[1]=r,t[2]=o,this;var c=Math.sqrt(1-s*s);if(Math.abs(c)<.001)return t[3]=.5*(a+t[3]),t[0]=.5*(i+t[0]),t[1]=.5*(r+t[1]),t[2]=.5*(o+t[2]),this;var l=Math.atan2(c,s),u=Math.sin((1-n)*l)/c,h=Math.sin(n*l)/c;return t[3]=a*u+t[3]*h,t[0]=i*u+t[0]*h,t[1]=r*u+t[1]*h,t[2]=o*u+t[2]*h,t}},function(t,e,n){var i=n(62),r=n(63),o=n(61),a=n(60),s=a.ID;t.exports=function(t){var e,n=null,c={},l={};function u(){n.step(e);var r={};Object.keys(c).forEach(function(t){r[t]=a.serializeBody(c[t])}),t.postMessage({type:i.STEP,bodies:r,contacts:n.getContacts().map(a.serializeContact)})}t.addEventListener("message",function(t){var h=t.data;switch(h.type){case i.INIT:(n="cannon"===h.engine?new r:new o).init(h.worldConfig),e=1/h.fps,setInterval(u,1e3/h.fps);break;case i.ADD_BODY:var d=a.deserializeBody(h.body);d.material=n.getMaterial("defaultMaterial"),c[d[s]]=d,n.addBody(d);break;case i.REMOVE_BODY:n.removeBody(c[h.bodyID]),delete c[h.bodyID];break;case i.APPLY_BODY_METHOD:c[h.bodyID][h.methodName](a.deserializeVec3(h.args[0]),a.deserializeVec3(h.args[1]));break;case i.UPDATE_BODY_PROPERTIES:a.deserializeBodyUpdate(h.body,c[h.body.id]);break;case i.ADD_MATERIAL:n.addMaterial(h.materialConfig);break;case i.ADD_CONTACT_MATERIAL:n.addContactMaterial(h.materialName1,h.materialName2,h.contactMaterialConfig);break;case i.ADD_CONSTRAINT:var p=a.deserializeConstraint(h.constraint,c);l[p[s]]=p,n.addConstraint(p);break;case i.REMOVE_CONSTRAINT:n.removeConstraint(l[h.constraintID]),delete l[h.constraintID];break;default:throw new Error("[Worker] Unexpected event type: %s",h.type)}})}},function(t,e){function n(){this.listeners=[]}t.exports=function(t){var e=new n,i=new n;return e.setTarget(i),i.setTarget(e),t(e),i},n.prototype.setTarget=function(t){this.target=t},n.prototype.addEventListener=function(t,e){this.listeners.push(e)},n.prototype.dispatchEvent=function(t,e){for(var n=0;n<this.listeners.length;n++)this.listeners[n](e)},n.prototype.postMessage=function(t){this.target.dispatchEvent("message",{data:t})}},function(t,e){var n=arguments[3],i=arguments[4],r=arguments[5],o=JSON.stringify;t.exports=function(t,e){for(var a,s=Object.keys(r),c=0,l=s.length;c<l;c++){var u=s[c],h=r[u].exports;if(h===t||h&&h.default===t){a=u;break}}if(!a){a=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var d={};for(c=0,l=s.length;c<l;c++)d[u=s[c]]=u;i[a]=["function(require,module,exports){"+t+"(self); }",d]}var p=Math.floor(Math.pow(16,8)*Math.random()).toString(16),f={};f[a]=a,i[p]=["function(require,module,exports){var f = require("+o(a)+");(f.default ? f.default : f)(self);}",f];var m={};!function t(e){for(var n in m[e]=!0,i[e][1]){var r=i[e][1][n];m[r]||t(r)}}(p);var g="("+n+")({"+Object.keys(m).map(function(t){return o(t)+":["+i[t][0]+","+o(i[t][1])+"]"}).join(",")+"},{},["+o(p)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL,y=new Blob([g],{type:"text/javascript"});if(e&&e.bare)return y;var A=v.createObjectURL(y),w=new Worker(A);return w.objectURL=A,w}},function(t,e,n){var i=n(158),r=n(157),o=n(37),a=n(62),s=n(156),c=n(60),l=c.ID;function u(t){this.fps=t.fps,this.engine=t.engine,this.interpolate=t.interpolate,this.interpBufferSize=t.interpolationBufferSize,this.debug=t.debug,this.bodies={},this.contacts=[],this.frameDelay=1e3*this.interpBufferSize/this.fps,this.frameBuffer=[],this.worker=this.debug?r(s):i(s),this.worker.addEventListener("message",this._onMessage.bind(this))}u.prototype=new o,u.prototype.constructor=u,t.exports=u,u.prototype.init=function(t){this.worker.postMessage({type:a.INIT,worldConfig:t,fps:this.fps,engine:this.engine})},u.prototype.step=function(){if(this.interpolate){for(var t=this.frameBuffer[0],e=this.frameBuffer[1],n=performance.now();t&&e&&n-t.timestamp>this.frameDelay;)this.frameBuffer.shift(),t=this.frameBuffer[0],e=this.frameBuffer[1];if(t&&e){var i=(n-t.timestamp)/this.frameDelay;for(var r in i=(i-(1-1/this.interpBufferSize))*this.interpBufferSize,t.bodies)t.bodies.hasOwnProperty(r)&&e.bodies.hasOwnProperty(r)&&c.deserializeInterpBodyUpdate(t.bodies[r],e.bodies[r],this.bodies[r],i)}}},u.prototype.destroy=function(){this.worker.terminate(),delete this.worker},u.prototype._onMessage=function(t){if(t.data.type!==a.STEP)throw new Error("[WorkerDriver] Unexpected message type.");var e=t.data.bodies;if(this.contacts=t.data.contacts,this.interpolate)this.frameBuffer.push({timestamp:performance.now(),bodies:e});else for(var n in e)e.hasOwnProperty(n)&&c.deserializeBodyUpdate(e[n],this.bodies[n])},u.prototype.addBody=function(t){c.assignID("body",t),this.bodies[t[l]]=t,this.worker.postMessage({type:a.ADD_BODY,body:c.serializeBody(t)})},u.prototype.removeBody=function(t){this.worker.postMessage({type:a.REMOVE_BODY,bodyID:t[l]}),delete this.bodies[t[l]]},u.prototype.applyBodyMethod=function(t,e,n){switch(e){case"applyForce":case"applyImpulse":this.worker.postMessage({type:a.APPLY_BODY_METHOD,bodyID:t[l],methodName:e,args:[n[0].toArray(),n[1].toArray()]});break;default:throw new Error("Unexpected methodName: %s",e)}},u.prototype.updateBodyProperties=function(t){this.worker.postMessage({type:a.UPDATE_BODY_PROPERTIES,body:c.serializeBody(t)})},u.prototype.getMaterial=function(t){},u.prototype.addMaterial=function(t){this.worker.postMessage({type:a.ADD_MATERIAL,materialConfig:t})},u.prototype.addContactMaterial=function(t,e,n){this.worker.postMessage({type:a.ADD_CONTACT_MATERIAL,materialName1:t,materialName2:e,contactMaterialConfig:n})},u.prototype.addConstraint=function(t){c.assignID("constraint",t),this.worker.postMessage({type:a.ADD_CONSTRAINT,constraint:c.serializeConstraint(t)})},u.prototype.removeConstraint=function(t){this.worker.postMessage({type:a.REMOVE_CONSTRAINT,constraintID:t[l]})},u.prototype.getContacts=function(){var t=this.bodies;return this.contacts.map(function(e){return c.deserializeContact(e,t)})}},function(t,e){t.exports={GRAVITY:-9.8,MAX_INTERVAL:4/60,ITERATIONS:10,CONTACT_MATERIAL:{friction:.01,restitution:.3,contactEquationStiffness:1e8,contactEquationRelaxation:3,frictionEquationStiffness:1e8,frictionEquationRegularization:3}}},function(t,e,n){var i=n(12),r=n(160),o=r.GRAVITY,a=r.CONTACT_MATERIAL,s=n(63),c=n(159),l=n(154);n(61),t.exports=AFRAME.registerSystem("physics",{schema:{driver:{default:"local",oneOf:["local","worker","network","ammo"]},networkUrl:{default:"",if:{driver:"network"}},workerFps:{default:60,if:{driver:"worker"}},workerInterpolate:{default:!0,if:{driver:"worker"}},workerInterpBufferSize:{default:2,if:{driver:"worker"}},workerEngine:{default:"cannon",if:{driver:"worker"},oneOf:["cannon"]},workerDebug:{default:!1,if:{driver:"worker"}},gravity:{default:o},iterations:{default:r.ITERATIONS},friction:{default:a.friction},restitution:{default:a.restitution},contactEquationStiffness:{default:a.contactEquationStiffness},contactEquationRelaxation:{default:a.contactEquationRelaxation},frictionEquationStiffness:{default:a.frictionEquationStiffness},frictionEquationRegularization:{default:a.frictionEquationRegularization},maxInterval:{default:4/60},debug:{default:!1}},init:function(){var t=this.data;switch(this.debug=t.debug,this.callbacks={beforeStep:[],step:[],afterStep:[]},this.listeners={},this.driver=null,t.driver){case"local":this.driver=new s;break;case"network":this.driver=new l(t.networkUrl);break;case"worker":this.driver=new c({fps:t.workerFps,engine:t.workerEngine,interpolate:t.workerInterpolate,interpolationBufferSize:t.workerInterpBufferSize,debug:t.workerDebug});break;default:throw new Error('[physics] Driver not recognized: "%s".',t.driver)}this.driver.init({quatNormalizeSkip:0,quatNormalizeFast:!1,solverIterations:t.iterations,gravity:t.gravity}),this.driver.addMaterial({name:"defaultMaterial"}),this.driver.addContactMaterial("defaultMaterial","defaultMaterial",{friction:t.friction,restitution:t.restitution,contactEquationStiffness:t.contactEquationStiffness,contactEquationRelaxation:t.contactEquationRelaxation,frictionEquationStiffness:t.frictionEquationStiffness,frictionEquationRegularization:t.frictionEquationRegularization})},tick:function(t,e){if(e){var n,i=this.callbacks;for(n=0;n<this.callbacks.beforeStep.length;n++)this.callbacks.beforeStep[n].beforeStep(t,e);for(this.driver.step(Math.min(e/1e3,this.data.maxInterval)),n=0;n<i.step.length;n++)i.step[n].step(t,e);for(n=0;n<i.afterStep.length;n++)i.afterStep[n].afterStep(t,e)}},addBody:function(t){var e=this.driver;t.__applyImpulse=t.applyImpulse,t.applyImpulse=function(){e.applyBodyMethod(t,"applyImpulse",arguments)},t.__applyForce=t.applyForce,t.applyForce=function(){e.applyBodyMethod(t,"applyForce",arguments)},t.updateProperties=function(){e.updateBodyProperties(t)},this.listeners[t.id]=function(e){t.el.emit("collide",e)},t.addEventListener("collide",this.listeners[t.id]),this.driver.addBody(t)},removeBody:function(t){this.driver.removeBody(t),t.removeEventListener("collide",this.listeners[t.id]),delete this.listeners[t.id],t.applyImpulse=t.__applyImpulse,delete t.__applyImpulse,t.applyForce=t.__applyForce,delete t.__applyForce,delete t.updateProperties},addConstraint:function(t){t.type||(t instanceof i.LockConstraint?t.type="LockConstraint":t instanceof i.DistanceConstraint?t.type="DistanceConstraint":t instanceof i.HingeConstraint?t.type="HingeConstraint":t instanceof i.ConeTwistConstraint?t.type="ConeTwistConstraint":t instanceof i.PointToPointConstraint&&(t.type="PointToPointConstraint")),this.driver.addConstraint(t)},removeConstraint:function(t){this.driver.removeConstraint(t)},addComponent:function(t){var e=this.callbacks;t.beforeStep&&e.beforeStep.push(t),t.step&&e.step.push(t),t.afterStep&&e.afterStep.push(t)},removeComponent:function(t){var e=this.callbacks;t.beforeStep&&e.beforeStep.splice(e.beforeStep.indexOf(t),1),t.step&&e.step.splice(e.step.indexOf(t),1),t.afterStep&&e.afterStep.splice(e.afterStep.indexOf(t),1)},getContacts:function(){return this.driver.getContacts()},getMaterial:function(t){return this.driver.getMaterial(t)}})},function(t,e,n){var i=n(12);t.exports=AFRAME.registerComponent("constraint",{multiple:!0,schema:{type:{default:"lock",oneOf:["coneTwist","distance","hinge","lock","pointToPoint"]},target:{type:"selector"},maxForce:{default:1e6,min:0},collideConnected:{default:!0},wakeUpBodies:{default:!0},distance:{default:0,min:0},pivot:{type:"vec3"},targetPivot:{type:"vec3"},axis:{type:"vec3",default:{x:0,y:0,z:1}},targetAxis:{type:"vec3",default:{x:0,y:0,z:1}}},init:function(){this.system=this.el.sceneEl.systems.physics,this.constraint=null},remove:function(){this.constraint&&(this.system.removeConstraint(this.constraint),this.constraint=null)},update:function(){var t=this.el,e=this.data;this.remove(),t.body&&e.target.body?(this.constraint=this.createConstraint(),this.system.addConstraint(this.constraint)):(t.body?e.target:t).addEventListener("body-loaded",this.update.bind(this,{}))},createConstraint:function(){var t,e=this.data,n=new i.Vec3(e.pivot.x,e.pivot.y,e.pivot.z),r=new i.Vec3(e.targetPivot.x,e.targetPivot.y,e.targetPivot.z),o=new i.Vec3(e.axis.x,e.axis.y,e.axis.z),a=new i.Vec3(e.targetAxis.x,e.targetAxis.y,e.targetAxis.z);switch(e.type){case"lock":(t=new i.LockConstraint(this.el.body,e.target.body,{maxForce:e.maxForce})).type="LockConstraint";break;case"distance":(t=new i.DistanceConstraint(this.el.body,e.target.body,e.distance,e.maxForce)).type="DistanceConstraint";break;case"hinge":(t=new i.HingeConstraint(this.el.body,e.target.body,{pivotA:n,pivotB:r,axisA:o,axisB:a,maxForce:e.maxForce})).type="HingeConstraint";break;case"coneTwist":(t=new i.ConeTwistConstraint(this.el.body,e.target.body,{pivotA:n,pivotB:r,axisA:o,axisB:a,maxForce:e.maxForce})).type="ConeTwistConstraint";break;case"pointToPoint":(t=new i.PointToPointConstraint(this.el.body,n,e.target.body,r,e.maxForce)).type="PointToPointConstraint";break;default:throw new Error("[constraint] Unexpected type: "+e.type)}return t.collideConnected=e.collideConnected,t}})},function(t,e,n){var i=n(46),r=AFRAME.utils.extend({},i.definition);r.schema=AFRAME.utils.extend({},i.definition.schema,{type:{default:"static",oneOf:["static","dynamic"]},mass:{default:0}}),t.exports=AFRAME.registerComponent("static-body",r)},function(t,e,n){var i=n(46),r=AFRAME.utils.extend({},i.definition);t.exports=AFRAME.registerComponent("dynamic-body",r)},function(t,e,n){var i=n(12);i.shape2mesh=function(t){for(var e=new THREE.Object3D,n=0;n<t.shapes.length;n++){var r,o=t.shapes[n];switch(o.type){case i.Shape.types.SPHERE:var a=new THREE.SphereGeometry(o.radius,8,8);r=new THREE.Mesh(a,this.currentMaterial);break;case i.Shape.types.PARTICLE:r=new THREE.Mesh(this.particleGeo,this.particleMaterial);var s=this.settings;r.scale.set(s.particleSize,s.particleSize,s.particleSize);break;case i.Shape.types.PLANE:var c=new THREE.PlaneGeometry(10,10,4,4);r=new THREE.Object3D;var l=new THREE.Object3D,u=new THREE.Mesh(c,this.currentMaterial);u.scale.set(100,100,100),l.add(u),u.castShadow=!0,u.receiveShadow=!0,r.add(l);break;case i.Shape.types.BOX:var h=new THREE.BoxGeometry(2*o.halfExtents.x,2*o.halfExtents.y,2*o.halfExtents.z);r=new THREE.Mesh(h,this.currentMaterial);break;case i.Shape.types.CONVEXPOLYHEDRON:for(var d=new THREE.Geometry,p=0;p<o.vertices.length;p++){var f=o.vertices[p];d.vertices.push(new THREE.Vector3(f.x,f.y,f.z))}for(p=0;p<o.faces.length;p++)for(var m=o.faces[p],g=m[0],v=1;v<m.length-1;v++){var y=m[v],A=m[v+1];d.faces.push(new THREE.Face3(g,y,A))}d.computeBoundingSphere(),d.computeFaceNormals(),r=new THREE.Mesh(d,this.currentMaterial);break;case i.Shape.types.HEIGHTFIELD:c=new THREE.Geometry;for(var w=new i.Vec3,b=new i.Vec3,M=new i.Vec3,E=0;E<o.data.length-1;E++)for(var x=0;x<o.data[E].length-1;x++)for(var T=0;T<2;T++)o.getConvexTrianglePillar(E,x,0===T),w.copy(o.pillarConvex.vertices[0]),b.copy(o.pillarConvex.vertices[1]),M.copy(o.pillarConvex.vertices[2]),w.vadd(o.pillarOffset,w),b.vadd(o.pillarOffset,b),M.vadd(o.pillarOffset,M),c.vertices.push(new THREE.Vector3(w.x,w.y,w.z),new THREE.Vector3(b.x,b.y,b.z),new THREE.Vector3(M.x,M.y,M.z)),p=c.vertices.length-3,c.faces.push(new THREE.Face3(p,p+1,p+2));c.computeBoundingSphere(),c.computeFaceNormals(),r=new THREE.Mesh(c,this.currentMaterial);break;case i.Shape.types.TRIMESH:for(c=new THREE.Geometry,w=new i.Vec3,b=new i.Vec3,M=new i.Vec3,p=0;p<o.indices.length/3;p++)o.getTriangleVertices(p,w,b,M),c.vertices.push(new THREE.Vector3(w.x,w.y,w.z),new THREE.Vector3(b.x,b.y,b.z),new THREE.Vector3(M.x,M.y,M.z)),v=c.vertices.length-3,c.faces.push(new THREE.Face3(v,v+1,v+2));c.computeBoundingSphere(),c.computeFaceNormals(),r=new THREE.Mesh(c,this.currentMaterial);break;default:throw"Visual type not recognized: "+o.type}if(r.receiveShadow=!0,r.castShadow=!0,r.children)for(p=0;p<r.children.length;p++)if(r.children[p].castShadow=!0,r.children[p].receiveShadow=!0,r.children[p])for(v=0;v<r.children[p].length;v++)r.children[p].children[v].castShadow=!0,r.children[p].children[v].receiveShadow=!0;var C=t.shapeOffsets[n],S=t.shapeOrientations[n];r.position.set(C.x,C.y,C.z),r.quaternion.set(S.x,S.y,S.z,S.w),e.add(r)}return e},t.exports=i.shape2mesh},function(t,e){t.exports=function(){var t,e,n,i,r,o,a,s,c,l,u,h,d,p,f,m,g,v,y,A=[],w=[],b=0,M=function(){var t=new THREE.Vector3,e=new THREE.Vector3,n=new THREE.Vector3;return function(i,r,o){return t.subVectors(o,i),e.subVectors(r,i),n.crossVectors(t,e),n.normalize()}}();function E(t,e){if(void 0!==t.normal)return t.normal;var n=e[t[0]],i=e[t[1]],r=e[t[2]];return u.subVectors(i,n),h.subVectors(r,n),f.crossVectors(h,u),f.normalize(),t.normal=f.clone()}function x(t,e,n){var i=n[t[0]],r=[],o=E(t,n);e.sort(function(t,e){return r[t.x/3]=void 0!==r[t.x/3]?r[t.x/3]:o.dot(d.subVectors(t,i)),r[e.x/3]=void 0!==r[e.x/3]?r[e.x/3]:o.dot(p.subVectors(e,i)),r[t.x/3]-r[e.x/3]});var a=e.length;for(1===a&&(r[e[0].x/3]=o.dot(d.subVectors(e[0],i)));a-- >0&&r[e[a].x/3]>0;);a+1<e.length&&r[e[a+1].x/3]>0&&(t.visiblePoints=e.splice(a+1))}function T(t,e){for(var n,i=A.length,r=[t],o=e.indexOf(t.visiblePoints.pop());i-- >0;)(n=A[i])!==t&&E(n,e).dot(m.subVectors(e[o],e[n[0]]))>0&&r.push(n);var a,s,c,l,u=i=r.length,h=1===i,d=[],p=0,f=[];if(r[0][0],r[0][1],r[0][1],r[0][2],r[0][2],r[0][0],1===r.length)d=[(n=r[0])[0],n[1],n[1],n[2],n[2],n[0]],w.indexOf(n)>-1&&w.splice(w.indexOf(n),1),n.visiblePoints&&(f=f.concat(n.visiblePoints)),A.splice(A.indexOf(n),1);else for(;i-- >0;){var g;for(n=r[i],w.indexOf(n)>-1&&w.splice(w.indexOf(n),1),n.visiblePoints&&(f=f.concat(n.visiblePoints)),A.splice(A.indexOf(n),1),cEdgeIndex=0;cEdgeIndex<3;){for(g=!1,u=r.length,c=n[cEdgeIndex],l=n[(cEdgeIndex+1)%3];u-- >0&&!g;)if(p=0,(a=r[u])!==n)for(;p<3&&!g;)s=p+1,g=a[p]===c&&a[s%3]===l||a[p]===l&&a[s%3]===c,p++;g&&!h||(d.push(c),d.push(l)),cEdgeIndex++}}i=0;for(var v,y=d.length/2;i<y;)x(v=[d[2*i+1],o,d[2*i]],f,e),A.push(v),void 0!==v.visiblePoints&&w.push(v),i++}var C=function(){var t=new THREE.Vector3,e=new THREE.Vector3,n=new THREE.Vector3;return function(i,r,o){t.subVectors(r,i),e.subVectors(o,i),n.subVectors(o,r);var a=e.dot(t);if(a<0)return e.dot(e);var s=t.dot(t);return a>=s?n.dot(n):e.dot(e)-a*a/s}}();return function(E){for(u=new THREE.Vector3,h=new THREE.Vector3,new THREE.Vector3,d=new THREE.Vector3,p=new THREE.Vector3,f=new THREE.Vector3,m=new THREE.Vector3,g=new THREE.Vector3,v=new THREE.Vector3,y=new THREE.Vector3,points=E.vertices,A=[],w=[],O=t=points.length,e=points.slice(0,6),b=0;O-- >0;)points[O].x<e[0].x&&(e[0]=points[O]),points[O].x>e[1].x&&(e[1]=points[O]),points[O].y<e[2].y&&(e[2]=points[O]),points[O].y<e[3].y&&(e[3]=points[O]),points[O].z<e[4].z&&(e[4]=points[O]),points[O].z<e[5].z&&(e[5]=points[O]);for(i=O=6;O-- >0;)for(i=O-1;i-- >0;)b<(n=e[O].distanceToSquared(e[i]))&&(b=n,r=e[O],o=e[i]);for(O=6,b=0;O-- >0;)n=C(r,o,e[O]),b<n&&(b=n,a=e[O]);for(c=M(r,o,a),l=c.dot(r),b=0,O=t;O-- >0;)n=Math.abs(points[O].dot(c)-l),b<n&&(b=n,s=points[O]);var S=points.indexOf(r),D=points.indexOf(o),_=points.indexOf(a),L=points.indexOf(s),N=[[_,D,S],[D,L,S],[_,L,D],[S,L,_]];g.subVectors(o,r).normalize(),v.subVectors(a,r).normalize(),y.subVectors(s,r).normalize(),y.dot((new THREE.Vector3).crossVectors(v,g))<0&&(N[0].reverse(),N[1].reverse(),N[2].reverse(),N[3].reverse());var I=points.slice();I.splice(I.indexOf(r),1),I.splice(I.indexOf(o),1),I.splice(I.indexOf(a),1),I.splice(I.indexOf(s),1);for(var O=N.length;O-- >0;)x(N[O],I,points),void 0!==N[O].visiblePoints&&w.push(N[O]),A.push(N[O]);!function(t){for(;w.length>0;)T(w.shift(),t)}(points);for(var j=A.length;j-- >0;)E.faces[j]=new THREE.Face3(A[j][2],A[j][1],A[j][0],A[j].normal);return E.normalsNeedUpdate=!0,E}}()},function(t,e,n){var i=n(12),r=n(166),o=Math.PI/2,a={BOX:"Box",CYLINDER:"Cylinder",SPHERE:"Sphere",HULL:"ConvexPolyhedron",MESH:"Trimesh"},s=function(t,e){var n;if((e=e||{}).type===a.BOX)return l(t);if(e.type===a.CYLINDER)return function(t,e){var n,r,a,s=new THREE.Box3,c=["x","y","z"],l=e.cylinderAxis||"y",u=c.splice(c.indexOf(l),1)&&c;return s.setFromObject(t),isFinite(s.min.lengthSq())?(r=s.max[l]-s.min[l],a=.5*Math.max(s.max[u[0]]-s.min[u[0]],s.max[u[1]]-s.min[u[1]]),(n=new i.Cylinder(a,a,r,12))._type=i.Shape.types.CYLINDER,n.radiusTop=a,n.radiusBottom=a,n.height=r,n.numSegments=12,n.orientation=new i.Quaternion,n.orientation.setFromEuler("y"===l?o:0,"z"===l?o:0,0,"XYZ").normalize(),n):null}(t,e);if(e.type===a.SPHERE)return function(t,e){if(e.sphereRadius)return new i.Sphere(e.sphereRadius);var n=u(t);return n?(n.computeBoundingSphere(),new i.Sphere(n.boundingSphere.radius)):null}(t,e);if(e.type===a.HULL)return function(t){var e,n,o,a,s=u(t);if(!s||!s.vertices.length)return null;for(e=0;e<s.vertices.length;e++)s.vertices[e].x+=1e-4*(Math.random()-.5),s.vertices[e].y+=1e-4*(Math.random()-.5),s.vertices[e].z+=1e-4*(Math.random()-.5);for(a=r(s),n=new Array(a.vertices.length),e=0;e<a.vertices.length;e++)n[e]=new i.Vec3(a.vertices[e].x,a.vertices[e].y,a.vertices[e].z);for(o=new Array(a.faces.length),e=0;e<a.faces.length;e++)o[e]=[a.faces[e].a,a.faces[e].b,a.faces[e].c];return new i.ConvexPolyhedron(n,o)}(t);if(e.type===a.MESH)return(n=u(t))?function(t){var e,n=h(t);return n.length?(e=Object.keys(n).map(Number),new i.Trimesh(n,e)):null}(n):null;if(e.type)throw new Error('[CANNON.mesh2shape] Invalid type "%s".',e.type);if(!(n=u(t)))return null;switch(n.metadata?n.metadata.type:n.type){case"BoxGeometry":case"BoxBufferGeometry":return c(n);case"CylinderGeometry":case"CylinderBufferGeometry":return function(t){var e,n=t.metadata?t.metadata.parameters:t.parameters;return(e=new i.Cylinder(n.radiusTop,n.radiusBottom,n.height,n.radialSegments))._type=i.Shape.types.CYLINDER,e.radiusTop=n.radiusTop,e.radiusBottom=n.radiusBottom,e.height=n.height,e.numSegments=n.radialSegments,e.orientation=new i.Quaternion,e.orientation.setFromEuler(THREE.Math.degToRad(-90),0,0,"XYZ").normalize(),e}(n);case"PlaneGeometry":case"PlaneBufferGeometry":return function(t){t.computeBoundingBox();var e=t.boundingBox;return new i.Box(new i.Vec3((e.max.x-e.min.x)/2||.1,(e.max.y-e.min.y)/2||.1,(e.max.z-e.min.z)/2||.1))}(n);case"SphereGeometry":case"SphereBufferGeometry":return function(t){var e=t.metadata?t.metadata.parameters:t.parameters;return new i.Sphere(e.radius)}(n);case"TubeGeometry":case"Geometry":case"BufferGeometry":return l(t);default:return c(n)}};function c(t){if(!h(t).length)return null;t.computeBoundingBox();var e=t.boundingBox;return new i.Box(new i.Vec3((e.max.x-e.min.x)/2,(e.max.y-e.min.y)/2,(e.max.z-e.min.z)/2))}function l(t){var e,n,r,o=new THREE.Box3;return o.setFromObject(t),isFinite(o.min.lengthSq())?(e=new i.Box(new i.Vec3((o.max.x-o.min.x)/2,(o.max.y-o.min.y)/2,(o.max.z-o.min.z)/2)),t.updateMatrixWorld(),(r=new THREE.Vector3).setFromMatrixPosition(t.matrixWorld),(n=o.translate(r.negate()).getCenter()).lengthSq()&&(e.offset=n),e):null}function u(t){var e,n,i=function(t){var e=[];return t.traverse(function(t){"Mesh"===t.type&&e.push(t)}),e}(t),r=new THREE.Geometry,o=new THREE.Geometry;if(0===i.length)return null;if(1===i.length){var a=new THREE.Vector3,s=new THREE.Quaternion,c=new THREE.Vector3;return i[0].geometry.isBufferGeometry?i[0].geometry.attributes.position&&i[0].geometry.attributes.position.itemSize>2&&r.fromBufferGeometry(i[0].geometry):r=i[0].geometry.clone(),r.metadata=i[0].geometry.metadata,i[0].updateMatrixWorld(),i[0].matrixWorld.decompose(a,s,c),r.scale(c.x,c.y,c.z)}for(;n=i.pop();)if(n.updateMatrixWorld(),n.geometry.isBufferGeometry){if(n.geometry.attributes.position&&n.geometry.attributes.position.itemSize>2){var l=new THREE.Geometry;l.fromBufferGeometry(n.geometry),o.merge(l,n.matrixWorld),l.dispose()}}else o.merge(n.geometry,n.matrixWorld);return(e=new THREE.Matrix4).scale(t.scale),o.applyMatrix(e),o}function h(t){return t.attributes||(t=(new THREE.BufferGeometry).fromGeometry(t)),(t.attributes.position||{}).array||[]}s.Type=a,t.exports=i.mesh2shape=s},function(t,e){t.exports=AFRAME.registerComponent("velocity",{schema:{type:"vec3"},init:function(){this.system=this.el.sceneEl.systems.physics,this.system&&this.system.addComponent(this)},remove:function(){this.system&&this.system.removeComponent(this)},tick:function(t,e){e&&(this.system||this.afterStep(t,e))},afterStep:function(t,e){if(e){var n=this.el.sceneEl.systems.physics||{data:{maxInterval:1/60}},i=this.el.getAttribute("velocity")||{x:0,y:0,z:0},r=this.el.getAttribute("position")||{x:0,y:0,z:0};e=Math.min(e,1e3*n.data.maxInterval),this.el.setAttribute("position",{x:r.x+i.x*e/1e3,y:r.y+i.y*e/1e3,z:r.z+i.z*e/1e3})}}})},function(t,e,n){t.exports={velocity:n(168),registerAll:function(t){this._registered||((t=t||window.AFRAME).components.velocity||t.registerComponent("velocity",this.velocity),this._registered=!0)}}},function(t,e){function n(){this.data={keys:[]}}t.exports=n,n.prototype.get=function(t,e){if(t>e){var n=e;e=t,t=n}return this.data[t+"-"+e]},n.prototype.set=function(t,e,n){if(t>e){var i=e;e=t,t=i}var r=t+"-"+e;this.get(t,e)||this.data.keys.push(r),this.data[r]=n},n.prototype.reset=function(){for(var t=this.data,e=t.keys;e.length>0;)delete t[e.pop()]}},function(t,e){function n(){this.current=[],this.previous=[]}function i(t,e){t.push((4294901760&e)>>16,65535&e)}t.exports=n,n.prototype.getKey=function(t,e){if(e<t){var n=e;e=t,t=n}return t<<16|e},n.prototype.set=function(t,e){for(var n=this.getKey(t,e),i=this.current,r=0;n>i[r];)r++;if(n!==i[r]){for(e=i.length-1;e>=r;e--)i[e+1]=i[e];i[r]=n}},n.prototype.tick=function(){var t=this.current;this.current=this.previous,this.previous=t,this.current.length=0},n.prototype.getDiff=function(t,e){for(var n=this.current,r=this.previous,o=n.length,a=r.length,s=0,c=0;c<o;c++){for(var l=n[c];l>r[s];)s++;l===r[s]||i(t,l)}for(s=0,c=0;c<a;c++){for(var u=r[c];u>n[s];)s++;n[s]===u||i(e,u)}}},function(t,e,n){t.exports=y,n(5);var i=n(3),r=n(6),o=n(68),a=(n(8),n(48),n(72)),s=n(49),c=n(74),l=n(171),u=n(33),h=n(69),d=n(9),p=n(170),f=n(32),m=n(11),g=n(41),v=n(66);function y(t){t=t||{},s.apply(this),this.dt=-1,this.allowSleep=!!t.allowSleep,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=void 0!==t.quatNormalizeSkip?t.quatNormalizeSkip:0,this.quatNormalizeFast=void 0!==t.quatNormalizeFast&&t.quatNormalizeFast,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new i,t.gravity&&this.gravity.copy(t.gravity),this.broadphase=void 0!==t.broadphase?t.broadphase:new v,this.bodies=[],this.solver=void 0!==t.solver?t.solver:new o,this.constraints=[],this.narrowphase=new a(this),this.collisionMatrix=new c,this.collisionMatrixPrevious=new c,this.bodyOverlapKeeper=new l,this.shapeOverlapKeeper=new l,this.materials=[],this.contactmaterials=[],this.contactMaterialTable=new p,this.defaultMaterial=new u("default"),this.defaultContactMaterial=new h(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.accumulator=0,this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.idToBodyMap={},this.broadphase.setWorld(this)}y.prototype=new s,new m;var A=new g;if(y.prototype.getContactMaterial=function(t,e){return this.contactMaterialTable.get(t.id,e.id)},y.prototype.numObjects=function(){return this.bodies.length},y.prototype.collisionMatrixTick=function(){var t=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=t,this.collisionMatrix.reset(),this.bodyOverlapKeeper.tick(),this.shapeOverlapKeeper.tick()},y.prototype.add=y.prototype.addBody=function(t){-1===this.bodies.indexOf(t)&&(t.index=this.bodies.length,this.bodies.push(t),t.world=this,t.initPosition.copy(t.position),t.initVelocity.copy(t.velocity),t.timeLastSleepy=this.time,t instanceof d&&(t.initAngularVelocity.copy(t.angularVelocity),t.initQuaternion.copy(t.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=t,this.idToBodyMap[t.id]=t,this.dispatchEvent(this.addBodyEvent))},y.prototype.addConstraint=function(t){this.constraints.push(t)},y.prototype.removeConstraint=function(t){var e=this.constraints.indexOf(t);-1!==e&&this.constraints.splice(e,1)},y.prototype.rayTest=function(t,e,n){n instanceof f?this.raycastClosest(t,e,{skipBackfaces:!0},n):this.raycastAll(t,e,{skipBackfaces:!0},n)},y.prototype.raycastAll=function(t,e,n,i){return n.mode=g.ALL,n.from=t,n.to=e,n.callback=i,A.intersectWorld(this,n)},y.prototype.raycastAny=function(t,e,n,i){return n.mode=g.ANY,n.from=t,n.to=e,n.result=i,A.intersectWorld(this,n)},y.prototype.raycastClosest=function(t,e,n,i){return n.mode=g.CLOSEST,n.from=t,n.to=e,n.result=i,A.intersectWorld(this,n)},y.prototype.remove=function(t){t.world=null;var e=this.bodies.length-1,n=this.bodies,i=n.indexOf(t);if(-1!==i){n.splice(i,1);for(var r=0;r!==n.length;r++)n[r].index=r;this.collisionMatrix.setNumObjects(e),this.removeBodyEvent.body=t,delete this.idToBodyMap[t.id],this.dispatchEvent(this.removeBodyEvent)}},y.prototype.removeBody=y.prototype.remove,y.prototype.getBodyById=function(t){return this.idToBodyMap[t]},y.prototype.getShapeById=function(t){for(var e=this.bodies,n=0,i=e.length;n<i;n++)for(var r=e[n].shapes,o=0,a=r.length;o<a;o++){var s=r[o];if(s.id===t)return s}},y.prototype.addMaterial=function(t){this.materials.push(t)},y.prototype.addContactMaterial=function(t){this.contactmaterials.push(t),this.contactMaterialTable.set(t.materials[0].id,t.materials[1].id,t)},"undefined"==typeof performance&&(performance={}),!performance.now){var w=Date.now();performance.timing&&performance.timing.navigationStart&&(w=performance.timing.navigationStart),performance.now=function(){return Date.now()-w}}new i,y.prototype.step=function(t,e,n){if(n=n||10,0===(e=e||0))this.internalStep(t),this.time+=t;else{this.accumulator+=e;for(var i=0;this.accumulator>=t&&i<n;)this.internalStep(t),this.accumulator-=t,i++;for(var r=this.accumulator%t/t,o=0;o!==this.bodies.length;o++){var a=this.bodies[o];a.previousPosition.lerp(a.position,r,a.interpolatedPosition),a.previousQuaternion.slerp(a.quaternion,r,a.interpolatedQuaternion),a.previousQuaternion.normalize()}this.time+=e}};var b,M,E,x,T,C,S={type:"postStep"},D={type:"preStep"},_={type:d.COLLIDE_EVENT_NAME,body:null,contact:null},L=[],N=[],I=[],O=[];new i,new i,new i,new i,new i,new i,new i,new i,new i,new r,new r,new r,new i,y.prototype.internalStep=function(t){this.dt=t;var e,n=this.contacts,i=I,r=O,o=this.numObjects(),a=this.bodies,s=this.solver,c=this.gravity,l=this.doProfiling,u=this.profile,h=d.DYNAMIC,p=this.constraints,f=N,m=(c.norm(),c.x),g=c.y,v=c.z,y=0;for(l&&(e=performance.now()),y=0;y!==o;y++)if((R=a[y]).type===h){var A=R.force,w=R.mass;A.x+=w*m,A.y+=w*g,A.z+=w*v}y=0;for(var b=this.subsystems.length;y!==b;y++)this.subsystems[y].update();l&&(e=performance.now()),i.length=0,r.length=0,this.broadphase.collisionPairs(this,i,r),l&&(u.broadphase=performance.now()-e);var M=p.length;for(y=0;y!==M;y++)if(!(F=p[y]).collideConnected)for(var E=i.length-1;E>=0;E-=1)(F.bodyA===i[E]&&F.bodyB===r[E]||F.bodyB===i[E]&&F.bodyA===r[E])&&(i.splice(E,1),r.splice(E,1));this.collisionMatrixTick(),l&&(e=performance.now());var x=L,T=n.length;for(y=0;y!==T;y++)x.push(n[y]);n.length=0;var C=this.frictionEquations.length;for(y=0;y!==C;y++)f.push(this.frictionEquations[y]);for(this.frictionEquations.length=0,this.narrowphase.getContacts(i,r,this,n,x,this.frictionEquations,f),l&&(u.narrowphase=performance.now()-e),l&&(e=performance.now()),y=0;y<this.frictionEquations.length;y++)s.addEquation(this.frictionEquations[y]);for(var j=n.length,P=0;P!==j;P++){var R=(F=n[P]).bi,k=F.bj,z=F.si,B=F.sj;(R.material&&k.material&&this.getContactMaterial(R.material,k.material)||this.defaultContactMaterial).friction,R.material&&k.material&&(R.material.friction>=0&&k.material.friction>=0&&(R.material.friction,k.material.friction),R.material.restitution>=0&&k.material.restitution>=0&&(F.restitution=R.material.restitution*k.material.restitution)),s.addEquation(F),R.allowSleep&&R.type===d.DYNAMIC&&R.sleepState===d.SLEEPING&&k.sleepState===d.AWAKE&&k.type!==d.STATIC&&k.velocity.norm2()+k.angularVelocity.norm2()>=2*Math.pow(k.sleepSpeedLimit,2)&&(R._wakeUpAfterNarrowphase=!0),k.allowSleep&&k.type===d.DYNAMIC&&k.sleepState===d.SLEEPING&&R.sleepState===d.AWAKE&&R.type!==d.STATIC&&R.velocity.norm2()+R.angularVelocity.norm2()>=2*Math.pow(R.sleepSpeedLimit,2)&&(k._wakeUpAfterNarrowphase=!0),this.collisionMatrix.set(R,k,!0),this.collisionMatrixPrevious.get(R,k)||(_.body=k,_.contact=F,R.dispatchEvent(_),_.body=R,k.dispatchEvent(_)),this.bodyOverlapKeeper.set(R.id,k.id),this.shapeOverlapKeeper.set(z.id,B.id)}for(this.emitContactEvents(),l&&(u.makeContactConstraints=performance.now()-e,e=performance.now()),y=0;y!==o;y++)(R=a[y])._wakeUpAfterNarrowphase&&(R.wakeUp(),R._wakeUpAfterNarrowphase=!1);for(M=p.length,y=0;y!==M;y++){var F;(F=p[y]).update(),E=0;for(var U=F.equations.length;E!==U;E++){var H=F.equations[E];s.addEquation(H)}}s.solve(t,this),l&&(u.solve=performance.now()-e),s.removeAllEquations();var G=Math.pow;for(y=0;y!==o;y++)if((R=a[y]).type&h){var Q=G(1-R.linearDamping,t),V=R.velocity;V.mult(Q,V);var Y=R.angularVelocity;if(Y){var W=G(1-R.angularDamping,t);Y.mult(W,Y)}}for(this.dispatchEvent(D),y=0;y!==o;y++)(R=a[y]).preStep&&R.preStep.call(R);l&&(e=performance.now());var q=this.stepnumber%(this.quatNormalizeSkip+1)==0,X=this.quatNormalizeFast;for(y=0;y!==o;y++)a[y].integrate(t,q,X);for(this.clearForces(),this.broadphase.dirty=!0,l&&(u.integrate=performance.now()-e),this.time+=t,this.stepnumber+=1,this.dispatchEvent(S),y=0;y!==o;y++){var Z=(R=a[y]).postStep;Z&&Z.call(R)}if(this.allowSleep)for(y=0;y!==o;y++)a[y].sleepTick(this.time)},y.prototype.emitContactEvents=(b=[],M=[],E={type:"beginContact",bodyA:null,bodyB:null},x={type:"endContact",bodyA:null,bodyB:null},T={type:"beginShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},C={type:"endShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},function(){var t=this.hasAnyEventListener("beginContact"),e=this.hasAnyEventListener("endContact");if((t||e)&&this.bodyOverlapKeeper.getDiff(b,M),t){for(var n=0,i=b.length;n<i;n+=2)E.bodyA=this.getBodyById(b[n]),E.bodyB=this.getBodyById(b[n+1]),this.dispatchEvent(E);E.bodyA=E.bodyB=null}if(e){for(n=0,i=M.length;n<i;n+=2)x.bodyA=this.getBodyById(M[n]),x.bodyB=this.getBodyById(M[n+1]),this.dispatchEvent(x);x.bodyA=x.bodyB=null}b.length=M.length=0;var r=this.hasAnyEventListener("beginShapeContact"),o=this.hasAnyEventListener("endShapeContact");if((r||o)&&this.shapeOverlapKeeper.getDiff(b,M),r){for(n=0,i=b.length;n<i;n+=2){var a=this.getShapeById(b[n]),s=this.getShapeById(b[n+1]);T.shapeA=a,T.shapeB=s,T.bodyA=a.body,T.bodyB=s.body,this.dispatchEvent(T)}T.bodyA=T.bodyB=T.shapeA=T.shapeB=null}if(o){for(n=0,i=M.length;n<i;n+=2)a=this.getShapeById(M[n]),s=this.getShapeById(M[n+1]),C.shapeA=a,C.shapeB=s,C.bodyA=a.body,C.bodyB=s.body,this.dispatchEvent(C);C.bodyA=C.bodyB=C.shapeA=C.shapeB=null}}),y.prototype.clearForces=function(){for(var t=this.bodies,e=t.length,n=0;n!==e;n++){var i=t[n];i.force,i.torque,i.force.set(0,0,0),i.torque.set(0,0,0)}}},function(t,e,n){var i=n(11),r=n(3);function o(t){t=t||{},this.root=t.root||null,this.aabb=t.aabb?t.aabb.clone():new i,this.data=[],this.children=[]}function a(t,e){(e=e||{}).root=null,e.aabb=t,o.call(this,e),this.maxDepth=void 0!==e.maxDepth?e.maxDepth:8}t.exports=a,a.prototype=new o,o.prototype.reset=function(t,e){this.children.length=this.data.length=0},o.prototype.insert=function(t,e,n){var i=this.data;if(n=n||0,!this.aabb.contains(t))return!1;var r=this.children;if(n<(this.maxDepth||this.root.maxDepth)){var o=!1;r.length||(this.subdivide(),o=!0);for(var a=0;8!==a;a++)if(r[a].insert(t,e,n+1))return!0;o&&(r.length=0)}return i.push(e),!0};var s=new r;o.prototype.subdivide=function(){var t=this.aabb,e=t.lowerBound,n=t.upperBound,a=this.children;a.push(new o({aabb:new i({lowerBound:new r(0,0,0)})}),new o({aabb:new i({lowerBound:new r(1,0,0)})}),new o({aabb:new i({lowerBound:new r(1,1,0)})}),new o({aabb:new i({lowerBound:new r(1,1,1)})}),new o({aabb:new i({lowerBound:new r(0,1,1)})}),new o({aabb:new i({lowerBound:new r(0,0,1)})}),new o({aabb:new i({lowerBound:new r(1,0,1)})}),new o({aabb:new i({lowerBound:new r(0,1,0)})})),n.vsub(e,s),s.scale(.5,s);for(var c=this.root||this,l=0;8!==l;l++){var u=a[l];u.root=c;var h=u.aabb.lowerBound;h.x*=s.x,h.y*=s.y,h.z*=s.z,h.vadd(e,h),h.vadd(s,u.aabb.upperBound)}},o.prototype.aabbQuery=function(t,e){this.data,this.children;for(var n=[this];n.length;){var i=n.pop();i.aabb.overlaps(t)&&Array.prototype.push.apply(e,i.data),Array.prototype.push.apply(n,i.children)}return e};var c=new i;o.prototype.rayQuery=function(t,e,n){return t.getAABB(c),c.toLocalFrame(e,c),this.aabbQuery(c,n),n},o.prototype.removeEmptyNodes=function(){for(var t=[this];t.length;){for(var e=t.pop(),n=e.children.length-1;n>=0;n--)e.children[n].data.length||e.children.splice(n,1);Array.prototype.push.apply(t,e.children)}}},function(t,e,n){t.exports=c;var i=n(5),r=n(3),o=(n(6),n(21)),a=n(11),s=n(173);function c(t,e){i.call(this),this.type=i.types.TRIMESH,this.vertices=new Float32Array(t),this.indices=new Int16Array(e),this.normals=new Float32Array(e.length),this.aabb=new a,this.edges=null,this.scale=new r(1,1,1),this.tree=new s,this.updateEdges(),this.updateNormals(),this.updateAABB(),this.updateBoundingSphereRadius(),this.updateTree()}c.prototype=new i,c.prototype.constructor=c;var l=new r;c.prototype.updateTree=function(){var t=this.tree;t.reset(),t.aabb.copy(this.aabb);var e=this.scale;t.aabb.lowerBound.x*=1/e.x,t.aabb.lowerBound.y*=1/e.y,t.aabb.lowerBound.z*=1/e.z,t.aabb.upperBound.x*=1/e.x,t.aabb.upperBound.y*=1/e.y,t.aabb.upperBound.z*=1/e.z;for(var n=new a,i=new r,o=new r,s=new r,c=[i,o,s],l=0;l<this.indices.length/3;l++){var u=3*l;this._getUnscaledVertex(this.indices[u],i),this._getUnscaledVertex(this.indices[u+1],o),this._getUnscaledVertex(this.indices[u+2],s),n.setFromPoints(c),t.insert(n,l)}t.removeEmptyNodes()};var u=new a;c.prototype.getTrianglesInAABB=function(t,e){u.copy(t);var n=this.scale,i=n.x,r=n.y,o=n.z,a=u.lowerBound,s=u.upperBound;return a.x/=i,a.y/=r,a.z/=o,s.x/=i,s.y/=r,s.z/=o,this.tree.aabbQuery(u,e)},c.prototype.setScale=function(t){var e=this.scale.x===this.scale.y===this.scale.z,n=t.x===t.y===t.z;e&&n||this.updateNormals(),this.scale.copy(t),this.updateAABB(),this.updateBoundingSphereRadius()},c.prototype.updateNormals=function(){for(var t=l,e=this.normals,n=0;n<this.indices.length/3;n++){var i=3*n,r=this.indices[i],o=this.indices[i+1],a=this.indices[i+2];this.getVertex(r,m),this.getVertex(o,g),this.getVertex(a,v),c.computeNormal(g,m,v,t),e[i]=t.x,e[i+1]=t.y,e[i+2]=t.z}},c.prototype.updateEdges=function(){for(var t={},e=function(e,n){t[r<o?r+"_"+o:o+"_"+r]=!0},n=0;n<this.indices.length/3;n++){var i=3*n,r=this.indices[i],o=this.indices[i+1];this.indices[i+2],e(),e(),e()}var a=Object.keys(t);for(this.edges=new Int16Array(2*a.length),n=0;n<a.length;n++){var s=a[n].split("_");this.edges[2*n]=parseInt(s[0],10),this.edges[2*n+1]=parseInt(s[1],10)}},c.prototype.getEdgeVertex=function(t,e,n){var i=this.edges[2*t+(e?1:0)];this.getVertex(i,n)};var h=new r,d=new r;c.prototype.getEdgeVector=function(t,e){var n=h,i=d;this.getEdgeVertex(t,0,n),this.getEdgeVertex(t,1,i),i.vsub(n,e)};var p=new r,f=new r;c.computeNormal=function(t,e,n,i){e.vsub(t,f),n.vsub(e,p),p.cross(f,i),i.isZero()||i.normalize()};var m=new r,g=new r,v=new r;c.prototype.getVertex=function(t,e){var n=this.scale;return this._getUnscaledVertex(t,e),e.x*=n.x,e.y*=n.y,e.z*=n.z,e},c.prototype._getUnscaledVertex=function(t,e){var n=3*t,i=this.vertices;return e.set(i[n],i[n+1],i[n+2])},c.prototype.getWorldVertex=function(t,e,n,i){return this.getVertex(t,i),o.pointToWorldFrame(e,n,i,i),i},c.prototype.getTriangleVertices=function(t,e,n,i){var r=3*t;this.getVertex(this.indices[r],e),this.getVertex(this.indices[r+1],n),this.getVertex(this.indices[r+2],i)},c.prototype.getNormal=function(t,e){var n=3*t;return e.set(this.normals[n],this.normals[n+1],this.normals[n+2])};var y=new a;c.prototype.calculateLocalInertia=function(t,e){this.computeLocalAABB(y);var n=y.upperBound.x-y.lowerBound.x,i=y.upperBound.y-y.lowerBound.y,r=y.upperBound.z-y.lowerBound.z;return e.set(1/12*t*(2*i*2*i+2*r*2*r),1/12*t*(2*n*2*n+2*r*2*r),1/12*t*(2*i*2*i+2*n*2*n))};var A=new r;c.prototype.computeLocalAABB=function(t){var e=t.lowerBound,n=t.upperBound,i=this.vertices.length,r=(this.vertices,A);this.getVertex(0,r),e.copy(r),n.copy(r);for(var o=0;o!==i;o++)this.getVertex(o,r),r.x<e.x?e.x=r.x:r.x>n.x&&(n.x=r.x),r.y<e.y?e.y=r.y:r.y>n.y&&(n.y=r.y),r.z<e.z?e.z=r.z:r.z>n.z&&(n.z=r.z)},c.prototype.updateAABB=function(){this.computeLocalAABB(this.aabb)},c.prototype.updateBoundingSphereRadius=function(){for(var t=0,e=this.vertices,n=new r,i=0,o=e.length/3;i!==o;i++){this.getVertex(i,n);var a=n.norm2();a>t&&(t=a)}this.boundingSphereRadius=Math.sqrt(t)},new r;var w=new o,b=new a;c.prototype.calculateWorldAABB=function(t,e,n,i){var r=w,o=b;r.position=t,r.quaternion=e,this.aabb.toWorldFrame(r,o),n.copy(o.lowerBound),i.copy(o.upperBound)},c.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3},c.createTorus=function(t,e,n,i,r){t=t||1,e=e||.5,n=n||8,i=i||6,r=r||2*Math.PI;for(var o=[],a=[],s=0;s<=n;s++)for(var l=0;l<=i;l++){var u=l/i*r,h=s/n*Math.PI*2,d=(t+e*Math.cos(h))*Math.cos(u),p=(t+e*Math.cos(h))*Math.sin(u),f=e*Math.sin(h);o.push(d,p,f)}for(s=1;s<=n;s++)for(l=1;l<=i;l++){var m=(i+1)*s+l-1,g=(i+1)*(s-1)+l-1,v=(i+1)*(s-1)+l,y=(i+1)*s+l;a.push(m,g,y),a.push(g,v,y)}return new c(o,a)}},function(t,e,n){var i=n(3);function r(t,e,n){n=n||{},this.restLength="number"==typeof n.restLength?n.restLength:1,this.stiffness=n.stiffness||100,this.damping=n.damping||1,this.bodyA=t,this.bodyB=e,this.localAnchorA=new i,this.localAnchorB=new i,n.localAnchorA&&this.localAnchorA.copy(n.localAnchorA),n.localAnchorB&&this.localAnchorB.copy(n.localAnchorB),n.worldAnchorA&&this.setWorldAnchorA(n.worldAnchorA),n.worldAnchorB&&this.setWorldAnchorB(n.worldAnchorB)}t.exports=r,r.prototype.setWorldAnchorA=function(t){this.bodyA.pointToLocalFrame(t,this.localAnchorA)},r.prototype.setWorldAnchorB=function(t){this.bodyB.pointToLocalFrame(t,this.localAnchorB)},r.prototype.getWorldAnchorA=function(t){this.bodyA.pointToWorldFrame(this.localAnchorA,t)},r.prototype.getWorldAnchorB=function(t){this.bodyB.pointToWorldFrame(this.localAnchorB,t)};var o=new i,a=new i,s=new i,c=new i,l=new i,u=new i,h=new i,d=new i,p=new i,f=new i,m=new i;r.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,n=this.restLength,i=this.bodyA,r=this.bodyB,g=o,v=a,y=s,A=c,w=m,b=l,M=u,E=h,x=d,T=p,C=f;this.getWorldAnchorA(b),this.getWorldAnchorB(M),b.vsub(i.position,E),M.vsub(r.position,x),M.vsub(b,g);var S=g.norm();v.copy(g),v.normalize(),r.velocity.vsub(i.velocity,y),r.angularVelocity.cross(x,w),y.vadd(w,y),i.angularVelocity.cross(E,w),y.vsub(w,y),v.mult(-t*(S-n)-e*y.dot(v),A),i.force.vsub(A,i.force),r.force.vadd(A,r.force),E.cross(A,T),x.cross(A,C),i.torque.vsub(T,i.torque),r.torque.vadd(C,r.torque)}},function(t,e,n){t.exports=o,n(3),n(6);var i=n(40),r=n(9);function o(t){for(i.call(this),this.iterations=10,this.tolerance=1e-7,this.subsolver=t,this.nodes=[],this.nodePool=[];this.nodePool.length<128;)this.nodePool.push(this.createNode())}o.prototype=new i;var a=[],s=[],c={bodies:[]},l=r.STATIC;function u(t){for(var e=t.length,n=0;n!==e;n++){var i=t[n];if(!(i.visited||i.body.type&l))return i}return!1}var h=[];function d(t,e,n,i){for(h.push(t),t.visited=!0,e(t,n,i);h.length;)for(var r,o=h.pop();r=u(o.children);)r.visited=!0,e(r,n,i),h.push(r)}function p(t,e,n){e.push(t.body);for(var i=t.eqs.length,r=0;r!==i;r++){var o=t.eqs[r];-1===n.indexOf(o)&&n.push(o)}}function f(t,e){return e.id-t.id}o.prototype.createNode=function(){return{body:null,children:[],eqs:[],visited:!1}},o.prototype.solve=function(t,e){for(var n=a,i=this.nodePool,r=e.bodies,o=this.equations,l=o.length,h=r.length,m=this.subsolver;i.length<h;)i.push(this.createNode());n.length=h;for(var g=0;g<h;g++)n[g]=i[g];for(g=0;g!==h;g++){var v=n[g];v.body=r[g],v.children.length=0,v.eqs.length=0,v.visited=!1}for(var y=0;y!==l;y++){var A=o[y],w=(g=r.indexOf(A.bi),r.indexOf(A.bj)),b=n[g],M=n[w];b.children.push(M),b.eqs.push(A),M.children.push(b),M.eqs.push(A)}var E,x=0,T=s;m.tolerance=this.tolerance,m.iterations=this.iterations;for(var C=c;E=u(n);){T.length=0,C.bodies.length=0,d(E,p,C.bodies,T);var S=T.length;for(T=T.sort(f),g=0;g!==S;g++)m.addEquation(T[g]);m.solve(t,C),m.removeAllEquations(),x++}return x}},function(t,e,n){t.exports=r,n(5);var i=n(3);function r(){this.particles=[],this.density=1,this.smoothingRadius=1,this.speedOfSound=1,this.viscosity=.01,this.eps=1e-6,this.pressures=[],this.densities=[],this.neighbors=[]}n(6),n(65),n(9),n(33),r.prototype.add=function(t){this.particles.push(t),this.neighbors.length<this.particles.length&&this.neighbors.push([])},r.prototype.remove=function(t){var e=this.particles.indexOf(t);-1!==e&&(this.particles.splice(e,1),this.neighbors.length>this.particles.length&&this.neighbors.pop())};var o=new i;r.prototype.getNeighbors=function(t,e){for(var n=this.particles.length,i=t.id,r=this.smoothingRadius*this.smoothingRadius,a=o,s=0;s!==n;s++){var c=this.particles[s];c.position.vsub(t.position,a),i!==c.id&&a.norm2()<r&&e.push(c)}};var a=new i,s=new i,c=new i,l=new i,u=new i,h=new i;r.prototype.update=function(){for(var t=this.particles.length,e=a,n=this.speedOfSound,i=this.eps,r=0;r!==t;r++){var o=this.particles[r];(x=this.neighbors[r]).length=0,this.getNeighbors(o,x),x.push(this.particles[r]);for(var d=x.length,p=0,f=0;f!==d;f++){o.position.vsub(x[f].position,e);var m=e.norm(),g=this.w(m);p+=x[f].mass*g}this.densities[r]=p,this.pressures[r]=n*n*(this.densities[r]-this.density)}var v=s,y=c,A=l,w=u,b=h;for(r=0;r!==t;r++){var M,E,x,T=this.particles[r];for(v.set(0,0,0),y.set(0,0,0),d=(x=this.neighbors[r]).length,f=0;f!==d;f++){var C=x[f];T.position.vsub(C.position,w);var S=w.norm();M=-C.mass*(this.pressures[r]/(this.densities[r]*this.densities[r]+i)+this.pressures[f]/(this.densities[f]*this.densities[f]+i)),this.gradw(w,A),A.mult(M,A),v.vadd(A,v),C.velocity.vsub(T.velocity,b),b.mult(1/(1e-4+this.densities[r]*this.densities[f])*this.viscosity*C.mass,b),E=this.nablaw(S),b.mult(E,b),y.vadd(b,y)}y.mult(T.mass,y),v.mult(T.mass,v),T.force.vadd(y,T.force),T.force.vadd(v,T.force)}},r.prototype.w=function(t){var e=this.smoothingRadius;return 315/(64*Math.PI*Math.pow(e,9))*Math.pow(e*e-t*t,3)},r.prototype.gradw=function(t,e){var n=t.norm(),i=this.smoothingRadius;t.mult(945/(32*Math.PI*Math.pow(i,9))*Math.pow(i*i-n*n,2),e)},r.prototype.nablaw=function(t){var e=this.smoothingRadius;return 945/(32*Math.PI*Math.pow(e,9))*(e*e-t*t)*(7*t*t-3*e*e)}},function(t,e,n){n(5);var i=n(42);function r(t){i.apply(this),this.axisList=[],this.world=null,this.axisIndex=0;var e=this.axisList;this._addBodyHandler=function(t){e.push(t.body)},this._removeBodyHandler=function(t){var n=e.indexOf(t.body);-1!==n&&e.splice(n,1)},t&&this.setWorld(t)}t.exports=r,r.prototype=new i,r.prototype.setWorld=function(t){this.axisList.length=0;for(var e=0;e<t.bodies.length;e++)this.axisList.push(t.bodies[e]);t.removeEventListener("addBody",this._addBodyHandler),t.removeEventListener("removeBody",this._removeBodyHandler),t.addEventListener("addBody",this._addBodyHandler),t.addEventListener("removeBody",this._removeBodyHandler),this.world=t,this.dirty=!0},r.insertionSortX=function(t){for(var e=1,n=t.length;e<n;e++){for(var i=t[e],r=e-1;r>=0&&!(t[r].aabb.lowerBound.x<=i.aabb.lowerBound.x);r--)t[r+1]=t[r];t[r+1]=i}return t},r.insertionSortY=function(t){for(var e=1,n=t.length;e<n;e++){for(var i=t[e],r=e-1;r>=0&&!(t[r].aabb.lowerBound.y<=i.aabb.lowerBound.y);r--)t[r+1]=t[r];t[r+1]=i}return t},r.insertionSortZ=function(t){for(var e=1,n=t.length;e<n;e++){for(var i=t[e],r=e-1;r>=0&&!(t[r].aabb.lowerBound.z<=i.aabb.lowerBound.z);r--)t[r+1]=t[r];t[r+1]=i}return t},r.prototype.collisionPairs=function(t,e,n){var i,o,a=this.axisList,s=a.length,c=this.axisIndex;for(this.dirty&&(this.sortList(),this.dirty=!1),i=0;i!==s;i++){var l=a[i];for(o=i+1;o<s;o++){var u=a[o];if(this.needBroadphaseCollision(l,u)){if(!r.checkBounds(l,u,c))break;this.intersectionTest(l,u,e,n)}}}},r.prototype.sortList=function(){for(var t=this.axisList,e=this.axisIndex,n=t.length,i=0;i!==n;i++){var o=t[i];o.aabbNeedsUpdate&&o.computeAABB()}0===e?r.insertionSortX(t):1===e?r.insertionSortY(t):2===e&&r.insertionSortZ(t)},r.checkBounds=function(t,e,n){var i,r;0===n?(i=t.position.x,r=e.position.x):1===n?(i=t.position.y,r=e.position.y):2===n&&(i=t.position.z,r=e.position.z);var o=t.boundingRadius;return r-e.boundingRadius<i+o},r.prototype.autoDetectAxis=function(){for(var t=0,e=0,n=0,i=0,r=0,o=0,a=this.axisList,s=a.length,c=1/s,l=0;l!==s;l++){var u=a[l],h=u.position.x;t+=h,e+=h*h;var d=u.position.y;n+=d,i+=d*d;var p=u.position.z;r+=p,o+=p*p}var f=e-t*t*c,m=i-n*n*c,g=o-r*r*c;this.axisIndex=f>m?f>g?0:2:m>g?1:2},r.prototype.aabbQuery=function(t,e,n){n=n||[],this.dirty&&(this.sortList(),this.dirty=!1);var i=this.axisIndex,r="x";1===i&&(r="y"),2===i&&(r="z");for(var o=this.axisList,a=(e.lowerBound[r],e.upperBound[r],0);a<o.length;a++){var s=o[a];s.aabbNeedsUpdate&&s.computeAABB(),s.aabb.overlaps(e)&&n.push(s)}return n}},function(t,e,n){var i=n(9),r=n(64),o=n(43),a=n(3),s=n(67);function c(t){if(this.wheelBodies=[],this.coordinateSystem=void 0===t.coordinateSystem?new a(1,2,3):t.coordinateSystem.clone(),this.chassisBody=t.chassisBody,!this.chassisBody){var e=new o(new a(5,2,.5));this.chassisBody=new i(1,e)}this.constraints=[],this.wheelAxes=[],this.wheelForces=[]}t.exports=c,c.prototype.addWheel=function(t){var e=(t=t||{}).body;e||(e=new i(1,new r(1.2))),this.wheelBodies.push(e),this.wheelForces.push(0),new a;var n=void 0!==t.position?t.position.clone():new a,o=new a;this.chassisBody.pointToWorldFrame(n,o),e.position.set(o.x,o.y,o.z);var c=void 0!==t.axis?t.axis.clone():new a(0,1,0);this.wheelAxes.push(c);var l=new s(this.chassisBody,e,{pivotA:n,axisA:c,pivotB:a.ZERO,axisB:c,collideConnected:!1});return this.constraints.push(l),this.wheelBodies.length-1},c.prototype.setSteeringValue=function(t,e){var n=this.wheelAxes[e],i=Math.cos(t),r=Math.sin(t),o=n.x,a=n.y;this.constraints[e].axisA.set(i*o-r*a,r*o+i*a,0)},c.prototype.setMotorSpeed=function(t,e){var n=this.constraints[e];n.enableMotor(),n.motorTargetVelocity=t},c.prototype.disableMotor=function(t){this.constraints[t].disableMotor()};var l=new a;c.prototype.setWheelForce=function(t,e){this.wheelForces[e]=t},c.prototype.applyWheelForce=function(t,e){var n=this.wheelAxes[e],i=this.wheelBodies[e],r=i.torque;n.scale(t,l),i.vectorToWorldFrame(l,l),r.vadd(l,r)},c.prototype.addToWorld=function(t){for(var e=this.constraints,n=this.wheelBodies.concat([this.chassisBody]),i=0;i<n.length;i++)t.addBody(n[i]);for(i=0;i<e.length;i++)t.addConstraint(e[i]);t.addEventListener("preStep",this._update.bind(this))},c.prototype._update=function(){for(var t=this.wheelForces,e=0;e<t.length;e++)this.applyWheelForce(t[e],e)},c.prototype.removeFromWorld=function(t){for(var e=this.constraints,n=this.wheelBodies.concat([this.chassisBody]),i=0;i<n.length;i++)t.remove(n[i]);for(i=0;i<e.length;i++)t.removeConstraint(e[i])};var u=new a;c.prototype.getWheelSpeed=function(t){var e=this.wheelAxes[t],n=this.wheelBodies[t].angularVelocity;return this.chassisBody.vectorToWorldFrame(e,u),n.dot(u)}},function(t,e,n){var i=n(3),r=n(21),o=n(32),a=n(34);function s(t){t=a.defaults(t,{chassisConnectionPointLocal:new i,chassisConnectionPointWorld:new i,directionLocal:new i,directionWorld:new i,axleLocal:new i,axleWorld:new i,suspensionRestLength:1,suspensionMaxLength:2,radius:1,suspensionStiffness:100,dampingCompression:10,dampingRelaxation:10,frictionSlip:1e4,steering:0,rotation:0,deltaRotation:0,rollInfluence:.01,maxSuspensionForce:Number.MAX_VALUE,isFrontWheel:!0,clippedInvContactDotSuspension:1,suspensionRelativeVelocity:0,suspensionForce:0,skidInfo:0,suspensionLength:0,maxSuspensionTravel:1,useCustomSlidingRotationalSpeed:!1,customSlidingRotationalSpeed:-.1}),this.maxSuspensionTravel=t.maxSuspensionTravel,this.customSlidingRotationalSpeed=t.customSlidingRotationalSpeed,this.useCustomSlidingRotationalSpeed=t.useCustomSlidingRotationalSpeed,this.sliding=!1,this.chassisConnectionPointLocal=t.chassisConnectionPointLocal.clone(),this.chassisConnectionPointWorld=t.chassisConnectionPointWorld.clone(),this.directionLocal=t.directionLocal.clone(),this.directionWorld=t.directionWorld.clone(),this.axleLocal=t.axleLocal.clone(),this.axleWorld=t.axleWorld.clone(),this.suspensionRestLength=t.suspensionRestLength,this.suspensionMaxLength=t.suspensionMaxLength,this.radius=t.radius,this.suspensionStiffness=t.suspensionStiffness,this.dampingCompression=t.dampingCompression,this.dampingRelaxation=t.dampingRelaxation,this.frictionSlip=t.frictionSlip,this.steering=0,this.rotation=0,this.deltaRotation=0,this.rollInfluence=t.rollInfluence,this.maxSuspensionForce=t.maxSuspensionForce,this.engineForce=0,this.brake=0,this.isFrontWheel=t.isFrontWheel,this.clippedInvContactDotSuspension=1,this.suspensionRelativeVelocity=0,this.suspensionForce=0,this.skidInfo=0,this.suspensionLength=0,this.sideImpulse=0,this.forwardImpulse=0,this.raycastResult=new o,this.worldTransform=new r,this.isInContact=!1}t.exports=s;var c=new i,l=new i;c=new i,s.prototype.updateWheel=function(t){var e=this.raycastResult;if(this.isInContact){var n=e.hitNormalWorld.dot(e.directionWorld);e.hitPointWorld.vsub(t.position,l),t.getVelocityAtWorldPoint(l,c);var i=e.hitNormalWorld.dot(c);if(n>=-.1)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=10;else{var r=-1/n;this.suspensionRelativeVelocity=i*r,this.clippedInvContactDotSuspension=r}}else e.suspensionLength=this.suspensionRestLength,this.suspensionRelativeVelocity=0,e.directionWorld.scale(-1,e.hitNormalWorld),this.clippedInvContactDotSuspension=1}},function(t,e,n){n(9);var i=n(3),r=n(6),o=(n(32),n(41)),a=n(180);function s(t){this.chassisBody=t.chassisBody,this.wheelInfos=[],this.sliding=!1,this.world=null,this.indexRightAxis=void 0!==t.indexRightAxis?t.indexRightAxis:1,this.indexForwardAxis=void 0!==t.indexForwardAxis?t.indexForwardAxis:0,this.indexUpAxis=void 0!==t.indexUpAxis?t.indexUpAxis:2}t.exports=s,new i,new i,new i;var c=new i,l=new i,u=new i;new o,s.prototype.addWheel=function(t){var e=new a(t=t||{}),n=this.wheelInfos.length;return this.wheelInfos.push(e),n},s.prototype.setSteeringValue=function(t,e){this.wheelInfos[e].steering=t},new i,s.prototype.applyEngineForce=function(t,e){this.wheelInfos[e].engineForce=t},s.prototype.setBrake=function(t,e){this.wheelInfos[e].brake=t},s.prototype.addToWorld=function(t){this.constraints,t.addBody(this.chassisBody);var e=this;this.preStepCallback=function(){e.updateVehicle(t.dt)},t.addEventListener("preStep",this.preStepCallback),this.world=t},s.prototype.getVehicleAxisWorld=function(t,e){e.set(0===t?1:0,1===t?1:0,2===t?1:0),this.chassisBody.vectorToWorldFrame(e,e)},s.prototype.updateVehicle=function(t){for(var e=this.wheelInfos,n=e.length,r=this.chassisBody,o=0;o<n;o++)this.updateWheelTransform(o);this.currentVehicleSpeedKmHour=3.6*r.velocity.norm();var a=new i;for(this.getVehicleAxisWorld(this.indexForwardAxis,a),a.dot(r.velocity)<0&&(this.currentVehicleSpeedKmHour*=-1),o=0;o<n;o++)this.castRay(e[o]);this.updateSuspension(t);var s=new i,c=new i;for(o=0;o<n;o++){var l=(p=e[o]).suspensionForce;l>p.maxSuspensionForce&&(l=p.maxSuspensionForce),p.raycastResult.hitNormalWorld.scale(l*t,s),p.raycastResult.hitPointWorld.vsub(r.position,c),r.applyImpulse(s,c)}this.updateFriction(t);var u=new i,h=new i,d=new i;for(o=0;o<n;o++){var p=e[o];r.getVelocityAtWorldPoint(p.chassisConnectionPointWorld,d);var f=1;switch(this.indexUpAxis){case 1:f=-1}if(p.isInContact){this.getVehicleAxisWorld(this.indexForwardAxis,h);var m=h.dot(p.raycastResult.hitNormalWorld);p.raycastResult.hitNormalWorld.scale(m,u),h.vsub(u,h);var g=h.dot(d);p.deltaRotation=f*g*t/p.radius}!p.sliding&&p.isInContact||0===p.engineForce||!p.useCustomSlidingRotationalSpeed||(p.deltaRotation=(p.engineForce>0?1:-1)*p.customSlidingRotationalSpeed*t),Math.abs(p.brake)>Math.abs(p.engineForce)&&(p.deltaRotation=0),p.rotation+=p.deltaRotation,p.deltaRotation*=.99}},s.prototype.updateSuspension=function(t){for(var e=this.chassisBody.mass,n=this.wheelInfos,i=n.length,r=0;r<i;r++){var o=n[r];if(o.isInContact){var a,s=o.suspensionRestLength-o.suspensionLength;a=o.suspensionStiffness*s*o.clippedInvContactDotSuspension;var c=o.suspensionRelativeVelocity;a-=(c<0?o.dampingCompression:o.dampingRelaxation)*c,o.suspensionForce=a*e,o.suspensionForce<0&&(o.suspensionForce=0)}else o.suspensionForce=0}},s.prototype.removeFromWorld=function(t){this.constraints,t.remove(this.chassisBody),t.removeEventListener("preStep",this.preStepCallback),this.world=null};var h=new i,d=new i;s.prototype.castRay=function(t){var e=h,n=d;this.updateWheelTransformWorld(t);var r=this.chassisBody,o=-1,a=t.suspensionRestLength+t.radius;t.directionWorld.scale(a,e);var s=t.chassisConnectionPointWorld;s.vadd(e,n);var c=t.raycastResult;c.reset();var l=r.collisionResponse;r.collisionResponse=!1,this.world.rayTest(s,n,c),r.collisionResponse=l;var u=c.body;if(t.raycastResult.groundObject=0,u){o=c.distance,t.raycastResult.hitNormalWorld=c.hitNormalWorld,t.isInContact=!0;var p=c.distance;t.suspensionLength=p-t.radius;var f=t.suspensionRestLength-t.maxSuspensionTravel,m=t.suspensionRestLength+t.maxSuspensionTravel;t.suspensionLength<f&&(t.suspensionLength=f),t.suspensionLength>m&&(t.suspensionLength=m,t.raycastResult.reset());var g=t.raycastResult.hitNormalWorld.dot(t.directionWorld),v=new i;r.getVelocityAtWorldPoint(t.raycastResult.hitPointWorld,v);var y=t.raycastResult.hitNormalWorld.dot(v);if(g>=-.1)t.suspensionRelativeVelocity=0,t.clippedInvContactDotSuspension=10;else{var A=-1/g;t.suspensionRelativeVelocity=y*A,t.clippedInvContactDotSuspension=A}}else t.suspensionLength=t.suspensionRestLength+0*t.maxSuspensionTravel,t.suspensionRelativeVelocity=0,t.directionWorld.scale(-1,t.raycastResult.hitNormalWorld),t.clippedInvContactDotSuspension=1;return o},s.prototype.updateWheelTransformWorld=function(t){t.isInContact=!1;var e=this.chassisBody;e.pointToWorldFrame(t.chassisConnectionPointLocal,t.chassisConnectionPointWorld),e.vectorToWorldFrame(t.directionLocal,t.directionWorld),e.vectorToWorldFrame(t.axleLocal,t.axleWorld)},s.prototype.updateWheelTransform=function(t){var e=c,n=l,i=u,o=this.wheelInfos[t];this.updateWheelTransformWorld(o),o.directionLocal.scale(-1,e),n.copy(o.axleLocal),e.cross(n,i),i.normalize(),n.normalize();var a=o.steering,s=new r;s.setFromAxisAngle(e,a);var h=new r;h.setFromAxisAngle(n,o.rotation);var d=o.worldTransform.quaternion;this.chassisBody.quaternion.mult(s,d),d.mult(h,d),d.normalize();var p=o.worldTransform.position;p.copy(o.directionWorld),p.scale(o.suspensionLength,p),p.vadd(o.chassisConnectionPointWorld,p)};var p=[new i(1,0,0),new i(0,1,0),new i(0,0,1)];s.prototype.getWheelTransformWorld=function(t){return this.wheelInfos[t].worldTransform};var f=new i,m=[],g=[];s.prototype.updateFriction=function(t){for(var e=f,n=this.wheelInfos,r=n.length,o=this.chassisBody,a=g,s=m,c=0;c<r;c++)d=(C=n[c]).raycastResult.body,C.sideImpulse=0,C.forwardImpulse=0,a[c]||(a[c]=new i),s[c]||(s[c]=new i);for(c=0;c<r;c++)if(d=(C=n[c]).raycastResult.body){var l=s[c];this.getWheelTransformWorld(c).vectorToWorldFrame(p[this.indexRightAxis],l);var u=C.raycastResult.hitNormalWorld,h=l.dot(u);u.scale(h,e),l.vsub(e,l),l.normalize(),u.cross(l,a[c]),a[c].normalize(),C.sideImpulse=_(o,C.raycastResult.hitPointWorld,d,C.raycastResult.hitPointWorld,l),C.sideImpulse*=1}for(this.sliding=!1,c=0;c<r;c++){var d=(C=n[c]).raycastResult.body,v=0;if(C.slipInfo=1,d){var y=C.brake?C.brake:0;v=w(o,d,C.raycastResult.hitPointWorld,a[c],y);var A=y/(v+=C.engineForce*t);C.slipInfo*=A}if(C.forwardImpulse=0,C.skidInfo=1,d){C.skidInfo=1;var b=C.suspensionForce*t*C.frictionSlip,M=b*b;C.forwardImpulse=v;var E=.5*C.forwardImpulse,x=1*C.sideImpulse,T=E*E+x*x;C.sliding=!1,T>M&&(this.sliding=!0,C.sliding=!0,A=b/Math.sqrt(T),C.skidInfo*=A)}}if(this.sliding)for(c=0;c<r;c++)0!==(C=n[c]).sideImpulse&&C.skidInfo<1&&(C.forwardImpulse*=C.skidInfo,C.sideImpulse*=C.skidInfo);for(c=0;c<r;c++){var C=n[c],S=new i;if(C.raycastResult.hitPointWorld.vsub(o.position,S),0!==C.forwardImpulse){var D=new i;a[c].scale(C.forwardImpulse,D),o.applyImpulse(D,S)}if(0!==C.sideImpulse){d=C.raycastResult.body;var L=new i;C.raycastResult.hitPointWorld.vsub(d.position,L);var N=new i;s[c].scale(C.sideImpulse,N),o.vectorToLocalFrame(S,S),S["xyz"[this.indexUpAxis]]*=C.rollInfluence,o.vectorToWorldFrame(S,S),o.applyImpulse(N,S),N.scale(-1,N),d.applyImpulse(N,L)}}};var v=new i,y=new i,A=new i;function w(t,e,n,i,r){var o=0,a=n,s=v,c=y,l=A;return t.getVelocityAtWorldPoint(a,s),e.getVelocityAtWorldPoint(a,c),s.vsub(c,l),r<(o=-i.dot(l)*(1/(T(t,n,i)+T(e,n,i))))&&(o=r),o<-r&&(o=-r),o}var b=new i,M=new i,E=new i,x=new i;function T(t,e,n){var i=b,r=M,o=E,a=x;return e.vsub(t.position,i),i.cross(n,r),t.invInertiaWorld.vmult(r,a),a.cross(i,o),t.invMass+n.dot(o)}var C=new i,S=new i,D=new i;function _(t,e,n,i,r,o){if(r.norm2()>1.1)return 0;var a=C,s=S,c=D;return t.getVelocityAtWorldPoint(e,a),n.getVelocityAtWorldPoint(i,s),a.vsub(s,c),-.2*r.dot(c)*(1/(t.invMass+n.invMass))}},function(t,e){function n(){this.matrix={}}t.exports=n,n.prototype.get=function(t,e){if(t=t.id,(e=e.id)>t){var n=e;e=t,t=n}return t+"-"+e in this.matrix},n.prototype.set=function(t,e,n){if(t=t.id,(e=e.id)>t){var i=e;e=t,t=i}n?this.matrix[t+"-"+e]=!0:delete this.matrix[t+"-"+e]},n.prototype.reset=function(){this.matrix={}},n.prototype.setNumObjects=function(t){}},function(t,e,n){t.exports=a,n(20);var i=n(39),r=n(38),o=(n(47),n(8),n(3));function a(t,e,n){var a=void 0!==(n=n||{}).maxForce?n.maxForce:1e6,s=new o,c=new o,l=new o;t.position.vadd(e.position,l),l.scale(.5,l),e.pointToLocalFrame(l,c),t.pointToLocalFrame(l,s),i.call(this,t,s,e,c,a),this.xA=t.vectorToLocalFrame(o.UNIT_X),this.xB=e.vectorToLocalFrame(o.UNIT_X),this.yA=t.vectorToLocalFrame(o.UNIT_Y),this.yB=e.vectorToLocalFrame(o.UNIT_Y),this.zA=t.vectorToLocalFrame(o.UNIT_Z),this.zB=e.vectorToLocalFrame(o.UNIT_Z);var u=this.rotationalEquation1=new r(t,e,n),h=this.rotationalEquation2=new r(t,e,n),d=this.rotationalEquation3=new r(t,e,n);this.equations.push(u,h,d)}a.prototype=new i,a.constructor=a,new o,new o,a.prototype.update=function(){var t=this.bodyA,e=this.bodyB,n=(this.motorEquation,this.rotationalEquation1),r=this.rotationalEquation2,o=this.rotationalEquation3;i.prototype.update.call(this),t.vectorToWorldFrame(this.xA,n.axisA),e.vectorToWorldFrame(this.yB,n.axisB),t.vectorToWorldFrame(this.yA,r.axisA),e.vectorToWorldFrame(this.zB,r.axisB),t.vectorToWorldFrame(this.zA,o.axisA),e.vectorToWorldFrame(this.xB,o.axisB)}},function(t,e,n){var i=n(5),r=n(22),o=n(3),a=n(34);function s(t,e){e=a.defaults(e,{maxValue:null,minValue:null,elementSize:1}),this.data=t,this.maxValue=e.maxValue,this.minValue=e.minValue,this.elementSize=e.elementSize,null===e.minValue&&this.updateMinValue(),null===e.maxValue&&this.updateMaxValue(),this.cacheEnabled=!0,i.call(this),this.pillarConvex=new r,this.pillarOffset=new o,this.type=i.types.HEIGHTFIELD,this.updateBoundingSphereRadius(),this._cachedPillars={}}t.exports=s,s.prototype=new i,s.prototype.update=function(){this._cachedPillars={}},s.prototype.updateMinValue=function(){for(var t=this.data,e=t[0][0],n=0;n!==t.length;n++)for(var i=0;i!==t[n].length;i++){var r=t[n][i];r<e&&(e=r)}this.minValue=e},s.prototype.updateMaxValue=function(){for(var t=this.data,e=t[0][0],n=0;n!==t.length;n++)for(var i=0;i!==t[n].length;i++){var r=t[n][i];r>e&&(e=r)}this.maxValue=e},s.prototype.setHeightValueAtIndex=function(t,e,n){this.data[t][e]=n,this.clearCachedConvexTrianglePillar(t,e,!1),t>0&&(this.clearCachedConvexTrianglePillar(t-1,e,!0),this.clearCachedConvexTrianglePillar(t-1,e,!1)),e>0&&(this.clearCachedConvexTrianglePillar(t,e-1,!0),this.clearCachedConvexTrianglePillar(t,e-1,!1)),e>0&&t>0&&this.clearCachedConvexTrianglePillar(t-1,e-1,!0)},s.prototype.getRectMinMax=function(t,e,n,i,r){r=r||[];for(var o=this.data,a=this.minValue,s=t;s<=n;s++)for(var c=e;c<=i;c++){var l=o[s][c];l>a&&(a=l)}r[0]=this.minValue,r[1]=a},s.prototype.getIndexOfPosition=function(t,e,n,i){var r=this.elementSize,o=this.data,a=Math.floor(t/r),s=Math.floor(e/r);return n[0]=a,n[1]=s,i&&(a<0&&(a=0),s<0&&(s=0),a>=o.length-1&&(a=o.length-1),s>=o[0].length-1&&(s=o[0].length-1)),!(a<0||s<0||a>=o.length-1||s>=o[0].length-1)};var c=[],l=new o,u=new o,h=new o,d=new o;s.prototype.getTriangleAt=function(t,e,n,i,r,o){var a=c;this.getIndexOfPosition(t,e,a,n);var s=a[0],l=a[1],u=this.data;n&&(s=Math.min(u.length-2,Math.max(0,s)),l=Math.min(u[0].length-2,Math.max(0,l)));var h=this.elementSize,d=Math.pow(t/h-s,2)+Math.pow(e/h-l,2)>Math.pow(t/h-(s+1),2)+Math.pow(e/h-(l+1),2);return this.getTriangle(s,l,d,i,r,o),d};var p=new o,f=new o,m=new o,g=new o,v=new o;s.prototype.getNormalAt=function(t,e,n,i){var r=p,o=f,a=m,s=g,c=v;this.getTriangleAt(t,e,n,r,o,a),o.vsub(r,s),a.vsub(r,c),s.cross(c,i),i.normalize()},s.prototype.getAabbAtIndex=function(t,e,n){var i=this.data,r=this.elementSize;n.lowerBound.set(t*r,e*r,i[t][e]),n.upperBound.set((t+1)*r,(e+1)*r,i[t+1][e+1])},s.prototype.getHeightAt=function(t,e,n){var i=this.data,r=u,o=h,a=d,s=c;this.getIndexOfPosition(t,e,s,n);var p=s[0],f=s[1];n&&(p=Math.min(i.length-2,Math.max(0,p)),f=Math.min(i[0].length-2,Math.max(0,f)));var m=this.getTriangleAt(t,e,n,r,o,a);!function(t,e,n,i,r,o,a,s,c){c.x=((o-s)*(t-a)+(a-r)*(e-s))/((o-s)*(n-a)+(a-r)*(i-s)),c.y=((s-i)*(t-a)+(n-a)*(e-s))/((o-s)*(n-a)+(a-r)*(i-s)),c.z=1-c.x-c.y}(t,e,r.x,r.y,o.x,o.y,a.x,a.y,l);var g=l;return m?i[p+1][f+1]*g.x+i[p][f+1]*g.y+i[p+1][f]*g.z:i[p][f]*g.x+i[p+1][f]*g.y+i[p][f+1]*g.z},s.prototype.getCacheConvexTrianglePillarKey=function(t,e,n){return t+"_"+e+"_"+(n?1:0)},s.prototype.getCachedConvexTrianglePillar=function(t,e,n){return this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,n)]},s.prototype.setCachedConvexTrianglePillar=function(t,e,n,i,r){this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,n)]={convex:i,offset:r}},s.prototype.clearCachedConvexTrianglePillar=function(t,e,n){delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(t,e,n)]},s.prototype.getTriangle=function(t,e,n,i,r,o){var a=this.data,s=this.elementSize;n?(i.set((t+1)*s,(e+1)*s,a[t+1][e+1]),r.set(t*s,(e+1)*s,a[t][e+1]),o.set((t+1)*s,e*s,a[t+1][e])):(i.set(t*s,e*s,a[t][e]),r.set((t+1)*s,e*s,a[t+1][e]),o.set(t*s,(e+1)*s,a[t][e+1]))},s.prototype.getConvexTrianglePillar=function(t,e,n){var i=this.pillarConvex,a=this.pillarOffset;if(this.cacheEnabled){if(s=this.getCachedConvexTrianglePillar(t,e,n))return this.pillarConvex=s.convex,void(this.pillarOffset=s.offset);i=new r,a=new o,this.pillarConvex=i,this.pillarOffset=a}var s=this.data,c=this.elementSize,l=i.faces;i.vertices.length=6;for(var u=0;u<6;u++)i.vertices[u]||(i.vertices[u]=new o);for(l.length=5,u=0;u<5;u++)l[u]||(l[u]=[]);var h=i.vertices,d=(Math.min(s[t][e],s[t+1][e],s[t][e+1],s[t+1][e+1])-this.minValue)/2+this.minValue;n?(a.set((t+.75)*c,(e+.75)*c,d),h[0].set(.25*c,.25*c,s[t+1][e+1]-d),h[1].set(-.75*c,.25*c,s[t][e+1]-d),h[2].set(.25*c,-.75*c,s[t+1][e]-d),h[3].set(.25*c,.25*c,-d-1),h[4].set(-.75*c,.25*c,-d-1),h[5].set(.25*c,-.75*c,-d-1),l[0][0]=0,l[0][1]=1,l[0][2]=2,l[1][0]=5,l[1][1]=4,l[1][2]=3,l[2][0]=2,l[2][1]=5,l[2][2]=3,l[2][3]=0,l[3][0]=3,l[3][1]=4,l[3][2]=1,l[3][3]=0,l[4][0]=1,l[4][1]=4,l[4][2]=5,l[4][3]=2):(a.set((t+.25)*c,(e+.25)*c,d),h[0].set(-.25*c,-.25*c,s[t][e]-d),h[1].set(.75*c,-.25*c,s[t+1][e]-d),h[2].set(-.25*c,.75*c,s[t][e+1]-d),h[3].set(-.25*c,-.25*c,-d-1),h[4].set(.75*c,-.25*c,-d-1),h[5].set(-.25*c,.75*c,-d-1),l[0][0]=0,l[0][1]=1,l[0][2]=2,l[1][0]=5,l[1][1]=4,l[1][2]=3,l[2][0]=0,l[2][1]=2,l[2][2]=5,l[2][3]=3,l[3][0]=1,l[3][1]=0,l[3][2]=3,l[3][3]=4,l[4][0]=4,l[4][1]=5,l[4][2]=2,l[4][3]=1),i.computeNormals(),i.computeEdges(),i.updateBoundingSphereRadius(),this.setCachedConvexTrianglePillar(t,e,n,i,a)},s.prototype.calculateLocalInertia=function(t,e){return(e=e||new o).set(0,0,0),e},s.prototype.volume=function(){return Number.MAX_VALUE},s.prototype.calculateWorldAABB=function(t,e,n,i){n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),i.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)},s.prototype.updateBoundingSphereRadius=function(){var t=this.data,e=this.elementSize;this.boundingSphereRadius=new o(t.length*e,t[0].length*e,Math.max(Math.abs(this.maxValue),Math.abs(this.minValue))).norm()},s.prototype.setHeightsFromImage=function(t,e){var n=document.createElement("canvas");n.width=t.width,n.height=t.height;var i=n.getContext("2d");i.drawImage(t,0,0);var r=i.getImageData(0,0,t.width,t.height),o=this.data;o.length=0,this.elementSize=Math.abs(e.x)/r.width;for(var a=0;a<r.height;a++){for(var s=[],c=0;c<r.width;c++){var l=(r.data[4*(a*r.height+c)]+r.data[4*(a*r.height+c)+1]+r.data[4*(a*r.height+c)+2])/4/255*e.z;e.x<0?s.push(l):s.unshift(l)}e.y<0?o.unshift(s):o.push(s)}this.updateMaxValue(),this.updateMinValue(),this.update()}},function(t,e,n){t.exports=a;var i=n(42),r=n(3),o=n(5);function a(t,e,n,o,a){i.apply(this),this.nx=n||10,this.ny=o||10,this.nz=a||10,this.aabbMin=t||new r(100,100,100),this.aabbMax=e||new r(-100,-100,-100);var s=this.nx*this.ny*this.nz;if(s<=0)throw"GridBroadphase: Each dimension's n must be >0";this.bins=[],this.binLengths=[],this.bins.length=s,this.binLengths.length=s;for(var c=0;c<s;c++)this.bins[c]=[],this.binLengths[c]=0}a.prototype=new i,a.prototype.constructor=a;var s=new r;new r,a.prototype.collisionPairs=function(t,e,n){for(var i=t.numObjects(),r=t.bodies,a=this.aabbMax,c=this.aabbMin,l=this.nx,u=this.ny,h=this.nz,d=u*h,p=h,f=1,m=a.x,g=a.y,v=a.z,y=c.x,A=c.y,w=c.z,b=l/(m-y),M=u/(g-A),E=h/(v-w),x=(m-y)/l,T=(g-A)/u,C=(v-w)/h,S=.5*Math.sqrt(x*x+T*T+C*C),D=o.types,_=D.SPHERE,L=D.PLANE,N=(D.BOX,D.COMPOUND,D.CONVEXPOLYHEDRON,this.bins),I=this.binLengths,O=this.bins.length,j=0;j!==O;j++)I[j]=0;var P=Math.ceil;function R(t,e,n,i,r,o,a){var s=(t-y)*b|0,c=(e-A)*M|0,m=(n-w)*E|0,g=P((i-y)*b),v=P((r-A)*M),x=P((o-w)*E);s<0?s=0:s>=l&&(s=l-1),c<0?c=0:c>=u&&(c=u-1),m<0?m=0:m>=h&&(m=h-1),g<0?g=0:g>=l&&(g=l-1),v<0?v=0:v>=u&&(v=u-1),x<0?x=0:x>=h&&(x=h-1),c*=p,m*=f,g*=d,v*=p,x*=f;for(var T=s*=d;T<=g;T+=d)for(var C=c;C<=v;C+=p)for(var S=m;S<=x;S+=f){var D=T+C+S;N[D][I[D]++]=a}}for(c=Math.min,a=Math.max,j=0;j!==i;j++){var k=(nt=r[j]).shape;switch(k.type){case _:var z=nt.position.x,B=nt.position.y,F=nt.position.z,U=k.radius;R(z-U,B-U,F-U,z+U,B+U,F+U,nt);break;case L:k.worldNormalNeedsUpdate&&k.computeWorldNormal(nt.quaternion);var H=k.worldNormal,G=y+.5*x-nt.position.x,Q=A+.5*T-nt.position.y,V=w+.5*C-nt.position.z,Y=s;Y.set(G,Q,V);for(var W=0,q=0;W!==l;W++,q+=d,Y.y=Q,Y.x+=x)for(var X=0,Z=0;X!==u;X++,Z+=p,Y.z=V,Y.y+=T)for(var K=0,J=0;K!==h;K++,J+=f,Y.z+=C)if(Y.dot(H)<S){var $=q+Z+J;N[$][I[$]++]=nt}break;default:nt.aabbNeedsUpdate&&nt.computeAABB(),R(nt.aabb.lowerBound.x,nt.aabb.lowerBound.y,nt.aabb.lowerBound.z,nt.aabb.upperBound.x,nt.aabb.upperBound.y,nt.aabb.upperBound.z,nt)}}for(j=0;j!==O;j++){var tt=I[j];if(tt>1){var et=N[j];for(W=0;W!==tt;W++){var nt=et[W];for(X=0;X!==W;X++){var it=et[X];this.needBroadphaseCollision(nt,it)&&this.intersectionTest(nt,it,e,n)}}}}this.makePairsUnique(e,n)}},function(t,e,n){t.exports=o;var i=n(20),r=n(8);function o(t,e,n,o){i.call(this,t,e),void 0===n&&(n=t.position.distanceTo(e.position)),void 0===o&&(o=1e6),this.distance=n;var a=this.distanceEquation=new r(t,e);this.equations.push(a),a.minForce=-o,a.maxForce=o}o.prototype=new i,o.prototype.update=function(){var t=this.bodyA,e=this.bodyB,n=this.distanceEquation,i=.5*this.distance,r=n.ni;e.position.vsub(t.position,r),r.normalize(),r.mult(i,n.ri),r.mult(-i,n.rj)}},function(t,e,n){t.exports=a;var i=n(5),r=n(3),o=(n(6),n(22));function a(t,e,n,a){var s=a,c=[],l=[],u=[],h=[],d=[],p=Math.cos,f=Math.sin;c.push(new r(e*p(0),e*f(0),.5*-n)),h.push(0),c.push(new r(t*p(0),t*f(0),.5*n)),d.push(1);for(var m=0;m<s;m++){var g=2*Math.PI/s*(m+1),v=2*Math.PI/s*(m+.5);m<s-1?(c.push(new r(e*p(g),e*f(g),.5*-n)),h.push(2*m+2),c.push(new r(t*p(g),t*f(g),.5*n)),d.push(2*m+3),u.push([2*m+2,2*m+3,2*m+1,2*m])):u.push([0,1,2*m+1,2*m]),(s%2==1||m<s/2)&&l.push(new r(p(v),f(v),0))}u.push(d),l.push(new r(0,0,1));var y=[];for(m=0;m<h.length;m++)y.push(h[h.length-m-1]);u.push(y),this.type=i.types.CONVEXPOLYHEDRON,o.call(this,c,u,l)}a.prototype=new o},function(t,e,n){t.exports=o;var i=n(3),r=(n(10),n(19));function o(t,e,n){var o=void 0!==(n=n||{}).maxForce?n.maxForce:1e6;r.call(this,t,e,-o,o),this.axisA=n.axisA?n.axisA.clone():new i(1,0,0),this.axisB=n.axisB?n.axisB.clone():new i(0,1,0),this.angle=void 0!==n.angle?n.angle:0}o.prototype=new r,o.prototype.constructor=o;var a=new i,s=new i;o.prototype.computeB=function(t){var e=this.a,n=this.b,i=this.axisA,r=this.axisB,o=a,c=s,l=this.jacobianElementA,u=this.jacobianElementB;return i.cross(r,o),r.cross(i,c),l.rotational.copy(c),u.rotational.copy(o),-(Math.cos(this.angle)-i.dot(r))*e-this.computeGW()*n-t*this.computeGiMf()}},function(t,e,n){t.exports=s,n(20);var i=n(39),r=n(188),o=n(38),a=(n(8),n(3));function s(t,e,n){var s=void 0!==(n=n||{}).maxForce?n.maxForce:1e6,c=n.pivotA?n.pivotA.clone():new a,l=n.pivotB?n.pivotB.clone():new a;this.axisA=n.axisA?n.axisA.clone():new a,this.axisB=n.axisB?n.axisB.clone():new a,i.call(this,t,c,e,l,s),this.collideConnected=!!n.collideConnected,this.angle=void 0!==n.angle?n.angle:0;var u=this.coneEquation=new r(t,e,n),h=this.twistEquation=new o(t,e,n);this.twistAngle=void 0!==n.twistAngle?n.twistAngle:0,u.maxForce=0,u.minForce=-s,h.maxForce=0,h.minForce=-s,this.equations.push(u,h)}s.prototype=new i,s.constructor=s,new a,new a,s.prototype.update=function(){var t=this.bodyA,e=this.bodyB,n=this.coneEquation,r=this.twistEquation;i.prototype.update.call(this),t.vectorToWorldFrame(this.axisA,n.axisA),e.vectorToWorldFrame(this.axisB,n.axisB),this.axisA.tangents(r.axisA,r.axisA),t.vectorToWorldFrame(r.axisA,r.axisA),this.axisB.tangents(r.axisB,r.axisB),e.vectorToWorldFrame(r.axisB,r.axisB),n.angle=this.angle,r.maxAngle=this.twistAngle}},function(t,e,n){t.exports=r;var i=n(3);function r(){this.spatial=new i,this.rotational=new i}r.prototype.multiplyElement=function(t){return t.spatial.dot(this.spatial)+t.rotational.dot(this.rotational)},r.prototype.multiplyVectors=function(t,e){return t.dot(this.spatial)+e.dot(this.rotational)}},function(t){t.exports={name:"cannon",version:"0.6.2",description:"A lightweight 3D physics engine written in JavaScript.",homepage:"https://github.com/schteppe/cannon.js",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["cannon.js","cannon","physics","engine","3d"],main:"./src/Cannon.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/cannon.js.git"},bugs:{url:"https://github.com/schteppe/cannon.js/issues"},licenses:[{type:"MIT"}],devDependencies:{jshint:"latest","uglify-js":"latest",nodeunit:"^0.9.0",grunt:"~0.4.0","grunt-contrib-jshint":"~0.1.1","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-concat":"~0.1.3","grunt-contrib-uglify":"^0.5.1","grunt-browserify":"^2.1.4","grunt-contrib-yuidoc":"^0.5.2",browserify:"*"},dependencies:{}}},function(t,e,n){var i=n(12);n(169),n(46),n(164),n(163),n(162),n(161),t.exports={registerAll:function(){}},window.CANNON=window.CANNON||i},function(t,e){var n=1e3,i=6e4,r=36e5,o=24*r;function a(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var s,c=typeof t;if("string"===c&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*i;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(t);if("number"===c&&!1===isNaN(t))return e.long?a(s=t,o,"day")||a(s,r,"hour")||a(s,i,"minute")||a(s,n,"second")||s+" ms":function(t){return t>=o?Math.round(t/o)+"d":t>=r?Math.round(t/r)+"h":t>=i?Math.round(t/i)+"m":t>=n?Math.round(t/n)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){function i(t){var n;function i(){if(i.enabled){var t=i,r=+new Date,o=r-(n||r);t.diff=o,t.prev=n,t.curr=r,n=r;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,i){if("%%"===n)return n;c++;var r=e.formatters[i];if("function"==typeof r){var o=a[c];n=r.call(t,o),a.splice(c,1),c--}return n}),e.formatArgs.call(t,a),(i.log||e.log||void 0).apply(t,a)}}return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=function(t){var n,i=0;for(n in t)i=(i<<5)-i+t.charCodeAt(n),i|=0;return e.colors[Math.abs(i)%e.colors.length]}(t),i.destroy=r,"function"==typeof e.init&&e.init(i),e.instances.push(i),i}function r(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var i=("string"==typeof t?t:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(t=i[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var o=e.instances[n];o.enabled=e.enabled(o.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(193),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e){function n(t){this.session=t,this.id=void 0}function i(t,e){this.output=t,this.id=void 0,this.nextTxId=0,this.txns={},this.eventHandlers={},this.options=Object.assign({verbose:!1,timeoutMs:1e4,keepaliveMs:3e4},e)}n.prototype.attach=function(t){var e={plugin:t,"force-bundle":!0,"force-rtcp-mux":!0};return this.session.send("attach",e).then(t=>(this.id=t.data.id,t))},n.prototype.detach=function(){return this.send("detach")},n.prototype.on=function(t,e){return this.session.on(t,t=>{t.sender==this.id&&e(t)})},n.prototype.send=function(t,e){return this.session.send(t,Object.assign({handle_id:this.id},e))},n.prototype.sendMessage=function(t){return this.send("message",{body:t})},n.prototype.sendJsep=function(t){return this.send("message",{body:{},jsep:t})},n.prototype.sendTrickle=function(t){return this.send("trickle",{candidate:t})},i.prototype.create=function(){return this.send("create").then(t=>(this.id=t.data.id,t))},i.prototype.destroy=function(){this.send("destroy"),this._killKeepalive()},i.prototype.isError=function(t){return"error"===t.janus},i.prototype.on=function(t,e){var n=this.eventHandlers[t];null==n&&(n=this.eventHandlers[t]=[]),n.push(e)},i.prototype.receive=function(t){this.options.verbose,t.session_id,this.id;var e=t.janus,n=this.eventHandlers[e];if(null!=n)for(var i=0;i<n.length;i++)n[i](t);if(null!=t.transaction){var r=this.txns[t.transaction];if(null==r)return;if("ack"===e&&"message"==r.type)return;null!=r.timeout&&clearTimeout(r.timeout),delete this.txns[t.transaction],(this.isError(t)?r.reject:r.resolve)(t)}},i.prototype.send=function(t,e){var n=(this.nextTxId++).toString();return e=Object.assign({janus:t,transaction:n},e),null!=this.id&&(e=Object.assign({session_id:this.id},e)),this.options.verbose,new Promise((i,r)=>{var o=null;this.options.timeoutMs&&(o=setTimeout(()=>{delete this.txns[e.transaction],r(new Error("Signalling message with txid "+n+" timed out."))},this.options.timeoutMs)),this.txns[e.transaction]={resolve:i,reject:r,timeout:o,type:t},this.output(JSON.stringify(e)),this._resetKeepalive()})},i.prototype._sendKeepalive=function(){return this.send("keepalive")},i.prototype._killKeepalive=function(){this.keepaliveTimeout&&clearTimeout(this.keepaliveTimeout)},i.prototype._resetKeepalive=function(){this._killKeepalive(),this.options.keepaliveMs&&(this.keepaliveTimeout=setTimeout(()=>this._sendKeepalive(),this.options.keepaliveMs))},t.exports={JanusPluginHandle:n,JanusSession:i}},function(t,e,n){var i=n(195),r=n(50)("naf-janus-adapter:debug"),o=(n(50)("naf-janus-adapter:warn"),n(50)("naf-janus-adapter:error"));function a(t){var e=Promise.resolve();return function(){var n=Array.prototype.slice.call(arguments);e=e.then(e=>t.apply(this,n))}}document.createElement("video").canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');const s={iceServers:[{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]};class c{constructor(){this.room=null,this.userId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),this.serverUrl=null,this.webRtcOptions={},this.ws=null,this.session=null,this.publisher=null,this.occupants={},this.mediaStreams={},this.localMediaStream=null,this.pendingMediaRequests=new Map,this.timeOffsets=[],this.serverTimeRequests=0,this.avgTimeOffset=0,this.onWebsocketOpen=this.onWebsocketOpen.bind(this),this.onWebsocketMessage=this.onWebsocketMessage.bind(this),this.onDataChannelMessage=this.onDataChannelMessage.bind(this)}setServerUrl(t){this.serverUrl=t}setApp(t){}setRoom(t){try{this.room=parseInt(t)}catch(t){throw new Error("Room must be a positive integer.")}}setWebRtcOptions(t){this.webRtcOptions=t}setServerConnectListeners(t,e){this.connectSuccess=t,this.connectFailure=e}setRoomOccupantListener(t){this.onOccupantsChanged=t}setDataChannelListeners(t,e,n){this.onOccupantConnected=t,this.onOccupantDisconnected=e,this.onOccupantMessage=n}connect(){r(`connecting to ${this.serverUrl}`),this.ws=new WebSocket(this.serverUrl,"janus-protocol"),this.session=new i.JanusSession(this.ws.send.bind(this.ws)),this.ws.addEventListener("open",this.onWebsocketOpen),this.ws.addEventListener("message",this.onWebsocketMessage),this.updateTimeOffset()}disconnect(){r("disconnecting"),this.removeAllOccupants(),this.publisher&&(this.destroyPublisher(this.publisher),this.publisher=null),this.session&&(this.session.destroy(),this.session=null),this.ws&&(this.ws.close(),this.ws=null)}isDisconnected(){return null===this.ws}async onWebsocketOpen(){await this.session.create(),this.publisher=await this.createPublisher(),this.connectSuccess(this.userId),await Promise.all(this.publisher.initialOccupants.map(this.addOccupant.bind(this)))}onWebsocketMessage(t){this.session.receive(JSON.parse(t.data))}async addOccupant(t){var e=await this.createSubscriber(t);return this.occupants[t]=e,this.setMediaStream(t,e.mediaStream),this.onOccupantConnected(t),this.onOccupantsChanged(this.occupants),e}removeAllOccupants(){for(const t of Object.getOwnPropertyNames(this.occupants))this.removeOccupant(t)}removeOccupant(t){if(this.occupants[t]){if(this.occupants[t]&&(this.occupants[t].conn.close(),delete this.occupants[t]),this.mediaStreams[t]&&delete this.mediaStreams[t],this.pendingMediaRequests.has(t)){const e="The user disconnected before the media stream was resolved.";this.pendingMediaRequests.get(t).audio.reject(e),this.pendingMediaRequests.get(t).video.reject(e),this.pendingMediaRequests.delete(t)}this.onOccupantDisconnected(t),this.onOccupantsChanged(this.occupants)}}associate(t,e){t.addEventListener("icecandidate",t=>{e.sendTrickle(t.candidate||null).catch(t=>o("Error trickling ICE: %o",t))}),t.addEventListener("negotiationneeded",a(n=>{r("Sending new offer for handle: %o",e);var i=t.createOffer(),a=i.then(e=>t.setLocalDescription(e)),s=i.then(t=>e.sendJsep(t)).then(e=>t.setRemoteDescription(e.jsep));return Promise.all([a,s]).catch(t=>o("Error negotiating offer: %o",t))})),e.on("event",a(n=>{var i=n.jsep;if(i&&"offer"==i.type){r("Accepting new offer for handle: %o",e),i.sdp=this.configureSubscriberSdp(i.sdp);var a=t.setRemoteDescription(i).then(e=>t.createAnswer()),s=a.then(e=>t.setLocalDescription(e)),c=a.then(t=>e.sendJsep(t));Promise.all([s,c]).catch(t=>o("Error negotiating answer: %o",t))}}))}async createPublisher(){var t=new i.JanusPluginHandle(this.session),e=new RTCPeerConnection(s);this.associate(e,t),r("pub waiting for sfu"),await t.attach("janus.plugin.sfu");var n=e.createDataChannel("unreliable",{ordered:!1,maxRetransmits:0});n.addEventListener("message",this.onDataChannelMessage);var o=e.createDataChannel("reliable",{ordered:!0});o.addEventListener("message",this.onDataChannelMessage),this.localMediaStream&&this.localMediaStream.getTracks().forEach(t=>{e.addTrack(t,this.localMediaStream)}),r("pub waiting for webrtcup"),await new Promise(e=>t.on("webrtcup",e)),t.on("event",t=>{var e=t.plugindata.data;"join"==e.event&&e.room_id==this.room?this.addOccupant(e.user_id):"leave"==e.event&&e.room_id==this.room&&this.removeOccupant(e.user_id)}),r("pub waiting for join");var a=(await this.sendJoin(t,{notifications:!0,data:!0})).plugindata.data.response.users[this.room]||[];return r("publisher ready"),{handle:t,initialOccupants:a,reliableChannel:o,unreliableChannel:n,conn:e}}destroyPublisher(t){r("destroying publisher");const{handle:e,conn:n}=t;e.detach(),n.close()}configureSubscriberSdp(t){return t}async createSubscriber(t){var e=new i.JanusPluginHandle(this.session),n=new RTCPeerConnection(s);this.associate(n,e),r("sub waiting for sfu"),await e.attach("janus.plugin.sfu"),r("sub waiting for join"),await this.sendJoin(e,{media:t}),r("sub waiting for webrtcup"),await new Promise(t=>e.on("webrtcup",t));var o=new MediaStream;return n.getReceivers().forEach(t=>{t.track&&o.addTrack(t.track)}),0===o.getTracks().length&&(o=null),r("subscriber ready"),{handle:e,mediaStream:o,conn:n}}sendJoin(t,e){return t.sendMessage({kind:"join",room_id:this.room,user_id:this.userId,subscribe:e})}onDataChannelMessage(t){var e=JSON.parse(t.data);e.dataType&&this.onOccupantMessage(null,e.dataType,e.data)}shouldStartConnectionTo(t){return!0}startStreamConnection(t){}closeStreamConnection(t){}getConnectStatus(t){return this.occupants[t]?NAF.adapters.IS_CONNECTED:NAF.adapters.NOT_CONNECTED}async updateTimeOffset(){if(this.isDisconnected())return;const t=Date.now(),e=await fetch(document.location.href,{method:"HEAD",cache:"no-cache"}),n=new Date(e.headers.get("Date")).getTime()+500,i=Date.now(),o=n+(i-t)/2-i;this.serverTimeRequests++,this.serverTimeRequests<=10?this.timeOffsets.push(o):this.timeOffsets[this.serverTimeRequests%10]=o,this.avgTimeOffset=this.timeOffsets.reduce((t,e)=>t+=e,0)/this.timeOffsets.length,this.serverTimeRequests>10?(r(`new server time offset: ${this.avgTimeOffset}ms`),setTimeout(()=>this.updateTimeOffset(),3e5)):this.updateTimeOffset()}getServerTime(){return Date.now()+this.avgTimeOffset}getMediaStream(t,e="audio"){if(this.mediaStreams[t])return r(`Already had ${e} for ${t}`),Promise.resolve(this.mediaStreams[t][e]);if(r(`Waiting on ${e} for ${t}`),!this.pendingMediaRequests.has(t)){this.pendingMediaRequests.set(t,{});const e=new Promise((e,n)=>{this.pendingMediaRequests.get(t).audio={resolve:e,reject:n}}),n=new Promise((e,n)=>{this.pendingMediaRequests.get(t).video={resolve:e,reject:n}});this.pendingMediaRequests.get(t).audio.promise=e,this.pendingMediaRequests.get(t).video.promise=n}return this.pendingMediaRequests.get(t)[e].promise}setMediaStream(t,e){const n=new MediaStream;e.getAudioTracks().forEach(t=>n.addTrack(t));const i=new MediaStream;e.getVideoTracks().forEach(t=>i.addTrack(t)),this.mediaStreams[t]={audio:n,video:i},this.pendingMediaRequests.has(t)&&(this.pendingMediaRequests.get(t).audio.resolve(n),this.pendingMediaRequests.get(t).video.resolve(i))}setLocalMediaStream(t){if(this.publisher&&this.publisher.conn){var e=this.publisher.conn.getSenders(),n=[];t.getTracks().forEach(i=>{var r=e.find(t=>null!=t.track&&t.track.kind==i.kind);null!=r?(r.replaceTrack?(r.replaceTrack(i),r.track.enabled=!0):(t.removeTrack(r.track),t.addTrack(i),i.enabled=!0),n.push(r)):n.push(this.publisher.conn.addTrack(i,t))}),e.forEach(t=>{n.includes(t)||(t.track.enabled=!1)})}this.localMediaStream=t,this.setMediaStream(this.userId,t)}enableMicrophone(t){this.publisher&&this.publisher.conn&&this.publisher.conn.getSenders().forEach(e=>{"audio"==e.track.kind&&(e.track.enabled=t)})}sendData(t,e,n){this.publisher.unreliableChannel.send(JSON.stringify({clientId:t,dataType:e,data:n}))}sendDataGuaranteed(t,e,n){this.publisher.reliableChannel.send(JSON.stringify({clientId:t,dataType:e,data:n}))}broadcastData(t,e){this.publisher.unreliableChannel.send(JSON.stringify({dataType:t,data:e}))}broadcastDataGuaranteed(t,e){this.publisher.reliableChannel.send(JSON.stringify({dataType:t,data:e}))}}NAF.adapters.register("janus",c),t.exports=c},function(t,e){!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){"use strict";n(1),n(3),n(16),n(17),n(23)},function(t,e,n){"use strict";if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");var i=THREE.Math.degToRad,r=n(2);AFRAME.registerComponent("lerp",{schema:{properties:{default:["position","rotation","scale"]}},init:function(){var t=this.el;this.lastPosition=t.getAttribute("position"),this.lastRotation=t.getAttribute("rotation"),this.lastScale=t.getAttribute("scale"),this.lerpingPosition=!1,this.lerpingRotation=!1,this.lerpingScale=!1,this.timeOfLastUpdate=0},tick:function(t,e){var n,i=this.now(),r=this.el.object3D;this.checkForComponentChanged(),this.lerpingPosition&&(n=(i-this.startLerpTimePosition)/this.duration,r.position.lerpVectors(this.startPosition,this.targetPosition,n),n>=1&&(this.lerpingPosition=!1)),this.lerpingRotation&&(n=(i-this.startLerpTimeRotation)/this.duration,THREE.Quaternion.slerp(this.startRotation,this.targetRotation,r.quaternion,n),n>=1&&(this.lerpingRotation=!1)),this.lerpingScale&&(n=(i-this.startLerpTimeScale)/this.duration,r.scale.lerpVectors(this.startScale,this.targetScale,n),n>=1&&(this.lerpingScale=!1))},checkForComponentChanged:function(){var t=this.el,e=!1,n=t.getAttribute("position");this.isLerpable("position")&&!this.almostEqualVec3(this.lastPosition,n)&&(this.toPosition(this.lastPosition,n),this.lastPosition=n,e=!0);var i=t.getAttribute("rotation");this.isLerpable("rotation")&&!this.almostEqualVec3(this.lastRotation,i)&&(this.toRotation(this.lastRotation,i),this.lastRotation=i,e=!0);var r=t.getAttribute("scale");this.isLerpable("scale")&&!this.almostEqualVec3(this.lastScale,r)&&(this.toScale(this.lastScale,r),this.lastScale=r,e=!0),e&&this.updateDuration()},isLerpable:function(t){return-1!=this.data.properties.indexOf(t)},updateDuration:function(){var t=this.now();this.duration=t-this.timeOfLastUpdate,this.timeOfLastUpdate=t},toPosition:function(t,e){this.lerpingPosition=!0,this.startLerpTimePosition=this.now(),this.startPosition=new THREE.Vector3(t.x,t.y,t.z),this.targetPosition=new THREE.Vector3(e.x,e.y,e.z)},toRotation:function(t,e){this.lerpingRotation=!0,this.startLerpTimeRotation=this.now(),this.startRotation=new THREE.Quaternion,this.startRotation.setFromEuler(new THREE.Euler(i(t.x),i(t.y),i(t.z),"YXZ")),this.targetRotation=new THREE.Quaternion,this.targetRotation.setFromEuler(new THREE.Euler(i(e.x),i(e.y),i(e.z),"YXZ"))},toScale:function(t,e){this.lerpingScale=!0,this.startLerpTimeScale=this.now(),this.startScale=new THREE.Vector3(t.x,t.y,t.z),this.targetScale=new THREE.Vector3(e.x,e.y,e.z)},almostEqualVec3:function(t,e){return r(t.x,e.x)&&r(t.y,e.y)&&r(t.z,e.z)},now:function(){return Date.now()}})},function(t,e){"use strict";var n=Math.abs,i=Math.min;function r(t,e,o,a){var s=n(t-e);return null==o&&(o=r.DBL_EPSILON),null==a&&(a=o),s<=o||s<=a*i(n(t),n(e))||t===e}r.FLT_EPSILON=1.1920929e-7,r.DBL_EPSILON=2.220446049250313e-16,t.exports=r},function(t,e,n){"use strict";var i=n(4),r=n(5),o=n(6),a=n(7),s=n(8),c=n(10),l=n(11),u={app:"",room:"",clientId:""};u.options=i,u.utils=r,u.log=new o,u.schemas=new a,u.version="0.6.1",u.adapters=new l;var h=new s,d=new c(h);u.connection=d,u.entities=h,t.exports=window.NAF=u},function(t,e){"use strict";t.exports={debug:!1,updateRate:15,compressSyncPackets:!1,useLerp:!0}},function(t,e){"use strict";t.exports.whenEntityLoaded=function(t,e){t.hasLoaded&&e(),t.addEventListener("loaded",function(){e()})},t.exports.createHtmlNodeFromString=function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild},t.exports.getNetworkOwner=function(t){var e=t.components;return e.hasOwnProperty("networked")?e.networked.data.owner:null},t.exports.getNetworkId=function(t){var e=t.components;return e.hasOwnProperty("networked")?e.networked.networkId:null},t.exports.now=function(){return Date.now()},t.exports.createNetworkId=function(){return Math.random().toString(36).substring(2,9)},t.exports.delimiter="---",t.exports.childSchemaToKey=function(e){return(e.selector||"")+t.exports.delimiter+(e.component||"")+t.exports.delimiter+(e.property||"")},t.exports.keyToChildSchema=function(e){var n=e.split(t.exports.delimiter,3);return{selector:n[0]||void 0,component:n[1],property:n[2]||void 0}},t.exports.isChildSchemaKey=function(e){return-1!=e.indexOf(t.exports.delimiter)},t.exports.childSchemaEqual=function(t,e){return t.selector==e.selector&&t.component==e.component&&t.property==e.property},t.exports.getNetworkedEntity=function(t){return new Promise(function(e,n){for(var i=t;i&&!i.hasAttribute("networked");)i=i.parentNode;if(!i)return n("Entity does not have and is not a child of an entity with the [networked] component ");i.hasLoaded?e(i):i.addEventListener("instantiated",function(){e(i)},{once:!0})})},t.exports.takeOwnership=function(t){for(var e=t;e&&!e.hasAttribute("networked");)e=e.parentNode;if(e){if(!e.components.networked)throw new Error("Entity with [networked] component not initialized.");return e.components.networked.takeOwnership()}throw new Error("takeOwnership() must be called on an entity or child of an entity with the [networked] component.")},t.exports.isMine=function(t){for(var e=t;e&&!e.hasAttribute("networked");)e=e.parentNode;if(e){if(!e.components.networked)throw new Error("Entity with [networked] component not initialized.");return e.components.networked.data.owner===NAF.clientId}throw new Error("isMine() must be called on an entity or child of an entity with the [networked] component.")}},function(t,e){"use strict";var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.debug=!1}return n(t,[{key:"setDebug",value:function(t){this.debug=t}},{key:"write",value:function(){this.debug}},{key:"warn",value:function(){}},{key:"error",value:function(){}}]),t}();t.exports=i},function(t,e){"use strict";var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.schemaDict={},this.templateCache={}}return n(t,[{key:"createDefaultSchema",value:function(t){return{template:t,components:["position","rotation"]}}},{key:"add",value:function(t){if(this.validateSchema(t)){this.schemaDict[t.template]=t;var e=document.querySelector(t.template);if(!e)return void NAF.log.error("Template el not found for "+t.template+", make sure NAF.schemas.add is called after <a-scene> is defined.");if(!this.validateTemplate(t,e))return;this.templateCache[t.template]=document.importNode(e.content,!0)}else NAF.log.error("Schema not valid: ",t),NAF.log.error("See https://github.com/haydenjameslee/networked-aframe#syncing-custom-components")}},{key:"getCachedTemplate",value:function(t){return this.templateIsCached(t)||(this.templateExistsInScene(t)?this.add(this.createDefaultSchema(t)):NAF.log.error("Template el for "+t+" is not in the scene, add the template to <a-assets> and register with NAF.schemas.add.")),this.templateCache[t].firstElementChild.cloneNode(!0)}},{key:"templateIsCached",value:function(t){return this.templateCache.hasOwnProperty(t)}},{key:"getComponents",value:function(t){var e=["position","rotation"];return this.hasTemplate(t)&&(e=this.schemaDict[t].components),e}},{key:"hasTemplate",value:function(t){return this.schemaDict.hasOwnProperty(t)}},{key:"templateExistsInScene",value:function(t){var e=document.querySelector(t);return e&&this.isTemplateTag(e)}},{key:"validateSchema",value:function(t){return t.hasOwnProperty("template")&&t.hasOwnProperty("components")}},{key:"validateTemplate",value:function(t,e){return this.isTemplateTag(e)?!!this.templateHasOneOrZeroChildren(e)||(NAF.log.error("Template for "+t.template+" has more than one child. Templates must have one direct child element, no more. Template found:",e),!1):(NAF.log.error("Template for "+t.template+" is not a <template> tag. Instead found: "+e.tagName),!1)}},{key:"isTemplateTag",value:function(t){return"template"===t.tagName.toLowerCase()}},{key:"templateHasOneOrZeroChildren",value:function(t){return t.content.childElementCount<2}},{key:"remove",value:function(t){delete this.schemaDict[t]}},{key:"clear",value:function(){this.schemaDict={}}}]),t}();t.exports=i},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(9),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.entities={},this.childCache=new r,this.onRemoteEntityCreatedEvent=new Event("remoteEntityCreated")}return i(t,[{key:"registerEntity",value:function(t,e){this.entities[t]=e}},{key:"createRemoteEntity",value:function(t){NAF.log.write("Creating remote entity",t);var e=t.networkId,n=NAF.schemas.getCachedTemplate(t.template);return n.setAttribute("id","naf-"+e),this.initPosition(n,t.components),this.initRotation(n,t.components),this.addNetworkComponent(n,t),this.registerEntity(e,n),n}},{key:"initPosition",value:function(t,e){if(e.hasOwnProperty("position")){var n=e.position;t.setAttribute("position",n)}}},{key:"initRotation",value:function(t,e){if(e.hasOwnProperty("rotation")){var n=e.rotation;t.setAttribute("rotation",n)}}},{key:"addNetworkComponent",value:function(t,e){var n={template:e.template,owner:e.owner,networkId:e.networkId};t.setAttribute("networked",n),t.firstUpdateData=e}},{key:"updateEntity",value:function(t,e,n){var i=1==n[0],r=i?n[1]:n.networkId;this.hasEntity(r)?this.entities[r].emit("networkUpdate",{entityData:n},!1):!i&&this.isFullSync(n)&&this.receiveFirstUpdateFromEntity(n)}},{key:"isFullSync",value:function(t){return Object.keys(t.components).length===NAF.schemas.getComponents(t.template).length}},{key:"receiveFirstUpdateFromEntity",value:function(t){var e=t.parent,n=t.networkId;if(e&&!this.hasEntity(e))this.childCache.addChild(e,t);else{var i=this.createRemoteEntity(t);this.createAndAppendChildren(n,i),this.addEntityToPage(i,e)}}},{key:"createAndAppendChildren",value:function(t,e){for(var n=this.childCache.getChildren(t),i=0;i<n.length;i++){var r=n[i],o=r.networkId;if(this.hasEntity(o))NAF.log.warn("Tried to instantiate entity multiple times",o,r,"Existing entity:",this.getEntity(o));else{var a=this.createRemoteEntity(r);this.createAndAppendChildren(o,a),e.appendChild(a)}}}},{key:"addEntityToPage",value:function(t,e){this.hasEntity(e)?this.addEntityToParent(t,e):this.addEntityToSceneRoot(t)}},{key:"addEntityToParent",value:function(t,e){document.getElementById("naf-"+e).appendChild(t)}},{key:"addEntityToSceneRoot",value:function(t){document.querySelector("a-scene").appendChild(t)}},{key:"completeSync",value:function(t){for(var e in this.entities)this.entities.hasOwnProperty(e)&&this.entities[e].emit("syncAll",{targetClientId:t},!1)}},{key:"removeRemoteEntity",value:function(t,e,n){var i=n.networkId;return this.removeEntity(i)}},{key:"removeEntitiesOfClient",value:function(t){var e=[];for(var n in this.entities)if(NAF.utils.getNetworkOwner(this.entities[n])==t){var i=this.removeEntity(n);e.push(i)}return e}},{key:"removeEntity",value:function(t){if(this.hasEntity(t)){var e=this.entities[t];return delete this.entities[t],e.parentNode.removeChild(e),e}return null}},{key:"getEntity",value:function(t){return this.entities.hasOwnProperty(t)?this.entities[t]:null}},{key:"hasEntity",value:function(t){return this.entities.hasOwnProperty(t)}},{key:"removeRemoteEntities",value:function(){for(var t in this.childCache=new r,this.entities)this.entities[t].getAttribute("networked").owner!=NAF.clientId&&this.removeEntity(t)}}]),t}();t.exports=o},function(t,e){"use strict";var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dict={}}return n(t,[{key:"addChild",value:function(t,e){this.hasParent(t)||(this.dict[t]=[]),this.dict[t].push(e)}},{key:"getChildren",value:function(t){if(!this.hasParent(t))return[];var e=this.dict[t];return delete this.dict[t],e}},{key:"hasParent",value:function(t){return this.dict.hasOwnProperty(t)}}]),t}();t.exports=i},function(t,e){"use strict";var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.entities=e,this.setupDefaultDataSubscriptions(),this.connectedClients={},this.activeDataChannels={}}return n(t,[{key:"setNetworkAdapter",value:function(t){this.adapter=t}},{key:"setupDefaultDataSubscriptions",value:function(){this.dataChannelSubs={},this.dataChannelSubs.u=this.entities.updateEntity.bind(this.entities),this.dataChannelSubs.r=this.entities.removeRemoteEntity.bind(this.entities)}},{key:"connect",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];NAF.app=e,NAF.room=n,this.adapter.setServerUrl(t),this.adapter.setApp(e),this.adapter.setRoom(n);var r={audio:i,video:!1,datachannel:!0};this.adapter.setWebRtcOptions(r),this.adapter.setServerConnectListeners(this.connectSuccess.bind(this),this.connectFailure.bind(this)),this.adapter.setDataChannelListeners(this.dataChannelOpen.bind(this),this.dataChannelClosed.bind(this),this.receivedData.bind(this)),this.adapter.setRoomOccupantListener(this.occupantsReceived.bind(this)),this.adapter.connect()}},{key:"onConnect",value:function(t){this.onConnectCallback=t,this.isConnected()?t():document.body.addEventListener("connected",t,!1)}},{key:"connectSuccess",value:function(t){NAF.log.write("Networked-Aframe Client ID:",t),NAF.clientId=t;var e=new CustomEvent("connected",{detail:{clientId:t}});document.body.dispatchEvent(e)}},{key:"connectFailure",value:function(t,e){NAF.log.error(t,"failure to connect")}},{key:"occupantsReceived",value:function(t){var e=Object.assign({},this.connectedClients);this.connectedClients=t,this.checkForDisconnectingClients(e,t),this.checkForConnectingClients(t)}},{key:"checkForDisconnectingClients",value:function(t,e){for(var n in t)e.hasOwnProperty(n)||(NAF.log.write("Closing stream to ",n),this.adapter.closeStreamConnection(n))}},{key:"checkForConnectingClients",value:function(t){for(var e in t)this.isNewClient(e)&&this.adapter.shouldStartConnectionTo(t[e])&&(NAF.log.write("Opening datachannel to ",e),this.adapter.startStreamConnection(e))}},{key:"getConnectedClients",value:function(){return this.connectedClients}},{key:"isConnected",value:function(){return!!NAF.clientId}},{key:"isMineAndConnected",value:function(t){return this.isConnected()&&NAF.clientId===t}},{key:"isNewClient",value:function(t){return!this.isConnectedTo(t)}},{key:"isConnectedTo",value:function(t){return this.adapter.getConnectStatus(t)===NAF.adapters.IS_CONNECTED}},{key:"dataChannelOpen",value:function(t){NAF.log.write("Opened data channel from "+t),this.activeDataChannels[t]=!0,this.entities.completeSync(t);var e=new CustomEvent("clientConnected",{detail:{clientId:t}});document.body.dispatchEvent(e)}},{key:"dataChannelClosed",value:function(t){NAF.log.write("Closed data channel from "+t),this.activeDataChannels[t]=!1,this.entities.removeEntitiesOfClient(t);var e=new CustomEvent("clientDisconnected",{detail:{clientId:t}});document.body.dispatchEvent(e)}},{key:"hasActiveDataChannel",value:function(t){return this.activeDataChannels.hasOwnProperty(t)&&this.activeDataChannels[t]}},{key:"broadcastData",value:function(t,e){this.adapter.broadcastData(t,e)}},{key:"broadcastDataGuaranteed",value:function(t,e){this.adapter.broadcastDataGuaranteed(t,e)}},{key:"sendData",value:function(t,e,n,i){this.hasActiveDataChannel(t)&&(i?this.adapter.sendDataGuaranteed(t,e,n):this.adapter.sendData(t,e,n))}},{key:"sendDataGuaranteed",value:function(t,e,n){this.sendData(t,e,n,!0)}},{key:"subscribeToDataChannel",value:function(t,e){this.isReservedDataType(t)?NAF.log.error("NetworkConnection@subscribeToDataChannel: "+t+" is a reserved dataType. Choose another"):this.dataChannelSubs[t]=e}},{key:"unsubscribeToDataChannel",value:function(t){this.isReservedDataType(t)?NAF.log.error("NetworkConnection@unsubscribeToDataChannel: "+t+" is a reserved dataType. Choose another"):delete this.dataChannelSubs[t]}},{key:"isReservedDataType",value:function(t){return"u"==t||"r"==t}},{key:"receivedData",value:function(t,e,n){this.dataChannelSubs.hasOwnProperty(e)?this.dataChannelSubs[e](t,e,n):NAF.log.error("NetworkConnection@receivedData: "+e+" has not been subscribed to yet. Call subscribeToDataChannel()")}},{key:"getServerTime",value:function(){return this.adapter.getServerTime()}},{key:"disconnect",value:function(){this.entities.removeRemoteEntities(),this.adapter.disconnect(),NAF.app="",NAF.room="",NAF.clientId="",this.connectedClients={},this.activeDataChannels={},this.adapter=null,this.setupDefaultDataSubscriptions(),document.body.removeEventListener("connected",this.onConnectCallback)}}]),t}();t.exports=i},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(12),o=n(15),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.adapters={wseasyrtc:r,easyrtc:o},this.IS_CONNECTED=t.IS_CONNECTED,this.CONNECTING=t.CONNECTING,this.NOT_CONNECTED=t.NOT_CONNECTED}return i(t,[{key:"register",value:function(t,e){this.adapters[t]=e}},{key:"make",value:function(t){var e=t.toLowerCase();if(this.adapters[e])return new(0,this.adapters[e]);throw new Error("Adapter: "+t+" not registered. Please use NAF.adapters.register() to register this adapter.")}}]),t}();a.IS_CONNECTED="IS_CONNECTED",a.CONNECTING="CONNECTING",a.NOT_CONNECTED="NOT_CONNECTED",t.exports=a},function(t,e,n){"use strict";var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(13),a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.easyrtc=t||window.easyrtc,n.app="default",n.room="default",n.connectedClients=[],n.serverTimeRequests=0,n.timeOffsets=[],n.avgTimeOffset=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o),r(e,[{key:"setServerUrl",value:function(t){this.serverUrl=t,this.easyrtc.setSocketUrl(t)}},{key:"setApp",value:function(t){this.app=t}},{key:"setRoom",value:function(t){this.room=t,this.easyrtc.joinRoom(t,null)}},{key:"setWebRtcOptions",value:function(t){}},{key:"setServerConnectListeners",value:function(t,e){this.connectSuccess=t,this.connectFailure=e}},{key:"setRoomOccupantListener",value:function(t){this.easyrtc.setRoomOccupantListener(function(e,n,i){t(n)})}},{key:"setDataChannelListeners",value:function(t,e,n){this.openListener=t,this.closedListener=e,this.easyrtc.setPeerListener(n)}},{key:"updateTimeOffset",value:function(){var t=this,e=Date.now()+this.avgTimeOffset;return fetch(document.location.href,{method:"HEAD",cache:"no-cache"}).then(function(n){var i=new Date(n.headers.get("Date")).getTime()+500,r=Date.now(),o=i+(r-e)/2-r;t.serverTimeRequests++,t.serverTimeRequests<=10?t.timeOffsets.push(o):t.timeOffsets[t.serverTimeRequests%10]=o,t.avgTimeOffset=t.timeOffsets.reduce(function(t,e){return t+e},0)/t.timeOffsets.length,t.serverTimeRequests>10?setTimeout(function(){return t.updateTimeOffset()},3e5):t.updateTimeOffset()})}},{key:"connect",value:function(){var t=this;Promise.all([this.updateTimeOffset(),new Promise(function(e,n){t.easyrtc.connect(t.app,e,n)})]).then(function(e){var n=i(e,2),r=(n[0],n[1]);t.connectSuccess(r)}).catch(this.connectFailure)}},{key:"shouldStartConnectionTo",value:function(t){return!0}},{key:"startStreamConnection",value:function(t){this.connectedClients.push(t),this.openListener(t)}},{key:"closeStreamConnection",value:function(t){var e=this.connectedClients.indexOf(t);e>-1&&this.connectedClients.splice(e,1),this.closedListener(t)}},{key:"sendData",value:function(t,e,n){this.easyrtc.sendDataWS(t,e,n)}},{key:"sendDataGuaranteed",value:function(t,e,n){this.sendData(t,e,n)}},{key:"broadcastData",value:function(t,e){var n={targetRoom:this.room};this.easyrtc.sendDataWS(n,t,e)}},{key:"broadcastDataGuaranteed",value:function(t,e){this.broadcastData(t,e)}},{key:"getConnectStatus",value:function(t){return-1!=this.connectedClients.indexOf(t)?NAF.adapters.IS_CONNECTED:NAF.adapters.NOT_CONNECTED}},{key:"getServerTime",value:function(){return Date.now()+this.avgTimeOffset}},{key:"disconnect",value:function(){this.easyrtc.disconnect()}}]),e}();t.exports=a},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(14),o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r),i(e,[{key:"setServerUrl",value:function(t){this.notImplemented("setServerUrl")}},{key:"setApp",value:function(t){this.notImplemented("setApp")}},{key:"setRoom",value:function(t){this.notImplemented("setRoom")}},{key:"setWebRtcOptions",value:function(t){this.notImplemented("setWebRtcOptions")}},{key:"setServerConnectListeners",value:function(t,e){this.notImplemented("setServerConnectListeners")}},{key:"setRoomOccupantListener",value:function(t){this.notImplemented("setRoomOccupantListener")}},{key:"setDataChannelListeners",value:function(t,e,n){this.notImplemented("setDataChannelListeners")}},{key:"connect",value:function(){this.notImplemented("connect")}},{key:"shouldStartConnectionTo",value:function(t){this.notImplemented("shouldStartConnectionTo")}},{key:"startStreamConnection",value:function(t){this.notImplemented("startStreamConnection")}},{key:"closeStreamConnection",value:function(t){this.notImplemented("closeStreamConnection")}},{key:"getConnectStatus",value:function(t){this.notImplemented("getConnectStatus")}},{key:"getMediaStream",value:function(t){return Promise.reject("Interface method not implemented: getMediaStream")}},{key:"getServerTime",value:function(){this.notImplemented("getServerTime")}},{key:"sendData",value:function(t,e,n){this.notImplemented("sendData")}},{key:"sendDataGuaranteed",value:function(t,e,n){this.notImplemented("sendDataGuaranteed")}},{key:"broadcastData",value:function(t,e){this.notImplemented("broadcastData")}},{key:"broadcastDataGuaranteed",value:function(t,e){this.notImplemented("broadcastDataGuaranteed")}},{key:"disconnect",value:function(){this.notImplemented("disconnect")}}]),e}();t.exports=o},function(t,e){"use strict";var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"notImplemented",value:function(t){NAF.log.error("Interface method not implemented:",t)}}]),t}();t.exports=i},function(t,e,n){"use strict";var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(13),a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.easyrtc=t||window.easyrtc,n.app="default",n.room="default",n.audioStreams={},n.pendingAudioRequest={},n.serverTimeRequests=0,n.timeOffsets=[],n.avgTimeOffset=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o),r(e,[{key:"setServerUrl",value:function(t){this.easyrtc.setSocketUrl(t)}},{key:"setApp",value:function(t){this.app=t}},{key:"setRoom",value:function(t){this.room=t,this.easyrtc.joinRoom(t,null)}},{key:"setWebRtcOptions",value:function(t){this.easyrtc.enableDataChannels(t.datachannel),this.easyrtc.enableVideo(!1),this.easyrtc.enableAudio(t.audio),this.easyrtc.enableVideoReceive(!1),this.easyrtc.enableAudioReceive(t.audio)}},{key:"setServerConnectListeners",value:function(t,e){this.connectSuccess=t,this.connectFailure=e}},{key:"setRoomOccupantListener",value:function(t){this.easyrtc.setRoomOccupantListener(function(e,n,i){t(n)})}},{key:"setDataChannelListeners",value:function(t,e,n){this.easyrtc.setDataChannelOpenListener(t),this.easyrtc.setDataChannelCloseListener(e),this.easyrtc.setPeerListener(n)}},{key:"updateTimeOffset",value:function(){var t=this,e=Date.now()+this.avgTimeOffset;return fetch(document.location.href,{method:"HEAD",cache:"no-cache"}).then(function(n){var i=new Date(n.headers.get("Date")).getTime()+500,r=Date.now(),o=i+(r-e)/2-r;t.serverTimeRequests++,t.serverTimeRequests<=10?t.timeOffsets.push(o):t.timeOffsets[t.serverTimeRequests%10]=o,t.avgTimeOffset=t.timeOffsets.reduce(function(t,e){return t+e},0)/t.timeOffsets.length,t.serverTimeRequests>10?setTimeout(function(){return t.updateTimeOffset()},3e5):t.updateTimeOffset()})}},{key:"connect",value:function(){var t=this;Promise.all([this.updateTimeOffset(),new Promise(function(e,n){t.easyrtc.audioEnabled?t._connectWithAudio(e,n):t.easyrtc.connect(t.app,e,n)})]).then(function(e){var n=i(e,2),r=(n[0],n[1]);t._storeAudioStream(t.easyrtc.myEasyrtcid,t.easyrtc.getLocalStream()),t._myRoomJoinTime=t._getRoomJoinTime(r),t.connectSuccess(r)}).catch(this.connectFailure)}},{key:"shouldStartConnectionTo",value:function(t){return this._myRoomJoinTime<=t.roomJoinTime}},{key:"startStreamConnection",value:function(t){this.easyrtc.call(t,function(t,e){"datachannel"===e&&NAF.log.write("Successfully started datachannel to ",t)},function(t,e){NAF.log.error(t,e)},function(t){})}},{key:"closeStreamConnection",value:function(t){}},{key:"sendData",value:function(t,e,n){this.easyrtc.sendData(t,e,n)}},{key:"sendDataGuaranteed",value:function(t,e,n){this.easyrtc.sendDataWS(t,e,n)}},{key:"broadcastData",value:function(t,e){var n=this.easyrtc.getRoomOccupantsAsMap(this.room);for(var i in n)n.hasOwnProperty(i)&&i!==this.easyrtc.myEasyrtcid&&this.easyrtc.sendData(i,t,e)}},{key:"broadcastDataGuaranteed",value:function(t,e){var n={targetRoom:this.room};this.easyrtc.sendDataWS(n,t,e)}},{key:"getConnectStatus",value:function(t){var e=this.easyrtc.getConnectStatus(t);return e==this.easyrtc.IS_CONNECTED?NAF.adapters.IS_CONNECTED:e==this.easyrtc.NOT_CONNECTED?NAF.adapters.NOT_CONNECTED:NAF.adapters.CONNECTING}},{key:"getMediaStream",value:function(t){var e=this;return this.audioStreams[t]?(NAF.log.write("Already had audio for "+t),Promise.resolve(this.audioStreams[t])):(NAF.log.write("Waiting on audio for "+t),new Promise(function(n){e.pendingAudioRequest[t]=n}))}},{key:"disconnect",value:function(){this.easyrtc.disconnect()}},{key:"_storeAudioStream",value:function(t,e){this.audioStreams[t]=e,this.pendingAudioRequest[t]&&(NAF.log.write("got pending audio for "+t),this.pendingAudioRequest[t](e),this.pendingAudioRequest[t](e))}},{key:"_connectWithAudio",value:function(t,e){var n=this;this.easyrtc.setStreamAcceptor(this._storeAudioStream.bind(this)),this.easyrtc.setOnStreamClosed(function(t){delete n.audioStreams[t]}),this.easyrtc.initMediaSource(function(){n.easyrtc.connect(n.app,t,e)},function(t,e){NAF.log.error(t,e)})}},{key:"_getRoomJoinTime",value:function(t){var e=NAF.room;return this.easyrtc.getRoomOccupantsAsMap(e)[t].roomJoinTime}},{key:"getServerTime",value:function(){return Date.now()+this.avgTimeOffset}}]),e}();t.exports=a},function(t,e){"use strict";AFRAME.registerComponent("networked-scene",{schema:{serverURL:{default:"/"},app:{default:"default"},room:{default:"default"},connectOnLoad:{default:!0},onConnect:{default:"onConnect"},adapter:{default:"wsEasyRtc"},audio:{default:!1},debug:{default:!1}},init:function(){var t=this.el;this.connect=this.connect.bind(this),t.addEventListener("connect",this.connect),this.data.connectOnLoad&&t.emit("connect",null,!1)},connect:function(){NAF.log.setDebug(this.data.debug),NAF.log.write("Networked-Aframe Connecting..."),this.checkDeprecatedProperties(),this.setupNetworkAdapter(),this.hasOnConnectFunction()&&this.callOnConnect(),NAF.connection.connect(this.data.serverURL,this.data.app,this.data.room,this.data.audio)},checkDeprecatedProperties:function(){},setupNetworkAdapter:function(){var t=this.data.adapter,e=NAF.adapters.make(t);NAF.connection.setNetworkAdapter(e)},hasOnConnectFunction:function(){return""!=this.data.onConnect&&window.hasOwnProperty(this.data.onConnect)},callOnConnect:function(){NAF.connection.onConnect(window[this.data.onConnect])},remove:function(){NAF.log.write("networked-scene disconnected"),this.el.removeEventListener("connect",this.connect),NAF.connection.disconnect()}})},function(t,e,n){"use strict";var i=n(18),r=n(22),o=AFRAME.utils.bind;AFRAME.registerComponent("networked",{schema:{template:{default:""},attachTemplateToLocal:{default:!0},networkId:{default:""},owner:{default:""}},init:function(){this.OWNERSHIP_GAINED="ownership-gained",this.OWNERSHIP_CHANGED="ownership-changed",this.OWNERSHIP_LOST="ownership-lost";var t=this.wasCreatedByNetwork();this.onConnected=o(this.onConnected,this),this.onSyncAll=o(this.onSyncAll,this),this.syncDirty=o(this.syncDirty,this),this.networkUpdateHandler=o(this.networkUpdateHandler,this),this.cachedData={},this.initNetworkParent(),""===this.data.networkId&&this.el.setAttribute(this.name,{networkId:NAF.utils.createNetworkId()}),t?(this.firstUpdate(),this.attachLerp()):(this.data.attachTemplateToLocal&&this.attachTemplateToLocal(),this.registerEntity(this.data.networkId)),this.lastOwnerTime=-1,NAF.clientId?this.onConnected():document.body.addEventListener("connected",this.onConnected,!1),document.body.dispatchEvent(this.entityCreatedEvent()),this.el.dispatchEvent(new CustomEvent("instantiated",{detail:{el:this.el}}))},attachTemplateToLocal:function(){for(var t=NAF.schemas.getCachedTemplate(this.data.template),e=t.attributes,n=0;n<e.length;n++)this.el.setAttribute(e[n].name,e[n].value);for(;t.firstElementChild;)this.el.appendChild(t.firstElementChild)},takeOwnership:function(){var t=this.data.owner,e=this.lastOwnerTime,n=NAF.connection.getServerTime();return!!(t&&!this.isMine()&&e<n)&&(this.lastOwnerTime=n,this.removeLerp(),this.el.setAttribute("networked",{owner:NAF.clientId}),this.syncAll(),this.el.emit(this.OWNERSHIP_GAINED,{el:this.el,oldOwner:t}),this.el.emit(this.OWNERSHIP_CHANGED,{el:this.el,oldOwner:t,newOwner:NAF.clientId}),!0)},wasCreatedByNetwork:function(){return!!this.el.firstUpdateData},initNetworkParent:function(){var t=this.el.parentElement;t.hasOwnProperty("components")&&t.components.hasOwnProperty("networked")?this.parent=t:this.parent=null},attachLerp:function(){NAF.options.useLerp&&this.el.setAttribute("lerp","")},removeLerp:function(){NAF.options.useLerp&&this.el.removeAttribute("lerp")},registerEntity:function(t){NAF.entities.registerEntity(t,this.el)},firstUpdate:function(){var t=this.el.firstUpdateData;this.networkUpdate(t)},onConnected:function(){var t=this;""===this.data.owner&&(this.lastOwnerTime=NAF.connection.getServerTime(),this.el.setAttribute(this.name,{owner:NAF.clientId}),setTimeout(function(){t.syncAll()},0)),document.body.removeEventListener("connected",this.onConnected,!1)},isMine:function(){return this.data.owner===NAF.clientId},play:function(){this.bindEvents()},bindEvents:function(){var t=this.el;t.addEventListener("sync",this.syncDirty),t.addEventListener("syncAll",this.onSyncAll),t.addEventListener("networkUpdate",this.networkUpdateHandler)},pause:function(){this.unbindEvents()},unbindEvents:function(){var t=this.el;t.removeEventListener("sync",this.syncDirty),t.removeEventListener("syncAll",this.onSyncAll),t.removeEventListener("networkUpdate",this.networkUpdateHandler)},tick:function(){this.isMine()&&this.needsToSync()&&this.syncDirty()},onSyncAll:function(t){var e=t.detail.targetClientId;this.syncAll(e)},syncAll:function(t){if(this.canSync()){this.updateNextSyncTime();var e=this.getAllSyncedComponents(),n=i.gatherComponentsData(this.el,e),r=this.createSyncData(n);t?NAF.connection.sendDataGuaranteed(t,"u",r):NAF.connection.broadcastDataGuaranteed("u",r),this.updateCache(n)}},syncDirty:function(){if(this.canSync()){this.updateNextSyncTime();var t=this.getAllSyncedComponents(),e=i.findDirtyComponents(this.el,t,this.cachedData);if(0!=e.length){var n=i.gatherComponentsData(this.el,e),o=this.createSyncData(n);NAF.options.compressSyncPackets&&(o=r.compressSyncData(o,t)),NAF.connection.broadcastData("u",o),this.updateCache(n)}}},canSync:function(){return this.data.owner&&this.isMine()},needsToSync:function(){return NAF.utils.now()>=this.nextSyncTime},updateNextSyncTime:function(){this.nextSyncTime=NAF.utils.now()+1e3/NAF.options.updateRate},createSyncData:function(t){var e=this.data;return{0:0,networkId:e.networkId,owner:e.owner,lastOwnerTime:this.lastOwnerTime,template:e.template,parent:this.getParentId(),components:t}},getParentId:function(){return this.initNetworkParent(),this.parent?this.parent.getAttribute("networked").networkId:null},getAllSyncedComponents:function(){return NAF.schemas.getComponents(this.data.template)},updateCache:function(t){for(var e in t)this.cachedData[e]=t[e]},networkUpdateHandler:function(t){var e=t.detail.entityData;this.networkUpdate(e)},networkUpdate:function(t){if(1==t[0]&&(t=r.decompressSyncData(t,this.getAllSyncedComponents())),!(t.lastOwnerTime<this.lastOwnerTime||this.lastOwnerTime===t.lastOwnerTime&&this.data.owner>t.owner)){if(this.data.owner!==t.owner){var e=this.isMine();this.lastOwnerTime=t.lastOwnerTime,this.attachLerp();var n=this.data.owner,i=t.owner;e&&this.el.emit(this.OWNERSHIP_LOST,{el:this.el,newOwner:i}),this.el.emit(this.OWNERSHIP_CHANGED,{el:this.el,oldOwner:n,newOwner:i}),this.el.setAttribute("networked",{owner:t.owner})}this.updateComponents(t.components)}},updateComponents:function(t){var e=this.el;for(var n in t)if(this.isSyncableComponent(n)){var i=t[n];if(NAF.utils.isChildSchemaKey(n)){var r=NAF.utils.keyToChildSchema(n),o=r.selector?e.querySelector(r.selector):e;o&&(r.property?o.setAttribute(r.component,r.property,i):o.setAttribute(r.component,i))}else e.setAttribute(n,i)}},isSyncableComponent:function(t){if(NAF.utils.isChildSchemaKey(t)){var e=NAF.utils.keyToChildSchema(t);return this.hasThisChildSchema(e)}return-1!=this.getAllSyncedComponents().indexOf(t)},hasThisChildSchema:function(t){var e=this.getAllSyncedComponents();for(var n in e){var i=e[n];if(NAF.utils.childSchemaEqual(i,t))return!0}return!1},remove:function(){if(this.isMine()&&NAF.connection.isConnected()){var t={networkId:this.data.networkId};NAF.connection.broadcastDataGuaranteed("r",t)}document.body.dispatchEvent(this.entityRemovedEvent(this.data.networkId))},entityCreatedEvent:function(){return new CustomEvent("entityCreated",{detail:{el:this.el}})},entityRemovedEvent:function(t){return new CustomEvent("entityRemoved",{detail:{networkId:t}})}})},function(t,e,n){"use strict";var i=n(19),r=n(2);t.exports.gatherComponentsData=function(t,e){var n={};for(var i in e){var r=e[i];if("string"==typeof r)t.components.hasOwnProperty(r)&&(n[r]=AFRAME.utils.clone(t.getAttribute(r)));else{var o=NAF.utils.childSchemaToKey(r),a=r.selector?t.querySelector(r.selector):t;if(a&&a.components.hasOwnProperty(r.component)){var s=a.getAttribute(r.component),c=r.property?s[r.property]:s;n[o]=AFRAME.utils.clone(c)}}}return n},t.exports.findDirtyComponents=function(t,e,n){var o,a,s=[];for(var c in e){var l,u,h=e[c];if("string"==typeof h){if(!t.components.hasOwnProperty(h))continue;l=h,u=t.getAttribute(h)}else{var d=h.selector,p=h.component,f=h.property,m=d?t.querySelector(d):t;if(!m||!m.components.hasOwnProperty(p))continue;l=NAF.utils.childSchemaToKey(h),u=m.getAttribute(p),f&&(u=u[f])}if(n.hasOwnProperty(l)){var g=n[l];g.x&&g.y&&g.z?(a=u,r((o=g).x,a.x,.5,r.FLT_EPSILON)&&r(o.y,a.y,.5,r.FLT_EPSILON)&&r(o.z,a.z,.5,r.FLT_EPSILON)||s.push(h)):i(g,u)||s.push(h)}else s.push(h)}return s}},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=Array.prototype.slice,o=n(20),a=n(21),s=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=(void 0===t?"undefined":i(t))&&"object"!=(void 0===e?"undefined":i(e))?n.strict?t===e:t==e:function(t,e,n){var u,h;if(c(t)||c(e))return!1;if(t.prototype!==e.prototype)return!1;if(a(t))return!!a(e)&&(t=r.call(t),e=r.call(e),s(t,e,n));if(l(t)){if(!l(e))return!1;if(t.length!==e.length)return!1;for(u=0;u<t.length;u++)if(t[u]!==e[u])return!1;return!0}try{var d=o(t),p=o(e)}catch(t){return!1}if(d.length!=p.length)return!1;for(d.sort(),p.sort(),u=d.length-1;u>=0;u--)if(d[u]!=p[u])return!1;for(u=d.length-1;u>=0;u--)if(h=d[u],!s(t[h],e[h],n))return!1;return(void 0===t?"undefined":i(t))===(void 0===e?"undefined":i(e))}(t,e,n))};function c(t){return null===t||void 0===t}function l(t){return!(!t||"object"!==(void 0===t?"undefined":i(t))||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}},function(t,e){"use strict";function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function o(t){return t&&"object"==(void 0===t?"undefined":n(t))&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=i?r:o).supported=r,e.unsupported=o},function(t,e){"use strict";t.exports.compressSyncData=function(t,e){var n=[];n.push(1),n.push(t.networkId),n.push(t.owner),n.push(t.parent),n.push(t.template);var i=this.compressComponents(t.components,e);return n.push(i),n},t.exports.compressComponents=function(t,e){for(var n={},i=0;i<e.length;i++){var r;r="string"==typeof e[i]?e[i]:NAF.utils.childSchemaToKey(e[i]),t.hasOwnProperty(r)&&(n[i]=t[r])}return n},t.exports.decompressSyncData=function(t,e){var n={0:0};n.networkId=t[1],n.owner=t[2],n.parent=t[3],n.template=t[4];var i=t[5];return e=this.decompressComponents(i,e),n.components=e,n},t.exports.decompressComponents=function(t,e){var n={};for(var i in t){var r=e[i];n["string"==typeof r?r:NAF.utils.childSchemaToKey(r)]=t[i]}return n}},function(t,e,n){"use strict";var i=n(3);AFRAME.registerComponent("networked-audio-source",{schema:{positional:{default:!0},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},maxDistance:{default:1e4},refDistance:{default:1},rolloffFactor:{default:1}},init:function(){var t=this;this.listener=null,this.stream=null,this._setMediaStream=this._setMediaStream.bind(this),NAF.utils.getNetworkedEntity(this.el).then(function(e){var n=e.components.networked.data.owner;n&&NAF.connection.adapter.getMediaStream(n).then(t._setMediaStream).catch(function(t){return i.log.error("Error getting media stream for "+n,t)})})},update:function(){this._setPannerProperties()},_setMediaStream:function(t){if(this.sound||this.setupSound(),t!=this.stream){if(this.stream&&this.sound.disconnect(),t){/chrome/i.test(navigator.userAgent)&&(this.audioEl=new Audio,this.audioEl.setAttribute("autoplay","autoplay"),this.audioEl.setAttribute("playsinline","playsinline"),this.audioEl.srcObject=t,this.audioEl.volume=0);var e=this.sound.context.createMediaStreamSource(t);this.sound.setNodeSource(e),this.el.emit("sound-source-set",{soundSource:e})}this.stream=t}},_setPannerProperties:function(){this.sound&&this.data.positional&&(this.sound.setDistanceModel(this.data.distanceModel),this.sound.setMaxDistance(this.data.maxDistance),this.sound.setRefDistance(this.data.refDistance),this.sound.setRolloffFactor(this.data.rolloffFactor))},remove:function(){this.sound&&(this.el.removeObject3D(this.attrName),this.stream&&this.sound.disconnect())},setupSound:function(){var t=this.el,e=t.sceneEl;this.sound&&t.removeObject3D(this.attrName),e.audioListener||(e.audioListener=new THREE.AudioListener,e.camera&&e.camera.add(e.audioListener),e.addEventListener("camera-set-active",function(t){t.detail.cameraEl.getObject3D("camera").add(e.audioListener)})),this.listener=e.audioListener,this.sound=this.data.positional?new THREE.PositionalAudio(this.listener):new THREE.Audio(this.listener),t.setObject3D(this.attrName,this.sound),this._setPannerProperties()}})}])},function(t,e,n){"use strict";var i={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};i.localCName=i.generateIdentifier(),i.splitLines=function(t){return t.trim().split("\n").map(function(t){return t.trim()})},i.splitSections=function(t){return t.split("\nm=").map(function(t,e){return(e>0?"m="+t:t).trim()+"\r\n"})},i.getDescription=function(t){var e=i.splitSections(t);return e&&e[0]},i.getMediaSections=function(t){var e=i.splitSections(t);return e.shift(),e},i.matchPrefix=function(t,e){return i.splitLines(t).filter(function(t){return 0===t.indexOf(e)})},i.parseCandidate=function(t){for(var e,n={foundation:(e=0===t.indexOf("a=candidate:")?t.substring(12).split(" "):t.substring(10).split(" "))[0],component:parseInt(e[1],10),protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],port:parseInt(e[5],10),type:e[7]},i=8;i<e.length;i+=2)switch(e[i]){case"raddr":n.relatedAddress=e[i+1];break;case"rport":n.relatedPort=parseInt(e[i+1],10);break;case"tcptype":n.tcpType=e[i+1];break;case"ufrag":n.ufrag=e[i+1],n.usernameFragment=e[i+1];break;default:n[e[i]]=e[i+1]}return n},i.writeCandidate=function(t){var e=[];e.push(t.foundation),e.push(t.component),e.push(t.protocol.toUpperCase()),e.push(t.priority),e.push(t.ip),e.push(t.port);var n=t.type;return e.push("typ"),e.push(n),"host"!==n&&t.relatedAddress&&t.relatedPort&&(e.push("raddr"),e.push(t.relatedAddress),e.push("rport"),e.push(t.relatedPort)),t.tcpType&&"tcp"===t.protocol.toLowerCase()&&(e.push("tcptype"),e.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(e.push("ufrag"),e.push(t.usernameFragment||t.ufrag)),"candidate:"+e.join(" ")},i.parseIceOptions=function(t){return t.substr(14).split(" ")},i.parseRtpMap=function(t){var e=t.substr(9).split(" "),n={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),n.name=e[0],n.clockRate=parseInt(e[1],10),n.numChannels=3===e.length?parseInt(e[2],10):1,n},i.writeRtpMap=function(t){var e=t.payloadType;return void 0!==t.preferredPayloadType&&(e=t.preferredPayloadType),"a=rtpmap:"+e+" "+t.name+"/"+t.clockRate+(1!==t.numChannels?"/"+t.numChannels:"")+"\r\n"},i.parseExtmap=function(t){var e=t.substr(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1]}},i.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&"sendrecv"!==t.direction?"/"+t.direction:"")+" "+t.uri+"\r\n"},i.parseFmtp=function(t){for(var e,n={},i=t.substr(t.indexOf(" ")+1).split(";"),r=0;r<i.length;r++)n[(e=i[r].trim().split("="))[0].trim()]=e[1];return n},i.writeFmtp=function(t){var e="",n=t.payloadType;if(void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){var i=[];Object.keys(t.parameters).forEach(function(e){i.push(e+"="+t.parameters[e])}),e+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return e},i.parseRtcpFb=function(t){var e=t.substr(t.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},i.writeRtcpFb=function(t){var e="",n=t.payloadType;return void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(function(t){e+="a=rtcp-fb:"+n+" "+t.type+(t.parameter&&t.parameter.length?" "+t.parameter:"")+"\r\n"}),e},i.parseSsrcMedia=function(t){var e=t.indexOf(" "),n={ssrc:parseInt(t.substr(7,e-7),10)},i=t.indexOf(":",e);return i>-1?(n.attribute=t.substr(e+1,i-e-1),n.value=t.substr(i+1)):n.attribute=t.substr(e+1),n},i.getMid=function(t){var e=i.matchPrefix(t,"a=mid:")[0];if(e)return e.substr(6)},i.parseFingerprint=function(t){var e=t.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},i.getDtlsParameters=function(t,e){return{role:"auto",fingerprints:i.matchPrefix(t+e,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(t,e){var n="a=setup:"+e+"\r\n";return t.fingerprints.forEach(function(t){n+="a=fingerprint:"+t.algorithm+" "+t.value+"\r\n"}),n},i.getIceParameters=function(t,e){var n=i.splitLines(t);return{usernameFragment:(n=n.concat(i.splitLines(e))).filter(function(t){return 0===t.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(t){return 0===t.indexOf("a=ice-pwd:")})[0].substr(10)}},i.writeIceParameters=function(t){return"a=ice-ufrag:"+t.usernameFragment+"\r\na=ice-pwd:"+t.password+"\r\n"},i.parseRtpParameters=function(t){for(var e={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=i.splitLines(t)[0].split(" "),r=3;r<n.length;r++){var o=n[r],a=i.matchPrefix(t,"a=rtpmap:"+o+" ")[0];if(a){var s=i.parseRtpMap(a),c=i.matchPrefix(t,"a=fmtp:"+o+" ");switch(s.parameters=c.length?i.parseFmtp(c[0]):{},s.rtcpFeedback=i.matchPrefix(t,"a=rtcp-fb:"+o+" ").map(i.parseRtcpFb),e.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":e.fecMechanisms.push(s.name.toUpperCase())}}}return i.matchPrefix(t,"a=extmap:").forEach(function(t){e.headerExtensions.push(i.parseExtmap(t))}),e},i.writeRtpDescription=function(t,e){var n="";n+="m="+t+" ",n+=e.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=e.codecs.map(function(t){return void 0!==t.preferredPayloadType?t.preferredPayloadType:t.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",e.codecs.forEach(function(t){n+=i.writeRtpMap(t),n+=i.writeFmtp(t),n+=i.writeRtcpFb(t)});var r=0;return e.codecs.forEach(function(t){t.maxptime>r&&(r=t.maxptime)}),r>0&&(n+="a=maxptime:"+r+"\r\n"),n+="a=rtcp-mux\r\n",e.headerExtensions.forEach(function(t){n+=i.writeExtmap(t)}),n},i.parseRtpEncodingParameters=function(t){var e,n=[],r=i.parseRtpParameters(t),o=-1!==r.fecMechanisms.indexOf("RED"),a=-1!==r.fecMechanisms.indexOf("ULPFEC"),s=i.matchPrefix(t,"a=ssrc:").map(function(t){return i.parseSsrcMedia(t)}).filter(function(t){return"cname"===t.attribute}),c=s.length>0&&s[0].ssrc,l=i.matchPrefix(t,"a=ssrc-group:FID").map(function(t){var e=t.split(" ");return e.shift(),e.map(function(t){return parseInt(t,10)})});l.length>0&&l[0].length>1&&l[0][0]===c&&(e=l[0][1]),r.codecs.forEach(function(t){if("RTX"===t.name.toUpperCase()&&t.parameters.apt){var i={ssrc:c,codecPayloadType:parseInt(t.parameters.apt,10),rtx:{ssrc:e}};n.push(i),o&&((i=JSON.parse(JSON.stringify(i))).fec={ssrc:e,mechanism:a?"red+ulpfec":"red"},n.push(i))}}),0===n.length&&c&&n.push({ssrc:c});var u=i.matchPrefix(t,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(t){t.maxBitrate=u})),n},i.parseRtcpParameters=function(t){var e={},n=i.matchPrefix(t,"a=ssrc:").map(function(t){return i.parseSsrcMedia(t)}).filter(function(t){return"cname"===t.attribute})[0];n&&(e.cname=n.value,e.ssrc=n.ssrc);var r=i.matchPrefix(t,"a=rtcp-rsize");e.reducedSize=r.length>0,e.compound=0===r.length;var o=i.matchPrefix(t,"a=rtcp-mux");return e.mux=o.length>0,e},i.parseMsid=function(t){var e,n=i.matchPrefix(t,"a=msid:");if(1===n.length)return{stream:(e=n[0].substr(7).split(" "))[0],track:e[1]};var r=i.matchPrefix(t,"a=ssrc:").map(function(t){return i.parseSsrcMedia(t)}).filter(function(t){return"msid"===t.attribute});return r.length>0?{stream:(e=r[0].value.split(" "))[0],track:e[1]}:void 0},i.generateSessionId=function(){return Math.random().toString().substr(2,21)},i.writeSessionBoilerplate=function(t,e){var n=void 0!==e?e:2;return"v=0\r\no=thisisadapterortc "+(t||i.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.writeMediaSection=function(t,e,n,r){var o=i.writeRtpDescription(t.kind,e);if(o+=i.writeIceParameters(t.iceGatherer.getLocalParameters()),o+=i.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+t.mid+"\r\n",t.direction?o+="a="+t.direction+"\r\n":t.rtpSender&&t.rtpReceiver?o+="a=sendrecv\r\n":t.rtpSender?o+="a=sendonly\r\n":t.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",t.rtpSender){var a="msid:"+r.id+" "+t.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+a,t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),o},i.getDirection=function(t,e){for(var n=i.splitLines(t),r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substr(2)}return e?i.getDirection(e):"sendrecv"},i.getKind=function(t){return i.splitLines(t)[0].split(" ")[0].substr(2)},i.isRejected=function(t){return"0"===t.split(" ",2)[1]},i.parseMLine=function(t){var e=i.splitLines(t)[0].substr(2).split(" ");return{kind:e[0],port:parseInt(e[1],10),protocol:e[2],fmt:e.slice(3).join(" ")}},i.parseOLine=function(t){var e=i.matchPrefix(t,"o=")[0].substr(2).split(" ");return{username:e[0],sessionId:e[1],sessionVersion:parseInt(e[2],10),netType:e[3],addressType:e[4],address:e[5]}},t.exports=i},function(t,e,n){"use strict";var i=n(198),r=n(13);t.exports={shimRTCIceCandidate:function(t){if(t.RTCIceCandidate&&!(t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)){var e=t.RTCIceCandidate;t.RTCIceCandidate=function(t){if("object"==typeof t&&t.candidate&&0===t.candidate.indexOf("a=")&&((t=JSON.parse(JSON.stringify(t))).candidate=t.candidate.substr(2)),t.candidate&&t.candidate.length){var n=new e(t),r=i.parseCandidate(t.candidate),o=Object.assign(n,r);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new e(t)},t.RTCIceCandidate.prototype=e.prototype,r.wrapPeerConnectionEvent(t,"icecandidate",function(e){return e.candidate&&Object.defineProperty(e,"candidate",{value:new t.RTCIceCandidate(e.candidate),writable:"false"}),e})}},shimCreateObjectURL:function(t){var e=t&&t.URL;if("object"==typeof t&&t.HTMLMediaElement&&"srcObject"in t.HTMLMediaElement.prototype&&e.createObjectURL&&e.revokeObjectURL){var n=e.createObjectURL.bind(e),i=e.revokeObjectURL.bind(e),o=new Map,a=0;e.createObjectURL=function(t){if("getTracks"in t){var e="polyblob:"+ ++a;return o.set(e,t),r.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),e}return n(t)},e.revokeObjectURL=function(t){i(t),o.delete(t)};var s=Object.getOwnPropertyDescriptor(t.HTMLMediaElement.prototype,"src");Object.defineProperty(t.HTMLMediaElement.prototype,"src",{get:function(){return s.get.apply(this)},set:function(t){return this.srcObject=o.get(t)||null,s.set.apply(this,[t])}});var c=t.HTMLMediaElement.prototype.setAttribute;t.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=o.get(arguments[1])||null),c.apply(this,arguments)}}},shimMaxMessageSize:function(t){if(!t.RTCSctpTransport&&t.RTCPeerConnection){var e=r.detectBrowser(t);"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var t,r,o,a;if(this._sctp=null,o=arguments[0],(a=i.splitSections(o.sdp)).shift(),a.some(function(t){var e=i.parseMLine(t);return e&&"application"===e.kind&&-1!==e.protocol.indexOf("SCTP")})){var s,c=function(t){var e=t.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===e||e.length<2)return-1;var n=parseInt(e[1],10);return n!=n?-1:n}(arguments[0]),l=(t=c,r=65536,"firefox"===e.browser&&(r=e.version<57?-1===t?16384:2147483637:57===e.version?65535:65536),r),u=function(t,n){var r=65536;"firefox"===e.browser&&57===e.version&&(r=65535);var o=i.matchPrefix(t.sdp,"a=max-message-size:");return o.length>0?r=parseInt(o[0].substr(19),10):"firefox"===e.browser&&-1!==n&&(r=2147483637),r}(arguments[0],c);s=0===l&&0===u?Number.POSITIVE_INFINITY:0===l||0===u?Math.max(l,u):Math.min(l,u);var h={};Object.defineProperty(h,"maxMessageSize",{get:function(){return s}}),this._sctp=h}return n.apply(this,arguments)}}},shimSendThrowTypeError:function(t){if(t.RTCPeerConnection){var e=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){var t=this,n=e.apply(t,arguments),i=n.send;return n.send=function(){var e=arguments[0];if((e.length||e.size||e.byteLength)>t.sctp.maxMessageSize)throw new DOMException("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)","TypeError");return i.apply(this,arguments)},n}}}}},function(t,e,n){"use strict";var i=n(13);t.exports={shimLocalStreamsAPI:function(t){if("object"==typeof t&&t.RTCPeerConnection){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getStreamById=function(t){var e=null;return this._localStreams&&this._localStreams.forEach(function(n){n.id===t&&(e=n)}),this._remoteStreams&&this._remoteStreams.forEach(function(n){n.id===t&&(e=n)}),e}),!("addStream"in t.RTCPeerConnection.prototype)){var e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(t)&&this._localStreams.push(t);var n=this;t.getTracks().forEach(function(i){e.call(n,i,t)})},t.RTCPeerConnection.prototype.addTrack=function(t,n){return n&&(this._localStreams?-1===this._localStreams.indexOf(n)&&this._localStreams.push(n):this._localStreams=[n]),e.call(this,t,n)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);var e=this._localStreams.indexOf(t);if(-1!==e){this._localStreams.splice(e,1);var n=this,i=t.getTracks();this.getSenders().forEach(function(t){-1!==i.indexOf(t.track)&&n.removeTrack(t)})}})}},shimRemoteStreamsAPI:function(t){"object"==typeof t&&t.RTCPeerConnection&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),"onaddstream"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(t){var e=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}})})}}))},shimCallbacksAPI:function(t){if("object"==typeof t&&t.RTCPeerConnection){var e=t.RTCPeerConnection.prototype,n=e.createOffer,i=e.createAnswer,r=e.setLocalDescription,o=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(t,e){var i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return e?(r.then(t,e),Promise.resolve()):r},e.createAnswer=function(t,e){var n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return e?(r.then(t,e),Promise.resolve()):r};var s=function(t,e,n){var i=r.apply(this,[t]);return n?(i.then(e,n),Promise.resolve()):i};e.setLocalDescription=s,s=function(t,e,n){var i=o.apply(this,[t]);return n?(i.then(e,n),Promise.resolve()):i},e.setRemoteDescription=s,s=function(t,e,n){var i=a.apply(this,[t]);return n?(i.then(e,n),Promise.resolve()):i},e.addIceCandidate=s}},shimGetUserMedia:function(t){var e=t&&t.navigator;e.getUserMedia||(e.webkitGetUserMedia?e.getUserMedia=e.webkitGetUserMedia.bind(e):e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(t,n,i){e.mediaDevices.getUserMedia(t).then(n,i)}.bind(e)))},shimRTCIceServerUrls:function(t){var e=t.RTCPeerConnection;t.RTCPeerConnection=function(t,n){if(t&&t.iceServers){for(var r=[],o=0;o<t.iceServers.length;o++){var a=t.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(i.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,r.push(a)):r.push(t.iceServers[o])}t.iceServers=r}return new e(t,n)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in t.RTCPeerConnection&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return e.generateCertificate}})},shimTrackEventTransceiver:function(t){"object"==typeof t&&t.RTCPeerConnection&&"receiver"in t.RTCTrackEvent.prototype&&!t.RTCTransceiver&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(t){var e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(t){var n=this;if(t){var i=n.getTransceivers().find(function(t){return t.sender.track&&"audio"===t.sender.track.kind});!1===t.offerToReceiveAudio&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==t.offerToReceiveAudio||i||n.addTransceiver("audio");var r=n.getTransceivers().find(function(t){return t.sender.track&&"video"===t.sender.track.kind});!1===t.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection("sendonly"):"recvonly"===r.direction&&r.setDirection("inactive"):!0!==t.offerToReceiveVideo||r||n.addTransceiver("video")}return e.apply(n,arguments)}}}},function(t,e,n){"use strict";var i=n(13),r=i.log;t.exports=function(t){var e=i.detectBrowser(t),n=t&&t.navigator,o=t&&t.MediaStreamTrack,a=function(t){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[t.name]||t.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[t.message]||t.message,constraint:t.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},s=function(t,i,o){var s=function(t){if("object"!=typeof t||t.require)return t;var e=[];return Object.keys(t).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i=t[n]="object"==typeof t[n]?t[n]:{ideal:t[n]};if(void 0===i.min&&void 0===i.max&&void 0===i.exact||e.push(n),void 0!==i.exact&&("number"==typeof i.exact?i.min=i.max=i.exact:t[n]=i.exact,delete i.exact),void 0!==i.ideal){t.advanced=t.advanced||[];var r={};"number"==typeof i.ideal?r[n]={min:i.ideal,max:i.ideal}:r[n]=i.ideal,t.advanced.push(r),delete i.ideal,Object.keys(i).length||delete t[n]}}}),e.length&&(t.require=e),t};return t=JSON.parse(JSON.stringify(t)),e.version<38&&(r("spec: "+JSON.stringify(t)),t.audio&&(t.audio=s(t.audio)),t.video&&(t.video=s(t.video)),r("ff37: "+JSON.stringify(t))),n.mozGetUserMedia(t,i,function(t){o(a(t))})};if(n.mediaDevices||(n.mediaDevices={getUserMedia:function(t){return new Promise(function(e,n){s(t,e,n)})},addEventListener:function(){},removeEventListener:function(){}}),n.mediaDevices.enumerateDevices=n.mediaDevices.enumerateDevices||function(){return new Promise(function(t){t([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},e.version<41){var c=n.mediaDevices.enumerateDevices.bind(n.mediaDevices);n.mediaDevices.enumerateDevices=function(){return c().then(void 0,function(t){if("NotFoundError"===t.name)return[];throw t})}}if(e.version<49){var l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return l(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(t){t.stop()}),new DOMException("The object can not be found here.","NotFoundError");return e},function(t){return Promise.reject(a(t))})}}if(!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var u=function(t,e,n){e in t&&!(n in t)&&(t[n]=t[e],delete t[e])},h=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(t){return"object"==typeof t&&"object"==typeof t.audio&&(t=JSON.parse(JSON.stringify(t)),u(t.audio,"autoGainControl","mozAutoGainControl"),u(t.audio,"noiseSuppression","mozNoiseSuppression")),h(t)},o&&o.prototype.getSettings){var d=o.prototype.getSettings;o.prototype.getSettings=function(){var t=d.apply(this,arguments);return u(t,"mozAutoGainControl","autoGainControl"),u(t,"mozNoiseSuppression","noiseSuppression"),t}}if(o&&o.prototype.applyConstraints){var p=o.prototype.applyConstraints;o.prototype.applyConstraints=function(t){return"audio"===this.kind&&"object"==typeof t&&(t=JSON.parse(JSON.stringify(t)),u(t,"autoGainControl","mozAutoGainControl"),u(t,"noiseSuppression","mozNoiseSuppression")),p.apply(this,[t])}}}n.getUserMedia=function(t,r,o){if(e.version<44)return s(t,r,o);i.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(t).then(r,o)}}},function(t,e,n){"use strict";var i=n(13);t.exports={shimGetUserMedia:n(201),shimOnTrack:function(t){"object"!=typeof t||!t.RTCPeerConnection||"ontrack"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(t){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=t),this.addEventListener("addstream",this._ontrackpoly=function(t){t.stream.getTracks().forEach(function(e){var n=new Event("track");n.track=e,n.receiver={track:e},n.transceiver={receiver:n.receiver},n.streams=[t.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}}),"object"==typeof t&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(t){"object"==typeof t&&(!t.HTMLMediaElement||"srcObject"in t.HTMLMediaElement.prototype||Object.defineProperty(t.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(t){this.mozSrcObject=t}}))},shimPeerConnection:function(t){var e=i.detectBrowser(t);if("object"==typeof t&&(t.RTCPeerConnection||t.mozRTCPeerConnection)){t.RTCPeerConnection||(t.RTCPeerConnection=function(n,i){if(e.version<38&&n&&n.iceServers){for(var r=[],o=0;o<n.iceServers.length;o++){var a=n.iceServers[o];if(a.hasOwnProperty("urls"))for(var s=0;s<a.urls.length;s++){var c={url:a.urls[s]};0===a.urls[s].indexOf("turn")&&(c.username=a.username,c.credential=a.credential),r.push(c)}else r.push(n.iceServers[o])}n.iceServers=r}return new t.mozRTCPeerConnection(n,i)},t.RTCPeerConnection.prototype=t.mozRTCPeerConnection.prototype,t.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return t.mozRTCPeerConnection.generateCertificate}}),t.RTCSessionDescription=t.mozRTCSessionDescription,t.RTCIceCandidate=t.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var n=t.RTCPeerConnection.prototype[e];t.RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}});var n=t.RTCPeerConnection.prototype.addIceCandidate;t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(t,n,i){return o.apply(this,[t||null]).then(function(t){if(e.version<48&&(t=function(t){var e=new Map;return Object.keys(t).forEach(function(n){e.set(n,t[n]),e[n]=t[n]}),e}(t)),e.version<53&&!n)try{t.forEach(function(t){t.type=r[t.type]||t.type})}catch(e){if("TypeError"!==e.name)throw e;t.forEach(function(e,n){t.set(n,Object.assign({},e,{type:r[e.type]||e.type}))})}return t}).then(n,i)}}},shimRemoveStream:function(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(t){var e=this;i.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(n){n.track&&-1!==t.getTracks().indexOf(n.track)&&e.removeTrack(n)})})}}},function(t,e,n){"use strict";t.exports=function(t){var e=t&&t.navigator,n=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(t){return n(t).catch(function(t){return Promise.reject(function(t){return{name:{PermissionDeniedError:"NotAllowedError"}[t.name]||t.name,message:t.message,constraint:t.constraint,toString:function(){return this.name}}}(t))})}}},function(t,e,n){"use strict";var i={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};i.localCName=i.generateIdentifier(),i.splitLines=function(t){return t.trim().split("\n").map(function(t){return t.trim()})},i.splitSections=function(t){return t.split("\nm=").map(function(t,e){return(e>0?"m="+t:t).trim()+"\r\n"})},i.getDescription=function(t){var e=i.splitSections(t);return e&&e[0]},i.getMediaSections=function(t){var e=i.splitSections(t);return e.shift(),e},i.matchPrefix=function(t,e){return i.splitLines(t).filter(function(t){return 0===t.indexOf(e)})},i.parseCandidate=function(t){for(var e,n={foundation:(e=0===t.indexOf("a=candidate:")?t.substring(12).split(" "):t.substring(10).split(" "))[0],component:parseInt(e[1],10),protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],port:parseInt(e[5],10),type:e[7]},i=8;i<e.length;i+=2)switch(e[i]){case"raddr":n.relatedAddress=e[i+1];break;case"rport":n.relatedPort=parseInt(e[i+1],10);break;case"tcptype":n.tcpType=e[i+1];break;case"ufrag":n.ufrag=e[i+1],n.usernameFragment=e[i+1];break;default:n[e[i]]=e[i+1]}return n},i.writeCandidate=function(t){var e=[];e.push(t.foundation),e.push(t.component),e.push(t.protocol.toUpperCase()),e.push(t.priority),e.push(t.ip),e.push(t.port);var n=t.type;return e.push("typ"),e.push(n),"host"!==n&&t.relatedAddress&&t.relatedPort&&(e.push("raddr"),e.push(t.relatedAddress),e.push("rport"),e.push(t.relatedPort)),t.tcpType&&"tcp"===t.protocol.toLowerCase()&&(e.push("tcptype"),e.push(t.tcpType)),t.ufrag&&(e.push("ufrag"),e.push(t.ufrag)),"candidate:"+e.join(" ")},i.parseIceOptions=function(t){return t.substr(14).split(" ")},i.parseRtpMap=function(t){var e=t.substr(9).split(" "),n={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),n.name=e[0],n.clockRate=parseInt(e[1],10),n.numChannels=3===e.length?parseInt(e[2],10):1,n},i.writeRtpMap=function(t){var e=t.payloadType;return void 0!==t.preferredPayloadType&&(e=t.preferredPayloadType),"a=rtpmap:"+e+" "+t.name+"/"+t.clockRate+(1!==t.numChannels?"/"+t.numChannels:"")+"\r\n"},i.parseExtmap=function(t){var e=t.substr(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1]}},i.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&"sendrecv"!==t.direction?"/"+t.direction:"")+" "+t.uri+"\r\n"},i.parseFmtp=function(t){for(var e,n={},i=t.substr(t.indexOf(" ")+1).split(";"),r=0;r<i.length;r++)n[(e=i[r].trim().split("="))[0].trim()]=e[1];return n},i.writeFmtp=function(t){var e="",n=t.payloadType;if(void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){var i=[];Object.keys(t.parameters).forEach(function(e){i.push(e+"="+t.parameters[e])}),e+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return e},i.parseRtcpFb=function(t){var e=t.substr(t.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},i.writeRtcpFb=function(t){var e="",n=t.payloadType;return void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(function(t){e+="a=rtcp-fb:"+n+" "+t.type+(t.parameter&&t.parameter.length?" "+t.parameter:"")+"\r\n"}),e},i.parseSsrcMedia=function(t){var e=t.indexOf(" "),n={ssrc:parseInt(t.substr(7,e-7),10)},i=t.indexOf(":",e);return i>-1?(n.attribute=t.substr(e+1,i-e-1),n.value=t.substr(i+1)):n.attribute=t.substr(e+1),n},i.getMid=function(t){var e=i.matchPrefix(t,"a=mid:")[0];if(e)return e.substr(6)},i.parseFingerprint=function(t){var e=t.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},i.getDtlsParameters=function(t,e){return{role:"auto",fingerprints:i.matchPrefix(t+e,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(t,e){var n="a=setup:"+e+"\r\n";return t.fingerprints.forEach(function(t){n+="a=fingerprint:"+t.algorithm+" "+t.value+"\r\n"}),n},i.getIceParameters=function(t,e){var n=i.splitLines(t);return{usernameFragment:(n=n.concat(i.splitLines(e))).filter(function(t){return 0===t.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(t){return 0===t.indexOf("a=ice-pwd:")})[0].substr(10)}},i.writeIceParameters=function(t){return"a=ice-ufrag:"+t.usernameFragment+"\r\na=ice-pwd:"+t.password+"\r\n"},i.parseRtpParameters=function(t){for(var e={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=i.splitLines(t)[0].split(" "),r=3;r<n.length;r++){var o=n[r],a=i.matchPrefix(t,"a=rtpmap:"+o+" ")[0];if(a){var s=i.parseRtpMap(a),c=i.matchPrefix(t,"a=fmtp:"+o+" ");switch(s.parameters=c.length?i.parseFmtp(c[0]):{},s.rtcpFeedback=i.matchPrefix(t,"a=rtcp-fb:"+o+" ").map(i.parseRtcpFb),e.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":e.fecMechanisms.push(s.name.toUpperCase())}}}return i.matchPrefix(t,"a=extmap:").forEach(function(t){e.headerExtensions.push(i.parseExtmap(t))}),e},i.writeRtpDescription=function(t,e){var n="";n+="m="+t+" ",n+=e.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=e.codecs.map(function(t){return void 0!==t.preferredPayloadType?t.preferredPayloadType:t.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",e.codecs.forEach(function(t){n+=i.writeRtpMap(t),n+=i.writeFmtp(t),n+=i.writeRtcpFb(t)});var r=0;return e.codecs.forEach(function(t){t.maxptime>r&&(r=t.maxptime)}),r>0&&(n+="a=maxptime:"+r+"\r\n"),n+="a=rtcp-mux\r\n",e.headerExtensions.forEach(function(t){n+=i.writeExtmap(t)}),n},i.parseRtpEncodingParameters=function(t){var e,n=[],r=i.parseRtpParameters(t),o=-1!==r.fecMechanisms.indexOf("RED"),a=-1!==r.fecMechanisms.indexOf("ULPFEC"),s=i.matchPrefix(t,"a=ssrc:").map(function(t){return i.parseSsrcMedia(t)}).filter(function(t){return"cname"===t.attribute}),c=s.length>0&&s[0].ssrc,l=i.matchPrefix(t,"a=ssrc-group:FID").map(function(t){var e=t.split(" ");return e.shift(),e.map(function(t){return parseInt(t,10)})});l.length>0&&l[0].length>1&&l[0][0]===c&&(e=l[0][1]),r.codecs.forEach(function(t){if("RTX"===t.name.toUpperCase()&&t.parameters.apt){var i={ssrc:c,codecPayloadType:parseInt(t.parameters.apt,10),rtx:{ssrc:e}};n.push(i),o&&((i=JSON.parse(JSON.stringify(i))).fec={ssrc:e,mechanism:a?"red+ulpfec":"red"},n.push(i))}}),0===n.length&&c&&n.push({ssrc:c});var u=i.matchPrefix(t,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(t){t.maxBitrate=u})),n},i.parseRtcpParameters=function(t){var e={},n=i.matchPrefix(t,"a=ssrc:").map(function(t){return i.parseSsrcMedia(t)}).filter(function(t){return"cname"===t.attribute})[0];n&&(e.cname=n.value,e.ssrc=n.ssrc);var r=i.matchPrefix(t,"a=rtcp-rsize");e.reducedSize=r.length>0,e.compound=0===r.length;var o=i.matchPrefix(t,"a=rtcp-mux");return e.mux=o.length>0,e},i.parseMsid=function(t){var e,n=i.matchPrefix(t,"a=msid:");if(1===n.length)return{stream:(e=n[0].substr(7).split(" "))[0],track:e[1]};var r=i.matchPrefix(t,"a=ssrc:").map(function(t){return i.parseSsrcMedia(t)}).filter(function(t){return"msid"===t.attribute});return r.length>0?{stream:(e=r[0].value.split(" "))[0],track:e[1]}:void 0},i.generateSessionId=function(){return Math.random().toString().substr(2,21)},i.writeSessionBoilerplate=function(t,e){var n=void 0!==e?e:2;return"v=0\r\no=thisisadapterortc "+(t||i.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.writeMediaSection=function(t,e,n,r){var o=i.writeRtpDescription(t.kind,e);if(o+=i.writeIceParameters(t.iceGatherer.getLocalParameters()),o+=i.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+t.mid+"\r\n",t.direction?o+="a="+t.direction+"\r\n":t.rtpSender&&t.rtpReceiver?o+="a=sendrecv\r\n":t.rtpSender?o+="a=sendonly\r\n":t.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",t.rtpSender){var a="msid:"+r.id+" "+t.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+a,t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),o},i.getDirection=function(t,e){for(var n=i.splitLines(t),r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substr(2)}return e?i.getDirection(e):"sendrecv"},i.getKind=function(t){return i.splitLines(t)[0].split(" ")[0].substr(2)},i.isRejected=function(t){return"0"===t.split(" ",2)[1]},i.parseMLine=function(t){var e=i.splitLines(t)[0].substr(2).split(" ");return{kind:e[0],port:parseInt(e[1],10),protocol:e[2],fmt:e.slice(3).join(" ")}},i.parseOLine=function(t){var e=i.matchPrefix(t,"o=")[0].substr(2).split(" ");return{username:e[0],sessionId:e[1],sessionVersion:parseInt(e[2],10),netType:e[3],addressType:e[4],address:e[5]}},t.exports=i},function(t,e,n){"use strict";var i=n(204);function r(t,e,n,r,o){var a=i.writeRtpDescription(t.kind,e);if(a+=i.writeIceParameters(t.iceGatherer.getLocalParameters()),a+=i.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),a+="a=mid:"+t.mid+"\r\n",t.rtpSender&&t.rtpReceiver?a+="a=sendrecv\r\n":t.rtpSender?a+="a=sendonly\r\n":t.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",t.rtpSender){var s=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=s;var c="msid:"+(r?r.id:"-")+" "+s+"\r\n";a+="a="+c,a+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+c,t.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+c,a+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",t.rtpSender&&t.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),a}function o(t,e){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},i=function(t,e){t=parseInt(t,10);for(var n=0;n<e.length;n++)if(e[n].payloadType===t||e[n].preferredPayloadType===t)return e[n]},r=function(t,e,n,r){var o=i(t.parameters.apt,n),a=i(e.parameters.apt,r);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return t.codecs.forEach(function(i){for(var o=0;o<e.codecs.length;o++){var a=e.codecs[o];if(i.name.toLowerCase()===a.name.toLowerCase()&&i.clockRate===a.clockRate){if("rtx"===i.name.toLowerCase()&&i.parameters&&a.parameters.apt&&!r(i,a,t.codecs,e.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(i.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter(function(t){for(var e=0;e<i.rtcpFeedback.length;e++)if(i.rtcpFeedback[e].type===t.type&&i.rtcpFeedback[e].parameter===t.parameter)return!0;return!1});break}}}),t.headerExtensions.forEach(function(t){for(var i=0;i<e.headerExtensions.length;i++){var r=e.headerExtensions[i];if(t.uri===r.uri){n.headerExtensions.push(r);break}}}),n}function a(t,e,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[e][t].indexOf(n)}function s(t,e){var n=t.getRemoteCandidates().find(function(t){return e.foundation===t.foundation&&e.ip===t.ip&&e.port===t.port&&e.priority===t.priority&&e.protocol===t.protocol&&e.type===t.type});return n||t.addRemoteCandidate(e),!n}function c(t,e){var n=new Error(e);return n.name=t,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t],n}t.exports=function(t,e){function n(e,n){n.addTrack(e),n.dispatchEvent(new t.MediaStreamTrackEvent("addtrack",{track:e}))}function l(e,n,i,r){var o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=r,t.setTimeout(function(){e._dispatchEvent("track",o)})}var u=function(n){var r=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(t){r[t]=o[t].bind(o)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this.localDescription=null,this.remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(t,e){var n=!1;return(t=JSON.parse(JSON.stringify(t))).filter(function(t){if(t&&(t.urls||t.url)){var i=t.urls||t.url;t.url&&t.urls;var r="string"==typeof i;return r&&(i=[i]),i=i.filter(function(t){return 0!==t.indexOf("turn:")||-1===t.indexOf("transport=udp")||-1!==t.indexOf("turn:[")||n?0===t.indexOf("stun:")&&e>=14393&&-1===t.indexOf("?transport=udp"):(n=!0,!0)}),delete t.url,t.urls=r?i[0]:i,!!i.length}})}(n.iceServers||[],e),this._iceGatherers=[],n.iceCandidatePoolSize)for(var a=n.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new t.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=i.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};u.prototype.onicecandidate=null,u.prototype.onaddstream=null,u.prototype.ontrack=null,u.prototype.onremovestream=null,u.prototype.onsignalingstatechange=null,u.prototype.oniceconnectionstatechange=null,u.prototype.onconnectionstatechange=null,u.prototype.onicegatheringstatechange=null,u.prototype.onnegotiationneeded=null,u.prototype.ondatachannel=null,u.prototype._dispatchEvent=function(t,e){this._isClosed||(this.dispatchEvent(e),"function"==typeof this["on"+t]&&this["on"+t](e))},u.prototype._emitGatheringStateChange=function(){var t=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",t)},u.prototype.getConfiguration=function(){return this._config},u.prototype.getLocalStreams=function(){return this.localStreams},u.prototype.getRemoteStreams=function(){return this.remoteStreams},u.prototype._createTransceiver=function(t,e){var n=this.transceivers.length>0,i={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:t,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)i.iceTransport=this.transceivers[0].iceTransport,i.dtlsTransport=this.transceivers[0].dtlsTransport;else{var r=this._createIceAndDtlsTransports();i.iceTransport=r.iceTransport,i.dtlsTransport=r.dtlsTransport}return e||this.transceivers.push(i),i},u.prototype.addTrack=function(e,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var i;if(this.transceivers.find(function(t){return t.track===e}))throw c("InvalidAccessError","Track already exists.");for(var r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==e.kind||(i=this.transceivers[r]);return i||(i=this._createTransceiver(e.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),i.track=e,i.stream=n,i.rtpSender=new t.RTCRtpSender(e,i.dtlsTransport),i.rtpSender},u.prototype.addStream=function(t){var n=this;if(e>=15025)t.getTracks().forEach(function(e){n.addTrack(e,t)});else{var i=t.clone();t.getTracks().forEach(function(t,e){var n=i.getTracks()[e];t.addEventListener("enabled",function(t){n.enabled=t.enabled})}),i.getTracks().forEach(function(t){n.addTrack(t,i)})}},u.prototype.removeTrack=function(e){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(e instanceof t.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find(function(t){return t.rtpSender===e});if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var i=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map(function(t){return t.stream}).indexOf(i)&&this.localStreams.indexOf(i)>-1&&this.localStreams.splice(this.localStreams.indexOf(i),1),this._maybeFireNegotiationNeeded()},u.prototype.removeStream=function(t){var e=this;t.getTracks().forEach(function(t){var n=e.getSenders().find(function(e){return e.track===t});n&&e.removeTrack(n)})},u.prototype.getSenders=function(){return this.transceivers.filter(function(t){return!!t.rtpSender}).map(function(t){return t.rtpSender})},u.prototype.getReceivers=function(){return this.transceivers.filter(function(t){return!!t.rtpReceiver}).map(function(t){return t.rtpReceiver})},u.prototype._createIceGatherer=function(e,n){var i=this;if(n&&e>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var r=new t.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(r,"state",{value:"new",writable:!0}),this.transceivers[e].bufferedCandidateEvents=[],this.transceivers[e].bufferCandidates=function(t){var n=!t.candidate||0===Object.keys(t.candidate).length;r.state=n?"completed":"gathering",null!==i.transceivers[e].bufferedCandidateEvents&&i.transceivers[e].bufferedCandidateEvents.push(t)},r.addEventListener("localcandidate",this.transceivers[e].bufferCandidates),r},u.prototype._gather=function(e,n){var r=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var a=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(t){if(!(r.usingBundle&&n>0)){var a=new Event("icecandidate");a.candidate={sdpMid:e,sdpMLineIndex:n};var s=t.candidate,c=!s||0===Object.keys(s).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),s.component=1;var l=i.writeCandidate(s);a.candidate=Object.assign(a.candidate,i.parseCandidate(l)),a.candidate.candidate=l}var u=i.getMediaSections(r.localDescription.sdp);u[a.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",r.localDescription.sdp=i.getDescription(r.localDescription.sdp)+u.join("");var h=r.transceivers.every(function(t){return t.iceGatherer&&"completed"===t.iceGatherer.state});"gathering"!==r.iceGatheringState&&(r.iceGatheringState="gathering",r._emitGatheringStateChange()),c||r._dispatchEvent("icecandidate",a),h&&(r._dispatchEvent("icecandidate",new Event("icecandidate")),r.iceGatheringState="complete",r._emitGatheringStateChange())}},t.setTimeout(function(){a.forEach(function(t){o.onlocalcandidate(t)})},0)}},u.prototype._createIceAndDtlsTransports=function(){var e=this,n=new t.RTCIceTransport(null);n.onicestatechange=function(){e._updateIceConnectionState(),e._updateConnectionState()};var i=new t.RTCDtlsTransport(n);return i.ondtlsstatechange=function(){e._updateConnectionState()},i.onerror=function(){Object.defineProperty(i,"state",{value:"failed",writable:!0}),e._updateConnectionState()},{iceTransport:n,dtlsTransport:i}},u.prototype._disposeIceAndDtlsTransports=function(t){var e=this.transceivers[t].iceGatherer;e&&(delete e.onlocalcandidate,delete this.transceivers[t].iceGatherer);var n=this.transceivers[t].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[t].iceTransport);var i=this.transceivers[t].dtlsTransport;i&&(delete i.ondtlsstatechange,delete i.onerror,delete this.transceivers[t].dtlsTransport)},u.prototype._transceive=function(t,n,r){var a=o(t.localCapabilities,t.remoteCapabilities);n&&t.rtpSender&&(a.encodings=t.sendEncodingParameters,a.rtcp={cname:i.localCName,compound:t.rtcpParameters.compound},t.recvEncodingParameters.length&&(a.rtcp.ssrc=t.recvEncodingParameters[0].ssrc),t.rtpSender.send(a)),r&&t.rtpReceiver&&a.codecs.length>0&&("video"===t.kind&&t.recvEncodingParameters&&e<15019&&t.recvEncodingParameters.forEach(function(t){delete t.rtx}),t.recvEncodingParameters.length?a.encodings=t.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:t.rtcpParameters.compound},t.rtcpParameters.cname&&(a.rtcp.cname=t.rtcpParameters.cname),t.sendEncodingParameters.length&&(a.rtcp.ssrc=t.sendEncodingParameters[0].ssrc),t.rtpReceiver.receive(a))},u.prototype.setLocalDescription=function(t){var e,n,r=this;if(-1===["offer","answer"].indexOf(t.type))return Promise.reject(c("TypeError",'Unsupported type "'+t.type+'"'));if(!a("setLocalDescription",t.type,r.signalingState)||r._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+t.type+" in state "+r.signalingState));if("offer"===t.type)e=i.splitSections(t.sdp),n=e.shift(),e.forEach(function(t,e){var n=i.parseRtpParameters(t);r.transceivers[e].localCapabilities=n}),r.transceivers.forEach(function(t,e){r._gather(t.mid,e)});else if("answer"===t.type){e=i.splitSections(r.remoteDescription.sdp),n=e.shift();var s=i.matchPrefix(n,"a=ice-lite").length>0;e.forEach(function(t,e){var a=r.transceivers[e],c=a.iceGatherer,l=a.iceTransport,u=a.dtlsTransport,h=a.localCapabilities,d=a.remoteCapabilities;if(!(i.isRejected(t)&&0===i.matchPrefix(t,"a=bundle-only").length||a.rejected)){var p=i.getIceParameters(t,n),f=i.getDtlsParameters(t,n);s&&(f.role="server"),r.usingBundle&&0!==e||(r._gather(a.mid,e),"new"===l.state&&l.start(c,p,s?"controlling":"controlled"),"new"===u.state&&u.start(f));var m=o(h,d);r._transceive(a,m.codecs.length>0,!1)}})}return r.localDescription={type:t.type,sdp:t.sdp},"offer"===t.type?r._updateSignalingState("have-local-offer"):r._updateSignalingState("stable"),Promise.resolve()},u.prototype.setRemoteDescription=function(r){var o=this;if(-1===["offer","answer"].indexOf(r.type))return Promise.reject(c("TypeError",'Unsupported type "'+r.type+'"'));if(!a("setRemoteDescription",r.type,o.signalingState)||o._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+r.type+" in state "+o.signalingState));var u={};o.remoteStreams.forEach(function(t){u[t.id]=t});var h=[],d=i.splitSections(r.sdp),p=d.shift(),f=i.matchPrefix(p,"a=ice-lite").length>0,m=i.matchPrefix(p,"a=group:BUNDLE ").length>0;o.usingBundle=m;var g=i.matchPrefix(p,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,d.forEach(function(a,c){var l=i.splitLines(a),d=i.getKind(a),g=i.isRejected(a)&&0===i.matchPrefix(a,"a=bundle-only").length,v=l[0].substr(2).split(" ")[2],y=i.getDirection(a,p),A=i.parseMsid(a),w=i.getMid(a)||i.generateIdentifier();if("application"===d&&"DTLS/SCTP"===v||g)o.transceivers[c]={mid:w,kind:d,rejected:!0};else{var b,M,E,x,T,C,S,D,_;!g&&o.transceivers[c]&&o.transceivers[c].rejected&&(o.transceivers[c]=o._createTransceiver(d,!0));var L,N,I=i.parseRtpParameters(a);g||(L=i.getIceParameters(a,p),(N=i.getDtlsParameters(a,p)).role="client"),S=i.parseRtpEncodingParameters(a);var O=i.parseRtcpParameters(a),j=i.matchPrefix(a,"a=end-of-candidates",p).length>0,P=i.matchPrefix(a,"a=candidate:").map(function(t){return i.parseCandidate(t)}).filter(function(t){return 1===t.component});if(("offer"===r.type||"answer"===r.type)&&!g&&m&&c>0&&o.transceivers[c]&&(o._disposeIceAndDtlsTransports(c),o.transceivers[c].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[c].iceTransport=o.transceivers[0].iceTransport,o.transceivers[c].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[c].rtpSender&&o.transceivers[c].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[c].rtpReceiver&&o.transceivers[c].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==r.type||g)"answer"!==r.type||g||(M=(b=o.transceivers[c]).iceGatherer,E=b.iceTransport,x=b.dtlsTransport,T=b.rtpReceiver,C=b.sendEncodingParameters,D=b.localCapabilities,o.transceivers[c].recvEncodingParameters=S,o.transceivers[c].remoteCapabilities=I,o.transceivers[c].rtcpParameters=O,P.length&&"new"===E.state&&(!f&&!j||m&&0!==c?P.forEach(function(t){s(b.iceTransport,t)}):E.setRemoteCandidates(P)),m&&0!==c||("new"===E.state&&E.start(M,L,"controlling"),"new"===x.state&&x.start(N)),o._transceive(b,"sendrecv"===y||"recvonly"===y,"sendrecv"===y||"sendonly"===y),!T||"sendrecv"!==y&&"sendonly"!==y?delete b.rtpReceiver:(_=T.track,A?(u[A.stream]||(u[A.stream]=new t.MediaStream),n(_,u[A.stream]),h.push([_,T,u[A.stream]])):(u.default||(u.default=new t.MediaStream),n(_,u.default),h.push([_,T,u.default]))));else{(b=o.transceivers[c]||o._createTransceiver(d)).mid=w,b.iceGatherer||(b.iceGatherer=o._createIceGatherer(c,m)),P.length&&"new"===b.iceTransport.state&&(!j||m&&0!==c?P.forEach(function(t){s(b.iceTransport,t)}):b.iceTransport.setRemoteCandidates(P)),D=t.RTCRtpReceiver.getCapabilities(d),e<15019&&(D.codecs=D.codecs.filter(function(t){return"rtx"!==t.name})),C=b.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var R,k=!1;"sendrecv"===y||"sendonly"===y?(k=!b.rtpReceiver,T=b.rtpReceiver||new t.RTCRtpReceiver(b.dtlsTransport,d),k&&(_=T.track,A&&"-"===A.stream||(A?(u[A.stream]||(u[A.stream]=new t.MediaStream,Object.defineProperty(u[A.stream],"id",{get:function(){return A.stream}})),Object.defineProperty(_,"id",{get:function(){return A.track}}),R=u[A.stream]):(u.default||(u.default=new t.MediaStream),R=u.default)),R&&(n(_,R),b.associatedRemoteMediaStreams.push(R)),h.push([_,T,R]))):b.rtpReceiver&&b.rtpReceiver.track&&(b.associatedRemoteMediaStreams.forEach(function(e){var n,i,r=e.getTracks().find(function(t){return t.id===b.rtpReceiver.track.id});r&&(n=r,(i=e).removeTrack(n),i.dispatchEvent(new t.MediaStreamTrackEvent("removetrack",{track:n})))}),b.associatedRemoteMediaStreams=[]),b.localCapabilities=D,b.remoteCapabilities=I,b.rtpReceiver=T,b.rtcpParameters=O,b.sendEncodingParameters=C,b.recvEncodingParameters=S,o._transceive(o.transceivers[c],!1,k)}}}),void 0===o._dtlsRole&&(o._dtlsRole="offer"===r.type?"active":"passive"),o.remoteDescription={type:r.type,sdp:r.sdp},"offer"===r.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),Object.keys(u).forEach(function(e){var n=u[e];if(n.getTracks().length){if(-1===o.remoteStreams.indexOf(n)){o.remoteStreams.push(n);var i=new Event("addstream");i.stream=n,t.setTimeout(function(){o._dispatchEvent("addstream",i)})}h.forEach(function(t){var e=t[0],i=t[1];n.id===t[2].id&&l(o,e,i,[n])})}}),h.forEach(function(t){t[2]||l(o,t[0],t[1],[])}),t.setTimeout(function(){o&&o.transceivers&&o.transceivers.forEach(function(t){t.iceTransport&&"new"===t.iceTransport.state&&t.iceTransport.getRemoteCandidates().length>0&&t.iceTransport.addRemoteCandidate({})})},4e3),Promise.resolve()},u.prototype.close=function(){this.transceivers.forEach(function(t){t.iceTransport&&t.iceTransport.stop(),t.dtlsTransport&&t.dtlsTransport.stop(),t.rtpSender&&t.rtpSender.stop(),t.rtpReceiver&&t.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},u.prototype._updateSignalingState=function(t){this.signalingState=t;var e=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",e)},u.prototype._maybeFireNegotiationNeeded=function(){var e=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,t.setTimeout(function(){if(e.needNegotiation){e.needNegotiation=!1;var t=new Event("negotiationneeded");e._dispatchEvent("negotiationneeded",t)}},0))},u.prototype._updateIceConnectionState=function(){var t,e={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(t){e[t.iceTransport.state]++}),t="new",e.failed>0?t="failed":e.checking>0?t="checking":e.disconnected>0?t="disconnected":e.new>0?t="new":e.connected>0?t="connected":e.completed>0&&(t="completed"),t!==this.iceConnectionState){this.iceConnectionState=t;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},u.prototype._updateConnectionState=function(){var t,e={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(t){e[t.iceTransport.state]++,e[t.dtlsTransport.state]++}),e.connected+=e.completed,t="new",e.failed>0?t="failed":e.connecting>0?t="connecting":e.disconnected>0?t="disconnected":e.new>0?t="new":e.connected>0&&(t="connected"),t!==this.connectionState){this.connectionState=t;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},u.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter(function(t){return"audio"===t.kind}).length,a=n.transceivers.filter(function(t){return"video"===t.kind}).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(o=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(a=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(n.transceivers.forEach(function(t){"audio"===t.kind?--o<0&&(t.wantReceive=!1):"video"===t.kind&&--a<0&&(t.wantReceive=!1)});o>0||a>0;)o>0&&(n._createTransceiver("audio"),o--),a>0&&(n._createTransceiver("video"),a--);var l=i.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach(function(r,o){var a=r.track,s=r.kind,c=r.mid||i.generateIdentifier();r.mid=c,r.iceGatherer||(r.iceGatherer=n._createIceGatherer(o,n.usingBundle));var l=t.RTCRtpSender.getCapabilities(s);e<15019&&(l.codecs=l.codecs.filter(function(t){return"rtx"!==t.name})),l.codecs.forEach(function(t){"H264"===t.name&&void 0===t.parameters["level-asymmetry-allowed"]&&(t.parameters["level-asymmetry-allowed"]="1"),r.remoteCapabilities&&r.remoteCapabilities.codecs&&r.remoteCapabilities.codecs.forEach(function(e){t.name.toLowerCase()===e.name.toLowerCase()&&t.clockRate===e.clockRate&&(t.preferredPayloadType=e.payloadType)})}),l.headerExtensions.forEach(function(t){(r.remoteCapabilities&&r.remoteCapabilities.headerExtensions||[]).forEach(function(e){t.uri===e.uri&&(t.id=e.id)})});var u=r.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];a&&e>=15019&&"video"===s&&!u[0].rtx&&(u[0].rtx={ssrc:u[0].ssrc+1}),r.wantReceive&&(r.rtpReceiver=new t.RTCRtpReceiver(r.dtlsTransport,s)),r.localCapabilities=l,r.sendEncodingParameters=u}),"max-compat"!==n._config.bundlePolicy&&(l+="a=group:BUNDLE "+n.transceivers.map(function(t){return t.mid}).join(" ")+"\r\n"),l+="a=ice-options:trickle\r\n",n.transceivers.forEach(function(t,e){l+=r(t,t.localCapabilities,"offer",t.stream,n._dtlsRole),l+="a=rtcp-rsize\r\n",!t.iceGatherer||"new"===n.iceGatheringState||0!==e&&n.usingBundle||(t.iceGatherer.getLocalCandidates().forEach(function(t){t.component=1,l+="a="+i.writeCandidate(t)+"\r\n"}),"completed"===t.iceGatherer.state&&(l+="a=end-of-candidates\r\n"))});var u=new t.RTCSessionDescription({type:"offer",sdp:l});return Promise.resolve(u)},u.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var a=i.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(a+="a=group:BUNDLE "+n.transceivers.map(function(t){return t.mid}).join(" ")+"\r\n");var s=i.getMediaSections(n.remoteDescription.sdp).length;n.transceivers.forEach(function(t,i){if(!(i+1>s)){if(t.rejected)return"application"===t.kind?a+="m=application 0 DTLS/SCTP 5000\r\n":"audio"===t.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===t.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+t.mid+"\r\n");var c;t.stream&&("audio"===t.kind?c=t.stream.getAudioTracks()[0]:"video"===t.kind&&(c=t.stream.getVideoTracks()[0]),c&&e>=15019&&"video"===t.kind&&!t.sendEncodingParameters[0].rtx&&(t.sendEncodingParameters[0].rtx={ssrc:t.sendEncodingParameters[0].ssrc+1}));var l=o(t.localCapabilities,t.remoteCapabilities);!l.codecs.filter(function(t){return"rtx"===t.name.toLowerCase()}).length&&t.sendEncodingParameters[0].rtx&&delete t.sendEncodingParameters[0].rtx,a+=r(t,l,"answer",t.stream,n._dtlsRole),t.rtcpParameters&&t.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}});var l=new t.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(l)},u.prototype.addIceCandidate=function(t){var e,n=this;return t&&void 0===t.sdpMLineIndex&&!t.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(r,o){if(!n.remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(t&&""!==t.candidate){var a=t.sdpMLineIndex;if(t.sdpMid)for(var l=0;l<n.transceivers.length;l++)if(n.transceivers[l].mid===t.sdpMid){a=l;break}var u=n.transceivers[a];if(!u)return o(c("OperationError","Can not add ICE candidate"));if(u.rejected)return r();var h=Object.keys(t.candidate).length>0?i.parseCandidate(t.candidate):{};if("tcp"===h.protocol&&(0===h.port||9===h.port))return r();if(h.component&&1!==h.component)return r();if((0===a||a>0&&u.iceTransport!==n.transceivers[0].iceTransport)&&!s(u.iceTransport,h))return o(c("OperationError","Can not add ICE candidate"));var d=t.candidate.trim();0===d.indexOf("a=")&&(d=d.substr(2)),(e=i.getMediaSections(n.remoteDescription.sdp))[a]+="a="+(h.type?d:"end-of-candidates")+"\r\n",n.remoteDescription.sdp=e.join("")}else for(var p=0;p<n.transceivers.length&&(n.transceivers[p].rejected||(n.transceivers[p].iceTransport.addRemoteCandidate({}),(e=i.getMediaSections(n.remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",n.remoteDescription.sdp=i.getDescription(n.remoteDescription.sdp)+e.join(""),!n.usingBundle));p++);r()})},u.prototype.getStats=function(){var t=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){e[n]&&t.push(e[n].getStats())})}),new Promise(function(e){var n=new Map;Promise.all(t).then(function(t){t.forEach(function(t){Object.keys(t).forEach(function(e){var i;t[e].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(i=t[e]).type]||i.type,n.set(e,t[e])})}),e(n)})})};var h=["createOffer","createAnswer"];return h.forEach(function(t){var e=u.prototype[t];u.prototype[t]=function(){var t=arguments;return"function"==typeof t[0]||"function"==typeof t[1]?e.apply(this,[arguments[2]]).then(function(e){"function"==typeof t[0]&&t[0].apply(null,[e])},function(e){"function"==typeof t[1]&&t[1].apply(null,[e])}):e.apply(this,arguments)}}),(h=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(t){var e=u.prototype[t];u.prototype[t]=function(){var t=arguments;return"function"==typeof t[1]||"function"==typeof t[2]?e.apply(this,arguments).then(function(){"function"==typeof t[1]&&t[1].apply(null)},function(e){"function"==typeof t[2]&&t[2].apply(null,[e])}):e.apply(this,arguments)}}),["getStats"].forEach(function(t){var e=u.prototype[t];u.prototype[t]=function(){var t=arguments;return"function"==typeof t[1]?e.apply(this,arguments).then(function(){"function"==typeof t[1]&&t[1].apply(null)}):e.apply(this,arguments)}}),u}},function(t,e,n){"use strict";var i=n(13),r=n(205);t.exports={shimGetUserMedia:n(203),shimPeerConnection:function(t){var e=i.detectBrowser(t);if(t.RTCIceGatherer&&(t.RTCIceCandidate||(t.RTCIceCandidate=function(t){return t}),t.RTCSessionDescription||(t.RTCSessionDescription=function(t){return t}),e.version<15025)){var n=Object.getOwnPropertyDescriptor(t.MediaStreamTrack.prototype,"enabled");Object.defineProperty(t.MediaStreamTrack.prototype,"enabled",{set:function(t){n.set.call(this,t);var e=new Event("enabled");e.enabled=t,this.dispatchEvent(e)}})}!t.RTCRtpSender||"dtmf"in t.RTCRtpSender.prototype||Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new t.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),t.RTCDtmfSender&&!t.RTCDTMFSender&&(t.RTCDTMFSender=t.RTCDtmfSender),t.RTCPeerConnection=r(t,e.version)},shimReplaceTrack:function(t){!t.RTCRtpSender||"replaceTrack"in t.RTCRtpSender.prototype||(t.RTCRtpSender.prototype.replaceTrack=t.RTCRtpSender.prototype.setTrack)}}},function(t,e,n){"use strict";var i=n(13),r=i.log;t.exports=function(t){var e=i.detectBrowser(t),n=t&&t.navigator,o=function(t){if("object"!=typeof t||t.mandatory||t.optional)return t;var e={};return Object.keys(t).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"==typeof t[n]?t[n]:{ideal:t[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var r=function(t,e){return t?t+e.charAt(0).toUpperCase()+e.slice(1):"deviceId"===e?"sourceId":e};if(void 0!==i.ideal){e.optional=e.optional||[];var o={};"number"==typeof i.ideal?(o[r("min",n)]=i.ideal,e.optional.push(o),(o={})[r("max",n)]=i.ideal,e.optional.push(o)):(o[r("",n)]=i.ideal,e.optional.push(o))}void 0!==i.exact&&"number"!=typeof i.exact?(e.mandatory=e.mandatory||{},e.mandatory[r("",n)]=i.exact):["min","max"].forEach(function(t){void 0!==i[t]&&(e.mandatory=e.mandatory||{},e.mandatory[r(t,n)]=i[t])})}}),t.advanced&&(e.optional=(e.optional||[]).concat(t.advanced)),e},a=function(t,i){if(e.version>=61)return i(t);if((t=JSON.parse(JSON.stringify(t)))&&"object"==typeof t.audio){var a=function(t,e,n){e in t&&!(n in t)&&(t[n]=t[e],delete t[e])};a((t=JSON.parse(JSON.stringify(t))).audio,"autoGainControl","googAutoGainControl"),a(t.audio,"noiseSuppression","googNoiseSuppression"),t.audio=o(t.audio)}if(t&&"object"==typeof t.video){var s=t.video.facingMode;s=s&&("object"==typeof s?s:{ideal:s});var c,l=e.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||l)&&(delete t.video.facingMode,"environment"===s.exact||"environment"===s.ideal?c=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(c=["front"]),c))return n.mediaDevices.enumerateDevices().then(function(e){var n=(e=e.filter(function(t){return"videoinput"===t.kind})).find(function(t){return c.some(function(e){return-1!==t.label.toLowerCase().indexOf(e)})});return!n&&e.length&&-1!==c.indexOf("back")&&(n=e[e.length-1]),n&&(t.video.deviceId=s.exact?{exact:n.deviceId}:{ideal:n.deviceId}),t.video=o(t.video),r("chrome: "+JSON.stringify(t)),i(t)});t.video=o(t.video)}return r("chrome: "+JSON.stringify(t)),i(t)},s=function(t){return{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[t.name]||t.name,message:t.message,constraint:t.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};n.getUserMedia=function(t,e,i){a(t,function(t){n.webkitGetUserMedia(t,e,function(t){i&&i(s(t))})})};var c=function(t){return new Promise(function(e,i){n.getUserMedia(t,e,i)})};if(n.mediaDevices||(n.mediaDevices={getUserMedia:c,enumerateDevices:function(){return new Promise(function(e){var n={audio:"audioinput",video:"videoinput"};return t.MediaStreamTrack.getSources(function(t){e(t.map(function(t){return{label:t.label,kind:n[t.kind],deviceId:t.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),n.mediaDevices.getUserMedia){var l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return a(t,function(t){return l(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(t){t.stop()}),new DOMException("","NotFoundError");return e},function(t){return Promise.reject(s(t))})})}}else n.mediaDevices.getUserMedia=function(t){return c(t)};void 0===n.mediaDevices.addEventListener&&(n.mediaDevices.addEventListener=function(){r("Dummy mediaDevices.addEventListener called.")}),void 0===n.mediaDevices.removeEventListener&&(n.mediaDevices.removeEventListener=function(){r("Dummy mediaDevices.removeEventListener called.")})}},function(t,e,n){"use strict";var i=n(13),r=i.log;t.exports={shimGetUserMedia:n(207),shimMediaStream:function(t){t.MediaStream=t.MediaStream||t.webkitMediaStream},shimOnTrack:function(t){if("object"!=typeof t||!t.RTCPeerConnection||"ontrack"in t.RTCPeerConnection.prototype)"RTCRtpTransceiver"in t||i.wrapPeerConnectionEvent(t,"track",function(t){return t.transceiver||(t.transceiver={receiver:t.receiver}),t});else{Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)}});var e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return n._ontrackpoly||(n._ontrackpoly=function(e){e.stream.addEventListener("addtrack",function(i){var r;r=t.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(t){return t.track&&t.track.id===i.track.id}):{track:i.track};var o=new Event("track");o.track=i.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[e.stream],n.dispatchEvent(o)}),e.stream.getTracks().forEach(function(i){var r;r=t.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(t){return t.track&&t.track.id===i.id}):{track:i};var o=new Event("track");o.track=i,o.receiver=r,o.transceiver={receiver:r},o.streams=[e.stream],n.dispatchEvent(o)})},n.addEventListener("addstream",n._ontrackpoly)),e.apply(n,arguments)}}},shimGetSendersWithDtmf:function(t){if("object"==typeof t&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){var e=function(t,e){return{track:e,get dtmf(){return void 0===this._dtmf&&("audio"===e.kind?this._dtmf=t.createDTMFSender(e):this._dtmf=null),this._dtmf},_pc:t}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(t,i){var r=n.apply(this,arguments);return r||(r=e(this,t),this._senders.push(r)),r};var i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(t){i.apply(this,arguments);var e=this._senders.indexOf(t);-1!==e&&this._senders.splice(e,1)}}var r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(t){var n=this;n._senders=n._senders||[],r.apply(n,[t]),t.getTracks().forEach(function(t){n._senders.push(e(n,t))})};var o=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(t){var e=this;e._senders=e._senders||[],o.apply(e,[t]),t.getTracks().forEach(function(t){var n=e._senders.find(function(e){return e.track===t});n&&e._senders.splice(e._senders.indexOf(n),1)})}}else if("object"==typeof t&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){var a=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=a.apply(t,[]);return e.forEach(function(e){e._pc=t}),e},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSourceObject:function(t){var e=t&&t.URL;"object"==typeof t&&(!t.HTMLMediaElement||"srcObject"in t.HTMLMediaElement.prototype||Object.defineProperty(t.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(t){var n=this;this._srcObject=t,this.src&&e.revokeObjectURL(this.src),t?(this.src=e.createObjectURL(t),t.addEventListener("addtrack",function(){n.src&&e.revokeObjectURL(n.src),n.src=e.createObjectURL(t)}),t.addEventListener("removetrack",function(){n.src&&e.revokeObjectURL(n.src),n.src=e.createObjectURL(t)})):this.src=""}}))},shimAddTrackRemoveTrackWithNative:function(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(e){return t._shimmedLocalStreams[e][0]})};var e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(t,n){if(!n)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var i=e.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(i)&&this._shimmedLocalStreams[n.id].push(i):this._shimmedLocalStreams[n.id]=[n,i],i};var n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(t){var e=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},t.getTracks().forEach(function(t){if(e.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")});var i=e.getSenders();n.apply(this,arguments);var r=e.getSenders().filter(function(t){return-1===i.indexOf(t)});this._shimmedLocalStreams[t.id]=[t].concat(r)};var i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(t){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[t.id],i.apply(this,arguments)};var r=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(t){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},t&&Object.keys(this._shimmedLocalStreams).forEach(function(n){var i=e._shimmedLocalStreams[n].indexOf(t);-1!==i&&e._shimmedLocalStreams[n].splice(i,1),1===e._shimmedLocalStreams[n].length&&delete e._shimmedLocalStreams[n]}),r.apply(this,arguments)}},shimAddTrackRemoveTrack:function(t){var e=i.detectBrowser(t);if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return this.shimAddTrackRemoveTrackWithNative(t);var n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this,e=n.apply(this);return t._reverseStreams=t._reverseStreams||{},e.map(function(e){return t._reverseStreams[e.id]})};var r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(e){var n=this;if(n._streams=n._streams||{},n._reverseStreams=n._reverseStreams||{},e.getTracks().forEach(function(t){if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")}),!n._reverseStreams[e.id]){var i=new t.MediaStream(e.getTracks());n._streams[e.id]=i,n._reverseStreams[i.id]=e,e=i}r.apply(n,[e])};var o=t.RTCPeerConnection.prototype.removeStream;function a(t,e){var n=e.sdp;return Object.keys(t._reverseStreams||[]).forEach(function(e){var i=t._reverseStreams[e],r=t._streams[i.id];n=n.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:e.type,sdp:n})}t.RTCPeerConnection.prototype.removeStream=function(t){var e=this;e._streams=e._streams||{},e._reverseStreams=e._reverseStreams||{},o.apply(e,[e._streams[t.id]||t]),delete e._reverseStreams[e._streams[t.id]?e._streams[t.id].id:t.id],delete e._streams[t.id]},t.RTCPeerConnection.prototype.addTrack=function(e,n){var i=this;if("closed"===i.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(function(t){return t===e}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(i.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError");i._streams=i._streams||{},i._reverseStreams=i._reverseStreams||{};var o=i._streams[n.id];if(o)o.addTrack(e),Promise.resolve().then(function(){i.dispatchEvent(new Event("negotiationneeded"))});else{var a=new t.MediaStream([e]);i._streams[n.id]=a,i._reverseStreams[a.id]=n,i.addStream(a)}return i.getSenders().find(function(t){return t.track===e})},["createOffer","createAnswer"].forEach(function(e){var n=t.RTCPeerConnection.prototype[e];t.RTCPeerConnection.prototype[e]=function(){var t=this,e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(t,[function(n){var i=a(t,n);e[0].apply(null,[i])},function(t){e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(t,arguments).then(function(e){return a(t,e)})}});var s=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(t=this,e=arguments[0],n=e.sdp,Object.keys(t._reverseStreams||[]).forEach(function(e){var i=t._reverseStreams[e],r=t._streams[i.id];n=n.replace(new RegExp(i.id,"g"),r.id)}),new RTCSessionDescription({type:e.type,sdp:n})),s.apply(this,arguments)):s.apply(this,arguments);var t,e,n};var c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get:function(){var t=c.get.apply(this);return""===t.type?t:a(this,t)}}),t.RTCPeerConnection.prototype.removeTrack=function(t){var e,n=this;if("closed"===n.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!t._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(t._pc!==n)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");n._streams=n._streams||{},Object.keys(n._streams).forEach(function(i){n._streams[i].getTracks().find(function(e){return t.track===e})&&(e=n._streams[i])}),e&&(1===e.getTracks().length?n.removeStream(n._reverseStreams[e.id]):e.removeTrack(t.track),n.dispatchEvent(new Event("negotiationneeded")))}},shimPeerConnection:function(t){var e=i.detectBrowser(t);if(!t.RTCPeerConnection&&t.webkitRTCPeerConnection)t.RTCPeerConnection=function(e,n){return r("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy),new t.webkitRTCPeerConnection(e,n)},t.RTCPeerConnection.prototype=t.webkitRTCPeerConnection.prototype,t.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return t.webkitRTCPeerConnection.generateCertificate}});else{var n=t.RTCPeerConnection;t.RTCPeerConnection=function(t,e){if(t&&t.iceServers){for(var r=[],o=0;o<t.iceServers.length;o++){var a=t.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(i.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,r.push(a)):r.push(t.iceServers[o])}t.iceServers=r}return new n(t,e)},t.RTCPeerConnection.prototype=n.prototype,Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get:function(){return n.generateCertificate}})}var o=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(t,e,n){var i=this,r=arguments;if(arguments.length>0&&"function"==typeof t)return o.apply(this,arguments);if(0===o.length&&(0===arguments.length||"function"!=typeof arguments[0]))return o.apply(this,[]);var a=function(t){var e={};return t.result().forEach(function(t){var n={id:t.id,timestamp:t.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type};t.names().forEach(function(e){n[e]=t.stat(e)}),e[n.id]=n}),e},s=function(t){return new Map(Object.keys(t).map(function(e){return[e,t[e]]}))};return arguments.length>=2?o.apply(this,[function(t){r[1](s(a(t)))},arguments[0]]):new Promise(function(t,e){o.apply(i,[function(e){t(s(a(e)))},e])}).then(e,n)},e.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var n=t.RTCPeerConnection.prototype[e];t.RTCPeerConnection.prototype[e]=function(){var t=arguments,e=this,i=new Promise(function(i,r){n.apply(e,[t[0],i,r])});return t.length<2?i:i.then(function(){t[1].apply(null,[])},function(e){t.length>=3&&t[2].apply(null,[e])})}}),e.version<52&&["createOffer","createAnswer"].forEach(function(e){var n=t.RTCPeerConnection.prototype[e];t.RTCPeerConnection.prototype[e]=function(){var t=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var e=1===arguments.length?arguments[0]:void 0;return new Promise(function(i,r){n.apply(t,[i,r,e])})}return n.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var n=t.RTCPeerConnection.prototype[e];t.RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}});var a=t.RTCPeerConnection.prototype.addIceCandidate;t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?a.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}},function(t,e,n){"use strict";var i=n(13);t.exports=function(t,e){var r=t&&t.window,o={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var a in e)hasOwnProperty.call(e,a)&&(o[a]=e[a]);var s=i.log,c=i.detectBrowser(r),l=n(208)||null,u=n(206)||null,h=n(202)||null,d=n(200)||null,p=n(199)||null,f={browserDetails:c,commonShim:p,extractVersion:i.extractVersion,disableLog:i.disableLog,disableWarnings:i.disableWarnings};switch(c.browser){case"chrome":if(!l||!l.shimPeerConnection||!o.shimChrome)return s("Chrome shim is not included in this adapter release."),f;s("adapter.js shimming chrome."),f.browserShim=l,p.shimCreateObjectURL(r),l.shimGetUserMedia(r),l.shimMediaStream(r),l.shimSourceObject(r),l.shimPeerConnection(r),l.shimOnTrack(r),l.shimAddTrackRemoveTrack(r),l.shimGetSendersWithDtmf(r),p.shimRTCIceCandidate(r),p.shimMaxMessageSize(r),p.shimSendThrowTypeError(r);break;case"firefox":if(!h||!h.shimPeerConnection||!o.shimFirefox)return s("Firefox shim is not included in this adapter release."),f;s("adapter.js shimming firefox."),f.browserShim=h,p.shimCreateObjectURL(r),h.shimGetUserMedia(r),h.shimSourceObject(r),h.shimPeerConnection(r),h.shimOnTrack(r),h.shimRemoveStream(r),p.shimRTCIceCandidate(r),p.shimMaxMessageSize(r),p.shimSendThrowTypeError(r);break;case"edge":if(!u||!u.shimPeerConnection||!o.shimEdge)return s("MS edge shim is not included in this adapter release."),f;s("adapter.js shimming edge."),f.browserShim=u,p.shimCreateObjectURL(r),u.shimGetUserMedia(r),u.shimPeerConnection(r),u.shimReplaceTrack(r),p.shimMaxMessageSize(r),p.shimSendThrowTypeError(r);break;case"safari":if(!d||!o.shimSafari)return s("Safari shim is not included in this adapter release."),f;s("adapter.js shimming safari."),f.browserShim=d,p.shimCreateObjectURL(r),d.shimRTCIceServerUrls(r),d.shimCallbacksAPI(r),d.shimLocalStreamsAPI(r),d.shimRemoteStreamsAPI(r),d.shimTrackEventTransceiver(r),d.shimGetUserMedia(r),d.shimCreateOfferLegacy(r),p.shimRTCIceCandidate(r),p.shimMaxMessageSize(r),p.shimSendThrowTypeError(r);break;default:s("Unsupported browser!")}return f}},function(t,e,n){"use strict";(function(e){var i=n(209);t.exports=i({window:e.window})}).call(this,n(23))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,r,o,a,s,c=1,l={},u=!1,h=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){f(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&f(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),i=function(e){t.postMessage(a+e,"*")}):t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){f(t.data)},i=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(r=h.documentElement,i=function(t){var e=h.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):i=function(t){setTimeout(f,0,t)},d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return l[c]=r,i(c),c++},d.clearImmediate=p}function p(t){delete l[t]}function f(t){if(u)setTimeout(f,0,t);else{var e=l[t];if(e){u=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}(e)}finally{p(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(23),n(76))},function(t,e,n){(function(t){var i=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(211),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(23))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=(s(n(77)),n(1)),o=s(r),a=s(n(14));function s(t){return t&&t.__esModule?t:{default:t}}n(135);var c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.loaded=n.loaded.bind(n),n.playerloaded=n.playerloaded.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Component),i(e,[{key:"onConnect",value:function(){}},{key:"onconnect",value:function(){}},{key:"playerloaded",value:function(){}},{key:"loaded",value:function(){}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){window.scrollTo(0,1)}},{key:"componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return o.default.createElement(a.default,{raycaster:"objects: .rounded"},o.default.createElement("a-assets",null,o.default.createElement("img",{id:"arena",src:"./assets/images/Arena.png"}),o.default.createElement("audio",{id:"river",src:"./assets/sounds/pop_drip.wav",preload:"no"})),o.default.createElement("a-entity",{"laser-controls":"hand: right"}),o.default.createElement("a-entity",{id:"player",camera:!0,position:"0 1.6 3","look-controls":"pointerLockEnabled: false;"}),o.default.createElement("a-entity",{layout:"type: box; columns: 5; angle: 10; marginColumn: 1.3; marginRow: 1;reverse: true;",position:"-3.25 0.75 0"},o.default.createElement("a-entity",{class:"rounded",link:"href: /heartattack; visualAspectEnabled: false;"},o.default.createElement("a-rounded",{width:"4",height:"0.5",radius:"0.05",position:"0 0 0.2",rotation:"0 -15 0",scale:"0.3 0.3 0.3",opacity:"0.4"},o.default.createElement("a-text",{value:"Heart Attack",position:"0.2 0.35 0",color:"black",side:"double",width:"4",font:"https://cdn.aframe.io/fonts/mozillavr.fnt"}),o.default.createElement("a-image",{src:"/rooms/heartattack/ss-compress.jpg",width:"4",height:"2",position:"2 -1 0"}))),o.default.createElement("a-entity",{class:"rounded",link:"href: /landtest; visualAspectEnabled: false;"},o.default.createElement("a-rounded",{width:"4",height:"0.5",radius:"0.05",position:"0 0 -0.2",rotation:"0 -15 0",scale:"0.3 0.3 0.3",opacity:"0.4"},o.default.createElement("a-text",{value:"LandTest no audio",position:"0.2 0.35 0",color:"black",side:"double",width:"4",font:"https://cdn.aframe.io/fonts/mozillavr.fnt"}),o.default.createElement("a-image",{src:"/rooms/land/ss-compress.jpg",width:"4",height:"2",position:"2 -1 0"}))),o.default.createElement("a-entity",{class:"rounded",link:"href: /land; visualAspectEnabled: false;"},o.default.createElement("a-rounded",{width:"4",height:"0.5",radius:"0.05",rotation:"0 0 0",position:"0 0 -0.2",scale:"0.3 0.3 0.3",opacity:"0.4"},o.default.createElement("a-text",{value:"Land",position:"0.2 0.35 0",color:"black",side:"double",width:"4",font:"https://cdn.aframe.io/fonts/mozillavr.fnt"}),o.default.createElement("a-image",{src:"/rooms/land/ss-compress.jpg",width:"4",height:"2",position:"2 -1 0"}))),o.default.createElement("a-entity",{link:"href: /wallace; visualAspectEnabled: false;"},o.default.createElement("a-rounded",{class:"rounded",width:"4",height:"0.5",radius:"0.05",position:"0 0 0.1",rotation:"0 15 0",scale:"0.3 0.3 0.3",opacity:"0.4"},o.default.createElement("a-text",{value:"Blade Runner 2049 inspired Niander Wallace Office  thx @Absulit",position:"0.2 0.35 0",color:"black",side:"double",width:"4",font:"https://cdn.aframe.io/fonts/mozillavr.fnt"}),o.default.createElement("a-image",{src:"/rooms/wallace/ss-compress.jpg",width:"4",height:"2",position:"2 -1 0"}))),o.default.createElement("a-entity",{link:"href: /room; visualAspectEnabled: false;"},o.default.createElement("a-rounded",{onclick:'console.error("thisme")',class:"rounded",position:"0 0 0.5",width:"4",height:"0.5",radius:"0.05",rotation:"0 15 0",scale:"0.3 0.3 0.3",opacity:"0.4"},o.default.createElement("a-text",{value:"Dance Hall Radio 24/7  HBR1.com - I.D.M. Tranceponder",position:"0.2 0.35 0",color:"black",side:"double",width:"4",font:"https://cdn.aframe.io/fonts/mozillavr.fnt"}),o.default.createElement("a-image",{src:"/rooms/dance/ss-compress.jpg",width:"4",height:"2",position:"2 -1 0"}))),o.default.createElement("a-entity",{class:"rounded",link:"href: /dev; visualAspectEnabled: false;"},o.default.createElement("a-rounded",{width:"4",height:"0.5",radius:"0.05",position:"0 0 0.2",rotation:"0 -15 0",scale:"0.3 0.3 0.3",opacity:"0.4"},o.default.createElement("a-text",{value:"Dev",position:"0.2 0.35 0",color:"black",side:"double",width:"4",font:"https://cdn.aframe.io/fonts/mozillavr.fnt"}),o.default.createElement("a-image",{src:"/rooms/dev/ss-compress.jpg",width:"4",height:"2",position:"2 -1 0"}))),o.default.createElement("a-entity",{class:"rounded",link:"href: /dev; visualAspectEnabled: false;"},o.default.createElement("a-rounded",{width:"4",height:"0.5",radius:"0.05",position:"0 0 -0.2",rotation:"0 -15 0",scale:"0.3 0.3 0.3",opacity:"0.4"},o.default.createElement("a-text",{value:"Dev",position:"0.2 0.35 0",color:"black",side:"double",width:"4",font:"https://cdn.aframe.io/fonts/mozillavr.fnt"}),o.default.createElement("a-image",{src:"/rooms/dev/ss-compress.jpg",width:"4",height:"2",position:"2 -1 0"}))),o.default.createElement("a-entity",{class:"rounded",link:"href: /dev; visualAspectEnabled: false;"},o.default.createElement("a-rounded",{width:"4",height:"0.5",radius:"0.05",rotation:"0 0 0",position:"0 0 -0.2",scale:"0.3 0.3 0.3",opacity:"0.4"},o.default.createElement("a-text",{value:"Dev",position:"0.2 0.35 0",color:"black",side:"double",width:"4",font:"https://cdn.aframe.io/fonts/mozillavr.fnt"}),o.default.createElement("a-image",{src:"/rooms/dev/ss-compress.jpg",width:"4",height:"2",position:"2 -1 0"}))),o.default.createElement("a-entity",{link:"href: /dev; visualAspectEnabled: false;"},o.default.createElement("a-rounded",{class:"rounded",width:"4",height:"0.5",radius:"0.05",position:"0 0 0.1",rotation:"0 15 0",scale:"0.3 0.3 0.3",opacity:"0.4"},o.default.createElement("a-text",{value:"Dev",position:"0.2 0.35 0",color:"black",side:"double",width:"4",font:"https://cdn.aframe.io/fonts/mozillavr.fnt"}),o.default.createElement("a-image",{src:"/rooms/dev/ss-compress.jpg",width:"4",height:"2",position:"2 -1 0"}))),o.default.createElement("a-entity",{link:"href: /dev; visualAspectEnabled: false;"},o.default.createElement("a-rounded",{class:"rounded",position:"0 0 0.5",width:"4",height:"0.5",radius:"0.05",rotation:"0 15 0",scale:"0.3 0.3 0.3",opacity:"0.4"},o.default.createElement("a-text",{value:"Dev",position:"0.2 0.35 0",color:"black",side:"double",width:"4",font:"https://cdn.aframe.io/fonts/mozillavr.fnt"}),o.default.createElement("a-image",{src:"/rooms/dev/ss-compress.jpg",width:"4",height:"2",position:"2 -1 0"}))),o.default.createElement("a-entity",{class:"rounded",link:"href: /dev; visualAspectEnabled: false;"},o.default.createElement("a-rounded",{width:"4",height:"0.5",radius:"0.05",position:"0 0 0.2",rotation:"0 -15 0",scale:"0.3 0.3 0.3",opacity:"0.4"},o.default.createElement("a-text",{value:"Dev",position:"0.2 0.35 0",color:"black",side:"double",width:"4",font:"https://cdn.aframe.io/fonts/mozillavr.fnt"}),o.default.createElement("a-image",{src:"/rooms/dev/ss-compress.jpg",width:"4",height:"2",position:"2 -1 0"}))),o.default.createElement("a-entity",{class:"rounded",link:"href: /dev; visualAspectEnabled: false;"},o.default.createElement("a-rounded",{width:"4",height:"0.5",radius:"0.05",position:"0 0 -0.2",rotation:"0 -15 0",scale:"0.3 0.3 0.3",opacity:"0.4"},o.default.createElement("a-text",{value:"Dev",position:"0.2 0.35 0",color:"black",side:"double",width:"4",font:"https://cdn.aframe.io/fonts/mozillavr.fnt"}),o.default.createElement("a-image",{src:"/rooms/dev/ss-compress.jpg",width:"4",height:"2",position:"2 -1 0"}))),o.default.createElement("a-entity",{class:"rounded",link:"href: /dev; visualAspectEnabled: false;"},o.default.createElement("a-rounded",{width:"4",height:"0.5",radius:"0.05",rotation:"0 0 0",position:"0 0 -0.2",scale:"0.3 0.3 0.3",opacity:"0.4"},o.default.createElement("a-text",{value:"Dev",position:"0.2 0.35 0",color:"black",side:"double",width:"4",font:"https://cdn.aframe.io/fonts/mozillavr.fnt"}),o.default.createElement("a-image",{src:"/rooms/dev/ss-compress.jpg",width:"4",height:"2",position:"2 -1 0"}))),o.default.createElement("a-entity",{link:"href: /dev; visualAspectEnabled: false;"},o.default.createElement("a-rounded",{class:"rounded",width:"4",height:"0.5",radius:"0.05",position:"0 0 0.1",rotation:"0 15 0",scale:"0.3 0.3 0.3",opacity:"0.4"},o.default.createElement("a-text",{value:"Dev",position:"0.2 0.35 0",color:"black",side:"double",width:"4",font:"https://cdn.aframe.io/fonts/mozillavr.fnt"}),o.default.createElement("a-image",{src:"/rooms/dev/ss-compress.jpg",width:"4",height:"2",position:"2 -1 0"}))),o.default.createElement("a-entity",{link:"href: /dev; visualAspectEnabled: false;"},o.default.createElement("a-rounded",{class:"rounded",position:"0 0 0.5",width:"4",height:"0.5",radius:"0.05",rotation:"0 15 0",scale:"0.3 0.3 0.3",opacity:"0.4"},o.default.createElement("a-text",{value:"Dev",position:"0.2 0.35 0",color:"black",side:"double",width:"4",font:"https://cdn.aframe.io/fonts/mozillavr.fnt"}),o.default.createElement("a-image",{src:"/rooms/dev/ss-compress.jpg",width:"4",height:"2",position:"2 -1 0"})))),o.default.createElement("a-entity",{sound:"src: #river"}),o.default.createElement("a-entity",{id:"sky",geometry:"primitive: sphere; radius: 65;",material:"shader: flat; color: #47c9ff; side: double"}),o.default.createElement("a-entity",{id:"ground",geometry:"primitive: circle; radius: 8;",rotation:"-90 0 0",material:"shader: flat; src: #arena"}),o.default.createElement("a-entity",{id:"rightHand","link-controls":"hand: right"}))}}]),e}();e.default=c},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";t.exports=function(t,e,n,i,r,o,a,s){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,r,o,a,s],u=0;(c=new Error(e.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(t,e,n){"use strict";var i=n(53),r=n(217),o=n(216);t.exports=function(){function t(t,e,n,i,a,s){s!==o&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=i,n.PropTypes=n,n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=f(n(1)),r=n(86),o=n(87),a=f(n(213)),s=f(n(134)),c=f(n(115)),l=f(n(100)),u=f(n(97)),h=f(n(96)),d=f(n(95)),p=f(n(91));function f(t){return t&&t.__esModule?t:{default:t}}f(n(90)),e.default=function(t){var e=t.store;return i.default.createElement(r.Provider,{store:e},i.default.createElement(o.BrowserRouter,null,i.default.createElement(o.Switch,null,i.default.createElement(o.Route,{exact:!0,path:"/room",component:c.default}),i.default.createElement(o.Route,{exact:!0,path:"/wallace",component:l.default}),i.default.createElement(o.Route,{exact:!0,path:"/dev",component:d.default}),i.default.createElement(o.Route,{exact:!0,path:"/home",component:s.default}),i.default.createElement(o.Route,{exact:!0,path:"/land",component:u.default}),i.default.createElement(o.Route,{exact:!0,path:"/landtest",component:h.default}),i.default.createElement(o.Route,{exact:!0,path:"/heartattack",component:p.default}),i.default.createElement(a.default,null,i.default.createElement(o.Route,{exact:!0,path:"/",component:a.default})))))}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var r,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(r=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:i+o.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(t,e,n){(t.exports=n(36)(!1)).push([t.i,"body{margin:0;padding:0;font-family:sans-serif}",""])},function(t,e,n){var i=n(221);"string"==typeof i&&(i=[[t.i,i,""]]);n(35)(i,{hmr:!0,transform:void 0,insertInto:void 0}),i.locals&&(t.exports=i.locals)},function(t,e,n){"use strict";t.exports=function(t){var e=(t?t.ownerDocument||t:document).defaultView||window;return!(!t||!("function"==typeof e.Node?t instanceof e.Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}},function(t,e,n){"use strict";var i=n(223);t.exports=function(t){return i(t)&&3==t.nodeType}},function(t,e,n){"use strict";var i=n(224);t.exports=function t(e,n){return!(!e||!n)&&(e===n||!i(e)&&(i(n)?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}},function(t,e,n){"use strict";var i=Object.prototype.hasOwnProperty;function r(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}t.exports=function(t,e){if(r(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!i.call(e,n[a])||!r(t[n[a]],e[n[a]]))return!1;return!0}},function(t,e,n){"use strict";t.exports=function(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}},function(t,e,n){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};t.exports=r},function(t,e,n){"use strict";var i=n(1),r=n(228),o=n(80),a=n(53),s=n(227),c=n(226),l=n(225),u=n(79);function h(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,i=0;i<e;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);throw(e=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")).name="Invariant Violation",e.framesToPop=1,e}i||h("227");var d={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(t,e,n,i,r,o,a,s,c){(function(t,e,n,i,r,o,a,s,c){this._hasCaughtError=!1,this._caughtError=null;var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(t){this._caughtError=t,this._hasCaughtError=!0}}).apply(d,arguments)},invokeGuardedCallbackAndCatchFirstError:function(t,e,n,i,r,o,a,s,c){if(d.invokeGuardedCallback.apply(this,arguments),d.hasCaughtError()){var l=d.clearCaughtError();d._hasRethrowError||(d._hasRethrowError=!0,d._rethrowError=l)}},rethrowCaughtError:function(){return function(){if(d._hasRethrowError){var t=d._rethrowError;throw d._rethrowError=null,d._hasRethrowError=!1,t}}.apply(d,arguments)},hasCaughtError:function(){return d._hasCaughtError},clearCaughtError:function(){if(d._hasCaughtError){var t=d._caughtError;return d._caughtError=null,d._hasCaughtError=!1,t}h("198")}},p=null,f={};function m(){if(p)for(var t in f){var e=f[t],n=p.indexOf(t);if(-1<n||h("96",t),!v[n])for(var i in e.extractEvents||h("97",t),v[n]=e,n=e.eventTypes){var r=void 0,o=n[i],a=e,s=i;y.hasOwnProperty(s)&&h("99",s),y[s]=o;var c=o.phasedRegistrationNames;if(c){for(r in c)c.hasOwnProperty(r)&&g(c[r],a,s);r=!0}else o.registrationName?(g(o.registrationName,a,s),r=!0):r=!1;r||h("98",i,t)}}}function g(t,e,n){A[t]&&h("100",t),A[t]=e,w[t]=e.eventTypes[n].dependencies}var v=[],y={},A={},w={};function b(t){p&&h("101"),p=Array.prototype.slice.call(t),m()}function M(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var i=t[e];f.hasOwnProperty(e)&&f[e]===i||(f[e]&&h("102",e),f[e]=i,n=!0)}n&&m()}var E=Object.freeze({plugins:v,eventNameDispatchConfigs:y,registrationNameModules:A,registrationNameDependencies:w,possibleRegistrationNames:null,injectEventPluginOrder:b,injectEventPluginsByName:M}),x=null,T=null,C=null;function S(t,e,n,i){e=t.type||"unknown-event",t.currentTarget=C(i),d.invokeGuardedCallbackAndCatchFirstError(e,n,void 0,t),t.currentTarget=null}function D(t,e){return null==e&&h("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function _(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var L=null;function N(t,e){if(t){var n=t._dispatchListeners,i=t._dispatchInstances;if(Array.isArray(n))for(var r=0;r<n.length&&!t.isPropagationStopped();r++)S(t,e,n[r],i[r]);else n&&S(t,e,n,i);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function I(t){return N(t,!0)}function O(t){return N(t,!1)}var j={injectEventPluginOrder:b,injectEventPluginsByName:M};function P(t,e){var n=t.stateNode;if(!n)return null;var i=x(n);if(!i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}return t?null:(n&&"function"!=typeof n&&h("231",e,typeof n),n)}function R(t,e){null!==t&&(L=D(L,t)),t=L,L=null,t&&(_(t,e?I:O),L&&h("95"),d.rethrowCaughtError())}function k(t,e,n,i){for(var r=null,o=0;o<v.length;o++){var a=v[o];a&&(a=a.extractEvents(t,e,n,i))&&(r=D(r,a))}R(r,!1)}var z=Object.freeze({injection:j,getListener:P,runEventsInBatch:R,runExtractedEventsInBatch:k}),B=Math.random().toString(36).slice(2),F="__reactInternalInstance$"+B,U="__reactEventHandlers$"+B;function H(t){if(t[F])return t[F];for(;!t[F];){if(!t.parentNode)return null;t=t.parentNode}return 5===(t=t[F]).tag||6===t.tag?t:null}function G(t){if(5===t.tag||6===t.tag)return t.stateNode;h("33")}function Q(t){return t[U]||null}var V=Object.freeze({precacheFiberNode:function(t,e){e[F]=t},getClosestInstanceFromNode:H,getInstanceFromNode:function(t){return!(t=t[F])||5!==t.tag&&6!==t.tag?null:t},getNodeFromInstance:G,getFiberCurrentPropsFromNode:Q,updateFiberProps:function(t,e){t[U]=e}});function Y(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function W(t,e,n){for(var i=[];t;)i.push(t),t=Y(t);for(t=i.length;0<t--;)e(i[t],"captured",n);for(t=0;t<i.length;t++)e(i[t],"bubbled",n)}function q(t,e,n){(e=P(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=D(n._dispatchListeners,e),n._dispatchInstances=D(n._dispatchInstances,t))}function X(t){t&&t.dispatchConfig.phasedRegistrationNames&&W(t._targetInst,q,t)}function Z(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst;W(e=e?Y(e):null,q,t)}}function K(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=P(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=D(n._dispatchListeners,e),n._dispatchInstances=D(n._dispatchInstances,t))}function J(t){t&&t.dispatchConfig.registrationName&&K(t._targetInst,null,t)}function $(t){_(t,X)}function tt(t,e,n,i){if(n&&i)t:{for(var r=n,o=i,a=0,s=r;s;s=Y(s))a++;s=0;for(var c=o;c;c=Y(c))s++;for(;0<a-s;)r=Y(r),a--;for(;0<s-a;)o=Y(o),s--;for(;a--;){if(r===o||r===o.alternate)break t;r=Y(r),o=Y(o)}r=null}else r=null;for(o=r,r=[];n&&n!==o&&(null===(a=n.alternate)||a!==o);)r.push(n),n=Y(n);for(n=[];i&&i!==o&&(null===(a=i.alternate)||a!==o);)n.push(i),i=Y(i);for(i=0;i<r.length;i++)K(r[i],"bubbled",t);for(t=n.length;0<t--;)K(n[t],"captured",e)}var et=Object.freeze({accumulateTwoPhaseDispatches:$,accumulateTwoPhaseDispatchesSkipTarget:function(t){_(t,Z)},accumulateEnterLeaveDispatches:tt,accumulateDirectDispatches:function(t){_(t,J)}}),nt=null;function it(){return!nt&&r.canUseDOM&&(nt="textContent"in document.documentElement?"textContent":"innerText"),nt}var rt={_root:null,_startText:null,_fallbackText:null};function ot(){if(rt._fallbackText)return rt._fallbackText;var t,e,n=rt._startText,i=n.length,r=at(),o=r.length;for(t=0;t<i&&n[t]===r[t];t++);var a=i-t;for(e=1;e<=a&&n[i-e]===r[o-e];e++);return rt._fallbackText=r.slice(t,1<e?1-e:void 0),rt._fallbackText}function at(){return"value"in rt._root?rt._root.value:rt._root[it()]}var st="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),ct={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function lt(t,e,n,i){for(var r in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(r)&&((e=t[r])?this[r]=e(n):"target"===r?this.target=i:this[r]=n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?a.thatReturnsTrue:a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse,this}function ut(t,e,n,i){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,t,e,n,i),r}return new this(t,e,n,i)}function ht(t){t instanceof this||h("223"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function dt(t){t.eventPool=[],t.getPooled=ut,t.release=ht}o(lt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;for(e=0;e<st.length;e++)this[st[e]]=null}}),lt.Interface=ct,lt.extend=function(t){function e(){}function n(){return i.apply(this,arguments)}var i=this;e.prototype=i.prototype;var r=new e;return o(r,n.prototype),n.prototype=r,n.prototype.constructor=n,n.Interface=o({},i.Interface,t),n.extend=i.extend,dt(n),n},dt(lt);var pt=lt.extend({data:null}),ft=lt.extend({data:null}),mt=[9,13,27,32],gt=r.canUseDOM&&"CompositionEvent"in window,vt=null;r.canUseDOM&&"documentMode"in document&&(vt=document.documentMode);var yt=r.canUseDOM&&"TextEvent"in window&&!vt,At=r.canUseDOM&&(!gt||vt&&8<vt&&11>=vt),wt=String.fromCharCode(32),bt={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},Mt=!1;function Et(t,e){switch(t){case"topKeyUp":return-1!==mt.indexOf(e.keyCode);case"topKeyDown":return 229!==e.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function xt(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Tt=!1,Ct={eventTypes:bt,extractEvents:function(t,e,n,i){var r=void 0,o=void 0;if(gt)t:{switch(t){case"topCompositionStart":r=bt.compositionStart;break t;case"topCompositionEnd":r=bt.compositionEnd;break t;case"topCompositionUpdate":r=bt.compositionUpdate;break t}r=void 0}else Tt?Et(t,n)&&(r=bt.compositionEnd):"topKeyDown"===t&&229===n.keyCode&&(r=bt.compositionStart);return r?(At&&(Tt||r!==bt.compositionStart?r===bt.compositionEnd&&Tt&&(o=ot()):(rt._root=i,rt._startText=at(),Tt=!0)),r=pt.getPooled(r,e,n,i),o?r.data=o:null!==(o=xt(n))&&(r.data=o),$(r),o=r):o=null,(t=yt?function(t,e){switch(t){case"topCompositionEnd":return xt(e);case"topKeyPress":return 32!==e.which?null:(Mt=!0,wt);case"topTextInput":return(t=e.data)===wt&&Mt?null:t;default:return null}}(t,n):function(t,e){if(Tt)return"topCompositionEnd"===t||!gt&&Et(t,e)?(t=ot(),rt._root=null,rt._startText=null,rt._fallbackText=null,Tt=!1,t):null;switch(t){case"topPaste":return null;case"topKeyPress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"topCompositionEnd":return At?null:e.data;default:return null}}(t,n))?((e=ft.getPooled(bt.beforeInput,e,n,i)).data=t,$(e)):e=null,null===o?e:null===e?o:[o,e]}},St=null,Dt=null,_t=null;function Lt(t){if(t=T(t)){St&&"function"==typeof St.restoreControlledState||h("194");var e=x(t.stateNode);St.restoreControlledState(t.stateNode,t.type,e)}}var Nt={injectFiberControlledHostComponent:function(t){St=t}};function It(t){Dt?_t?_t.push(t):_t=[t]:Dt=t}function Ot(){return null!==Dt||null!==_t}function jt(){if(Dt){var t=Dt,e=_t;if(_t=Dt=null,Lt(t),e)for(t=0;t<e.length;t++)Lt(e[t])}}var Pt=Object.freeze({injection:Nt,enqueueStateRestore:It,needsStateRestore:Ot,restoreStateIfNeeded:jt});function Rt(t,e){return t(e)}function kt(t,e,n){return t(e,n)}function zt(){}var Bt=!1;function Ft(t,e){if(Bt)return t(e);Bt=!0;try{return Rt(t,e)}finally{Bt=!1,Ot()&&(zt(),jt())}}var Ut={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ht(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Ut[t.type]:"textarea"===e}function Gt(t){return(t=t.target||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Qt(t,e){return!(!r.canUseDOM||e&&!("addEventListener"in document))&&((e=(t="on"+t)in document)||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e)}function Vt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Yt(t){t._valueTracker||(t._valueTracker=function(t){var e=Vt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"function"==typeof n.get&&"function"==typeof n.set)return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.get.call(this)},set:function(t){i=""+t,n.set.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}(t))}function Wt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Vt(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}var qt=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xt="function"==typeof Symbol&&Symbol.for,Zt=Xt?Symbol.for("react.element"):60103,Kt=Xt?Symbol.for("react.call"):60104,Jt=Xt?Symbol.for("react.return"):60105,$t=Xt?Symbol.for("react.portal"):60106,te=Xt?Symbol.for("react.fragment"):60107,ee=Xt?Symbol.for("react.strict_mode"):60108,ne=Xt?Symbol.for("react.provider"):60109,ie=Xt?Symbol.for("react.context"):60110,re=Xt?Symbol.for("react.async_mode"):60111,oe=Xt?Symbol.for("react.forward_ref"):60112,ae="function"==typeof Symbol&&Symbol.iterator;function se(t){return null===t||void 0===t?null:"function"==typeof(t=ae&&t[ae]||t["@@iterator"])?t:null}function ce(t){if("function"==typeof(t=t.type))return t.displayName||t.name;if("string"==typeof t)return t;switch(t){case te:return"ReactFragment";case $t:return"ReactPortal";case Kt:return"ReactCall";case Jt:return"ReactReturn"}return null}function le(t){var e="";do{t:switch(t.tag){case 0:case 1:case 2:case 5:var n=t._debugOwner,i=t._debugSource,r=ce(t),o=null;n&&(o=ce(n)),n=i,r="\n    in "+(r||"Unknown")+(n?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":o?" (created by "+o+")":"");break t;default:r=""}e+=r,t=t.return}while(t);return e}var ue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,he={},de={};function pe(t,e,n,i,r){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e}var fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fe[t]=new pe(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fe[e]=new pe(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){fe[t]=new pe(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(t){fe[t]=new pe(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fe[t]=new pe(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){fe[t]=new pe(t,3,!0,t.toLowerCase(),null)}),["capture","download"].forEach(function(t){fe[t]=new pe(t,4,!1,t.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(t){fe[t]=new pe(t,6,!1,t.toLowerCase(),null)}),["rowSpan","start"].forEach(function(t){fe[t]=new pe(t,5,!1,t.toLowerCase(),null)});var me=/[\-\:]([a-z])/g;function ge(t){return t[1].toUpperCase()}function ve(t,e,n,i){var r=fe.hasOwnProperty(e)?fe[e]:null;(null!==r?0===r.type:!i&&2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))||(function(t,e,n,i){if(null===e||void 0===e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!de.hasOwnProperty(t)||!he.hasOwnProperty(t)&&(ue.test(t)?de[t]=!0:(he[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}function ye(t,e){var n=e.checked;return o({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Ae(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=xe(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function we(t,e){null!=(e=e.checked)&&ve(t,"checked",e,!1)}function be(t,e){we(t,e);var n=xe(e.value);null!=n&&("number"===e.type?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n)),e.hasOwnProperty("value")?Ee(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ee(t,e.type,xe(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Me(t,e){(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue"))&&(""===t.value&&(t.value=""+t._wrapperState.initialValue),t.defaultValue=""+t._wrapperState.initialValue),""!==(e=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!t.defaultChecked,""!==e&&(t.name=e)}function Ee(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function xe(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(me,ge);fe[e]=new pe(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(me,ge);fe[e]=new pe(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(me,ge);fe[e]=new pe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),fe.tabIndex=new pe("tabIndex",1,!1,"tabindex",null);var Te={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}};function Ce(t,e,n){return(t=lt.getPooled(Te.change,t,e,n)).type="change",It(n),$(t),t}var Se=null,De=null;function _e(t){R(t,!1)}function Le(t){if(Wt(G(t)))return t}function Ne(t,e){if("topChange"===t)return e}var Ie=!1;function Oe(){Se&&(Se.detachEvent("onpropertychange",je),De=Se=null)}function je(t){"value"===t.propertyName&&Le(De)&&Ft(_e,t=Ce(De,t,Gt(t)))}function Pe(t,e,n){"topFocus"===t?(Oe(),De=n,(Se=e).attachEvent("onpropertychange",je)):"topBlur"===t&&Oe()}function Re(t){if("topSelectionChange"===t||"topKeyUp"===t||"topKeyDown"===t)return Le(De)}function ke(t,e){if("topClick"===t)return Le(e)}function ze(t,e){if("topInput"===t||"topChange"===t)return Le(e)}r.canUseDOM&&(Ie=Qt("input")&&(!document.documentMode||9<document.documentMode));var Be={eventTypes:Te,_isInputEventSupported:Ie,extractEvents:function(t,e,n,i){var r=e?G(e):window,o=void 0,a=void 0,s=r.nodeName&&r.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===r.type?o=Ne:Ht(r)?Ie?o=ze:(o=Re,a=Pe):!(s=r.nodeName)||"input"!==s.toLowerCase()||"checkbox"!==r.type&&"radio"!==r.type||(o=ke),o&&(o=o(t,e)))return Ce(o,n,i);a&&a(t,r,e),"topBlur"===t&&null!=e&&(t=e._wrapperState||r._wrapperState)&&t.controlled&&"number"===r.type&&Ee(r,"number",r.value)}},Fe=lt.extend({view:null,detail:null}),Ue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function He(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ue[t])&&!!e[t]}function Ge(){return He}var Qe=Fe.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ge,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)}}),Ve={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Ye={eventTypes:Ve,extractEvents:function(t,e,n,i){if("topMouseOver"===t&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==t&&"topMouseOver"!==t)return null;var r=i.window===i?i:(r=i.ownerDocument)?r.defaultView||r.parentWindow:window;if("topMouseOut"===t?(t=e,e=(e=n.relatedTarget||n.toElement)?H(e):null):t=null,t===e)return null;var o=null==t?r:G(t);r=null==e?r:G(e);var a=Qe.getPooled(Ve.mouseLeave,t,n,i);return a.type="mouseleave",a.target=o,a.relatedTarget=r,(n=Qe.getPooled(Ve.mouseEnter,e,n,i)).type="mouseenter",n.target=r,n.relatedTarget=o,tt(a,n,t,e),[a,n]}};function We(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!=(2&e.effectTag))return 1;for(;e.return;)if(0!=(2&(e=e.return).effectTag))return 1}return 3===e.tag?2:3}function qe(t){return!!(t=t._reactInternalFiber)&&2===We(t)}function Xe(t){2!==We(t)&&h("188")}function Ze(t){var e=t.alternate;if(!e)return 3===(e=We(t))&&h("188"),1===e?null:t;for(var n=t,i=e;;){var r=n.return,o=r?r.alternate:null;if(!r||!o)break;if(r.child===o.child){for(var a=r.child;a;){if(a===n)return Xe(r),t;if(a===i)return Xe(r),e;a=a.sibling}h("188")}if(n.return!==i.return)n=r,i=o;else{a=!1;for(var s=r.child;s;){if(s===n){a=!0,n=r,i=o;break}if(s===i){a=!0,i=r,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,i=r;break}if(s===i){a=!0,i=o,n=r;break}s=s.sibling}a||h("189")}}n.alternate!==i&&h("190")}return 3!==n.tag&&h("188"),n.stateNode.current===n?t:e}var Ke=lt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Je=lt.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$e=Fe.extend({relatedTarget:null});function tn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var en={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rn=Fe.extend({key:function(t){if(t.key){var e=en[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=tn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?nn[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ge,charCode:function(t){return"keypress"===t.type?tn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?tn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),on=Qe.extend({dataTransfer:null}),an=Fe.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ge}),sn=lt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),cn=Qe.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),ln={},un={};function hn(t,e){var n=t[0].toUpperCase()+t.slice(1),i="on"+n;e={phasedRegistrationNames:{bubbled:i,captured:i+"Capture"},dependencies:[n="top"+n],isInteractive:e},ln[t]=e,un[n]=e}"blur cancel click close contextMenu copy cut doubleClick dragEnd dragStart drop focus input invalid keyDown keyPress keyUp mouseDown mouseUp paste pause play rateChange reset seeked submit touchCancel touchEnd touchStart volumeChange".split(" ").forEach(function(t){hn(t,!0)}),"abort animationEnd animationIteration animationStart canPlay canPlayThrough drag dragEnter dragExit dragLeave dragOver durationChange emptied encrypted ended error load loadedData loadedMetadata loadStart mouseMove mouseOut mouseOver playing progress scroll seeking stalled suspend timeUpdate toggle touchMove transitionEnd waiting wheel".split(" ").forEach(function(t){hn(t,!1)});var dn={eventTypes:ln,isInteractiveTopLevelEventType:function(t){return void 0!==(t=un[t])&&!0===t.isInteractive},extractEvents:function(t,e,n,i){var r=un[t];if(!r)return null;switch(t){case"topKeyPress":if(0===tn(n))return null;case"topKeyDown":case"topKeyUp":t=rn;break;case"topBlur":case"topFocus":t=$e;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":t=Qe;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":t=on;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":t=an;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":t=Ke;break;case"topTransitionEnd":t=sn;break;case"topScroll":t=Fe;break;case"topWheel":t=cn;break;case"topCopy":case"topCut":case"topPaste":t=Je;break;default:t=lt}return $(e=t.getPooled(r,e,n,i)),e}},pn=dn.isInteractiveTopLevelEventType,fn=[];function mn(t){var e=t.targetInst;do{if(!e){t.ancestors.push(e);break}var n;for(n=e;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;t.ancestors.push(e),e=H(n)}while(e);for(n=0;n<t.ancestors.length;n++)e=t.ancestors[n],k(t.topLevelType,e,t.nativeEvent,Gt(t.nativeEvent))}var gn=!0;function vn(t){gn=!!t}function yn(t,e,n){if(!n)return null;t=(pn(t)?wn:bn).bind(null,t),n.addEventListener(e,t,!1)}function An(t,e,n){if(!n)return null;t=(pn(t)?wn:bn).bind(null,t),n.addEventListener(e,t,!0)}function wn(t,e){kt(bn,t,e)}function bn(t,e){if(gn){var n=Gt(e);if(null!==(n=H(n))&&"number"==typeof n.tag&&2!==We(n)&&(n=null),fn.length){var i=fn.pop();i.topLevelType=t,i.nativeEvent=e,i.targetInst=n,t=i}else t={topLevelType:t,nativeEvent:e,targetInst:n,ancestors:[]};try{Ft(mn,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>fn.length&&fn.push(t)}}}var Mn=Object.freeze({get _enabled(){return gn},setEnabled:vn,isEnabled:function(){return gn},trapBubbledEvent:yn,trapCapturedEvent:An,dispatchEvent:bn});function En(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}var xn={animationend:En("Animation","AnimationEnd"),animationiteration:En("Animation","AnimationIteration"),animationstart:En("Animation","AnimationStart"),transitionend:En("Transition","TransitionEnd")},Tn={},Cn={};function Sn(t){if(Tn[t])return Tn[t];if(!xn[t])return t;var e,n=xn[t];for(e in n)if(n.hasOwnProperty(e)&&e in Cn)return Tn[t]=n[e];return t}r.canUseDOM&&(Cn=document.createElement("div").style,"AnimationEvent"in window||(delete xn.animationend.animation,delete xn.animationiteration.animation,delete xn.animationstart.animation),"TransitionEvent"in window||delete xn.transitionend.transition);var Dn={topAnimationEnd:Sn("animationend"),topAnimationIteration:Sn("animationiteration"),topAnimationStart:Sn("animationstart"),topBlur:"blur",topCancel:"cancel",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoad:"load",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:Sn("transitionend"),topWheel:"wheel"},_n={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},Ln={},Nn=0,In="_reactListenersID"+(""+Math.random()).slice(2);function On(t){return Object.prototype.hasOwnProperty.call(t,In)||(t[In]=Nn++,Ln[t[In]]={}),Ln[t[In]]}function jn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pn(t,e){var n,i=jn(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=jn(i)}}function Rn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)}var kn=r.canUseDOM&&"documentMode"in document&&11>=document.documentMode,zn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},Bn=null,Fn=null,Un=null,Hn=!1;function Gn(t,e){if(Hn||null==Bn||Bn!==s())return null;var n=Bn;return n="selectionStart"in n&&Rn(n)?{start:n.selectionStart,end:n.selectionEnd}:window.getSelection?{anchorNode:(n=window.getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}:void 0,Un&&c(Un,n)?null:(Un=n,(t=lt.getPooled(zn.select,Fn,t,e)).type="select",t.target=Bn,$(t),t)}var Qn={eventTypes:zn,extractEvents:function(t,e,n,i){var r,o=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;if(!(r=!o)){t:{o=On(o),r=w.onSelect;for(var a=0;a<r.length;a++){var s=r[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break t}}o=!0}r=!o}if(r)return null;switch(o=e?G(e):window,t){case"topFocus":(Ht(o)||"true"===o.contentEditable)&&(Bn=o,Fn=e,Un=null);break;case"topBlur":Un=Fn=Bn=null;break;case"topMouseDown":Hn=!0;break;case"topContextMenu":case"topMouseUp":return Hn=!1,Gn(n,i);case"topSelectionChange":if(kn)break;case"topKeyDown":case"topKeyUp":return Gn(n,i)}return null}};function Vn(t,e,n,i){this.tag=t,this.key=n,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.ref=null,this.pendingProps=e,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function Yn(t,e,n){var i=t.alternate;return null===i?((i=new Vn(t.tag,e,t.key,t.mode)).type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.effectTag=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.expirationTime=n,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Wn(t,e,n){var i=t.type,r=t.key;t=t.props;var o=void 0;if("function"==typeof i)o=i.prototype&&i.prototype.isReactComponent?2:0;else if("string"==typeof i)o=5;else switch(i){case te:return qn(t.children,e,n,r);case re:o=11,e|=3;break;case ee:o=11,e|=2;break;case Kt:o=7;break;case Jt:o=9;break;default:if("object"==typeof i&&null!==i)switch(i.$$typeof){case ne:o=13;break;case ie:o=12;break;case oe:o=14;break;default:if("number"==typeof i.tag)return(e=i).pendingProps=t,e.expirationTime=n,e;h("130",null==i?i:typeof i,"")}else h("130",null==i?i:typeof i,"")}return(e=new Vn(o,t,r,e)).type=i,e.expirationTime=n,e}function qn(t,e,n,i){return(t=new Vn(10,t,i,e)).expirationTime=n,t}function Xn(t,e,n){return(t=new Vn(6,t,null,e)).expirationTime=n,t}function Zn(t,e,n){return(e=new Vn(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}j.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x=V.getFiberCurrentPropsFromNode,T=V.getInstanceFromNode,C=V.getNodeFromInstance,j.injectEventPluginsByName({SimpleEventPlugin:dn,EnterLeaveEventPlugin:Ye,ChangeEventPlugin:Be,SelectEventPlugin:Qn,BeforeInputEventPlugin:Ct});var Kn=null,Jn=null;function $n(t){return function(e){try{return t(e)}catch(t){}}}function ti(t){return{baseState:t,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1,capturedValues:null}}function ei(t,e){null===t.last?t.first=t.last=e:(t.last.next=e,t.last=e),(0===t.expirationTime||t.expirationTime>e.expirationTime)&&(t.expirationTime=e.expirationTime)}new Set;var ni=void 0,ii=void 0;function ri(t){ni=ii=null;var e=t.alternate,n=t.updateQueue;null===n&&(n=t.updateQueue=ti(null)),null!==e?null===(t=e.updateQueue)&&(t=e.updateQueue=ti(null)):t=null,ni=n,ii=t!==n?t:null}function oi(t,e){ri(t),t=ni;var n=ii;null===n?ei(t,e):null===t.last||null===n.last?(ei(t,e),ei(n,e)):(ei(t,e),n.last=e)}function ai(t,e,n,i){return"function"==typeof(t=t.partialState)?t.call(e,n,i):t}function si(t,e,n,i,r,a){null!==t&&t.updateQueue===n&&(n=e.updateQueue={baseState:n.baseState,expirationTime:n.expirationTime,first:n.first,last:n.last,isInitialized:n.isInitialized,capturedValues:n.capturedValues,callbackList:null,hasForceUpdate:!1}),n.expirationTime=0,n.isInitialized?t=n.baseState:(t=n.baseState=e.memoizedState,n.isInitialized=!0);for(var s=!0,c=n.first,l=!1;null!==c;){var u=c.expirationTime;if(u>a){var h=n.expirationTime;(0===h||h>u)&&(n.expirationTime=u),l||(l=!0,n.baseState=t)}else l||(n.first=c.next,null===n.first&&(n.last=null)),c.isReplace?(t=ai(c,i,t,r),s=!0):(u=ai(c,i,t,r))&&(t=s?o({},t,u):o(t,u),s=!1),c.isForced&&(n.hasForceUpdate=!0),null!==c.callback&&(null===(u=n.callbackList)&&(u=n.callbackList=[]),u.push(c)),null!==c.capturedValue&&(null===(u=n.capturedValues)?n.capturedValues=[c.capturedValue]:u.push(c.capturedValue));c=c.next}return null!==n.callbackList?e.effectTag|=32:null!==n.first||n.hasForceUpdate||null!==n.capturedValues||(e.updateQueue=null),l||(n.baseState=t),t}function ci(t,e){var n=t.callbackList;if(null!==n)for(t.callbackList=null,t=0;t<n.length;t++){var i=n[t],r=i.callback;i.callback=null,"function"!=typeof r&&h("191",r),r.call(e)}}var li=Array.isArray;function ui(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){var i=void 0;(n=n._owner)&&(2!==n.tag&&h("110"),i=n.stateNode),i||h("147",t);var r=""+t;return null!==e&&null!==e.ref&&e.ref._stringRef===r?e.ref:((e=function(t){var e=i.refs===u?i.refs={}:i.refs;null===t?delete e[r]:e[r]=t})._stringRef=r,e)}"string"!=typeof t&&h("148"),n._owner||h("254",t)}return t}function hi(t,e){"textarea"!==t.type&&h("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function di(t){function e(e,n){if(t){var i=e.lastEffect;null!==i?(i.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e,n){return(t=Yn(t,e,n)).index=0,t.sibling=null,t}function o(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.effectTag=2,n):i:(e.effectTag=2,n):n}function a(e){return t&&null===e.alternate&&(e.effectTag=2),e}function s(t,e,n,i){return null===e||6!==e.tag?((e=Xn(n,t.mode,i)).return=t,e):((e=r(e,n,i)).return=t,e)}function c(t,e,n,i){return null!==e&&e.type===n.type?((i=r(e,n.props,i)).ref=ui(t,e,n),i.return=t,i):((i=Wn(n,t.mode,i)).ref=ui(t,e,n),i.return=t,i)}function l(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Zn(n,t.mode,i)).return=t,e):((e=r(e,n.children||[],i)).return=t,e)}function u(t,e,n,i,o){return null===e||10!==e.tag?((e=qn(n,t.mode,i,o)).return=t,e):((e=r(e,n,i)).return=t,e)}function d(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=Xn(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case Zt:return(n=Wn(e,t.mode,n)).ref=ui(t,null,e),n.return=t,n;case $t:return(e=Zn(e,t.mode,n)).return=t,e}if(li(e)||se(e))return(e=qn(e,t.mode,n,null)).return=t,e;hi(t,e)}return null}function p(t,e,n,i){var r=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==r?null:s(t,e,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Zt:return n.key===r?n.type===te?u(t,e,n.props.children,i,r):c(t,e,n,i):null;case $t:return n.key===r?l(t,e,n,i):null}if(li(n)||se(n))return null!==r?null:u(t,e,n,i,null);hi(t,n)}return null}function f(t,e,n,i,r){if("string"==typeof i||"number"==typeof i)return s(e,t=t.get(n)||null,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case Zt:return t=t.get(null===i.key?n:i.key)||null,i.type===te?u(e,t,i.props.children,r,i.key):c(e,t,i,r);case $t:return l(e,t=t.get(null===i.key?n:i.key)||null,i,r)}if(li(i)||se(i))return u(e,t=t.get(n)||null,i,r,null);hi(e,i)}return null}function m(r,a,s,c){for(var l=null,u=null,h=a,m=a=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=p(r,h,s[m],c);if(null===v){null===h&&(h=g);break}t&&h&&null===v.alternate&&e(r,h),a=o(v,a,m),null===u?l=v:u.sibling=v,u=v,h=g}if(m===s.length)return n(r,h),l;if(null===h){for(;m<s.length;m++)(h=d(r,s[m],c))&&(a=o(h,a,m),null===u?l=h:u.sibling=h,u=h);return l}for(h=i(r,h);m<s.length;m++)(g=f(h,r,m,s[m],c))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=o(g,a,m),null===u?l=g:u.sibling=g,u=g);return t&&h.forEach(function(t){return e(r,t)}),l}function g(r,a,s,c){var l=se(s);"function"!=typeof l&&h("150"),null==(s=l.call(s))&&h("151");for(var u=l=null,m=a,g=a=0,v=null,y=s.next();null!==m&&!y.done;g++,y=s.next()){m.index>g?(v=m,m=null):v=m.sibling;var A=p(r,m,y.value,c);if(null===A){m||(m=v);break}t&&m&&null===A.alternate&&e(r,m),a=o(A,a,g),null===u?l=A:u.sibling=A,u=A,m=v}if(y.done)return n(r,m),l;if(null===m){for(;!y.done;g++,y=s.next())null!==(y=d(r,y.value,c))&&(a=o(y,a,g),null===u?l=y:u.sibling=y,u=y);return l}for(m=i(r,m);!y.done;g++,y=s.next())null!==(y=f(m,r,g,y.value,c))&&(t&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===u?l=y:u.sibling=y,u=y);return t&&m.forEach(function(t){return e(r,t)}),l}return function(t,i,o,s){"object"==typeof o&&null!==o&&o.type===te&&null===o.key&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case Zt:t:{var l=o.key;for(c=i;null!==c;){if(c.key===l){if(10===c.tag?o.type===te:c.type===o.type){n(t,c.sibling),(i=r(c,o.type===te?o.props.children:o.props,s)).ref=ui(t,c,o),i.return=t,t=i;break t}n(t,c);break}e(t,c),c=c.sibling}o.type===te?((i=qn(o.props.children,t.mode,s,o.key)).return=t,t=i):((s=Wn(o,t.mode,s)).ref=ui(t,i,o),s.return=t,t=s)}return a(t);case $t:t:{for(c=o.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(t,i.sibling),(i=r(i,o.children||[],s)).return=t,t=i;break t}n(t,i);break}e(t,i),i=i.sibling}(i=Zn(o,t.mode,s)).return=t,t=i}return a(t)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==i&&6===i.tag?(n(t,i.sibling),i=r(i,o,s)):(n(t,i),i=Xn(o,t.mode,s)),i.return=t,a(t=i);if(li(o))return m(t,i,o,s);if(se(o))return g(t,i,o,s);if(c&&hi(t,o),void 0===o)switch(t.tag){case 2:case 1:h("152",(s=t.type).displayName||s.name||"Component")}return n(t,i)}}var pi=di(!0),fi=di(!1);function mi(t,e,n,i,r,a,s){function l(t,e,n){d(t,e,n,e.expirationTime)}function d(t,e,n,i){e.child=null===t?fi(e,null,n,i):pi(e,t.child,n,i)}function p(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function f(t,e,n,i,r,o){if(p(t,e),!n&&!r)return i&&D(e,!1),v(t,e);n=e.stateNode,qt.current=e;var a=r?null:n.render();return e.effectTag|=1,r&&(d(t,e,null,o),e.child=null),d(t,e,a,o),e.memoizedState=n.state,e.memoizedProps=n.props,i&&D(e,!0),e.child}function m(t){var e=t.stateNode;e.pendingContext?S(t,e.pendingContext,e.pendingContext!==e.context):e.context&&S(t,e.context,!1),b(t,e.containerInfo)}function g(t,e,n,i){var r=t.child;for(null!==r&&(r.return=t);null!==r;){switch(r.tag){case 12:var o=0|r.stateNode;if(r.type===e&&0!=(o&n)){for(o=r;null!==o;){var a=o.alternate;if(0===o.expirationTime||o.expirationTime>i)o.expirationTime=i,null!==a&&(0===a.expirationTime||a.expirationTime>i)&&(a.expirationTime=i);else{if(null===a||!(0===a.expirationTime||a.expirationTime>i))break;a.expirationTime=i}o=o.return}o=null}else o=r.child;break;case 13:o=r.type===t.type?null:r.child;break;default:o=r.child}if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===t){o=null;break}if(null!==(r=o.sibling)){o=r;break}o=o.return}r=o}}function v(t,e){if(null!==t&&e.child!==t.child&&h("153"),null!==e.child){var n=Yn(t=e.child,t.pendingProps,t.expirationTime);for(e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Yn(t,t.pendingProps,t.expirationTime)).return=e;n.sibling=null}return e.child}var y=t.shouldSetTextContent,A=t.shouldDeprioritizeSubtree,w=e.pushHostContext,b=e.pushHostContainer,M=i.pushProvider,E=n.getMaskedContext,x=n.getUnmaskedContext,T=n.hasContextChanged,C=n.pushContextProvider,S=n.pushTopLevelContextObject,D=n.invalidateContextProvider,_=r.enterHydrationState,L=r.resetHydrationState,N=r.tryToClaimNextHydratableInstance,I=(t=function(t,e,n,i,r){function a(t,e,n,i,r,o){if(null===e||null!==t.updateQueue&&t.updateQueue.hasForceUpdate)return!0;var a=t.stateNode;return t=t.type,"function"==typeof a.shouldComponentUpdate?a.shouldComponentUpdate(n,r,o):!(t.prototype&&t.prototype.isPureReactComponent&&c(e,n)&&c(i,r))}function s(t,e){e.updater=v,t.stateNode=e,e._reactInternalFiber=t}function l(t,e,n,i){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&v.enqueueReplaceState(e,e.state,null)}function h(t,e,n,i){if("function"==typeof(t=t.type).getDerivedStateFromProps)return t.getDerivedStateFromProps.call(null,n,i)}var d=t.cacheContext,p=t.getMaskedContext,f=t.getUnmaskedContext,m=t.isContextConsumer,g=t.hasContextChanged,v={isMounted:qe,enqueueSetState:function(t,i,r){t=t._reactInternalFiber,r=void 0===r?null:r;var o=n(t);oi(t,{expirationTime:o,partialState:i,callback:r,isReplace:!1,isForced:!1,capturedValue:null,next:null}),e(t,o)},enqueueReplaceState:function(t,i,r){t=t._reactInternalFiber,r=void 0===r?null:r;var o=n(t);oi(t,{expirationTime:o,partialState:i,callback:r,isReplace:!0,isForced:!1,capturedValue:null,next:null}),e(t,o)},enqueueForceUpdate:function(t,i){t=t._reactInternalFiber,i=void 0===i?null:i;var r=n(t);oi(t,{expirationTime:r,partialState:null,callback:i,isReplace:!1,isForced:!0,capturedValue:null,next:null}),e(t,r)}};return{adoptClassInstance:s,callGetDerivedStateFromProps:h,constructClassInstance:function(t,e){var n=t.type,i=f(t),r=m(t),a=r?p(t,i):u,c=null!==(n=new n(e,a)).state&&void 0!==n.state?n.state:null;return s(t,n),t.memoizedState=c,null!==(e=h(t,0,e,c))&&void 0!==e&&(t.memoizedState=o({},t.memoizedState,e)),r&&d(t,i,a),n},mountClassInstance:function(t,e){var n=t.type,i=t.alternate,r=t.stateNode,o=t.pendingProps,a=f(t);r.props=o,r.state=t.memoizedState,r.refs=u,r.context=p(t,a),"function"==typeof n.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(n=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),n!==r.state&&v.enqueueReplaceState(r,r.state,null),null!==(n=t.updateQueue)&&(r.state=si(i,t,n,r,o,e))),"function"==typeof r.componentDidMount&&(t.effectTag|=4)},resumeMountClassInstance:function(t,e){var n=t.type,s=t.stateNode;s.props=t.memoizedProps,s.state=t.memoizedState;var c=t.memoizedProps,u=t.pendingProps,d=s.context,m=f(t);m=p(t,m),(n="function"==typeof n.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(c!==u||d!==m)&&l(t,s,u,m),d=t.memoizedState,e=null!==t.updateQueue?si(null,t,t.updateQueue,s,u,e):d;var v=void 0;if(c!==u&&(v=h(t,0,u,e)),null!==v&&void 0!==v){e=null===e||void 0===e?v:o({},e,v);var y=t.updateQueue;null!==y&&(y.baseState=o({},y.baseState,v))}return c!==u||d!==e||g()||null!==t.updateQueue&&t.updateQueue.hasForceUpdate?((c=a(t,c,u,d,e,m))?(n||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.effectTag|=4)):("function"==typeof s.componentDidMount&&(t.effectTag|=4),i(t,u),r(t,e)),s.props=u,s.state=e,s.context=m,c):("function"==typeof s.componentDidMount&&(t.effectTag|=4),!1)},updateClassInstance:function(t,e,n){var s=e.type,c=e.stateNode;c.props=e.memoizedProps,c.state=e.memoizedState;var u=e.memoizedProps,d=e.pendingProps,m=c.context,v=f(e);v=p(e,v),(s="function"==typeof s.getDerivedStateFromProps||"function"==typeof c.getSnapshotBeforeUpdate)||"function"!=typeof c.UNSAFE_componentWillReceiveProps&&"function"!=typeof c.componentWillReceiveProps||(u!==d||m!==v)&&l(e,c,d,v),m=e.memoizedState,n=null!==e.updateQueue?si(t,e,e.updateQueue,c,d,n):m;var y=void 0;if(u!==d&&(y=h(e,0,d,n)),null!==y&&void 0!==y){n=null===n||void 0===n?y:o({},n,y);var A=e.updateQueue;null!==A&&(A.baseState=o({},A.baseState,y))}return u!==d||m!==n||g()||null!==e.updateQueue&&e.updateQueue.hasForceUpdate?((y=a(e,u,d,m,n,v))?(s||"function"!=typeof c.UNSAFE_componentWillUpdate&&"function"!=typeof c.componentWillUpdate||("function"==typeof c.componentWillUpdate&&c.componentWillUpdate(d,n,v),"function"==typeof c.UNSAFE_componentWillUpdate&&c.UNSAFE_componentWillUpdate(d,n,v)),"function"==typeof c.componentDidUpdate&&(e.effectTag|=4),"function"==typeof c.getSnapshotBeforeUpdate&&(e.effectTag|=2048)):("function"!=typeof c.componentDidUpdate||u===t.memoizedProps&&m===t.memoizedState||(e.effectTag|=4),"function"!=typeof c.getSnapshotBeforeUpdate||u===t.memoizedProps&&m===t.memoizedState||(e.effectTag|=2048),i(e,d),r(e,n)),c.props=d,c.state=n,c.context=v,y):("function"!=typeof c.componentDidUpdate||u===t.memoizedProps&&m===t.memoizedState||(e.effectTag|=4),"function"!=typeof c.getSnapshotBeforeUpdate||u===t.memoizedProps&&m===t.memoizedState||(e.effectTag|=2048),!1)}}}(n,a,s,function(t,e){t.memoizedProps=e},function(t,e){t.memoizedState=e})).adoptClassInstance,O=t.callGetDerivedStateFromProps,j=t.constructClassInstance,P=t.mountClassInstance,R=t.resumeMountClassInstance,k=t.updateClassInstance;return{beginWork:function(t,e,n){if(0===e.expirationTime||e.expirationTime>n){switch(e.tag){case 3:m(e);break;case 2:C(e);break;case 4:b(e,e.stateNode.containerInfo);break;case 13:M(e)}return null}switch(e.tag){case 0:null!==t&&h("155");var i=e.type,r=e.pendingProps,a=x(e);return i=i(r,a=E(e,a)),e.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(a=e.type,e.tag=2,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,"function"==typeof a.getDerivedStateFromProps&&null!==(r=O(e,i,r,e.memoizedState))&&void 0!==r&&(e.memoizedState=o({},e.memoizedState,r)),r=C(e),I(e,i),P(e,n),t=f(t,e,!0,r,!1,n)):(e.tag=1,l(t,e,i),e.memoizedProps=r,t=e.child),t;case 1:return r=e.type,n=e.pendingProps,T()||e.memoizedProps!==n?(i=x(e),r=r(n,i=E(e,i)),e.effectTag|=1,l(t,e,r),e.memoizedProps=n,t=e.child):t=v(t,e),t;case 2:r=C(e),null===t?null===e.stateNode?(j(e,e.pendingProps),P(e,n),i=!0):i=R(e,n):i=k(t,e,n),a=!1;var s=e.updateQueue;return null!==s&&null!==s.capturedValues&&(a=i=!0),f(t,e,i,r,a,n);case 3:t:if(m(e),i=e.updateQueue,null!==i){if(a=e.memoizedState,r=si(t,e,i,null,null,n),e.memoizedState=r,null!==(i=e.updateQueue)&&null!==i.capturedValues)i=null;else{if(a===r){L(),t=v(t,e);break t}i=r.element}a=e.stateNode,(null===t||null===t.child)&&a.hydrate&&_(e)?(e.effectTag|=2,e.child=fi(e,null,i,n)):(L(),l(t,e,i)),e.memoizedState=r,t=e.child}else L(),t=v(t,e);return t;case 5:return w(e),null===t&&N(e),r=e.type,s=e.memoizedProps,i=e.pendingProps,a=null!==t?t.memoizedProps:null,T()||s!==i||((s=1&e.mode&&A(r,i))&&(e.expirationTime=1073741823),s&&1073741823===n)?(s=i.children,y(r,i)?s=null:a&&y(r,a)&&(e.effectTag|=16),p(t,e),1073741823!==n&&1&e.mode&&A(r,i)?(e.expirationTime=1073741823,e.memoizedProps=i,t=null):(l(t,e,s),e.memoizedProps=i,t=e.child)):t=v(t,e),t;case 6:return null===t&&N(e),e.memoizedProps=e.pendingProps,null;case 8:e.tag=7;case 7:return r=e.pendingProps,T()||e.memoizedProps!==r||(r=e.memoizedProps),i=r.children,e.stateNode=null===t?fi(e,e.stateNode,i,n):pi(e,t.stateNode,i,n),e.memoizedProps=r,e.stateNode;case 9:return null;case 4:return b(e,e.stateNode.containerInfo),r=e.pendingProps,T()||e.memoizedProps!==r?(null===t?e.child=pi(e,null,r,n):l(t,e,r),e.memoizedProps=r,t=e.child):t=v(t,e),t;case 14:return l(t,e,n=(n=e.type.render)(e.pendingProps,e.ref)),e.memoizedProps=n,e.child;case 10:return n=e.pendingProps,T()||e.memoizedProps!==n?(l(t,e,n),e.memoizedProps=n,t=e.child):t=v(t,e),t;case 11:return n=e.pendingProps.children,T()||null!==n&&e.memoizedProps!==n?(l(t,e,n),e.memoizedProps=n,t=e.child):t=v(t,e),t;case 13:return function(t,e,n){var i=e.type._context,r=e.pendingProps,o=e.memoizedProps;if(!T()&&o===r)return e.stateNode=0,M(e),v(t,e);var a=r.value;if(e.memoizedProps=r,null===o)a=1073741823;else if(o.value===r.value){if(o.children===r.children)return e.stateNode=0,M(e),v(t,e);a=0}else{var s=o.value;if(s===a&&(0!==s||1/s==1/a)||s!=s&&a!=a){if(o.children===r.children)return e.stateNode=0,M(e),v(t,e);a=0}else if(a="function"==typeof i._calculateChangedBits?i._calculateChangedBits(s,a):1073741823,0==(a|=0)){if(o.children===r.children)return e.stateNode=0,M(e),v(t,e)}else g(e,i,a,n)}return e.stateNode=a,M(e),l(t,e,r.children),e.child}(t,e,n);case 12:i=e.type,a=e.pendingProps;var c=e.memoizedProps;return r=i._currentValue,s=i._changedBits,T()||0!==s||c!==a?(e.memoizedProps=a,void 0!==(c=a.unstable_observedBits)&&null!==c||(c=1073741823),e.stateNode=c,0!=(s&c)&&g(e,i,s,n),l(t,e,n=(n=a.children)(r)),t=e.child):t=v(t,e),t;default:h("156")}}}}function gi(t,e){var n=e.source;null===e.stack&&le(n),null!==n&&ce(n),e=e.value,null!==t&&2===t.tag&&ce(t);try{e&&e.suppressReactErrorLogging}catch(t){t&&t.suppressReactErrorLogging}}var vi={};function yi(t){function e(){if(null!==$)for(var t=$.return;null!==t;)j(t),t=t.return;tt=null,et=0,$=null,rt=!1}function n(t){return null!==ot&&ot.has(t)}function i(t){for(;;){var e=t.alternate,n=t.return,i=t.sibling;if(0==(512&t.effectTag)){e=N(e,t,et);var r=t;if(1073741823===et||1073741823!==r.expirationTime){t:switch(r.tag){case 3:case 2:var o=r.updateQueue;o=null===o?0:o.expirationTime;break t;default:o=0}for(var a=r.child;null!==a;)0!==a.expirationTime&&(0===o||o>a.expirationTime)&&(o=a.expirationTime),a=a.sibling;r.expirationTime=o}if(null!==e)return e;if(null!==n&&0==(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=t.firstEffect),n.lastEffect=t.lastEffect),1<t.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=t:n.firstEffect=t,n.lastEffect=t)),null!==i)return i;if(null===n){rt=!0;break}t=n}else{if(null!==(t=O(t)))return t.effectTag&=2559,t;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==i)return i;if(null===n)break;t=n}}return null}function r(t){var e=L(t.alternate,t,et);return null===e&&(e=i(t)),qt.current=null,e}function a(t,n,o){J&&h("243"),J=!0,n===et&&t===tt&&null!==$||(e(),et=n,$=Yn((tt=t).current,null,et),t.pendingCommitExpirationTime=0);for(var a=!1;;){try{if(o)for(;null!==$&&!x();)$=r($);else for(;null!==$;)$=r($)}catch(t){if(null===$){a=!0,T(t);break}var s=(o=$).return;if(null===s){a=!0,T(t);break}I(s,o,t),$=i(o)}break}return J=!1,a||null!==$?null:rt?(t.pendingCommitExpirationTime=n,t.current.alternate):void h("262")}function s(t,e,n,i){oi(e,{expirationTime:i,partialState:null,callback:null,isReplace:!1,isForced:!1,capturedValue:t={value:n,source:t,stack:le(t)},next:null}),d(e,i)}function c(t,e){t:{J&&!it&&h("263");for(var i=t.return;null!==i;){switch(i.tag){case 2:var r=i.stateNode;if("function"==typeof i.type.getDerivedStateFromCatch||"function"==typeof r.componentDidCatch&&!n(r)){s(t,i,e,1),t=void 0;break t}break;case 3:s(t,i,e,1),t=void 0;break t}i=i.return}3===t.tag&&s(t,t,e,1),t=void 0}return t}function l(t){return t=0!==K?K:J?it?1:et:1&t.mode?wt?10*(1+((p()+50)/10|0)):25*(1+((p()+500)/25|0)):1,wt&&(0===pt||t>pt)&&(pt=t),t}function d(t,n){t:{for(;null!==t;){if((0===t.expirationTime||t.expirationTime>n)&&(t.expirationTime=n),null!==t.alternate&&(0===t.alternate.expirationTime||t.alternate.expirationTime>n)&&(t.alternate.expirationTime=n),null===t.return){if(3!==t.tag){n=void 0;break t}var i=t.stateNode;!J&&0!==et&&n<et&&e(),J&&!it&&tt===i||g(i,n),Et>Mt&&h("185")}t=t.return}n=void 0}return n}function p(){return 2+((Q()-X)/10|0)}function f(t,e,n,i,r){var o=K;K=1;try{return t(e,n,i,r)}finally{K=o}}function m(t){if(0!==ct){if(t>ct)return;Y(lt)}var e=Q()-X;ct=t,lt=V(y,{timeout:10*(t-2)-e})}function g(t,e){if(null===t.nextScheduledRoot)t.remainingExpirationTime=e,null===st?(at=st=t,t.nextScheduledRoot=t):(st=st.nextScheduledRoot=t).nextScheduledRoot=at;else{var n=t.remainingExpirationTime;(0===n||e<n)&&(t.remainingExpirationTime=e)}ut||(yt?At&&(ht=t,dt=1,M(t,1,!1)):1===e?A():m(e))}function v(){var t=0,e=null;if(null!==st)for(var n=st,i=at;null!==i;){var r=i.remainingExpirationTime;if(0===r){if((null===n||null===st)&&h("244"),i===i.nextScheduledRoot){at=st=i.nextScheduledRoot=null;break}if(i===at)at=r=i.nextScheduledRoot,st.nextScheduledRoot=r,i.nextScheduledRoot=null;else{if(i===st){(st=n).nextScheduledRoot=at,i.nextScheduledRoot=null;break}n.nextScheduledRoot=i.nextScheduledRoot,i.nextScheduledRoot=null}i=n.nextScheduledRoot}else{if((0===t||r<t)&&(t=r,e=i),i===st)break;n=i,i=i.nextScheduledRoot}}null!==(n=ht)&&n===e&&1===t?Et++:Et=0,ht=e,dt=t}function y(t){w(0,!0,t)}function A(){w(1,!1,null)}function w(t,e,n){if(vt=n,v(),e)for(;null!==ht&&0!==dt&&(0===t||t>=dt)&&(!ft||p()>=dt);)M(ht,dt,!ft),v();else for(;null!==ht&&0!==dt&&(0===t||t>=dt);)M(ht,dt,!1),v();null!==vt&&(ct=0,lt=-1),0!==dt&&m(dt),vt=null,ft=!1,b()}function b(){if(Et=0,null!==bt){var t=bt;bt=null;for(var e=0;e<t.length;e++){var n=t[e];try{n._onComplete()}catch(t){mt||(mt=!0,gt=t)}}}if(mt)throw t=gt,gt=null,mt=!1,t}function M(t,e,n){ut&&h("245"),ut=!0,n?null!==(n=t.finishedWork)?E(t,n,e):(t.finishedWork=null,null!==(n=a(t,e,!0))&&(x()?t.finishedWork=n:E(t,n,e))):null!==(n=t.finishedWork)?E(t,n,e):(t.finishedWork=null,null!==(n=a(t,e,!1))&&E(t,n,e)),ut=!1}function E(t,e,n){var i=t.firstBatch;if(null!==i&&i._expirationTime<=n&&(null===bt?bt=[i]:bt.push(i),i._defer))return t.finishedWork=e,void(t.remainingExpirationTime=0);t.finishedWork=null,it=J=!0,(n=e.stateNode).current===e&&h("177"),0===(i=n.pendingCommitExpirationTime)&&h("261"),n.pendingCommitExpirationTime=0;var r=p();if(qt.current=null,1<e.effectTag)if(null!==e.lastEffect){e.lastEffect.nextEffect=e;var o=e.firstEffect}else o=e;else o=e.firstEffect;for(W(n.containerInfo),nt=o;null!==nt;){var a=!1,s=void 0;try{for(;null!==nt;)2048&nt.effectTag&&P(nt.alternate,nt),nt=nt.nextEffect}catch(t){a=!0,s=t}a&&(null===nt&&h("178"),c(nt,s),null!==nt&&(nt=nt.nextEffect))}for(nt=o;null!==nt;){a=!1,s=void 0;try{for(;null!==nt;){var l=nt.effectTag;if(16&l&&R(nt),128&l){var u=nt.alternate;null!==u&&G(u)}switch(14&l){case 2:k(nt),nt.effectTag&=-3;break;case 6:k(nt),nt.effectTag&=-3,B(nt.alternate,nt);break;case 4:B(nt.alternate,nt);break;case 8:z(nt)}nt=nt.nextEffect}}catch(t){a=!0,s=t}a&&(null===nt&&h("178"),c(nt,s),null!==nt&&(nt=nt.nextEffect))}for(q(n.containerInfo),n.current=e,nt=o;null!==nt;){l=!1,u=void 0;try{for(o=n,a=r,s=i;null!==nt;){var d=nt.effectTag;36&d&&F(o,nt.alternate,nt,a,s),256&d&&U(nt,T),128&d&&H(nt);var f=nt.nextEffect;nt.nextEffect=null,nt=f}}catch(t){l=!0,u=t}l&&(null===nt&&h("178"),c(nt,u),null!==nt&&(nt=nt.nextEffect))}J=it=!1,function(t){"function"==typeof Kn&&Kn(t)}(e.stateNode),0===(e=n.current.expirationTime)&&(ot=null),t.remainingExpirationTime=e}function x(){return!(null===vt||vt.timeRemaining()>xt)&&(ft=!0)}function T(t){null===ht&&h("246"),ht.remainingExpirationTime=0,mt||(mt=!0,gt=t)}var C=function(){var t=[],e=-1;return{createCursor:function(t){return{current:t}},isEmpty:function(){return-1===e},pop:function(n){0>e||(n.current=t[e],t[e]=null,e--)},push:function(n,i){t[++e]=n.current,n.current=i},checkThatStackIsEmpty:function(){},resetStackAfterFatalErrorInDev:function(){}}}(),S=function(t,e){function n(t){return t===vi&&h("174"),t}var i=t.getChildHostContext,r=t.getRootHostContext;t=e.createCursor;var o=e.push,a=e.pop,s=t(vi),c=t(vi),l=t(vi);return{getHostContext:function(){return n(s.current)},getRootHostContainer:function(){return n(l.current)},popHostContainer:function(t){a(s,t),a(c,t),a(l,t)},popHostContext:function(t){c.current===t&&(a(s,t),a(c,t))},pushHostContainer:function(t,e){o(l,e,t),o(c,t,t),o(s,vi,t),e=r(e),a(s,t),o(s,e,t)},pushHostContext:function(t){var e=n(l.current),r=n(s.current);r!==(e=i(r,t.type,e))&&(o(c,t,t),o(s,e,t))}}}(t,C),D=function(t){function e(t,e,n){(t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n}function n(t){return 2===t.tag&&null!=t.type.childContextTypes}function i(t,e){var n=t.stateNode,i=t.type.childContextTypes;if("function"!=typeof n.getChildContext)return e;for(var r in n=n.getChildContext())r in i||h("108",ce(t)||"Unknown",r);return o({},e,n)}var r=t.createCursor,a=t.push,s=t.pop,c=r(u),l=r(!1),d=u;return{getUnmaskedContext:function(t){return n(t)?d:c.current},cacheContext:e,getMaskedContext:function(t,n){var i=t.type.contextTypes;if(!i)return u;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in i)a[o]=n[o];return r&&e(t,n,a),a},hasContextChanged:function(){return l.current},isContextConsumer:function(t){return 2===t.tag&&null!=t.type.contextTypes},isContextProvider:n,popContextProvider:function(t){n(t)&&(s(l,t),s(c,t))},popTopLevelContextObject:function(t){s(l,t),s(c,t)},pushTopLevelContextObject:function(t,e,n){null!=c.cursor&&h("168"),a(c,e,t),a(l,n,t)},processChildContext:i,pushContextProvider:function(t){if(!n(t))return!1;var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||u,d=c.current,a(c,e,t),a(l,l.current,t),!0},invalidateContextProvider:function(t,e){var n=t.stateNode;if(n||h("169"),e){var r=i(t,d);n.__reactInternalMemoizedMergedChildContext=r,s(l,t),s(c,t),a(c,r,t)}else s(l,t);a(l,e,t)},findCurrentUnmaskedContext:function(t){for((2!==We(t)||2!==t.tag)&&h("170");3!==t.tag;){if(n(t))return t.stateNode.__reactInternalMemoizedMergedChildContext;(t=t.return)||h("171")}return t.stateNode.context}}}(C);C=function(t){var e=t.createCursor,n=t.push,i=t.pop,r=e(null),o=e(null),a=e(0);return{pushProvider:function(t){var e=t.type._context;n(a,e._changedBits,t),n(o,e._currentValue,t),n(r,t,t),e._currentValue=t.pendingProps.value,e._changedBits=t.stateNode},popProvider:function(t){var e=a.current,n=o.current;i(r,t),i(o,t),i(a,t),(t=t.type._context)._currentValue=n,t._changedBits=e}}}(C);var _=function(t){function e(t,e){var n=new Vn(5,null,null,0);n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function n(t,e){switch(t.tag){case 5:return null!==(e=o(e,t.type,t.pendingProps))&&(t.stateNode=e,!0);case 6:return null!==(e=a(e,t.pendingProps))&&(t.stateNode=e,!0);default:return!1}}function i(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag;)t=t.return;d=t}var r=t.shouldSetTextContent;if(!(t=t.hydration))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){h("175")},prepareToHydrateHostTextInstance:function(){h("176")},popHydrationState:function(){return!1}};var o=t.canHydrateInstance,a=t.canHydrateTextInstance,s=t.getNextHydratableSibling,c=t.getFirstHydratableChild,l=t.hydrateInstance,u=t.hydrateTextInstance,d=null,p=null,f=!1;return{enterHydrationState:function(t){return p=c(t.stateNode.containerInfo),d=t,f=!0},resetHydrationState:function(){p=d=null,f=!1},tryToClaimNextHydratableInstance:function(t){if(f){var i=p;if(i){if(!n(t,i)){if(!(i=s(i))||!n(t,i))return t.effectTag|=2,f=!1,void(d=t);e(d,p)}d=t,p=c(i)}else t.effectTag|=2,f=!1,d=t}},prepareToHydrateHostInstance:function(t,e,n){return e=l(t.stateNode,t.type,t.memoizedProps,e,n,t),t.updateQueue=e,null!==e},prepareToHydrateHostTextInstance:function(t){return u(t.stateNode,t.memoizedProps,t)},popHydrationState:function(t){if(t!==d)return!1;if(!f)return i(t),f=!0,!1;var n=t.type;if(5!==t.tag||"head"!==n&&"body"!==n&&!r(n,t.memoizedProps))for(n=p;n;)e(t,n),n=s(n);return i(t),p=d?s(t.stateNode):null,!0}}}(t),L=mi(t,S,D,C,_,d,l).beginWork,N=function(t,e,n,i,r){function o(t){t.effectTag|=4}var a=t.createInstance,s=t.createTextInstance,c=t.appendInitialChild,l=t.finalizeInitialChildren,u=t.prepareUpdate,d=t.persistence,p=e.getRootHostContainer,f=e.popHostContext,m=e.getHostContext,g=e.popHostContainer,v=n.popContextProvider,y=n.popTopLevelContextObject,A=i.popProvider,w=r.prepareToHydrateHostInstance,b=r.prepareToHydrateHostTextInstance,M=r.popHydrationState,E=void 0,x=void 0,T=void 0;return t.mutation?(E=function(){},x=function(t,e,n){(e.updateQueue=n)&&o(e)},T=function(t,e,n,i){n!==i&&o(e)}):h(d?"235":"236"),{completeWork:function(t,e,n){var i=e.pendingProps;switch(e.tag){case 1:return null;case 2:return v(e),t=e.stateNode,null!==(i=e.updateQueue)&&null!==i.capturedValues&&(e.effectTag&=-65,"function"==typeof t.componentDidCatch?e.effectTag|=256:i.capturedValues=null),null;case 3:return g(e),y(e),(i=e.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(M(e),e.effectTag&=-3),E(e),null!==(t=e.updateQueue)&&null!==t.capturedValues&&(e.effectTag|=256),null;case 5:f(e),n=p();var r=e.type;if(null!==t&&null!=e.stateNode){var d=t.memoizedProps,C=e.stateNode,S=m();C=u(C,r,d,i,n,S),x(t,e,C,r,d,i,n,S),t.ref!==e.ref&&(e.effectTag|=128)}else{if(!i)return null===e.stateNode&&h("166"),null;if(t=m(),M(e))w(e,n,t)&&o(e);else{d=a(r,i,n,t,e);t:for(S=e.child;null!==S;){if(5===S.tag||6===S.tag)c(d,S.stateNode);else if(4!==S.tag&&null!==S.child){S.child.return=S,S=S.child;continue}if(S===e)break;for(;null===S.sibling;){if(null===S.return||S.return===e)break t;S=S.return}S.sibling.return=S.return,S=S.sibling}l(d,r,i,n,t)&&o(e),e.stateNode=d}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)T(t,e,t.memoizedProps,i);else{if("string"!=typeof i)return null===e.stateNode&&h("166"),null;t=p(),n=m(),M(e)?b(e)&&o(e):e.stateNode=s(i,t,n,e)}return null;case 7:(i=e.memoizedProps)||h("165"),e.tag=8,r=[];t:for((d=e.stateNode)&&(d.return=e);null!==d;){if(5===d.tag||6===d.tag||4===d.tag)h("247");else if(9===d.tag)r.push(d.pendingProps.value);else if(null!==d.child){d.child.return=d,d=d.child;continue}for(;null===d.sibling;){if(null===d.return||d.return===e)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}return i=(d=i.handler)(i.props,r),e.child=pi(e,null!==t?t.child:null,i,n),e.child;case 8:return e.tag=7,null;case 9:case 14:case 10:case 11:return null;case 4:return g(e),E(e),null;case 13:return A(e),null;case 12:return null;case 0:h("167");default:h("156")}}}}(t,S,D,C,_).completeWork,I=(S=function(t,e,n,i,r){var o=t.popHostContainer,a=t.popHostContext,s=e.popContextProvider,c=e.popTopLevelContextObject,l=n.popProvider;return{throwException:function(t,e,n){e.effectTag|=512,e.firstEffect=e.lastEffect=null,e={value:n,source:e,stack:le(e)};do{switch(t.tag){case 3:return ri(t),t.updateQueue.capturedValues=[e],void(t.effectTag|=1024);case 2:if(n=t.stateNode,0==(64&t.effectTag)&&null!==n&&"function"==typeof n.componentDidCatch&&!r(n)){ri(t);var i=(n=t.updateQueue).capturedValues;return null===i?n.capturedValues=[e]:i.push(e),void(t.effectTag|=1024)}}t=t.return}while(null!==t)},unwindWork:function(t){switch(t.tag){case 2:s(t);var e=t.effectTag;return 1024&e?(t.effectTag=-1025&e|64,t):null;case 3:return o(t),c(t),1024&(e=t.effectTag)?(t.effectTag=-1025&e|64,t):null;case 5:return a(t),null;case 4:return o(t),null;case 13:return l(t),null;default:return null}},unwindInterruptedWork:function(t){switch(t.tag){case 2:s(t);break;case 3:o(t),c(t);break;case 5:a(t);break;case 4:o(t);break;case 13:l(t)}}}}(S,D,C,0,n)).throwException,O=S.unwindWork,j=S.unwindInterruptedWork,P=(S=function(t,e,n,i,r){function o(t){var n=t.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){e(t,n)}else n.current=null}function a(t){switch(function(t){"function"==typeof Jn&&Jn(t)}(t),t.tag){case 2:o(t);var n=t.stateNode;if("function"==typeof n.componentWillUnmount)try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(n){e(t,n)}break;case 5:o(t);break;case 7:s(t.stateNode);break;case 4:d&&l(t)}}function s(t){for(var e=t;;)if(a(e),null===e.child||d&&4===e.tag){if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}else e.child.return=e,e=e.child}function c(t){return 5===t.tag||3===t.tag||4===t.tag}function l(t){for(var e=t,n=!1,i=void 0,r=void 0;;){if(!n){n=e.return;t:for(;;){switch(null===n&&h("160"),n.tag){case 5:i=n.stateNode,r=!1;break t;case 3:case 4:i=n.stateNode.containerInfo,r=!0;break t}n=n.return}n=!0}if(5===e.tag||6===e.tag)s(e),r?M(i,e.stateNode):b(i,e.stateNode);else if(4===e.tag?i=e.stateNode.containerInfo:a(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;4===(e=e.return).tag&&(n=!1)}e.sibling.return=e.return,e=e.sibling}}var u=t.getPublicInstance,d=t.mutation;t=t.persistence,d||h(t?"235":"236");var p=d.commitMount,f=d.commitUpdate,m=d.resetTextContent,g=d.commitTextUpdate,v=d.appendChild,y=d.appendChildToContainer,A=d.insertBefore,w=d.insertInContainerBefore,b=d.removeChild,M=d.removeChildFromContainer;return{commitBeforeMutationLifeCycles:function(t,e){switch(e.tag){case 2:if(2048&e.effectTag&&null!==t){var n=t.memoizedProps,i=t.memoizedState;(t=e.stateNode).props=e.memoizedProps,t.state=e.memoizedState,e=t.getSnapshotBeforeUpdate(n,i),t.__reactInternalSnapshotBeforeUpdate=e}break;case 3:case 5:case 6:case 4:break;default:h("163")}},commitResetTextContent:function(t){m(t.stateNode)},commitPlacement:function(t){t:{for(var e=t.return;null!==e;){if(c(e)){var n=e;break t}e=e.return}h("160"),n=void 0}var i=e=void 0;switch(n.tag){case 5:e=n.stateNode,i=!1;break;case 3:case 4:e=n.stateNode.containerInfo,i=!0;break;default:h("161")}16&n.effectTag&&(m(e),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||c(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var r=t;;){if(5===r.tag||6===r.tag)n?i?w(e,r.stateNode,n):A(e,r.stateNode,n):i?y(e,r.stateNode):v(e,r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},commitDeletion:function(t){l(t),t.return=null,t.child=null,t.alternate&&(t.alternate.child=null,t.alternate.return=null)},commitWork:function(t,e){switch(e.tag){case 2:break;case 5:var n=e.stateNode;if(null!=n){var i=e.memoizedProps;t=null!==t?t.memoizedProps:i;var r=e.type,o=e.updateQueue;e.updateQueue=null,null!==o&&f(n,o,r,t,i,e)}break;case 6:null===e.stateNode&&h("162"),n=e.memoizedProps,g(e.stateNode,null!==t?t.memoizedProps:n,n);break;case 3:break;default:h("163")}},commitLifeCycles:function(t,e,n){switch(n.tag){case 2:if(t=n.stateNode,4&n.effectTag)if(null===e)t.props=n.memoizedProps,t.state=n.memoizedState,t.componentDidMount();else{var i=e.memoizedProps;e=e.memoizedState,t.props=n.memoizedProps,t.state=n.memoizedState,t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}null!==(n=n.updateQueue)&&ci(n,t);break;case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=u(n.child.stateNode);break;case 2:t=n.child.stateNode}ci(e,t)}break;case 5:t=n.stateNode,null===e&&4&n.effectTag&&p(t,n.type,n.memoizedProps,n);break;case 6:case 4:break;default:h("163")}},commitErrorLogging:function(t,e){switch(t.tag){case 2:var n=t.type;e=t.stateNode;var i=t.updateQueue;(null===i||null===i.capturedValues)&&h("264");var r=i.capturedValues;for(i.capturedValues=null,"function"!=typeof n.getDerivedStateFromCatch&&function(t){null===ot?ot=new Set([t]):ot.add(t)}(e),e.props=t.memoizedProps,e.state=t.memoizedState,n=0;n<r.length;n++){var o=(i=r[n]).value,a=i.stack;gi(t,i),e.componentDidCatch(o,{componentStack:null!==a?a:""})}break;case 3:for((null===(n=t.updateQueue)||null===n.capturedValues)&&h("264"),r=n.capturedValues,n.capturedValues=null,n=0;n<r.length;n++)gi(t,i=r[n]),e(i.value);break;default:h("265")}},commitAttachRef:function(t){var e=t.ref;if(null!==e){var n=t.stateNode;switch(t.tag){case 5:t=u(n);break;default:t=n}"function"==typeof e?e(t):e.current=t}},commitDetachRef:function(t){null!==(t=t.ref)&&("function"==typeof t?t(null):t.current=null)}}}(t,c)).commitBeforeMutationLifeCycles,R=S.commitResetTextContent,k=S.commitPlacement,z=S.commitDeletion,B=S.commitWork,F=S.commitLifeCycles,U=S.commitErrorLogging,H=S.commitAttachRef,G=S.commitDetachRef,Q=t.now,V=t.scheduleDeferredCallback,Y=t.cancelDeferredCallback,W=t.prepareForCommit,q=t.resetAfterCommit,X=Q(),Z=0,K=0,J=!1,$=null,tt=null,et=0,nt=null,it=!1,rt=!1,ot=null,at=null,st=null,ct=0,lt=-1,ut=!1,ht=null,dt=0,pt=0,ft=!1,mt=!1,gt=null,vt=null,yt=!1,At=!1,wt=!1,bt=null,Mt=1e3,Et=0,xt=1;return{recalculateCurrentTime:p,computeExpirationForFiber:l,scheduleWork:d,requestWork:g,flushRoot:function(t,e){ut&&h("253"),ht=t,dt=e,M(t,e,!1),A(),b()},batchedUpdates:function(t,e){var n=yt;yt=!0;try{return t(e)}finally{(yt=n)||ut||A()}},unbatchedUpdates:function(t,e){if(yt&&!At){At=!0;try{return t(e)}finally{At=!1}}return t(e)},flushSync:function(t,e){ut&&h("187");var n=yt;yt=!0;try{return f(t,e)}finally{yt=n,A()}},flushControlled:function(t){var e=yt;yt=!0;try{f(t)}finally{(yt=e)||ut||w(1,!1,null)}},deferredUpdates:function(t){var e=K;K=25*(1+((p()+500)/25|0));try{return t()}finally{K=e}},syncUpdates:f,interactiveUpdates:function(t,e,n){if(wt)return t(e,n);yt||ut||0===pt||(w(pt,!1,null),pt=0);var i=wt,r=yt;yt=wt=!0;try{return t(e,n)}finally{wt=i,(yt=r)||ut||A()}},flushInteractiveUpdates:function(){ut||0===pt||(w(pt,!1,null),pt=0)},computeUniqueAsyncExpiration:function(){var t=25*(1+((p()+500)/25|0));return t<=Z&&(t=Z+1),Z=t},legacyContext:D}}function Ai(t){function e(t,e,n,i,r,o){if(i=e.current,n){n=n._reactInternalFiber;var a=l(n);n=h(n)?d(n,a):a}else n=u;return null===e.context?e.context=n:e.pendingContext=n,oi(i,{expirationTime:r,partialState:{element:t},callback:void 0===(e=o)?null:e,isReplace:!1,isForced:!1,capturedValue:null,next:null}),s(i,r),r}function n(t){return null===(t=function(t){if(!(t=Ze(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}(t))?null:t.stateNode}var i=t.getPublicInstance,r=(t=yi(t)).recalculateCurrentTime,a=t.computeExpirationForFiber,s=t.scheduleWork,c=t.legacyContext,l=c.findCurrentUnmaskedContext,h=c.isContextProvider,d=c.processChildContext;return{createContainer:function(t,e,n){return t={current:e=new Vn(3,null,null,e?3:0),containerInfo:t,pendingChildren:null,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},e.stateNode=t},updateContainer:function(t,n,i,o){var s=n.current;return e(t,n,i,r(),s=a(s),o)},updateContainerAtExpirationTime:function(t,n,i,o,a){return e(t,n,i,r(),o,a)},flushRoot:t.flushRoot,requestWork:t.requestWork,computeUniqueAsyncExpiration:t.computeUniqueAsyncExpiration,batchedUpdates:t.batchedUpdates,unbatchedUpdates:t.unbatchedUpdates,deferredUpdates:t.deferredUpdates,syncUpdates:t.syncUpdates,interactiveUpdates:t.interactiveUpdates,flushInteractiveUpdates:t.flushInteractiveUpdates,flushControlled:t.flushControlled,flushSync:t.flushSync,getPublicRootInstance:function(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:return i(t.child.stateNode);default:return t.child.stateNode}},findHostInstance:n,findHostInstanceWithNoPortals:function(t){return null===(t=function(t){if(!(t=Ze(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child&&4!==e.tag)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}(t))?null:t.stateNode},injectIntoDevTools:function(t){var e=t.findFiberByHostInstance;return function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);Kn=$n(function(t){return e.onCommitFiberRoot(n,t)}),Jn=$n(function(t){return e.onCommitFiberUnmount(n,t)})}catch(t){}return!0}(o({},t,{findHostInstanceByFiber:function(t){return n(t)},findFiberByHostInstance:function(t){return e?e(t):null}}))}}}var wi=Object.freeze({default:Ai}),bi=wi&&Ai||wi,Mi=bi.default?bi.default:bi,Ei="object"==typeof performance&&"function"==typeof performance.now,xi=void 0;xi=Ei?function(){return performance.now()}:function(){return Date.now()};var Ti=void 0,Ci=void 0;if(r.canUseDOM)if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){var Si=null,Di=!1,_i=-1,Li=!1,Ni=0,Ii=33,Oi=33,ji=void 0;ji=Ei?{didTimeout:!1,timeRemaining:function(){var t=Ni-performance.now();return 0<t?t:0}}:{didTimeout:!1,timeRemaining:function(){var t=Ni-Date.now();return 0<t?t:0}};var Pi="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(t){if(t.source===window&&t.data===Pi){if(Di=!1,t=xi(),0>=Ni-t){if(!(-1!==_i&&_i<=t))return void(Li||(Li=!0,requestAnimationFrame(Ri)));ji.didTimeout=!0}else ji.didTimeout=!1;_i=-1,t=Si,Si=null,null!==t&&t(ji)}},!1);var Ri=function(t){Li=!1;var e=t-Ni+Oi;e<Oi&&Ii<Oi?(8>e&&(e=8),Oi=e<Ii?Ii:e):Ii=e,Ni=t+Oi,Di||(Di=!0,window.postMessage(Pi,"*"))};Ti=function(t,e){return Si=t,null!=e&&"number"==typeof e.timeout&&(_i=xi()+e.timeout),Li||(Li=!0,requestAnimationFrame(Ri)),0},Ci=function(){Si=null,Di=!1,_i=-1}}else Ti=window.requestIdleCallback,Ci=window.cancelIdleCallback;else Ti=function(t){return setTimeout(function(){t({timeRemaining:function(){return 1/0},didTimeout:!1})})},Ci=function(t){clearTimeout(t)};function ki(t,e){return t=o({children:void 0},e),(e=function(t){var e="";return i.Children.forEach(t,function(t){null==t||"string"!=typeof t&&"number"!=typeof t||(e+=t)}),e}(e.children))&&(t.children=e),t}function zi(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+n,e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function Bi(t,e){var n=e.value;t._wrapperState={initialValue:null!=n?n:e.defaultValue,wasMultiple:!!e.multiple}}function Fi(t,e){return null!=e.dangerouslySetInnerHTML&&h("91"),o({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ui(t,e){var n=e.value;null==n&&(n=e.defaultValue,null!=(e=e.children)&&(null!=n&&h("92"),Array.isArray(e)&&(1>=e.length||h("93"),e=e[0]),n=""+e),null==n&&(n="")),t._wrapperState={initialValue:""+n}}function Hi(t,e){var n=e.value;null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&(t.defaultValue=n)),null!=e.defaultValue&&(t.defaultValue=e.defaultValue)}function Gi(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}function Qi(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vi(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Qi(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Yi,Wi=void 0,qi=(Yi=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((Wi=Wi||document.createElement("div")).innerHTML="<svg>"+e+"</svg>",e=Wi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction(function(){return Yi(t,e)})}:Yi);function Xi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var Zi={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ki=["Webkit","ms","Moz","O"];function Ji(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=n,o=e[n];r=null==o||"boolean"==typeof o||""===o?"":i||"number"!=typeof o||0===o||Zi.hasOwnProperty(r)&&Zi[r]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(Zi).forEach(function(t){Ki.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zi[e]=Zi[t]})});var $i=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tr(t,e,n){e&&($i[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&h("137",t,n()),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&h("60"),"object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||h("61")),null!=e.style&&"object"!=typeof e.style&&h("62",n()))}function er(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nr="http://www.w3.org/1999/xhtml",ir=a.thatReturns("");function rr(t,e){var n=On(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=w[e];for(var i=0;i<e.length;i++){var r=e[i];n.hasOwnProperty(r)&&n[r]||("topScroll"===r?An("topScroll","scroll",t):"topFocus"===r||"topBlur"===r?(An("topFocus","focus",t),An("topBlur","blur",t),n.topBlur=!0,n.topFocus=!0):"topCancel"===r?(Qt("cancel",!0)&&An("topCancel","cancel",t),n.topCancel=!0):"topClose"===r?(Qt("close",!0)&&An("topClose","close",t),n.topClose=!0):Dn.hasOwnProperty(r)&&yn(r,Dn[r],t),n[r]=!0)}}function or(t,e,n,i){return n=9===n.nodeType?n:n.ownerDocument,i===nr&&(i=Qi(t)),i===nr?"script"===t?((t=n.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):t="string"==typeof e.is?n.createElement(t,{is:e.is}):n.createElement(t):t=n.createElementNS(i,t),t}function ar(t,e){return(9===e.nodeType?e:e.ownerDocument).createTextNode(t)}function sr(t,e,n,i){var r=er(e,n);switch(e){case"iframe":case"object":yn("topLoad","load",t);var s=n;break;case"video":case"audio":for(s in _n)_n.hasOwnProperty(s)&&yn(s,_n[s],t);s=n;break;case"source":yn("topError","error",t),s=n;break;case"img":case"image":case"link":yn("topError","error",t),yn("topLoad","load",t),s=n;break;case"form":yn("topReset","reset",t),yn("topSubmit","submit",t),s=n;break;case"details":yn("topToggle","toggle",t),s=n;break;case"input":Ae(t,n),s=ye(t,n),yn("topInvalid","invalid",t),rr(i,"onChange");break;case"option":s=ki(t,n);break;case"select":Bi(t,n),s=o({},n,{value:void 0}),yn("topInvalid","invalid",t),rr(i,"onChange");break;case"textarea":Ui(t,n),s=Fi(t,n),yn("topInvalid","invalid",t),rr(i,"onChange");break;default:s=n}tr(e,s,ir);var c,l=s;for(c in l)if(l.hasOwnProperty(c)){var u=l[c];"style"===c?Ji(t,u):"dangerouslySetInnerHTML"===c?null!=(u=u?u.__html:void 0)&&qi(t,u):"children"===c?"string"==typeof u?("textarea"!==e||""!==u)&&Xi(t,u):"number"==typeof u&&Xi(t,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(A.hasOwnProperty(c)?null!=u&&rr(i,c):null!=u&&ve(t,c,u,r))}switch(e){case"input":Yt(t),Me(t,n);break;case"textarea":Yt(t),Gi(t);break;case"option":null!=n.value&&t.setAttribute("value",n.value);break;case"select":t.multiple=!!n.multiple,null!=(e=n.value)?zi(t,!!n.multiple,e,!1):null!=n.defaultValue&&zi(t,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof s.onClick&&(t.onclick=a)}}function cr(t,e,n,i,r){var s=null;switch(e){case"input":n=ye(t,n),i=ye(t,i),s=[];break;case"option":n=ki(t,n),i=ki(t,i),s=[];break;case"select":n=o({},n,{value:void 0}),i=o({},i,{value:void 0}),s=[];break;case"textarea":n=Fi(t,n),i=Fi(t,i),s=[];break;default:"function"!=typeof n.onClick&&"function"==typeof i.onClick&&(t.onclick=a)}tr(e,i,ir),e=t=void 0;var c=null;for(t in n)if(!i.hasOwnProperty(t)&&n.hasOwnProperty(t)&&null!=n[t])if("style"===t){var l=n[t];for(e in l)l.hasOwnProperty(e)&&(c||(c={}),c[e]="")}else"dangerouslySetInnerHTML"!==t&&"children"!==t&&"suppressContentEditableWarning"!==t&&"suppressHydrationWarning"!==t&&"autoFocus"!==t&&(A.hasOwnProperty(t)?s||(s=[]):(s=s||[]).push(t,null));for(t in i){var u=i[t];if(l=null!=n?n[t]:void 0,i.hasOwnProperty(t)&&u!==l&&(null!=u||null!=l))if("style"===t)if(l){for(e in l)!l.hasOwnProperty(e)||u&&u.hasOwnProperty(e)||(c||(c={}),c[e]="");for(e in u)u.hasOwnProperty(e)&&l[e]!==u[e]&&(c||(c={}),c[e]=u[e])}else c||(s||(s=[]),s.push(t,c)),c=u;else"dangerouslySetInnerHTML"===t?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(t,""+u)):"children"===t?l===u||"string"!=typeof u&&"number"!=typeof u||(s=s||[]).push(t,""+u):"suppressContentEditableWarning"!==t&&"suppressHydrationWarning"!==t&&(A.hasOwnProperty(t)?(null!=u&&rr(r,t),s||l===u||(s=[])):(s=s||[]).push(t,u))}return c&&(s=s||[]).push("style",c),s}function lr(t,e,n,i,r){"input"===n&&"radio"===r.type&&null!=r.name&&we(t,r),er(n,i),i=er(n,r);for(var o=0;o<e.length;o+=2){var a=e[o],s=e[o+1];"style"===a?Ji(t,s):"dangerouslySetInnerHTML"===a?qi(t,s):"children"===a?Xi(t,s):ve(t,a,s,i)}switch(n){case"input":be(t,r);break;case"textarea":Hi(t,r);break;case"select":t._wrapperState.initialValue=void 0,e=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!r.multiple,null!=(n=r.value)?zi(t,!!r.multiple,n,!1):e!==!!r.multiple&&(null!=r.defaultValue?zi(t,!!r.multiple,r.defaultValue,!0):zi(t,!!r.multiple,r.multiple?[]:"",!1))}}function ur(t,e,n,i,r){switch(e){case"iframe":case"object":yn("topLoad","load",t);break;case"video":case"audio":for(var o in _n)_n.hasOwnProperty(o)&&yn(o,_n[o],t);break;case"source":yn("topError","error",t);break;case"img":case"image":case"link":yn("topError","error",t),yn("topLoad","load",t);break;case"form":yn("topReset","reset",t),yn("topSubmit","submit",t);break;case"details":yn("topToggle","toggle",t);break;case"input":Ae(t,n),yn("topInvalid","invalid",t),rr(r,"onChange");break;case"select":Bi(t,n),yn("topInvalid","invalid",t),rr(r,"onChange");break;case"textarea":Ui(t,n),yn("topInvalid","invalid",t),rr(r,"onChange")}for(var s in tr(e,n,ir),i=null,n)n.hasOwnProperty(s)&&(o=n[s],"children"===s?"string"==typeof o?t.textContent!==o&&(i=["children",o]):"number"==typeof o&&t.textContent!==""+o&&(i=["children",""+o]):A.hasOwnProperty(s)&&null!=o&&rr(r,s));switch(e){case"input":Yt(t),Me(t,n);break;case"textarea":Yt(t),Gi(t);break;case"select":case"option":break;default:"function"==typeof n.onClick&&(t.onclick=a)}return i}function hr(t,e){return t.nodeValue!==e}var dr=Object.freeze({createElement:or,createTextNode:ar,setInitialProperties:sr,diffProperties:cr,updateProperties:lr,diffHydratedProperties:ur,diffHydratedText:hr,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(t,e,n){switch(e){case"input":if(be(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Q(i);r||h("90"),Wt(i),be(i,r)}}}break;case"textarea":Hi(t,n);break;case"select":null!=(e=n.value)&&zi(t,!!n.multiple,e,!1)}}});Nt.injectFiberControlledHostComponent(dr);var pr=null,fr=null;function mr(t){this._expirationTime=wr.computeUniqueAsyncExpiration(),this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function gr(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function vr(t,e,n){this._internalRoot=wr.createContainer(t,e,n)}function yr(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ar(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}mr.prototype.render=function(t){this._defer||h("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,i=new gr;return wr.updateContainerAtExpirationTime(t,e,null,n,i._onCommit),i},mr.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},mr.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||h("251"),this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var i=null,r=e;r!==this;)i=r,r=r._next;null===i&&h("251"),i._next=r._next,this._next=e,t.firstBatch=this}this._defer=!1,wr.flushRoot(t,n),e=this._next,this._next=null,null!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},mr.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},gr.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},gr.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];"function"!=typeof n&&h("191",n),n()}}},vr.prototype.render=function(t,e){var n=this._internalRoot,i=new gr;return null!==(e=void 0===e?null:e)&&i.then(e),wr.updateContainer(t,n,null,i._onCommit),i},vr.prototype.unmount=function(t){var e=this._internalRoot,n=new gr;return null!==(t=void 0===t?null:t)&&n.then(t),wr.updateContainer(null,e,null,n._onCommit),n},vr.prototype.legacy_renderSubtreeIntoContainer=function(t,e,n){var i=this._internalRoot,r=new gr;return null!==(n=void 0===n?null:n)&&r.then(n),wr.updateContainer(e,i,t,r._onCommit),r},vr.prototype.createBatch=function(){var t=new mr(this),e=t._expirationTime,n=this._internalRoot,i=n.firstBatch;if(null===i)n.firstBatch=t,t._next=null;else{for(n=null;null!==i&&i._expirationTime<=e;)n=i,i=i._next;t._next=i,null!==n&&(n._next=t)}return t};var wr=Mi({getRootHostContext:function(t){var e=t.nodeType;switch(e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Vi(null,"");break;default:t=Vi(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}return t},getChildHostContext:function(t,e){return Vi(t,e)},getPublicInstance:function(t){return t},prepareForCommit:function(){pr=gn;var t=s();if(Rn(t)){if("selectionStart"in t)var e={start:t.selectionStart,end:t.selectionEnd};else t:{var n=window.getSelection&&window.getSelection();if(n&&0!==n.rangeCount){e=n.anchorNode;var i=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{e.nodeType,r.nodeType}catch(t){e=null;break t}var o=0,a=-1,c=-1,l=0,u=0,h=t,d=null;e:for(;;){for(var p;h!==e||0!==i&&3!==h.nodeType||(a=o+i),h!==r||0!==n&&3!==h.nodeType||(c=o+n),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===t)break e;if(d===e&&++l===i&&(a=o),d===r&&++u===n&&(c=o),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}e=-1===a||-1===c?null:{start:a,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;fr={focusedElem:t,selectionRange:e},vn(!1)},resetAfterCommit:function(){var t=fr,e=s(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&l(document.documentElement,n)){if(Rn(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(window.getSelection){e=window.getSelection();var r=n[it()].length;t=Math.min(i.start,r),i=void 0===i.end?t:Math.min(i.end,r),!e.extend&&t>i&&(r=i,i=t,t=r),r=Pn(n,t);var o=Pn(n,i);if(r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)){var a=document.createRange();a.setStart(r.node,r.offset),e.removeAllRanges(),t>i?(e.addRange(a),e.extend(o.node,o.offset)):(a.setEnd(o.node,o.offset),e.addRange(a))}}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}fr=null,vn(pr),pr=null},createInstance:function(t,e,n,i,r){return(t=or(t,e,n,i))[F]=r,t[U]=e,t},appendInitialChild:function(t,e){t.appendChild(e)},finalizeInitialChildren:function(t,e,n,i){return sr(t,e,n,i),Ar(e,n)},prepareUpdate:function(t,e,n,i,r){return cr(t,e,n,i,r)},shouldSetTextContent:function(t,e){return"textarea"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&"string"==typeof e.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(t,e){return!!e.hidden},createTextInstance:function(t,e,n,i){return(t=ar(t,e))[F]=i,t},now:xi,mutation:{commitMount:function(t,e,n){Ar(e,n)&&t.focus()},commitUpdate:function(t,e,n,i,r){t[U]=r,lr(t,e,n,i,r)},resetTextContent:function(t){Xi(t,"")},commitTextUpdate:function(t,e,n){t.nodeValue=n},appendChild:function(t,e){t.appendChild(e)},appendChildToContainer:function(t,e){8===t.nodeType?t.parentNode.insertBefore(e,t):t.appendChild(e)},insertBefore:function(t,e,n){t.insertBefore(e,n)},insertInContainerBefore:function(t,e,n){8===t.nodeType?t.parentNode.insertBefore(e,n):t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},removeChildFromContainer:function(t,e){8===t.nodeType?t.parentNode.removeChild(e):t.removeChild(e)}},hydration:{canHydrateInstance:function(t,e){return 1!==t.nodeType||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t},canHydrateTextInstance:function(t,e){return""===e||3!==t.nodeType?null:t},getNextHydratableSibling:function(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t},getFirstHydratableChild:function(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t},hydrateInstance:function(t,e,n,i,r,o){return t[F]=o,t[U]=n,ur(t,e,n,r,i)},hydrateTextInstance:function(t,e,n){return t[F]=n,hr(t,e)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},didNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:Ti,cancelDeferredCallback:Ci}),br=wr;function Mr(t,e,n,i,r){yr(n)||h("200");var o=n._reactRootContainer;if(o){if("function"==typeof r){var a=r;r=function(){var t=wr.getPublicRootInstance(o._internalRoot);a.call(t)}}null!=t?o.legacy_renderSubtreeIntoContainer(t,e,r):o.render(e,r)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new vr(t,!1,e)}(n,i),"function"==typeof r){var s=r;r=function(){var t=wr.getPublicRootInstance(o._internalRoot);s.call(t)}}wr.unbatchedUpdates(function(){null!=t?o.legacy_renderSubtreeIntoContainer(t,e,r):o.render(e,r)})}return wr.getPublicRootInstance(o._internalRoot)}function Er(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return yr(e)||h("200"),function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:$t,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)}Rt=br.batchedUpdates,kt=br.interactiveUpdates,zt=br.flushInteractiveUpdates;var xr={createPortal:Er,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(e)return wr.findHostInstance(e);"function"==typeof t.render?h("188"):h("213",Object.keys(t))},hydrate:function(t,e,n){return Mr(null,t,e,!0,n)},render:function(t,e,n){return Mr(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,i){return(null==t||void 0===t._reactInternalFiber)&&h("38"),Mr(t,e,n,!1,i)},unmountComponentAtNode:function(t){return yr(t)||h("40"),!!t._reactRootContainer&&(wr.unbatchedUpdates(function(){Mr(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Er.apply(void 0,arguments)},unstable_batchedUpdates:wr.batchedUpdates,unstable_deferredUpdates:wr.deferredUpdates,flushSync:wr.flushSync,unstable_flushControlled:wr.flushControlled,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:z,EventPluginRegistry:E,EventPropagators:et,ReactControlledComponent:Pt,ReactDOMComponentTree:V,ReactDOMEventListener:Mn},unstable_createRoot:function(t,e){return new vr(t,!0,null!=e&&!0===e.hydrate)}};wr.injectIntoDevTools({findFiberByHostInstance:H,bundleType:0,version:"16.3.1",rendererPackageName:"react-dom"});var Tr=Object.freeze({default:xr}),Cr=Tr&&xr||Tr;t.exports=Cr.default?Cr.default:Cr},function(t,e,n){"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){}}(),t.exports=n(229)},function(t,e,n){"use strict";var i=n(80),r=n(79),o=n(53),a="function"==typeof Symbol&&Symbol.for,s=a?Symbol.for("react.element"):60103,c=a?Symbol.for("react.portal"):60106,l=a?Symbol.for("react.fragment"):60107,u=a?Symbol.for("react.strict_mode"):60108,h=a?Symbol.for("react.provider"):60109,d=a?Symbol.for("react.context"):60110,p=a?Symbol.for("react.async_mode"):60111,f=a?Symbol.for("react.forward_ref"):60112,m="function"==typeof Symbol&&Symbol.iterator;function g(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,i=0;i<e;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);throw(e=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")).name="Invariant Violation",e.framesToPop=1,e}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function y(t,e,n){this.props=t,this.context=e,this.refs=r,this.updater=n||v}function A(){}function w(t,e,n){this.props=t,this.context=e,this.refs=r,this.updater=n||v}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&g("85"),this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},A.prototype=y.prototype;var b=w.prototype=new A;b.constructor=w,i(b,y.prototype),b.isPureReactComponent=!0;var M={current:null},E=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function T(t,e,n){var i=void 0,r={},o=null,a=null;if(null!=e)for(i in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)E.call(e,i)&&!x.hasOwnProperty(i)&&(r[i]=e[i]);var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in c=t.defaultProps)void 0===r[i]&&(r[i]=c[i]);return{$$typeof:s,type:t,key:o,ref:a,props:r,_owner:M.current}}function C(t){return"object"==typeof t&&null!==t&&t.$$typeof===s}var S=/\/+/g,D=[];function _(t,e,n,i){if(D.length){var r=D.pop();return r.result=t,r.keyPrefix=e,r.func=n,r.context=i,r.count=0,r}return{result:t,keyPrefix:e,func:n,context:i,count:0}}function L(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>D.length&&D.push(t)}function N(t,e,n,i){var r=typeof t;"undefined"!==r&&"boolean"!==r||(t=null);var o=!1;if(null===t)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case s:case c:o=!0}}if(o)return n(i,t,""===e?"."+I(t,0):e),1;if(o=0,e=""===e?".":e+":",Array.isArray(t))for(var a=0;a<t.length;a++){var l=e+I(r=t[a],a);o+=N(r,l,n,i)}else if("function"==typeof(l=null===t||void 0===t?null:"function"==typeof(l=m&&t[m]||t["@@iterator"])?l:null))for(t=l.call(t),a=0;!(r=t.next()).done;)o+=N(r=r.value,l=e+I(r,a++),n,i);else"object"===r&&g("31","[object Object]"==(n=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":n,"");return o}function I(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}(t.key):e.toString(36)}function O(t,e){t.func.call(t.context,e,t.count++)}function j(t,e,n){var i=t.result,r=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?P(t,i,n,o.thatReturnsArgument):null!=t&&(C(t)&&(e=r+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(S,"$&/")+"/")+n,t={$$typeof:s,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}),i.push(t))}function P(t,e,n,i,r){var o="";null!=n&&(o=(""+n).replace(S,"$&/")+"/"),e=_(e,o,i,r),null==t||N(t,"",j,e),L(e)}var R={Children:{map:function(t,e,n){if(null==t)return t;var i=[];return P(t,i,null,e,n),i},forEach:function(t,e,n){if(null==t)return t;e=_(null,null,e,n),null==t||N(t,"",O,e),L(e)},count:function(t){return null==t?0:N(t,"",o.thatReturnsNull,null)},toArray:function(t){var e=[];return P(t,e,null,o.thatReturnsArgument),e},only:function(t){return C(t)||g("143"),t}},createRef:function(){return{current:null}},Component:y,PureComponent:w,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:d,_calculateChangedBits:e,_defaultValue:t,_currentValue:t,_changedBits:0,Provider:null,Consumer:null}).Provider={$$typeof:h,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:f,render:t}},Fragment:l,StrictMode:u,unstable_AsyncMode:p,createElement:T,cloneElement:function(t,e,n){var r=void 0,o=i({},t.props),a=t.key,c=t.ref,l=t._owner;if(null!=e){void 0!==e.ref&&(c=e.ref,l=M.current),void 0!==e.key&&(a=""+e.key);var u=void 0;for(r in t.type&&t.type.defaultProps&&(u=t.type.defaultProps),e)E.call(e,r)&&!x.hasOwnProperty(r)&&(o[r]=void 0===e[r]&&void 0!==u?u[r]:e[r])}if(1==(r=arguments.length-2))o.children=n;else if(1<r){u=Array(r);for(var h=0;h<r;h++)u[h]=arguments[h+2];o.children=u}return{$$typeof:s,type:t.type,key:a,ref:c,props:o,_owner:l}},createFactory:function(t){var e=T.bind(null,t);return e.type=t,e},isValidElement:C,version:"16.3.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:M,assign:i}},k=Object.freeze({default:R}),z=k&&R||k;t.exports=z.default?z.default:z},function(t,e,n){"use strict";var i=a(n(1)),r=a(n(230));n(222);var o=a(n(219));function a(t){return t&&t.__esModule?t:{default:t}}r.default.render(i.default.createElement(o.default,null),document.getElementById("root"))},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(23))}]);